/*
    LiveRail.AdManager
    release 2.3.0
    build 201602111554
*/

!function(a,b){a.getVPAIDAd=b()}(this,function(){var requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=p.map,q=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,p.nodeIdCompat&&t.test(a[g])&&(a[g]=a[g].replace(t,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||q)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function d(b,c){return function(){return k.apply(a,s.call(arguments,0).concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice,t=/\.js$/;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return"undefined"!=typeof b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[],v=typeof h;if(i=i||c,"undefined"===v||"function"===v){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),k=r.f,"require"===k)u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h?h.apply(n[c],u):void 0,c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){if("string"==typeof b)return m[b]?m[b](c):g(l(b,c).f);if(!b.splice){if(p=b,p.deps&&k(p.deps,p.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},4),k},k.config=function(a){return k(a)},requirejs._defined=n,define=function(a,c,d){c.splice||(d=c,c=[]),b(n,a)||b(o,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("../../lib/almond",function(){}),define("Handshake",["require","exports"],function(){var a;return function(a){function b(){var a,b,d,e=this;if("function"==typeof window.postMessage){for(("https:"===window.location.protocol||"http:"!==window.location.protocol&&window.parent&&"https:"===window.parent.location.protocol)&&(b=!0),a=(b?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/js/handshake.html",h="",d=0;50>d;d+=1)h+=Math.random().toString(36).substr(2,5);i=document.createElement("iframe"),i.style.display="none",i.src=a,document.body.appendChild(i),i.onload=function(){i.contentWindow&&i.contentWindow.postMessage?i.contentWindow.postMessage(h,a):i&&i.parentNode===document.body&&document.body.removeChild(i)},window.addEventListener?window.addEventListener("message",function(a){var b=a.origin,d=a.data;c.apply(e,[b,d])},!1):window.attachEvent&&window.attachEvent("onmessage",function(a){a||(a=window.event);var b=a.origin,d=a.data;c.apply(e,[b,d])})}}function c(a,b){var c,e,f;if(a.match(/^https?:\/\/cdn-static(-secure)?\.liverail\.com/)&&b&&"string"==typeof b&&"lrHandshakeResponse="===b.substr(0,20)){for(c=b.substr(20),e="",f=0;f<c.length;f+=1)e+=String.fromCharCode(c.charCodeAt(f)-h.charCodeAt(f));i&&i.parentNode===document.body&&(document.body.removeChild(i),delete i),d(e.split("&"))}}function d(b){var c,d;for(a.handshakeResponse={debug:0,debugIdFilter:"",inspector:!1},c=0;c<b.length;c+=1)switch(d=b[c].split("="),d[0]){case"debug":a.handshakeResponse.debug=parseInt(d[1],10);break;case"debugIdFilter":a.handshakeResponse.debugIdFilter=decodeURIComponent(d[1]);break;case"inspector":a.handshakeResponse.inspector="true"===d[1]}k=!0,e()}function e(){var a;for(a=0;a<l.length;a+=1)l[a]();l=[]}function f(a){return"undefined"==typeof a&&(a=window),a.location.href&&"about:blank"!==a.location.href?a:a.parent}function g(a){if("undefined"==typeof a&&(a=null),"function"==typeof a&&l.push(a),k)e();else if(!j){j=!0;var c=f().location.href;c.match(/^https?:\/\/[A-Za-z0-9.\-_]+\.liverail\.com/)?d(document.cookie.split("; ")):b()}}a.handshakeResponse={};var h,i,j,k,l=[];a.check=g}(a||(a={})),a}),!function(){var a=function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,e=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a},f=function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate());b.setDate(b.getDate()-(b.getDay()+6)%7+3);var c=new Date(b.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);var d=b.getTimezoneOffset()-c.getTimezoneOffset();b.setHours(b.getHours()-d);var e=(b-c)/6048e5;return 1+Math.floor(e)},g=function(a){var b=a.getDay();return 0===b&&(b=7),b};return function(h,i,j,k){var l=a;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(h)||/\d/.test(h)||(i=h,h=void 0),h=h||new Date,h instanceof Date||(h=new Date(h)),isNaN(h))throw TypeError("Invalid date");i=String(l.masks[i]||i||l.masks["default"]);var m=i.slice(0,4);("UTC:"==m||"GMT:"==m)&&(i=i.slice(4),j=!0,"GMT:"==m&&(k=!0));var n=j?"getUTC":"get",o=h[n+"Date"](),p=h[n+"Day"](),q=h[n+"Month"](),r=h[n+"FullYear"](),s=h[n+"Hours"](),t=h[n+"Minutes"](),u=h[n+"Seconds"](),v=h[n+"Milliseconds"](),w=j?0:h.getTimezoneOffset(),x=f(h),y=g(h),z={d:o,dd:e(o),ddd:l.i18n.dayNames[p],dddd:l.i18n.dayNames[p+7],m:q+1,mm:e(q+1),mmm:l.i18n.monthNames[q],mmmm:l.i18n.monthNames[q+12],yy:String(r).slice(2),yyyy:r,h:s%12||12,hh:e(s%12||12),H:s,HH:e(s),M:t,MM:e(t),s:u,ss:e(u),l:e(v,3),L:e(Math.round(v/10)),t:12>s?"a":"p",tt:12>s?"am":"pm",T:12>s?"A":"P",TT:12>s?"AM":"PM",Z:k?"GMT":j?"UTC":(String(h).match(c)||[""]).pop().replace(d,""),o:(w>0?"-":"+")+e(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),S:["th","st","nd","rd"][o%10>3?0:(o%100-o%10!=10)*o%10],W:x,N:y};return i.replace(b,function(a){return a in z?z[a]:a.slice(1,a.length-1)})}}();a.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},"undefined"!=typeof exports?module.exports=a:"undefined"!=typeof define&&define("DateFormat",[],function(){return a})}(),define("MessageData",["require","exports"],function(){var a=function(){function a(a,b,c,d){this.timestamp=new Date,this.priority=a,this.method=b,this.contextName=c,this.args=d}return a}();return a}),define("Logger",["require","exports","Handshake","DateFormat","MessageData"],function(a,b,c,d,e){var f=function(){function a(a){this.contextName="",this.contextName=a||""}return a.getDebugLevel=function(){return null!==a.currentDebugLevelOverride?a.currentDebugLevelOverride:c.handshakeResponse.debug},a.setDebugLevelOverride=function(b){a.currentDebugLevelOverride=Math.max(0,Math.min(3,b))},a.clearDebugLevelOverride=function(){a.currentDebugLevelOverride=null},a.getDebugIdFilter=function(){return c.handshakeResponse.debugIdFilter},a.dormant=function(){return"object"!=typeof console?!0:Function&&Function.prototype&&Function.prototype.bind?!1:!0},a.handleMessage=function(b){return a.dormant()||0===a.getDebugLevel()?void 0:void 0===a.getDebugLevel()?(a.messageQueue.push(b),void(a.handshakeInitiated||(a.handshakeInitiated=!0,c.check(a.flushMessageQueue)))):void a.outputMessage(b)},a.flushMessageQueue=function(){for(a.getDebugLevel()>0&&a.getDebugIdFilter()&&console.warn('Debug ID Filter set to "'+a.getDebugIdFilter()+'"');a.messageQueue.length>0;)a.outputMessage(a.messageQueue.shift())},a.outputMessage=function(b){if(!(b.priority>a.getDebugLevel())&&b.contextName.match(new RegExp(a.getDebugIdFilter()))){var c="LIVERAIL ["+d(b.timestamp,"HH:MM:ss.l")+"]";b.contextName&&(c+="["+b.contextName+"]");var e=[c].concat(b.args);Function.prototype.bind.call(b.method,console).apply(this,e)}},a.prototype.log=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.dormant()||a.handleMessage(new e(1,console.log,this.contextName,b))},a.prototype.info=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.dormant()||a.handleMessage(new e(1,console.info,this.contextName,b))},a.prototype.warn=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.dormant()||a.handleMessage(new e(1,console.warn,this.contextName,b))},a.prototype.error=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.dormant()||a.handleMessage(new e(1,console.error,this.contextName,b))},a.prototype.debug=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.dormant()||a.handleMessage(new e(2,console.log,this.contextName,b))},a.prototype.verbose=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.dormant()||a.handleMessage(new e(3,console.log,this.contextName,b))},a.currentDebugLevelOverride=null,a.messageQueue=[],a}();return f}),define("Utils",["require","exports"],function(a,b){var c=function(){function a(){}return a.returnString=function(a,b){var c=b||"",d=""+a;return"undefined"!==d&&"null"!==d&&"NaN"!==d&&(c=d),c},a.returnFloat=function(a,b){var c=void 0!==b?b:NaN,d=parseFloat(a);return isNaN(d)||(c=d),c},a.returnInt=function(a,b){var c=void 0!==b?b:NaN,d=parseInt(a,10);return isNaN(d)||(c=d),c},a.returnUnsignedInt=function(a,b){return Math.max(this.returnInt(a,b),0)},a.returnBoolean=function(a,b){var c=b||!1;return"boolean"==typeof a&&(c=a),null===a&&(c=!1),void 0!==a&&"string"!=typeof a&&(a=a.toString().toLowerCase()),("true"===a||"1"===a||"yes"===a)&&(c=!0),("false"===a||"0"===a||"no"===a)&&(c=!1),c},a.serialize=function(a){var b,c,d=[];for(b in a)if(a.hasOwnProperty(b))if(Array.isArray(a[b]))for(c=0;c<a[b].length;c+=1)d.push(encodeURIComponent(b)+"[]="+encodeURIComponent(a[b][c]));else d.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return d.join("&")},a.retrieveCallingURL=function(a){for(var b="",c=document.getElementsByTagName("script"),d=0;d<c.length;d+=1)if(-1!==c[d].src.indexOf(a)){b=c[d].src;break}return b},a.parseQueryString=function(a){var b,c,d={},e=a;e.indexOf("?")>0&&(e=e.slice(e.indexOf("?")+1)),b=e.split("&");for(var f=0;f<b.length;f+=1)if(b[f].length>0&&(c=b[f].split("="),c[0]!==a&&c[0].length>0))if(1===c.length)d[c[0]]=null;else if(2===c.length)d[c[0]]=decodeURIComponent(c[1]);else{d[c[0]]="";for(var g=1;g<c.length;g+=1)d[c[0]]+=decodeURIComponent(c[g]),g<c.length-1&&(d[c[0]]+="=")}return d},a.detectFlash=function(){var a,b,c=!1;try{if(window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0){if(window.navigator.mimeTypes){var d=window.navigator.mimeTypes;a=d["application/x-shockwave-flash"],a&&a.enabledPlugin&&a.enabledPlugin.description&&(c=!0)}}else if(void 0!==ActiveXObject){try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){b={activeXError:!0}}b.activeXError||(c=!0)}}catch(f){}return c},a.detectHTML5=function(){return!!document.createElement("video").canPlayType},a.stringifyParameterObject=function(a){var b,c=0,d="";for(b in a)a.hasOwnProperty(b)&&(c>0&&(d+="&"),d+=encodeURIComponent(b)+"="+encodeURIComponent(a[b]),c+=1);return d},a.base64encode=function(a){if(btoa)return btoa(a);var b,c,d,e,f,g,h;for(b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=a.length,d=0,c="";e>d;){if(f=255&a.charCodeAt(d++),d===e){c+=b.charAt(f>>2),c+=b.charAt((3&f)<<4),c+="==";break}if(g=a.charCodeAt(d++),d===e){c+=b.charAt(f>>2),c+=b.charAt((3&f)<<4|(240&g)>>4),c+=b.charAt((15&g)<<2),c+="=";break}h=a.charCodeAt(d++),c+=b.charAt(f>>2),c+=b.charAt((3&f)<<4|(240&g)>>4),c+=b.charAt((15&g)<<2|(192&h)>>6),c+=b.charAt(63&h)}return c},a.detectDevice=function(a){var b=0;try{var c=navigator.userAgent.toLowerCase();switch(a){case"android":c.indexOf("android")>-1&&(b=parseFloat(c.match(/android ([\.0-9]+)/)[1]));break;case"msie":c.indexOf("msie")>-1&&(b=parseFloat(c.match(/msie ([\.0-9]+)/)[1]));break;case"ios":c.match(/(iphone|ipod|ipad)/)&&(b=parseFloat(c.match(/os ([0-9]+(_[0-9]+)?)/)[1].replace("_",".")));break;case"phone":c.match(/(iphone|ipod)/)&&(b=parseFloat(c.match(/os ([0-9]+(_[0-9]+)?)/)[1].replace("_",".")))}}catch(d){}return b},a.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},a.genUniqueId=function(){var a,b,c=window.performance,d=["now","webkitNow","msNow","mozNow"];if(c)for(var e=0;e<d.length;e+=1)if(c[d[e]]){b=d[e];break}return b&&(a=function(){return c[b]()}),(a=a||Date.now||function(){return(new Date).getTime()})()},a.checkWindowSanity=function(){return window&&window.parent&&!!Object},a.addElement=function(a){var b,c,d,e,f;if(c=a.target,e=a.before,void 0===c&&(c=document.body),"string"==typeof c&&(c=document.getElementById(a.target)),"string"==typeof e&&(e=document.getElementById(a.before)),"object"==typeof c){if(d="div","string"==typeof a.type&&(d=a.type),b=document.createElement(d),"string"==typeof a.text&&(b.innerText=a.text),"string"==typeof a.html&&(b.innerHTML=a.html),"object"==typeof a.attributes)for(f in a.attributes)a.attributes.hasOwnProperty(f)&&b.setAttribute(f,a.attributes[f]);if("object"==typeof a.events)for(f in a.events)a.events.hasOwnProperty(f)&&b.addEventListener(f,a.events[f]);if("function"==typeof a.onload&&(b.onload=a.onload),"string"==typeof a.className&&(b.className=a.className),"object"==typeof a.styles)for(f in a.styles)a.styles.hasOwnProperty(f)&&b.style.setProperty&&b.style.setProperty(f,a.styles[f],"important");return"object"==typeof e?c.insertBefore(b,e):c.appendChild(b),b}return null},a.videoElementIsFullscreen=function(a){var b=a;if(b.fullscreenEnabled||b.fullScreen||b.webkitIsFullScreen||b.mozFullScreen||b.msFullscreenEnabled){var c=b.fullscreenElement||b.webkitFullscreenElement||b.mozFullScreenElement||b.msFullscreenElement;if(c&&"video"===c.tagName.toLowerCase())return!0}return!1},a.addDocumentFullscreenEventListener=function(a,b,c){void 0===c&&(c=!1),a.addEventListener("fullscreenchange",b,c),a.addEventListener("webkitfullscreenchange",b,c),a.addEventListener("mozfullscreenchange",b,c),a.addEventListener("MSFullscreenChange",b,c)},a.removeDocumentFullscreenEventListener=function(a,b,c){void 0===c&&(c=!1),a.removeEventListener("fullscreenchange",b,c),a.removeEventListener("webkitfullscreenchange",b,c),a.removeEventListener("mozfullscreenchange",b,c),a.removeEventListener("MSFullscreenChange",b,c)},a}();return c}),define("InstanceData",["require","exports","Utils"],function(a,b,c){var d=function(){function a(){this.defaultAdLinear=!0,this.disableIframes=!1,this.debugLevel=null,this.processInstanceData()}return a.prototype.getCallingURL=function(){return this.callingURL},a.prototype.getQueryStringParameters=function(){return this.queryStringParameters},a.prototype.getDefaultAdLinear=function(){return this.defaultAdLinear},a.prototype.getDisableIframes=function(){return this.disableIframes},a.prototype.getDebugLevel=function(){return this.debugLevel},a.prototype.processInstanceData=function(){this.callingURL=c.retrieveCallingURL("LiveRail.AdManager"),this.queryStringParameters=c.parseQueryString(this.callingURL);for(var a in this.queryStringParameters)if(this.queryStringParameters.hasOwnProperty(a)){var b=this.queryStringParameters[a];switch(a.toUpperCase()){case"DISABLEIFRAMES":this.disableIframes=c.returnBoolean(b,this.disableIframes);break;case"LR_DEBUG":var d=c.returnUnsignedInt(b);isNaN(d)||(this.debugLevel=d);break;case"ADLINEAR":this.defaultAdLinear=c.returnBoolean(b,this.defaultAdLinear)}}},a}();return d}),define("VPAIDEvents",["require","exports"],function(a,b){var c=function(){function a(){}return a.AdLoaded="AdLoaded",a.AdStarted="AdStarted",a.AdStopped="AdStopped",a.AdSkipped="AdSkipped",a.AdSkippableStateChange="AdSkippableStateChange",a.AdSizeChange="AdSizeChange",a.AdLinearChange="AdLinearChange",a.AdDurationChange="AdDurationChange",a.AdExpandedChange="AdExpandedChange",a.AdVolumeChange="AdVolumeChange",a.AdImpression="AdImpression",a.AdVideoStart="AdVideoStart",a.AdVideoFirstQuartile="AdVideoFirstQuartile",a.AdVideoMidpoint="AdVideoMidpoint",a.AdVideoThirdQuartile="AdVideoThirdQuartile",a.AdVideoComplete="AdVideoComplete",a.AdClickThru="AdClickThru",a.AdInteraction="AdInteraction",a.AdUserAcceptInvitation="AdUserAcceptInvitation",a.AdUserMinimize="AdUserMinimize",a.AdUserClose="AdUserClose",a.AdPaused="AdPaused",a.AdPlaying="AdPlaying",a.AdLog="AdLog",a.AdError="AdError",a}();return c});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("AdManagerEvents",["require","exports","VPAIDEvents"],function(a,b,c){var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.AdProgress="AdProgress",b.LogEvent="LogEvent",b}(c);return d}),define("EventSubscription",["require","exports"],function(){var a=function(){function a(a,b){this.fn=a,this.listenerScope=b}return a}();return a}),define("EventManager",["require","exports","EventSubscription"],function(a,b,c){var d=function(){function a(a){var b=this;this.eventHandlerStore={},this.handlerDictionary={},this.eventDictionary={},this.onEventListenerObjectPropertyChange=function(a){b.validateEvent(a.propertyName)&&b.handlerDictionary.hasOwnProperty(a.propertyName)&&b.handlerDictionary[a.propertyName].apply(b.listenerScope,b.args)},this.validEvents=a,this.eventListenerObject=document.createElement("div"),this.eventListenerObject.addEventListener||(this.eventListenerObject.style.display="none",this.eventListenerObject.attachEvent("onpropertychange",this.onEventListenerObjectPropertyChange),document.body.appendChild(this.eventListenerObject))}return a.prototype.subscribe=function(b,d,e){!this.validateEvent(d)||"function"!=typeof b||"object"!=typeof e&&void 0!==e||(this.eventDictionary.hasOwnProperty(d)||(this.eventDictionary[d]=this.createCustomEvent(d)),this.eventHandlerStore.hasOwnProperty(d)||(this.eventHandlerStore[d]=[]),-1===a.findSubscriptionIndex(b,this.eventHandlerStore[d])&&this.eventHandlerStore[d].push(new c(b,e)))},a.prototype.unsubscribe=function(b,c){if(this.validateEvent(c)&&this.eventHandlerStore.hasOwnProperty(c)){var d=a.findSubscriptionIndex(b,this.eventHandlerStore[c]);d>=0&&this.eventHandlerStore[c].splice(d,1)}},a.prototype.dispatch=function(a,b){if("undefined"==typeof b&&(b=[]),this.validateEvent(a)&&this.eventHandlerStore.hasOwnProperty(a))for(var c=0;c<this.eventHandlerStore[a].length;c++)this.eventHandlerStore[a][c],this.dispatchSubscription(a,this.eventHandlerStore[a][c],b)},a.prototype.createCustomEvent=function(a){var b=this;if(this.eventListenerObject.addEventListener){this.eventListenerObject.addEventListener(a,function(){b.handlerDictionary[a].apply(b.listenerScope,b.args)},!1);var c=document.createEvent("UIEvents");c.initEvent(a,!1,!1)}else this.eventListenerObject.attachEvent&&(this.eventListenerObject[a]=0);return c},a.prototype.validateEvent=function(a){return"string"==typeof a&&(!this.validEvents||this.validEvents.hasOwnProperty(a))},a.findSubscriptionIndex=function(a,b){for(var c=-1,d=0;d<b.length;d+=1)if(b[d].fn===a){c=d;break}return c},a.prototype.dispatchSubscription=function(a,b,c){this.handlerDictionary[a]=b.fn,this.listenerScope=b.listenerScope||{},this.args=c,this.eventListenerObject.addEventListener?this.eventListenerObject.dispatchEvent(this.eventDictionary[a]):this.eventListenerObject.attachEvent&&(this.eventListenerObject[a]+=1)},a}();return d}),define("Adapter",["require","exports","AdManagerEvents","EventManager","Logger"],function(a,b,c,d,e){var f=function(){function a(a,b){this._adapterConfiguration=null,this._adVolume=1,this._eventManager=new d(c),this._logger=new e(a),this.destroy(),b&&b(this)}return a.prototype.getAdLinear=function(){return!1},a.prototype.getAdWidth=function(){return 0},a.prototype.getAdHeight=function(){return 0},a.prototype.getAdExpanded=function(){return!1},a.prototype.getAdSkippableState=function(){return!1},a.prototype.getAdSkippableRemainingTime=function(){return-2},a.prototype.getAdRemainingTime=function(){return-2},a.prototype.getAdDuration=function(){return-2},a.prototype.getAdVolume=function(){return this._adVolume},a.prototype.setAdVolume=function(a){var b=a!==this._adVolume;this._adVolume=a,b&&this._onAdVolumeChange()},a.prototype.getAdCompanions=function(){return""},a.prototype.getAdIcons=function(){return!1},a.prototype.handshakeVersion=function(a){return a},a.prototype.initAd=function(a,b,c,d,e,f){this._adapterConfiguration=f.adapterConfiguration},a.prototype.resizeAd=function(a,b,c){},a.prototype.startAd=function(){},a.prototype.stopAd=function(){},a.prototype.pauseAd=function(){},a.prototype.resumeAd=function(){},a.prototype.expandAd=function(){},a.prototype.collapseAd=function(){},a.prototype.skipAd=function(){},a.prototype.subscribe=function(a,b,c){this._eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this._eventManager.unsubscribe(a,b)},a.prototype.destroy=function(){},a.prototype.isPaused=function(){return!1},a.prototype.getAdapterConfiguration=function(){return this._adapterConfiguration},a.prototype.supports=function(a){return!1},a.prototype._onAdLoaded=function(){this._onEvent(c.AdLoaded)},a.prototype._onAdStarted=function(){this._onEvent(c.AdStarted)},a.prototype._onAdStopped=function(){this.destroy(),this._onEvent(c.AdStopped)},a.prototype._onAdSkipped=function(){this._onEvent(c.AdSkipped)},a.prototype._onAdSkippableStateChange=function(){this._onEvent(c.AdSkippableStateChange)},a.prototype._onAdSizeChange=function(){this._onEvent(c.AdSizeChange)},a.prototype._onAdLinearChange=function(){this._onEvent(c.AdLinearChange)},a.prototype._onAdDurationChange=function(){this._onEvent(c.AdDurationChange)},a.prototype._onAdExpandedChange=function(){this._onEvent(c.AdExpandedChange)},a.prototype._onAdVolumeChange=function(){this._onEvent(c.AdVolumeChange)},a.prototype._onAdImpression=function(){this._onEvent(c.AdImpression)},a.prototype._onAdVideoStart=function(){this._onEvent(c.AdVideoStart)},a.prototype._onAdVideoFirstQuartile=function(){this._onEvent(c.AdVideoFirstQuartile)},a.prototype._onAdVideoMidpoint=function(){this._onEvent(c.AdVideoMidpoint)},a.prototype._onAdVideoThirdQuartile=function(){this._onEvent(c.AdVideoThirdQuartile)},a.prototype._onAdVideoComplete=function(){this._onEvent(c.AdVideoComplete)},a.prototype._onAdClickThru=function(a,b,d){this._onEvent(c.AdClickThru,[a,b,d])},a.prototype._onAdInteraction=function(){this._onEvent(c.AdInteraction)},a.prototype._onAdUserAcceptInvitation=function(){this._onEvent(c.AdUserAcceptInvitation)},a.prototype._onAdUserMinimize=function(){this._onEvent(c.AdUserMinimize)},a.prototype._onAdUserClose=function(){this._onEvent(c.AdUserClose)},a.prototype._onAdPaused=function(){this._onEvent(c.AdPaused)},a.prototype._onAdPlaying=function(){this._onEvent(c.AdPlaying)},a.prototype._onAdLog=function(a){this._onEvent(c.AdLog,[a])},a.prototype._onAdError=function(a){this.destroy(),this._onEvent(c.AdError,[a])},a.prototype._onEvent=function(a,b){void 0===b&&(b=[]),this._eventManager.dispatch(a,b)},a}();return f}),define("Tracker",["require","exports"],function(a,b){var c=function(){function a(a,b){this.urls=[],this.type=a;var c=parseFloat(b);isNaN(c)||(this.value=c)}return a.formTrackerKey=function(a,b){return a+("number"==typeof b?b.toString():"")},a.prototype.getType=function(){return this.type},a.prototype.getValue=function(){return this.value},a.prototype.addUrl=function(a){a&&this.urls.push(a)},a.prototype.getUrls=function(){return this.urls},a}();return c}),define("AdCandidate",["require","exports","Tracker"],function(a,b,c){var d=function(){function a(){this.adChoicesUrl="",this.clickThruUrl="",this.adExtensions=[],this.companionAds=[],this.impressionRegistered=!1,this.lastProgressTime=0,this.lastProgressBoundaryTime=0,this.linearCreative=null,this.loadTime=0,this.maxCreativeDuration=0,this.nonLinearCreative=null,this.startTime=0,this.stopTime=0,this.thirdPartyData={},this.trackers={}}return a.prototype.hasValidClickthruUrl=function(){return this.clickThruUrl.length>0},a.prototype.hasValidAdChoicesUrl=function(){return this.adChoicesUrl.length>0},a.prototype.getLinearCreative=function(){return this.linearCreative},a.prototype.setLinearCreative=function(a){this.linearCreative=a},a.prototype.getNonLinearCreative=function(){return this.nonLinearCreative},a.prototype.setNonLinearCreative=function(a){this.nonLinearCreative=a},a.prototype.getThirdPartyData=function(a){return this.thirdPartyData[a]},a.prototype.setThirdPartyData=function(a,b){this.thirdPartyData[a]=b},a.prototype.addTracker=function(a){if(null!==a){var b=c.formTrackerKey(a.getType(),a.getValue());this.trackers[b]||(this.trackers[b]=[]),this.trackers[b].push(a)}},a.prototype.getTrackers=function(a,b){var d=c.formTrackerKey(a,b);return this.trackers[d]||[]},a.prototype.addCompanionAd=function(a){this.companionAds.push(a)},a.prototype.getCompanionAds=function(){return this.companionAds},a.prototype.addAdExtension=function(a){this.adExtensions.push(a)},a.prototype.getAdExtensions=function(){return this.adExtensions},a.prototype.registerLoad=function(){0===this.loadTime&&(this.loadTime=Date.now())},a.prototype.getLoadClock=function(){return this.loadTime>0?Date.now()-this.loadTime:0},a.prototype.registerImpression=function(){0===this.startTime&&(this.startTime=Date.now()),this.impressionRegistered=!0},a.prototype.hadImpression=function(){return this.impressionRegistered},a.prototype.registerComplete=function(){this.hadImpression()&&0===this.stopTime&&(this.stopTime=Date.now())},a.prototype.updateCreativeDuration=function(a){a>this.maxCreativeDuration&&(this.maxCreativeDuration=a)},a.prototype.getDuration=function(){var a=0;return this.hadImpression()&&(a=this.maxCreativeDuration?this.maxCreativeDuration:this.linearCreative?this.linearCreative.getDuration():this.getElapsedRealtime()),Math.max(0,a)},a.prototype.getAvgVolume=function(){return this.progressCount>0?Math.round(this.sumVolume/this.progressCount*100)/100:0},a.prototype.getMinVolume=function(){return Math.round(100*this.minVolume)/100},a.prototype.getProgressCount=function(){return this.progressCount},a.prototype.getLastProgressTime=function(){return this.lastProgressTime},a.prototype.getLastProgressBoundaryTime=function(){return this.lastProgressBoundaryTime},a.prototype.registerProgress=function(a,b){this.progressCount++,this.lastProgressTime=a,b>=0&&(this.sumVolume+=b,(this.minVolume<0||b<this.minVolume)&&(this.minVolume=b))},a.prototype.setProgressBoundary=function(a,b){this.progressCount=0,this.lastProgressBoundaryTime=a,this.minVolume=b,this.sumVolume=0},a.prototype.getElapsedRealtime=function(){return Math.max(0,this.stopTime-this.startTime)},a.TYPE_LINEAR="in",a.TYPE_OVERLAY="ov",a}();return d}),define("RendererEvents",["require","exports"],function(a,b){var c=function(){function a(){}return a.Loaded="Loaded",a.Impression="Impression",a.Error="Error",a}();return c});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("LinearRendererEvents",["require","exports","RendererEvents"],function(a,b,c){var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.Progress="Progress",b.Ended="Ended",b.Paused="Paused",b.Resumed="Resumed",b.VolumeChange="VolumeChange",b}(c);return d}),define("LogEvent",["require","exports"],function(a,b){var c=function(){function a(a,b,c){void 0===c&&(c={}),this.id=a,this.message=b,this.detail=c||{}}return a.eventWithType=function(b,c,d){return void 0===c&&(c={}),void 0===d&&(d=null),new a(b.id,d||b.message,c)},a.prototype.description=function(){var a=this,b="";return Object.keys(this.detail).forEach(function(c){b+=0===b.length?" ":" ,",b+=c+"="+a.detail[c]}),"("+this.id+") "+this.message+b},a}();return c}),define("LogEventType",["require","exports"],function(a,b){var c=function(){function a(){}return a.CreativeGeneralError={id:400,message:"General creative error"},a.CreativeFileNotFound={id:401,message:"Creative file not found"},a.CreativeFileTimeout={id:402,message:"Creative timed out"},a.CreativeFileUnsupported={id:405,message:"Problem displaying creative file"},a.CreativeComponentError={id:901,message:"Ad component emitted error event"},a.NoFill={id:1001,message:"No fill"},a.InvalidPlacement={id:1003,message:"Ad was loaded with no valid placement defined"},a.NoAvailableEnvironment={id:1020,message:"No available environment"},a.StartAdBeforeInitAd={id:1021,message:"initAd must be called before startAd"},a.InvalidSlotElement={id:1022,message:"environmentVars.slot is not a valid DOM element"},a.InvalidVideoElement={id:1023,message:"No valid video element"},a.UnsupportedDevice={id:1024,message:"Unsupported device"},a.UndefinedEnvironmentVars={id:1025,message:"environmentVars is not defined"},a.AdSourcesRequestFailed={id:1101,message:"LiveRail request for ad-sources failed"},a.AdSourcesRequestTimeout={id:1102,message:"LiveRail request for ad-sources timed out"},a.AdsRequestFailed={id:1111,message:"LiveRail request for ads failed"},a.AdsRequestTimeout={id:1112,message:"LiveRail request for ads timed out"},a.XMLParseFailure={id:1201,message:"Failed to parse LiveRail XML response"},a.XMLUnknownResponse={id:1202,message:"Unknown LiveRail XML response type"},a.XMLErrorMessage={id:1203,message:"LiveRail XML Error message"},a.XMLDuplicateSources={id:1204,message:"Second LiveRail XML contains sources"},a.NoAdSources={id:1301,message:"LiveRail returned no ad sources"},a.NoAdSlots={id:1302,message:"No ad-slots available"},a.AdapterMising={id:2901,message:"Adapter class not found"},a.AdImpression={id:9002,message:"Creative AdImpression"},a.AdClickThrough={id:9003,message:"Creative AdClickThrough"},a.AdLoaded={id:9004,message:"Creative AdLoaded"},a.AdChoicesClick={id:9007,message:"Creative AdChoices clicked"},a.AdPodSlotLoaded={id:9008,message:"Ad pod slot loaded"},a.AdProgressBoundary={id:9009,message:"Ad progress boundary"},a.AdClickThroughFailed={id:9910,message:"Creative AdClickThrough failed"},a.AdChoicesClickFailed={id:9912,message:"Creative AdChoices click failed"},a.TrackingPixelLoadError={id:9913,message:"Tracking pixel load error"},a.MRCViewable={id:9933,message:"Ad placement met MRC viewable requirements"},a.FBViewable={id:9934,message:"Ad placement met FB viewable requirements"},a.ViewThrough={id:9935,message:"Ad placement met view through requirements"},a}();return c}),define("GlobalConfig",["require","exports"],function(a,b){var c=function(){function a(){}return a.MEASUREMENT_FREQUENCY=250,a}();return c}),define("Renderer",["require","exports","EventManager","RendererEvents"],function(a,b,c,d){
var e=function(){function a(a){this._adAsset=null,this._bgColor=a.getAdParameters().bgcolor,this._eventManager=new c,this._slot=a.slot,this._slotWindow=a.parentWindow}return a.prototype.destroy=function(){},a.prototype.load=function(a){this._adAsset=a},a.prototype.start=function(){},a.prototype.stop=function(){},a.prototype.getAsset=function(){return this._adAsset},a.prototype.getWidth=function(){return 0},a.prototype.getHeight=function(){return 0},a.prototype.impressionOccured=function(){return!1},a.prototype.subscribe=function(a,b,c){this._eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this._eventManager.unsubscribe(a,b)},a.prototype.dispatchRendererLoaded=function(){this._eventManager.dispatch(d.Loaded)},a.prototype.dispatchRendererImpression=function(){this._eventManager.dispatch(d.Impression)},a.prototype.dispatchRendererError=function(a){this._eventManager.dispatch(d.Error,[a])},a}();return e});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("LinearRenderer",["require","exports","LinearRendererEvents","Renderer"],function(a,b,c,d){var e=function(a){function b(b){a.call(this,b),this._videoSlot=b.videoSlot}return __extends(b,a),b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.getCurrentTime=function(){return-2},b.prototype.getDuration=function(){return-2},b.prototype.getVolume=function(){return-2},b.prototype.setVolume=function(a){},b.prototype.isPaused=function(){return!1},b.prototype.isSeeking=function(){return!1},b.prototype.dispatchRendererProgress=function(){this._eventManager.dispatch(c.Progress)},b.prototype.dispatchRendererPaused=function(){this._eventManager.dispatch(c.Paused)},b.prototype.dispatchRendererResumed=function(){this._eventManager.dispatch(c.Resumed)},b.prototype.dispatchRendererEnded=function(){this._eventManager.dispatch(c.Ended)},b.prototype.dispatchVolumeChange=function(){this._eventManager.dispatch(c.VolumeChange)},b}(d);return e});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("LRLinearFlashRenderer",["require","exports","GlobalConfig","LinearRenderer","LogEvent","Logger"],function(a,b,c,d,e,f){var g=function(a){function b(){var b=this;a.apply(this,arguments),this._impressionOccurred=!1,this._logger=new f("LRLinearFlashRenderer"),this._paused=!1,this._progressMonitorInterval=null,this._volume=1,this._onProgress=function(){b.getCurrentTime()>=0&&b.dispatchRendererProgress()}}return __extends(b,a),b.prototype.destroy=function(){this._stopProgressMonitor(),this._unloadFlashVPAID()},b.prototype.load=function(b){a.prototype.load.call(this,b),this._logger.log("load(",b,")"),this._loadFlashPlayer()},b.prototype.start=function(){this._logger.log("start()"),this._flashPlayer&&(this._flashPlayer.setVolume(this._volume),this._flashPlayer.start())},b.prototype.stop=function(){this._logger.log("stop()"),this._flashPlayer&&this._flashPlayer.stop()},b.prototype.pause=function(){this._logger.log("pause()"),this._flashPlayer&&this._flashPlayer.pause()},b.prototype.resume=function(){this._logger.log("resume()"),this._flashPlayer&&this._flashPlayer.resume()},b.prototype.getWidth=function(){return this._flashPlayer?this._flashPlayer.offsetWidth:0},b.prototype.getHeight=function(){return this._flashPlayer?this._flashPlayer.offsetHeight:0},b.prototype.getCurrentTime=function(){return this._flashPlayer?this._flashPlayer.getCurrentTime():-2},b.prototype.getDuration=function(){return this._flashPlayer?this._flashPlayer.getDuration():-2},b.prototype.getVolume=function(){return this._volume},b.prototype.setVolume=function(a){this._volume=a,this._flashPlayer&&this._flashPlayer.setVolume(this._volume),this.dispatchVolumeChange()},b.prototype.isPaused=function(){return this._paused},b.prototype.isSeeking=function(){return!1},b.prototype.impressionOccured=function(){return this._impressionOccurred},b.prototype.dispatchRendererEnded=function(){a.prototype.dispatchRendererEnded.call(this)},b.prototype.dispatchRendererError=function(b){a.prototype.dispatchRendererError.call(this,b)},b.prototype._loadFlashPlayer=function(){var a,c,d,f,g=this,h="",i={onReady:function(){return g._logger.log("Flash player dispatched Ready event"),g._logger.log("Calling load on Flash player with url:",g._adAsset.getUrl()),g._flashPlayer.load(g._adAsset.getUrl()),!0},onLoaded:function(){return g._logger.log("Flash player dispatched Loaded event"),g.dispatchRendererLoaded(),!0},onImpression:function(){return g._logger.log("Flash player dispatched Impression event"),g._impressionOccurred=!0,g._startProgressMonitor(),g.dispatchRendererImpression(),!0},onEnded:function(){return g._logger.log("Flash player dispatched Ended event"),g.destroy(),g.dispatchRendererEnded(),!0},onError:function(a,b){return g._logger.error("Flash player dispatched Error event, id="+a,"message="+b),g.destroy(),g.dispatchRendererError(new e(a,b)),!0},onPaused:function(){return g._logger.log("Flash player dispatched Paused event"),g._paused===!1&&(g._paused=!0,g.dispatchRendererPaused()),!0},onResumed:function(){return g._logger.log("Flash player dispatched Resumed event"),g._paused===!0&&(g._paused=!1,g.dispatchRendererResumed()),!0}};this._slotWindow.LiveRail||(this._slotWindow.LiveRail={}),this._slotWindow.LiveRail.FlashPlayerListeners||(this._slotWindow.LiveRail.FlashPlayerListeners={}),b._instanceCount+=1,c="LiveRail.FlashPlayerListeners.FlashBridge_"+b._instanceCount,d=("https:"===this._slotWindow.location.protocol?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/swf/v4/flv-renderer.swf",a="jscontext="+c,h+='<object style="display: block; width: 100%; height: 100%;"',navigator.userAgent.match(/MSIE/i)?(h+=' id="'+c+'"',h+=' name="'+c+'"',h+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">',h+='<param name="movie" value="'+d+'" />'):(h+=' data="'+d+'"',h+=' type="application/x-shockwave-flash">'),h+='<param name="quality" value="high" />',h+='<param name="allowfullscreen" value="true" />',h+='<param name="allowscriptaccess" value="always" />',h+='<param name="flashvars" value="'+a+'" />',h+='<param name="bgcolor" value="#000000" />',h+='<param name="wmode" value="opaque" />',h+="</object>",this._slotWindow.LiveRail.FlashPlayerListeners["FlashBridge_"+b._instanceCount]=i,this._flashContainer=this._slotWindow.document.createElement("div"),this._flashContainer.style.setProperty("position","absolute","important"),this._flashContainer.style.setProperty("position","absolute","important"),this._flashContainer.style.setProperty("top","0px","important"),this._flashContainer.style.setProperty("left","0px","important"),this._flashContainer.style.setProperty("width","100%","important"),this._flashContainer.style.setProperty("height","100%","important");var j=this._slot;this._slotWindow.getComputedStyle?f=this._slotWindow.getComputedStyle(this._slot,null).getPropertyValue("position"):j.currentStyle&&(f=j.currentStyle.position),this._targetSlotOriginalStylePosition=void 0,this._targetSlotOriginalPriorityPosition=void 0,"static"===f&&(this._targetSlotOriginalStylePosition=this._slot.style.getPropertyValue("position"),this._targetSlotOriginalPriorityPosition=this._slot.style.getPropertyPriority("position"),this._slot.style.setProperty("position","relative","important")),this._slot.appendChild(this._flashContainer),this._flashContainer.innerHTML=h,this._flashPlayer=this._flashContainer.childNodes[0],this._logger.verbose("Loaded JS-Flash event interface:",i)},b.prototype._startProgressMonitor=function(){this._progressMonitorInterval||(this._logger.debug("Starting progress monitor at currentTime="+this._flashPlayer.getCurrentTime()),this._progressMonitorInterval=setInterval(this._onProgress,c.MEASUREMENT_FREQUENCY),this._onProgress())},b.prototype._stopProgressMonitor=function(){if(this._progressMonitorInterval){this._logger.debug("Stopping progress monitor at currentTime="+this._flashPlayer.getCurrentTime());try{clearInterval(this._progressMonitorInterval),this._progressMonitorInterval=null}catch(a){}}},b.prototype._unloadFlashVPAID=function(){this._slot&&this._flashContainer&&(this._slot.removeChild(this._flashContainer),this._logger.log("Unloaded Flash player"),void 0!==this._targetSlotOriginalStylePosition&&(this._logger.log("Resetting slot element position to "+this._targetSlotOriginalStylePosition),this._slot.style.setProperty("position",this._targetSlotOriginalStylePosition,this._targetSlotOriginalPriorityPosition)),this._flashPlayer=null,this._flashContainer=null)},b._instanceCount=0,b}(d);return g});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("LRLinearHtmlRenderer",["require","exports","GlobalConfig","LinearRenderer","LogEvent","LogEventType","Logger","Utils"],function(a,b,c,d,e,f,g,h){var i=function(a){function b(){var b=this;a.apply(this,arguments),this._impressionOccurred=!1,this._iosVersion=h.detectDevice("ios"),this._lastProgressTime=0,this._lastRealTime=0,this._logger=new g("LRLinearHtmlRenderer"),this._volume=1,this._onProgress=function(){return b._videoSlot.src!==b._adAsset.getUrl()?void b.dispatchRendererError(e.eventWithType(f.CreativeGeneralError,{message:"Video element src changed unexpectedly"})):(b._videoSlot.controls=!1,b._videoSlotWasSeeked(b._videoSlot.currentTime)?void b._resetToLastProgressTime():(b._lastProgressTime<b._videoSlot.currentTime&&(b._lastProgressTime=b._videoSlot.currentTime),b._lastRealTime=Date.now(),!b._impressionOccurred&&b._videoSlot.currentTime>0&&(b._impressionOccurred=!0,b._videoSlot.addEventListener("ended",b._onVideoSlotEnded,!1),b.dispatchRendererImpression()),void(b._impressionOccurred&&b.dispatchRendererProgress())))},this._onVideoSlotPause=function(){!b._videoSlotPaused&&b._impressionOccurred&&b._videoSlot.currentTime<b._videoSlot.duration&&(b._videoSlotPaused=!0,b.dispatchRendererPaused())},this._onVideoSlotPlay=function(){b._videoSlotPaused&&b._impressionOccurred&&b._videoSlot.currentTime<b._videoSlot.duration&&(b._videoSlotPaused=!1,b.dispatchRendererResumed())},this._onVideoSlotCanplay=function(a){if(b._videoSlot.removeEventListener("canplay",b._onVideoSlotCanplay,!1),b._videoSlot.currentTime>=1){b._logger.log("Target element currentTime is "+b._videoSlot.currentTime+", seeking to 0");var c=function(){b._videoSlot.removeEventListener("seeked",c,!1),b.dispatchRendererLoaded()};b._videoSlot.addEventListener("seeked",c,!1),b._videoSlot.currentTime=0}else b.dispatchRendererLoaded()},this._onVideoSlotLoadstart=function(a){b._videoSlot.removeEventListener("loadstart",b._onVideoSlotLoadstart,!1),b.dispatchRendererLoaded()},this._onVideoSlotEnded=function(){if(h.checkWindowSanity()){b._logger.log("Video slot ended");for(var a=0,c=0;c<b._videoSlot.seekable.length;c+=1)b._videoSlot.seekable.end(c)>a&&(a=b._videoSlot.seekable.end(c));if(b._videoSlotWasSeeked(a))return b._resetToLastProgressTime(),void b._videoSlot.play();b.dispatchRendererEnded()}},this._onVideoSlotError=function(){if(h.checkWindowSanity()){var a=f.CreativeGeneralError,c=b._videoSlot.error;if(b._logger.error("Ad video playback error:",c),c)switch(c.code){case c.MEDIA_ERR_NETWORK:a=f.CreativeFileNotFound;break;case c.MEDIA_ERR_DECODE:a=f.CreativeFileUnsupported;break;case c.MEDIA_ERR_SRC_NOT_SUPPORTED:a=f.CreativeFileUnsupported}b.dispatchRendererError(e.eventWithType(a,{url:b._adAsset.getUrl()}))}},this._onVideoSlotVolumeChange=function(){b.dispatchVolumeChange()}}return __extends(b,a),b.prototype.destroy=function(){this._stopProgressMonitor(),this._unregisterVideoSlot(),this._videoSlot&&this._videoSlot.pause()},b.prototype.load=function(b){a.prototype.load.call(this,b),this._logger.log("load(",b,")"),this._videoSlot.pause(),this._videoSlot.volume=this._volume,this._registerVideoSlot(),this._videoSlot.src=this._adAsset.getUrl(),this._videoSlot.load()},b.prototype.start=function(){this._logger.log("start()"),this._startProgressMonitor(),this._startAdVideoPlayback()},b.prototype.stop=function(){this._logger.log("stop()"),this.dispatchRendererEnded()},b.prototype.pause=function(){this._logger.log("pause()"),this._videoSlot&&!this._videoSlot.paused&&this._videoSlot.pause()},b.prototype.resume=function(){this._logger.log("resume()"),this._videoSlot&&this._videoSlot.paused&&this._videoSlot.play()},b.prototype.getWidth=function(){return this._videoSlot?this._videoSlot.offsetWidth:0},b.prototype.getHeight=function(){return this._videoSlot?this._videoSlot.offsetHeight:0},b.prototype.getCurrentTime=function(){return this._videoSlot&&!isNaN(this._videoSlot.currentTime)?this._videoSlot.currentTime:-2},b.prototype.getDuration=function(){return this._videoSlot?this._videoSlot.duration:-2},b.prototype.getVolume=function(){return this._videoSlot?this._videoSlot.volume:this._volume},b.prototype.setVolume=function(a){this._volume=a,this._videoSlot&&(this._videoSlot.volume=this._volume)},b.prototype.isPaused=function(){return this._videoSlot?this._videoSlot.paused:!1},b.prototype.isSeeking=function(){return this._videoSlot?this._videoSlot.seeking:!1},b.prototype.impressionOccured=function(){return this._impressionOccurred},b.prototype.dispatchRendererEnded=function(){this.destroy(),a.prototype.dispatchRendererEnded.call(this)},b.prototype.dispatchRendererError=function(b){this.destroy(),a.prototype.dispatchRendererError.call(this,b)},b.prototype._registerVideoSlot=function(){this._logger.debug("Registering listeners on video slot element"),this._videoSlot.addEventListener("pause",this._onVideoSlotPause,!0),this._videoSlot.addEventListener("play",this._onVideoSlotPlay,!0),this._videoSlot.addEventListener("error",this._onVideoSlotError,!0),this._videoSlot.addEventListener("volumechange",this._onVideoSlotVolumeChange,!0),this._iosVersion?(this._logger.debug("iOS version "+this._iosVersion+" detected, using canplay event to begin playback"),this._videoSlot.addEventListener("canplay",this._onVideoSlotCanplay,!1)):this._videoSlot.addEventListener("loadstart",this._onVideoSlotLoadstart,!1)},b.prototype._resetToLastProgressTime=function(){var a=Math.max(0,this._lastProgressTime-.2);this._logger.warn("Setting currentTime to:",a),this._videoSlot.currentTime=a},b.prototype._startAdVideoPlayback=function(){this._bgColor&&this._videoSlot.style.setProperty("background-color","#000","important"),this._logger.debug("Calling _videoSlot.play()"),this._videoSlot.play()},b.prototype._startProgressMonitor=function(){this._progressMonitorInterval||(this._logger.debug("Starting progress monitor at currentTime="+this._videoSlot.currentTime),this._progressMonitorInterval=setInterval(this._onProgress,c.MEASUREMENT_FREQUENCY))},b.prototype._stopProgressMonitor=function(){if(this._progressMonitorInterval){this._logger.debug("Stopping progress monitor at currentTime="+this._videoSlot.currentTime);try{clearInterval(this._progressMonitorInterval),this._progressMonitorInterval=null}catch(a){}}},b.prototype._unregisterVideoSlot=function(){this._logger.debug("Unregistering listeners on video slot element"),this._videoSlot.removeEventListener("pause",this._onVideoSlotPause,!0),this._videoSlot.removeEventListener("play",this._onVideoSlotPlay,!0),this._videoSlot.removeEventListener("error",this._onVideoSlotError,!0),this._videoSlot.removeEventListener("ended",this._onVideoSlotEnded,!1),this._videoSlot.removeEventListener("canplay",this._onVideoSlotCanplay,!1),this._videoSlot.removeEventListener("loadstart",this._onVideoSlotLoadstart,!1),this._videoSlot.removeEventListener("volumechange",this._onVideoSlotVolumeChange,!0)},b.prototype._videoSlotWasSeeked=function(a){var b=a-this._lastProgressTime,c=(Date.now()-this._lastRealTime)/1e3,d=1;return b>c+d?(this._logger.warn("Video slot was seeked, progress="+b+"s realtime="+c+"s margin="+d+"s"),!0):!1},b}(d);return i});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("LRAdapter",["require","exports","Adapter","AdCandidate","AdManagerEvents","LinearRendererEvents","LogEvent","LogEventType","LRLinearFlashRenderer","LRLinearHtmlRenderer","Utils"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(a){function b(b){var c=this;a.call(this,"LRAdapter"),this._renderer=null,this._handleVideoElementFullscreen=function(){k.videoElementIsFullscreen(c._slotWindow.document)&&c._onAdError(g.eventWithType(h.CreativeGeneralError,{},"Video element went fullscreen during Flash operation"))},this._onAdapterEnded=function(){k.checkWindowSanity()&&(c._logger.log("Renderer ended"),c._eventManager.dispatch(e.AdProgress),3===c._quartile&&c._onAdVideoComplete(),c._onAdStopped())},this._onProgress=function(){var a;if(!window)return a="Ad unit has been removed",c._logger.error(a),void c._onAdError(g.eventWithType(h.CreativeGeneralError,{message:a}));if(window.parent&&Object){var b=c._renderer.getCurrentTime(),d=c._renderer.getDuration();if(c._lastAdDuration===d||isNaN(d)||(c._lastAdDuration=d,c._onAdDurationChange()),c._renderer.impressionOccured()){if(!c._rendererStarted){if(!(c._renderer.getDuration()>0))return void c._logger.debug("Renderer has not yet started (currentTime="+c._renderer.getCurrentTime()+" duration="+c._renderer.getDuration()+")");c._clearStreamTimeout(),c._logger.debug("Renderer has started"),c._rendererStarted=!0,c._onAdVideoStart()}if(!c._dispatchedAdSkippableStateChange&&c.getAdSkippableState()&&(c._dispatchedAdSkippableStateChange=!0,c._eventManager.dispatch(e.AdSkippableStateChange)),c._renderer.impressionOccured()&&!c._renderer.isSeeking()&&!c._renderer.isPaused()){var f=d/4;0===c._quartile&&b>=f&&(c._quartile+=1,c._onAdVideoFirstQuartile()),1===c._quartile&&b>=2*f&&(c._quartile+=1,c._onAdVideoMidpoint()),2===c._quartile&&b>=3*f&&(c._quartile+=1,c._onAdVideoThirdQuartile()),c._eventManager.dispatch(e.AdProgress)}}}},this._onStreamTimeout=function(){c._logger.error("Ad video stream timed out after "+c._adapterConfiguration.adCreativeTimeout+" seconds"),c._onAdError(g.eventWithType(h.CreativeFileTimeout,{url:c._renderer.getAsset().getUrl(),kbps:c._renderer.getAsset().getKbps(),type:c._renderer.getAsset().getMimeType(),flash:c._renderer.getAsset().requiresFlash(),timeout:c._adapterConfiguration.adCreativeTimeout}))},b(this)}return __extends(b,a),b.prototype.getAdWidth=function(){return this._renderer?this._renderer.getWidth():a.prototype.getAdWidth.call(this)},b.prototype.getAdHeight=function(){return this._renderer?this._renderer.getHeight():a.prototype.getAdHeight.call(this)},b.prototype.getAdLinear=function(){return this._adCandidate?this._adCandidate.type===d.TYPE_LINEAR:a.prototype.getAdLinear.call(this)},b.prototype.getAdVolume=function(){return this._renderer&&(this._adVolume=this._renderer.getVolume()),a.prototype.getAdVolume.call(this)},b.prototype.setAdVolume=function(b){this._renderer?this._renderer.setVolume(b):a.prototype.setAdVolume.call(this,b)},b.prototype.getAdSkippableState=function(){return 0===this.getAdSkippableRemainingTime()?!0:!1},b.prototype.getAdSkippableRemainingTime=function(){if(null!==this._linearCreative.getSkipOffset()&&this._linearCreative.getSkipOffset()>-1){var a;return a=this._linearCreative.getSkipIsPercent()?this._renderer.getDuration()*this._linearCreative.getSkipOffset()/100-this._renderer.getCurrentTime():this._linearCreative.getSkipOffset()-this._renderer.getCurrentTime(),Math.max(0,a)}return-2},b.prototype.getAdDuration=function(){return this._renderer?this._renderer.getDuration():a.prototype.getAdDuration.call(this)},b.prototype.getAdRemainingTime=function(){return this._renderer&&this._renderer.getDuration()>0?this._renderer.getCurrentTime()>0?this._renderer.getDuration()-this._renderer.getCurrentTime():this._renderer.getDuration():-2},b.prototype.initAd=function(b,c,d,e,f,k){a.prototype.initAd.call(this,b,c,d,e,f,k),this._logger.debug("initAd(",b,",",c,",",d,",",e,",",f,",",k,")");var l=null,m=null;this._adCandidate=k.adCandidate;var n=k.environmentData;return this._slotWindow=n.parentWindow,this.getAdLinear()?(this._linearCreative=this._adCandidate.getLinearCreative(),l=this._linearCreative.getAdAsset(e,this._adapterConfiguration.mimeTypePriorityList),m=l.requiresFlash()?new i(n):new j(n),this._registerRenderer(m),this._renderer.load(l),void 0):void this._onAdError(g.eventWithType(h.CreativeFileUnsupported,{type:this._adCandidate.type}))},b.prototype.startAd=function(){if(this._logger.debug("startAd()"),this._renderer instanceof i){if(this._handleVideoElementFullscreen())return;k.addDocumentFullscreenEventListener(this._slotWindow.document,this._handleVideoElementFullscreen,!1)}this._setStreamTimeout(),this._renderer.start(),this._onAdStarted()},b.prototype.stopAd=function(){this._renderer?this._renderer.stop():this._onAdStopped()},b.prototype.pauseAd=function(){this._renderer.impressionOccured()&&this._renderer.isPaused()===!1&&this._renderer.pause()},b.prototype.resumeAd=function(){this._renderer.impressionOccured()&&this._renderer.isPaused()===!0&&this._renderer.resume()},b.prototype.skipAd=function(){this.getAdSkippableState()===!0?(this._logger.log("skipAd received -- initiating ad skip"),this._onAdSkipped(),this._onAdStopped()):this._logger.warn("skipAd received -- ad not skippable at this time")},b.prototype.expandAd=function(){this._logger.log("expandAd is not supported for this creative")},b.prototype.collapseAd=function(){this._logger.log("collapseAd is not supported for this creative")},b.prototype.destroy=function(){this._clearStreamTimeout(),this._slotWindow&&k.removeDocumentFullscreenEventListener(this._slotWindow.document,this._handleVideoElementFullscreen,!1),this._unregisterRenderer(),this._adCandidate=null,this._quartile=0,this._dispatchedAdSkippableStateChange=!1,this._lastAdDuration=-2,this._lastProgressTime=0,this._lastRealTime=0,this._rendererStarted=!1},b.prototype.isPaused=function(){return this._renderer?this._renderer.isPaused():!1},b.prototype.supports=function(a){return!0},b.prototype._clearStreamTimeout=function(){this._streamTimeout&&(clearTimeout(this._streamTimeout),this._streamTimeout=null)},b.prototype._onLinearRendererEnded=function(){this._onAdapterEnded()},b.prototype._onLinearRendererPaused=function(){k.checkWindowSanity()&&a.prototype._onAdPaused.call(this)},b.prototype._onLinearRendererProgress=function(){this._onProgress()},b.prototype._onLinearRendererResumed=function(){k.checkWindowSanity()&&a.prototype._onAdPlaying.call(this)},b.prototype._onLinearRendererVolumeChange=function(){a.prototype.setAdVolume.call(this,this._renderer.getVolume())},b.prototype._registerRenderer=function(a){this._renderer=a,this._renderer&&(this._renderer.setVolume(this._adVolume),this._renderer.subscribe(this._onAdLoaded,f.Loaded,this),this._renderer.subscribe(this._onAdImpression,f.Impression,this),this._renderer.subscribe(this._onLinearRendererProgress,f.Progress,this),this._renderer.subscribe(this._onLinearRendererEnded,f.Ended,this),this._renderer.subscribe(this._onAdError,f.Error,this),this._renderer.subscribe(this._onLinearRendererPaused,f.Paused,this),this._renderer.subscribe(this._onLinearRendererResumed,f.Resumed,this),this._renderer.subscribe(this._onLinearRendererVolumeChange,f.VolumeChange,this))},b.prototype._setStreamTimeout=function(){this._logger.log("Stream timeout set to "+this._adapterConfiguration.adCreativeTimeout+" seconds"),this._streamTimeout&&this._clearStreamTimeout(),this._streamTimeout=setTimeout(this._onStreamTimeout,Math.round(1e3*this._adapterConfiguration.adCreativeTimeout))},b.prototype._unregisterRenderer=function(){this._renderer&&(this._renderer.unsubscribe(this._onAdLoaded,f.Loaded),this._renderer.unsubscribe(this._onAdImpression,f.Impression),this._renderer.unsubscribe(this._onLinearRendererProgress,f.Progress),this._renderer.unsubscribe(this._onLinearRendererEnded,f.Ended),this._renderer.unsubscribe(this._onAdError,f.Error),this._renderer.unsubscribe(this._onLinearRendererPaused,f.Paused),this._renderer.unsubscribe(this._onLinearRendererResumed,f.Resumed),this._renderer.unsubscribe(this._onLinearRendererVolumeChange,f.VolumeChange),this._renderer.destroy()),this._renderer=null},b}(c);return l}),define("MimeType",["require","exports"],function(a,b){var c=function(){function a(){}return a.Flash="application/x-shockwave-flash",a.FLV="video/x-flv",a.JavaScript="application/javascript",a.JavaScriptAlt="application/x-javascript",a.HLS="application/x-mpegURL",a.HLSAlt="application/vnd.apple.mpegURL",a.Mobile3GP="video/3gpp",a.MP4="video/mp4",a.OGG="video/ogg",a.WebM="video/webm",a}();return c}),define("FlashVPAIDBridge",["require","exports","EventManager","Logger","Utils","VPAIDEvents"],function(a,b,c,d,e,f){var g=function(){function a(a,b,e){var g=this;this.logger=new d("FlashVPAIDBridge"),this.eventManager=new c(f),this.adVolume=-1,this.flashBuild="201406161543",this.creativeUrl=a,this.slot=b.slot,this.slotWindow=b.parentWindow,this.bgcolor=b.getAdParameters().bgcolor,this.destroy(),this.loadFlashVPAID(function(a){g.flashVPAID=a,g.logger.log("Loaded Flash VPAID:",g.flashVPAID),e(g)})}return a.prototype.getAdLinear=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdLinear():!1},a.prototype.getAdWidth=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdWidth():0},a.prototype.getAdHeight=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdHeight():0},a.prototype.getAdExpanded=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdExpanded():!1},a.prototype.getAdSkippableState=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdSkippableState():!1},a.prototype.getAdSkippableRemainingTime=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdSkippableRemainingTime():-2},a.prototype.getAdRemainingTime=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdRemainingTime():-2},a.prototype.getAdDuration=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdDuration():-2},a.prototype.getAdVolume=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdVolume():this.adVolume},a.prototype.setAdVolume=function(a){this.adVolume=a,this.bridgeInterfaceExists()&&this.flashVPAID.setAdVolume(a)},a.prototype.getAdCompanions=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdCompanions():""},a.prototype.getAdIcons=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdIcons():!1},a.prototype.handshakeVersion=function(a){return a},a.prototype.initAd=function(a,b,c,d,f,g){if(this.logger.log("initAd() width:",a," height:",b," viewMode:",c,"desiredBitrate:",d,"creativeData:",f,"environmentVars:",g),this.bridgeInterfaceExists()){this.adVolume>-1&&(this.logger.debug("Setting Flash VPAID adVolume property to "+this.adVolume),this.flashVPAID.setAdVolume(this.adVolume));var h=f.AdParameters||"";this.flashVPAID.initAd(-1,-1,c,d,h,e.stringifyParameterObject(g))}},a.prototype.resizeAd=function(a,b,c){return this.bridgeInterfaceExists()?this.flashVPAID.resizeAd(a,b,c):void 0},a.prototype.startAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.startAd():void 0},a.prototype.stopAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.stopAd():void 0},a.prototype.pauseAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.pauseAd():void 0},a.prototype.resumeAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.resumeAd():void 0},a.prototype.expandAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.expandAd():void 0},a.prototype.collapseAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.collapseAd():void 0},a.prototype.skipAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.skipAd():void 0},a.prototype.subscribe=function(a,b,c){this.eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this.eventManager.unsubscribe(a,b)},a.prototype.destroy=function(){this.unloadFlashVPAID(),this.flashContainer=null,this.flashVPAID=null},a.prototype.loadFlashVPAID=function(b){function c(){window.setTimeout(function(){"function"==typeof f.getVPAID&&null!==f.getVPAID()?b(f):c()},100)}var d,e,f,g,h,i=this,j="",k={onVPAIDEvent:function(a){return i.onVPAIDEvent(a)}};this.slotWindow.LiveRail||(this.slotWindow.LiveRail={}),this.slotWindow.LiveRail.VPAIDListeners||(this.slotWindow.LiveRail.VPAIDListeners={}),a.instanceCount+=1,e="LiveRail.VPAIDListeners.FlashVPAIDBridge_"+a.instanceCount,g=("https:"===this.slotWindow.location.protocol?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/swf/ui/vpaid-player.swf",g+="?build="+this.flashBuild,d="jscontext="+e,d+="&vpaidURL="+encodeURIComponent(this.creativeUrl),d+="&allowDomains=*",d+="&currentSecurityDomain=false",j+='<object style="display: block; width: 100%; height: 100%;"',navigator.userAgent.match(/MSIE/i)?(j+=' id="'+e+'"',j+=' name="'+e+'"',j+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">',j+='<param name="movie" value="'+g+'" />'):(j+=' data="'+g+'"',j+=' type="application/x-shockwave-flash">'),j+='<param name="quality" value="high" />',j+='<param name="allowfullscreen" value="true" />',j+='<param name="allowscriptaccess" value="always" />',j+='<param name="flashvars" value="'+d+'" />',this.bgcolor?(j+='<param name="wmode" value="opaque" />',j+='<param name="bgcolor" value="#'+this.bgcolor+'" />'):j+='<param name="wmode" value="transparent" />',j+="</object>",this.slotWindow.LiveRail.VPAIDListeners["FlashVPAIDBridge_"+a.instanceCount]=k,this.flashContainer=this.slotWindow.document.createElement("div"),this.flashContainer.style.position="absolute",this.flashContainer.style.top="0px",this.flashContainer.style.left="0px",this.flashContainer.style.width="100%",this.flashContainer.style.height="100%";var l=this.slot;this.slotWindow.getComputedStyle?h=this.slotWindow.getComputedStyle(this.slot,null).getPropertyValue("position"):l.currentStyle&&(h=l.currentStyle.position),this.targetSlotOriginalPosition=void 0,"static"===h&&(this.targetSlotOriginalPosition=this.slot.style.position,this.slot.style.position="relative"),this.slot.appendChild(this.flashContainer),this.flashContainer.innerHTML=j,f=this.flashContainer.childNodes[0],c(),this.logger.verbose("Loaded JS-Flash event interface:",k)},a.prototype.unloadFlashVPAID=function(){this.slot&&this.flashContainer&&(this.slot.removeChild(this.flashContainer),this.logger.log("Unloaded Flash VPAID"),this.targetSlotOriginalPosition&&(this.logger.log("Resetting slot element position to "+this.targetSlotOriginalPosition),this.slot.style.position=this.targetSlotOriginalPosition))},a.prototype.onVPAIDEvent=function(a){var b=this;f.hasOwnProperty(a.type)&&window.setTimeout(function(){switch(b.logger.verbose("Received "+a.type+" event from Flash bridge:",a,")"),a.type){case"AdClickThru":b.eventManager.dispatch(f.AdClickThru,[a.data.url,a.data.id,a.data.playerHandles]);break;case"AdInteraction":b.eventManager.dispatch(f.AdInteraction,[a.data.id]);break;case"AdLog":b.eventManager.dispatch(f.AdLog,[a.data.message]);break;case"AdStopped":b.destroy(),b.eventManager.dispatch(f.AdStopped);break;case"AdError":b.destroy(),b.eventManager.dispatch(f.AdError,[a.data]);break;default:b.eventManager.dispatch(a.type)}},0)},a.prototype.bridgeInterfaceExists=function(){return this.flashVPAID&&e.isFunction(this.flashVPAID.handshakeVersion)},a.instanceCount=0,a}();return g});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("VPAIDFlashWrapper",["require","exports","Adapter","FlashVPAIDBridge","LogEvent","LogEventType","Utils","VPAIDEvents"],function(a,b,c,d,e,f,g,h){
var i=function(a){function b(){var b=this;a.call(this,"VPAIDFlashWrapper"),this._clearVPAIDInitTimeout=function(){b._initTimeout&&(clearTimeout(b._initTimeout),b._initTimeout=null)},this._clearVPAIDStartTimeout=function(){b._startTimeout&&(clearTimeout(b._startTimeout),b._startTimeout=null)},this._handleVideoElementFullscreen=function(){return g.videoElementIsFullscreen(b._slotWindow.document)?(b._onLinearVPAIDError(e.eventWithType(f.CreativeGeneralError,{},"Video element went fullscreen during Flash operation")),!0):!1},this._onVPAIDInitTimeout=function(){b._initTimeout=null,b._logger.error("VPAID initAd timed out after "+b._adapterConfiguration.timeoutVPAIDInit+" seconds"),b._onLinearVPAIDError(e.eventWithType(f.CreativeFileTimeout,{url:b._adCandidate.getThirdPartyData("url"),type:b._adCandidate.getThirdPartyData("type"),method:"init",timeout:b._adapterConfiguration.timeoutVPAIDInit}))},this._onVPAIDStartTimeout=function(){b._startTimeout=null,b._logger.error("VPAID startAd timed out after "+b._adapterConfiguration.timeoutVPAIDStart+" seconds"),b._onLinearVPAIDError(e.eventWithType(f.CreativeFileTimeout,{url:b._adCandidate.getThirdPartyData("url"),type:b._adCandidate.getThirdPartyData("type"),method:"start",timeout:b._adapterConfiguration.timeoutVPAIDStart}))}}return __extends(b,a),b.prototype.initAd=function(b,c,e,f,g,h){var i=this;a.prototype.initAd.call(this,b,c,e,f,g,h),this._logger.debug("initAd(",b,",",c,",",e,",",f,",",g,",",h,")"),this._slot=h.slot,this._adCandidate=h.adCandidate;var j=h.environmentData;this._slotWindow=j.parentWindow,new d(this._adCandidate.getThirdPartyData("url"),j,function(a){i._flashBridge=a;var d=i._adCandidate.getThirdPartyData("creativeData")||"";i._registerBridge(i._flashBridge),i._startVPAIDInitTimeout(),a.initAd(b,c,e,f,{AdParameters:d},{})})},b.prototype.resizeAd=function(a,b,c){this._flashBridge&&this._flashBridge.resizeAd(a,b,c)},b.prototype.startAd=function(){this._handleVideoElementFullscreen()||(g.addDocumentFullscreenEventListener(this._slotWindow.document,this._handleVideoElementFullscreen,!1),this._startVPAIDStartTimeout(),this._flashBridge.setAdVolume(this._adVolume),this._flashBridge.startAd())},b.prototype.stopAd=function(){this._flashBridge?this._flashBridge.stopAd():this._onAdStopped()},b.prototype.pauseAd=function(){this._flashBridge&&this._flashBridge.pauseAd()},b.prototype.resumeAd=function(){this._flashBridge&&this._flashBridge.resumeAd()},b.prototype.expandAd=function(){this._flashBridge&&this._flashBridge.expandAd()},b.prototype.collapseAd=function(){this._flashBridge&&this._flashBridge.collapseAd()},b.prototype.skipAd=function(){this._flashBridge&&this._flashBridge.skipAd()},b.prototype.getAdLinear=function(){return this._flashBridge?this._flashBridge.getAdLinear():a.prototype.getAdLinear.call(this)},b.prototype.getAdWidth=function(){return this._flashBridge?this._flashBridge.getAdWidth():a.prototype.getAdWidth.call(this)},b.prototype.getAdHeight=function(){return this._flashBridge?this._flashBridge.getAdHeight():a.prototype.getAdHeight.call(this)},b.prototype.getAdExpanded=function(){return this._flashBridge?this._flashBridge.getAdExpanded():a.prototype.getAdExpanded.call(this)},b.prototype.getAdSkippableState=function(){return this._flashBridge?this._flashBridge.getAdSkippableState():a.prototype.getAdSkippableState.call(this)},b.prototype.getAdRemainingTime=function(){return this._flashBridge?this._flashBridge.getAdRemainingTime():a.prototype.getAdRemainingTime.call(this)},b.prototype.getAdDuration=function(){return this._flashBridge?this._flashBridge.getAdDuration():a.prototype.getAdDuration.call(this)},b.prototype.getAdVolume=function(){return this._flashBridge?this._flashBridge.getAdVolume():a.prototype.getAdVolume.call(this)},b.prototype.setAdVolume=function(b){this._adVolume=b,this._flashBridge?this._flashBridge.setAdVolume(this._adVolume):a.prototype._onAdVolumeChange.call(this)},b.prototype.destroy=function(){this._flashBridge&&(g.removeDocumentFullscreenEventListener(this._slotWindow.document,this._handleVideoElementFullscreen,!1),this._flashBridge.stopAd(),this._unregisterBridge(this._flashBridge),this._flashBridge=null),a.prototype.destroy.call(this)},b.prototype._onAdLoaded=function(){this._clearVPAIDInitTimeout(),a.prototype._onAdLoaded.call(this)},b.prototype._onAdStarted=function(){this._clearVPAIDStartTimeout(),a.prototype._onAdStarted.call(this)},b.prototype._onAdVolumeChange=function(){this._adVolume=this._flashBridge.getAdVolume(),a.prototype._onAdVolumeChange.call(this)},b.prototype._onLinearVPAIDError=function(a){this._onAdError(a)},b.prototype._onVPAIDAdError=function(a){this._logger.error("VPAID creative dispatched AdError with message:",a),this._onLinearVPAIDError(e.eventWithType(f.CreativeComponentError,{url:this._adCandidate.getThirdPartyData("url"),message:a}))},b.prototype._registerBridge=function(a){a&&(this._logger.log("Registering event subscriptions on bridge instance:",a),a.subscribe(this._onAdLoaded,h.AdLoaded,this),a.subscribe(this._onAdStarted,h.AdStarted,this),a.subscribe(this._onAdStopped,h.AdStopped,this),a.subscribe(this._onAdSkipped,h.AdSkipped,this),a.subscribe(this._onAdSkippableStateChange,h.AdSkippableStateChange,this),a.subscribe(this._onAdSizeChange,h.AdSizeChange,this),a.subscribe(this._onAdLinearChange,h.AdLinearChange,this),a.subscribe(this._onAdDurationChange,h.AdDurationChange,this),a.subscribe(this._onAdExpandedChange,h.AdExpandedChange,this),a.subscribe(this._onAdVolumeChange,h.AdVolumeChange,this),a.subscribe(this._onAdImpression,h.AdImpression,this),a.subscribe(this._onAdVideoStart,h.AdVideoStart,this),a.subscribe(this._onAdVideoFirstQuartile,h.AdVideoFirstQuartile,this),a.subscribe(this._onAdVideoMidpoint,h.AdVideoMidpoint,this),a.subscribe(this._onAdVideoThirdQuartile,h.AdVideoThirdQuartile,this),a.subscribe(this._onAdVideoComplete,h.AdVideoComplete,this),a.subscribe(this._onAdClickThru,h.AdClickThru,this),a.subscribe(this._onAdInteraction,h.AdInteraction,this),a.subscribe(this._onAdUserAcceptInvitation,h.AdUserAcceptInvitation,this),a.subscribe(this._onAdUserMinimize,h.AdUserMinimize,this),a.subscribe(this._onAdUserClose,h.AdUserClose,this),a.subscribe(this._onAdPaused,h.AdPaused,this),a.subscribe(this._onAdPlaying,h.AdPlaying,this),a.subscribe(this._onAdLog,h.AdLog,this),a.subscribe(this._onVPAIDAdError,h.AdError,this))},b.prototype._startVPAIDInitTimeout=function(){this._logger.log("VPAID initAd timeout set to "+this._adapterConfiguration.timeoutVPAIDInit+" seconds"),this._initTimeout=setTimeout(this._onVPAIDInitTimeout,1e3*this._adapterConfiguration.timeoutVPAIDInit)},b.prototype._startVPAIDStartTimeout=function(){this._logger.log("VPAID start timeout set to "+this._adapterConfiguration.timeoutVPAIDStart+" seconds"),this._startTimeout=setTimeout(this._onVPAIDStartTimeout,1e3*this._adapterConfiguration.timeoutVPAIDStart)},b.prototype._unregisterBridge=function(a){a&&(this._logger.log("Unregistering event subscriptions on adapter instance:",a),a.unsubscribe(this._onAdLoaded,h.AdLoaded),a.unsubscribe(this._onAdStarted,h.AdStarted),a.unsubscribe(this._onAdStopped,h.AdStopped),a.unsubscribe(this._onAdSkipped,h.AdSkipped),a.unsubscribe(this._onAdSkippableStateChange,h.AdSkippableStateChange),a.unsubscribe(this._onAdSizeChange,h.AdSizeChange),a.unsubscribe(this._onAdLinearChange,h.AdLinearChange),a.unsubscribe(this._onAdDurationChange,h.AdDurationChange),a.unsubscribe(this._onAdExpandedChange,h.AdExpandedChange),a.unsubscribe(this._onAdVolumeChange,h.AdVolumeChange),a.unsubscribe(this._onAdImpression,h.AdImpression),a.unsubscribe(this._onAdVideoStart,h.AdVideoStart),a.unsubscribe(this._onAdVideoFirstQuartile,h.AdVideoFirstQuartile),a.unsubscribe(this._onAdVideoMidpoint,h.AdVideoMidpoint),a.unsubscribe(this._onAdVideoThirdQuartile,h.AdVideoThirdQuartile),a.unsubscribe(this._onAdVideoComplete,h.AdVideoComplete),a.unsubscribe(this._onAdClickThru,h.AdClickThru),a.unsubscribe(this._onAdInteraction,h.AdInteraction),a.unsubscribe(this._onAdUserAcceptInvitation,h.AdUserAcceptInvitation),a.unsubscribe(this._onAdUserMinimize,h.AdUserMinimize),a.unsubscribe(this._onAdUserClose,h.AdUserClose),a.unsubscribe(this._onAdPaused,h.AdPaused),a.unsubscribe(this._onAdPlaying,h.AdPlaying),a.unsubscribe(this._onAdLog,h.AdLog),a.unsubscribe(this._onVPAIDAdError,h.AdError))},b}(c);return i}),define("VPAIDMethods",["require","exports"],function(a,b){var c=function(){function a(){}return a.getAdLinear="getAdLinear",a.getAdWidth="getAdWidth",a.getAdHeight="getAdHeight",a.getAdExpanded="getAdExpanded",a.getAdSkippableState="getAdSkippableState",a.getAdSkippableRemainingTime="getAdSkippableRemainingTime",a.getAdRemainingTime="getAdRemainingTime",a.getAdDuration="getAdDuration",a.getAdVolume="getAdVolume",a.setAdVolume="setAdVolume",a.getAdCompanions="getAdCompanions",a.getAdIcons="getAdIcons",a.handshakeVersion="handshakeVersion",a.initAd="initAd",a.resizeAd="resizeAd",a.startAd="startAd",a.stopAd="stopAd",a.pauseAd="pauseAd",a.resumeAd="resumeAd",a.expandAd="expandAd",a.collapseAd="collapseAd",a.skipAd="skipAd",a.subscribe="subscribe",a.unsubscribe="unsubscribe",a}();return c});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("VPAIDHtmlWrapper",["require","exports","Adapter","LogEvent","LogEventType","Utils","VPAIDEvents","VPAIDMethods"],function(a,b,c,d,e,f,g,h){var i=function(a){function b(){var b=this;a.call(this,"VPAIDHtmlWrapper"),this._clearVPAIDInitTimeout=function(){b._initTimeout&&(clearTimeout(b._initTimeout),b._initTimeout=null)},this._clearVPAIDLoadTimeout=function(){b._loadTimeout&&(clearTimeout(b._loadTimeout),b._loadTimeout=null)},this._clearVPAIDStartTimeout=function(){b._startTimeout&&(clearTimeout(b._startTimeout),b._startTimeout=null)},this._onCreativeAdClickThru=function(a,c,d){b._onAdClickThru(f.returnString(a,"").trim(),f.returnString(c,""),f.returnBoolean(d))},this._onCreativeAdDurationChange=function(){b._onAdDurationChange()},this._onCreativeAdError=function(a){b._logger.error("VPAID creative dispatched AdError with message:",a),b._onLinearVPAIDError(d.eventWithType(e.CreativeComponentError,{url:b._adCandidate.getThirdPartyData("url"),message:a}))},this._onCreativeAdExpandedChange=function(){b._onAdExpandedChange()},this._onCreativeAdImpression=function(){b._clearVPAIDStartTimeout(),b._VPAIDInstance.getAdVolume()!==b._adVolume&&b.setAdVolume(b._adVolume),b._onAdImpression()},this._onCreativeAdInteraction=function(){b._onAdInteraction()},this._onCreativeAdLinearChange=function(){b._onAdLinearChange()},this._onCreativeAdLoaded=function(){b._clearVPAIDInitTimeout(),b._onAdLoaded()},this._onCreativeAdLog=function(a){b._logEvent(g.AdLog,[a])},this._onCreativeAdPaused=function(){b._onAdPaused()},this._onCreativeAdPlaying=function(){b._onAdPlaying()},this._onCreativeAdSizeChange=function(){b._onAdSizeChange()},this._onCreativeAdSkippableStateChange=function(){b._onAdSkippableStateChange()},this._onCreativeAdSkipped=function(){b._onAdSkipped()},this._onCreativeAdStarted=function(){b._onAdStarted()},this._onCreativeAdStopped=function(){b._active&&(b._logEvent(g.AdStopped),b._destroyThirdPartyVPAID(),b._onAdStopped())},this._onCreativeAdUserAcceptInvitation=function(){b._onAdUserAcceptInvitation()},this._onCreativeAdUserClose=function(){b._onAdUserClose()},this._onCreativeAdUserMinimize=function(){b._onAdUserMinimize()},this._onCreativeAdVideoComplete=function(){b._onAdVideoComplete()},this._onCreativeAdVideoFirstQuartile=function(){b._onAdVideoFirstQuartile()},this._onCreativeAdVideoMidpoint=function(){b._onAdVideoMidpoint()},this._onCreativeAdVideoStart=function(){b._onAdVideoStart()},this._onCreativeAdVideoThirdQuartile=function(){b._onAdVideoThirdQuartile()},this._onCreativeAdVolumeChange=function(){b._adVolume=b._VPAIDInstance.getAdVolume(),b._onAdVolumeChange()},this._onVPAIDInitTimeout=function(){b._initTimeout=null,b._onLinearVPAIDError(d.eventWithType(e.CreativeFileTimeout,{url:b._adCandidate.getThirdPartyData("url"),type:b._adCandidate.getThirdPartyData("type"),method:"init",timeout:b._adapterConfiguration.timeoutVPAIDInit}))},this._onVPAIDLoadTimeout=function(){b._loadTimeout=null,b._onLinearVPAIDError(d.eventWithType(e.CreativeFileTimeout,{url:b._adCandidate.getThirdPartyData("url"),type:b._adCandidate.getThirdPartyData("type"),method:"load",timeout:b._adapterConfiguration.timeoutVPAIDLoad}))},this._onVPAIDStartTimeout=function(){b._startTimeout=null,b._onLinearVPAIDError(d.eventWithType(e.CreativeFileTimeout,{url:b._adCandidate.getThirdPartyData("url"),type:b._adCandidate.getThirdPartyData("type"),method:"start",timeout:b._adapterConfiguration.timeoutVPAIDStart}))},this._validateVPAIDCreative=function(a){var c=!0;return"object"==typeof a?[h.handshakeVersion,h.initAd,h.startAd,h.stopAd,h.subscribe,h.unsubscribe,h.getAdLinear,h.getAdVolume,h.setAdVolume].every(function(d){var e=a[d];return"function"!=typeof e?(b._logger.error("VPAID creative is missing required "+d+" method"),c=!1,!1):!0}):c=!1,c}}return __extends(b,a),b.prototype.initAd=function(b,c,d,e,f,g){var i=this;a.prototype.initAd.call(this,b,c,d,e,f,g),this._logger.debug("initAd(",b,",",c,",",d,",",e,",",f,",",g,")"),this._active=!0,this._slot=g.slot,this._videoSlot=g.videoSlot,this._adCandidate=g.adCandidate,this._instantiateThirdPartyVPAID(this._adCandidate.getThirdPartyData("url"),function(a){i._VPAIDInstance=a,i._registerVPAIDSubscriptions(i._VPAIDInstance);var f={},j=i._adCandidate.getThirdPartyData("creativeData");j&&(f.AdParameters=j);var k={slot:i._slot,videoSlot:i._videoSlot,videoSlotCanAutoPlay:g.videoSlotCanAutoPlay};i._logger.log("Calling initAd() on VPAID creative, timeout="+i._adapterConfiguration.timeoutVPAIDInit,"width="+b,"height="+c,"viewMode="+d,"desiredBitrate="+e,"creativeData=",f,"environmentVars=",k),i._initTimeout=setTimeout(i._onVPAIDInitTimeout,1e3*i._adapterConfiguration.timeoutVPAIDInit),i._callVPAIDInstanceMethodOrDie(h.initAd,[b,c,d,e,f,k])},function(a){i._onLinearVPAIDError(a)})},b.prototype.resizeAd=function(a,b,c){this._callVPAIDInstanceMethod(h.resizeAd,[a,b,c])},b.prototype.startAd=function(){this._logger.log("Calling startAd() on VPAID creative, timeout="+this._adapterConfiguration.timeoutVPAIDStart),this._startTimeout=setTimeout(this._onVPAIDStartTimeout,1e3*this._adapterConfiguration.timeoutVPAIDStart),this.setAdVolume(this._adVolume),this._callVPAIDInstanceMethodOrDie(h.startAd)},b.prototype.stopAd=function(){this._logger.log("Calling stopAd() on VPAID creative"),this._callVPAIDInstanceMethodOrDie(h.stopAd)},b.prototype.pauseAd=function(){this._logger.log("Calling pauseAd() on VPAID creative"),this._callVPAIDInstanceMethod(h.pauseAd)},b.prototype.resumeAd=function(){this._logger.log("Calling resumeAd() on VPAID creative"),this._callVPAIDInstanceMethod(h.resumeAd)},b.prototype.expandAd=function(){this._logger.log("Calling expandAd() on VPAID creative"),this._callVPAIDInstanceMethod(h.expandAd)},b.prototype.collapseAd=function(){this._logger.log("Calling collapseAd() on VPAID creative"),this._callVPAIDInstanceMethod(h.collapseAd)},b.prototype.skipAd=function(){this._logger.log("Calling skipAd() on VPAID creative"),this._callVPAIDInstanceMethod(h.skipAd)},b.prototype.getAdLinear=function(){return this._VPAIDInstance?this._callVPAIDInstanceMethod(h.getAdLinear)||a.prototype.getAdLinear.call(this):a.prototype.getAdLinear.call(this)},b.prototype.getAdWidth=function(){return this._VPAIDInstance?this._callVPAIDInstanceMethod(h.getAdWidth)||a.prototype.getAdWidth.call(this):a.prototype.getAdWidth.call(this)},b.prototype.getAdHeight=function(){return this._VPAIDInstance?this._callVPAIDInstanceMethod(h.getAdHeight)||a.prototype.getAdHeight.call(this):a.prototype.getAdHeight.call(this)},b.prototype.getAdExpanded=function(){return this._VPAIDInstance?this._callVPAIDInstanceMethod(h.getAdExpanded)||a.prototype.getAdExpanded.call(this):a.prototype.getAdExpanded.call(this)},b.prototype.getAdSkippableState=function(){return this._VPAIDInstance?this._callVPAIDInstanceMethod(h.getAdSkippableState)||a.prototype.getAdSkippableState.call(this):a.prototype.getAdSkippableState.call(this)},b.prototype.getAdRemainingTime=function(){return this._VPAIDInstance?this._callVPAIDInstanceMethod(h.getAdRemainingTime)||a.prototype.getAdRemainingTime.call(this):a.prototype.getAdRemainingTime.call(this)},b.prototype.getAdDuration=function(){return this._VPAIDInstance?this._callVPAIDInstanceMethod(h.getAdDuration)||a.prototype.getAdDuration.call(this):a.prototype.getAdDuration.call(this)},b.prototype.getAdVolume=function(){return this._VPAIDInstance?this._callVPAIDInstanceMethod(h.getAdVolume)||a.prototype.getAdVolume.call(this):a.prototype.getAdVolume.call(this)},b.prototype.setAdVolume=function(b){var c=this;this._VPAIDInstance?(this._callVPAIDInstanceMethod(h.setAdVolume,[b],function(){a.prototype.setAdVolume.call(c,b)}),0===b?0===this._videoSlot.volume||this._videoSlot.muted||(this._logger.log("Failed to set volume to 0, setting video slot to muted=true"),this._videoSlot.muted=!0):this._videoSlot.volume!==b&&(this._logger.log("Failed to set volume to "+b+" setting video slot volume directly"),this._videoSlot.volume=b)):a.prototype.setAdVolume.call(this,b)},b.prototype.destroy=function(){this._active=!1,this._VPAIDInstance&&(this.stopAd(),this._destroyThirdPartyVPAID()),this._videoSlot=null,this._slot=null,this._adapterConfiguration=null,this._adCandidate=null,a.prototype.destroy.call(this)},b.prototype._onEvent=function(b,c){void 0===c&&(c=[]),this._logEvent(b,c),a.prototype._onEvent.call(this,b,c)},b.prototype._callVPAIDInstanceMethod=function(a,b,c){void 0===b&&(b=[]),void 0===c&&(c=null);try{var d=this._VPAIDInstance;return d[a].apply(d,b)}catch(e){this._logger.error("VPAID instance uncaught error, method="+a+" args=",b,"message="+e.message,"error=",e),null!==c&&c(e)}},b.prototype._callVPAIDInstanceMethodOrDie=function(a,b){var c=this;void 0===b&&(b=[]),this._callVPAIDInstanceMethod(a,b,function(b){c._onLinearVPAIDError(d.eventWithType(e.CreativeGeneralError,{url:c._adCandidate.getThirdPartyData("url"),message:"Exception thrown calling "+a+" method: "+b.message}))})},b.prototype._destroyThirdPartyVPAID=function(){this._clearVPAIDInitTimeout(),this._clearVPAIDLoadTimeout(),this._clearVPAIDStartTimeout(),this._unregisterVPAIDSubscriptions(this._VPAIDInstance),this._VPAIDInstance=null,document.body.removeChild(this._VPAIDLoader),this._VPAIDLoader=null,this._logger.log("Unloaded VPAID creative")},b.prototype._instantiateThirdPartyVPAID=function(a,b,c){var f=this;this._logger.log("Loading VPAID creative, timeout="+this._adapterConfiguration.timeoutVPAIDLoad+" url="+a),this._loadTimeout=setTimeout(this._onVPAIDLoadTimeout,1e3*this._adapterConfiguration.timeoutVPAIDLoad),this._VPAIDLoader=document.createElement("iframe"),this._VPAIDLoader.style.setProperty("display","none","important"),document.body.appendChild(this._VPAIDLoader),this._VPAIDLoader.contentWindow.document.open(),this._VPAIDLoader.contentWindow.document.close();var g=this._VPAIDLoader.contentWindow.document.createElement("script");g.onload=function(){var g=f._VPAIDLoader.contentWindow;if("function"!=typeof g.getVPAIDAd)return void c(d.eventWithType(e.CreativeGeneralError,{url:a,message:"Creative does not provide getVPAIDAd constructor"}));var h=g.getVPAIDAd();return f._validateVPAIDCreative(h)?(h.handshakeVersion("2.0"),f._clearVPAIDLoadTimeout(),void(f._active&&b(h))):void c(d.eventWithType(e.CreativeGeneralError,{url:a,message:"Creative does not implement VPAID methods"}))},g.onerror=function(b){f._clearVPAIDLoadTimeout(),f._active&&c(d.eventWithType(e.CreativeGeneralError,{message:"VPAID creative load failed with error: "+b.message,url:a}))},g.src=a,this._VPAIDLoader.contentWindow.document.body.appendChild(g)},b.prototype._logEvent=function(a,b){void 0===b&&(b=[]),this._logger.log("Received "+a+" event with arguments:",b)},b.prototype._onLinearVPAIDError=function(a){var b=this;a.id!==e.CreativeComponentError.id&&this._VPAIDInstance&&this._active===!0&&(this._active=!1,this.stopAd()),setTimeout(function(){b._destroyThirdPartyVPAID(),b.destroy(),b._eventManager.dispatch(g.AdError,[a])},0)},b.prototype._registerVPAIDSubscriptions=function(a){"object"==typeof a&&"function"==typeof a.subscribe&&(this._logger.log("Registering event subscriptions on VPAID instance:",a),a.subscribe(this._onCreativeAdLoaded,g.AdLoaded,this),a.subscribe(this._onCreativeAdStarted,g.AdStarted,this),a.subscribe(this._onCreativeAdStopped,g.AdStopped,this),a.subscribe(this._onCreativeAdSkipped,g.AdSkipped,this),a.subscribe(this._onCreativeAdSkippableStateChange,g.AdSkippableStateChange,this),a.subscribe(this._onCreativeAdSizeChange,g.AdSizeChange,this),a.subscribe(this._onCreativeAdLinearChange,g.AdLinearChange,this),a.subscribe(this._onCreativeAdDurationChange,g.AdDurationChange,this),a.subscribe(this._onCreativeAdExpandedChange,g.AdExpandedChange,this),a.subscribe(this._onCreativeAdVolumeChange,g.AdVolumeChange,this),a.subscribe(this._onCreativeAdImpression,g.AdImpression,this),a.subscribe(this._onCreativeAdVideoStart,g.AdVideoStart,this),a.subscribe(this._onCreativeAdVideoFirstQuartile,g.AdVideoFirstQuartile,this),a.subscribe(this._onCreativeAdVideoMidpoint,g.AdVideoMidpoint,this),a.subscribe(this._onCreativeAdVideoThirdQuartile,g.AdVideoThirdQuartile,this),a.subscribe(this._onCreativeAdVideoComplete,g.AdVideoComplete,this),a.subscribe(this._onCreativeAdClickThru,g.AdClickThru,this),a.subscribe(this._onCreativeAdInteraction,g.AdInteraction,this),a.subscribe(this._onCreativeAdUserAcceptInvitation,g.AdUserAcceptInvitation,this),a.subscribe(this._onCreativeAdUserMinimize,g.AdUserMinimize,this),a.subscribe(this._onCreativeAdUserClose,g.AdUserClose,this),a.subscribe(this._onCreativeAdPaused,g.AdPaused,this),a.subscribe(this._onCreativeAdPlaying,g.AdPlaying,this),a.subscribe(this._onCreativeAdLog,g.AdLog,this),a.subscribe(this._onCreativeAdError,g.AdError,this))},b.prototype._unregisterVPAIDSubscriptions=function(a){"object"==typeof a&&"function"==typeof a.unsubscribe&&(this._logger.log("Unregistering event subscriptions on VPAID instance:",a),a.unsubscribe(this._onCreativeAdLoaded,g.AdLoaded),a.unsubscribe(this._onCreativeAdStarted,g.AdStarted),a.unsubscribe(this._onCreativeAdStopped,g.AdStopped),a.unsubscribe(this._onCreativeAdSkipped,g.AdSkipped),a.unsubscribe(this._onCreativeAdSkippableStateChange,g.AdSkippableStateChange),a.unsubscribe(this._onCreativeAdSizeChange,g.AdSizeChange),a.unsubscribe(this._onCreativeAdLinearChange,g.AdLinearChange),a.unsubscribe(this._onCreativeAdDurationChange,g.AdDurationChange),a.unsubscribe(this._onCreativeAdExpandedChange,g.AdExpandedChange),a.unsubscribe(this._onCreativeAdVolumeChange,g.AdVolumeChange),a.unsubscribe(this._onCreativeAdImpression,g.AdImpression),a.unsubscribe(this._onCreativeAdVideoStart,g.AdVideoStart),a.unsubscribe(this._onCreativeAdVideoFirstQuartile,g.AdVideoFirstQuartile),a.unsubscribe(this._onCreativeAdVideoMidpoint,g.AdVideoMidpoint),a.unsubscribe(this._onCreativeAdVideoThirdQuartile,g.AdVideoThirdQuartile),a.unsubscribe(this._onCreativeAdVideoComplete,g.AdVideoComplete),a.unsubscribe(this._onCreativeAdClickThru,g.AdClickThru),a.unsubscribe(this._onCreativeAdInteraction,g.AdInteraction),a.unsubscribe(this._onCreativeAdUserAcceptInvitation,g.AdUserAcceptInvitation),a.unsubscribe(this._onCreativeAdUserMinimize,g.AdUserMinimize),a.unsubscribe(this._onCreativeAdUserClose,g.AdUserClose),a.unsubscribe(this._onCreativeAdPaused,g.AdPaused),a.unsubscribe(this._onCreativeAdPlaying,g.AdPlaying),a.unsubscribe(this._onCreativeAdLog,g.AdLog),a.unsubscribe(this._onCreativeAdError,g.AdError))},b}(c);return i});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("VPAIDAdapter",["require","exports","Adapter","AdManagerEvents","GlobalConfig","MimeType","VPAIDEvents","VPAIDFlashWrapper","VPAIDHtmlWrapper"],function(a,b,c,d,e,f,g,h,i){var j=function(a){function b(b){var c=this;a.call(this,"VPAIDAdapter"),this._onProgress=function(){c.isPaused()||c._eventManager.dispatch(d.AdProgress)},this.destroy(),b&&b(this)}return __extends(b,a),b.prototype.supports=function(a){return!1},b.prototype.initAd=function(b,c,d,e,g,j){a.prototype.initAd.call(this,b,c,d,e,g,j),this._logger.debug("initAd(",b,",",c,",",d,",",e,",",g,",",j,")"),this._active=!0;var k=j.adCandidate;k.getThirdPartyData("type")===f.JavaScript?this._wrapper=new i:this._wrapper=new h,this._registerVPAIDWrapper(this._wrapper),this._wrapper.initAd(b,c,d,e,g,j)},b.prototype.resizeAd=function(a,b,c){this._wrapper.resizeAd(a,b,c)},b.prototype.startAd=function(){this._wrapper.startAd()},b.prototype.stopAd=function(){this._wrapper.stopAd()},b.prototype.pauseAd=function(){this._wrapper.pauseAd()},b.prototype.resumeAd=function(){this._wrapper.resumeAd()},b.prototype.expandAd=function(){this._wrapper.expandAd()},b.prototype.collapseAd=function(){this._wrapper.collapseAd()},b.prototype.skipAd=function(){this._wrapper.skipAd()},b.prototype.getAdLinear=function(){return this._wrapper?this._wrapper.getAdLinear():a.prototype.getAdLinear.call(this)},b.prototype.getAdWidth=function(){return this._active&&this._wrapper?this._wrapper.getAdWidth():a.prototype.getAdWidth.call(this)},b.prototype.getAdHeight=function(){return this._active&&this._wrapper?this._wrapper.getAdHeight():a.prototype.getAdHeight.call(this)},b.prototype.getAdExpanded=function(){return this._active&&this._wrapper?this._wrapper.getAdExpanded():a.prototype.getAdExpanded.call(this)},b.prototype.getAdSkippableState=function(){return this._active&&this._wrapper?this._wrapper.getAdSkippableState():a.prototype.getAdSkippableState.call(this)},b.prototype.getAdRemainingTime=function(){return this._active&&this._wrapper?this._wrapper.getAdRemainingTime():a.prototype.getAdRemainingTime.call(this)},b.prototype.getAdDuration=function(){return this._active&&this._wrapper?this._wrapper.getAdDuration():a.prototype.getAdDuration.call(this)},b.prototype.getAdVolume=function(){return this._active&&this._wrapper?this._wrapper.getAdVolume():a.prototype.getAdVolume.call(this)},b.prototype.setAdVolume=function(b){this._active&&this._wrapper&&this._wrapper.setAdVolume(b),a.prototype.setAdVolume.call(this,b)},b.prototype.destroy=function(){this._active=!1,this._stopProgressMonitor(),this._wrapper&&(this._unregisterVPAIDWrapperInstance(),this._wrapper=null)},b.prototype.isPaused=function(){return this._paused},b.prototype._onAdImpression=function(){a.prototype._onAdImpression.call(this),this._startProgressMonitor()},b.prototype._onAdPaused=function(){this._paused=!0,a.prototype._onAdPaused.call(this)},b.prototype._onAdPlaying=function(){this._paused=!1,a.prototype._onAdPlaying.call(this)},b.prototype._onAdVideoComplete=function(){this._eventManager.dispatch(d.AdProgress),a.prototype._onAdVideoComplete.call(this)},b.prototype._unregisterVPAIDWrapperInstance=function(){this._logger.log("Unregistering VPAID wrapper"),this._unregisterVPAIDWrapper(this._wrapper),this._wrapper.destroy()},b.prototype._registerVPAIDWrapper=function(a){"object"==typeof a&&"function"==typeof a.subscribe&&(this._wrapper.setAdVolume(this._adVolume),this._logger.log("Registering event subscriptions on wrapper instance:",a),a.subscribe(this._onAdLoaded,g.AdLoaded,this),a.subscribe(this._onAdStarted,g.AdStarted,this),a.subscribe(this._onAdStopped,g.AdStopped,this),a.subscribe(this._onAdSkipped,g.AdSkipped,this),a.subscribe(this._onAdSkippableStateChange,g.AdSkippableStateChange,this),a.subscribe(this._onAdSizeChange,g.AdSizeChange,this),a.subscribe(this._onAdLinearChange,g.AdLinearChange,this),a.subscribe(this._onAdDurationChange,g.AdDurationChange,this),a.subscribe(this._onAdExpandedChange,g.AdExpandedChange,this),a.subscribe(this._onAdVolumeChange,g.AdVolumeChange,this),a.subscribe(this._onAdImpression,g.AdImpression,this),a.subscribe(this._onAdVideoStart,g.AdVideoStart,this),a.subscribe(this._onAdVideoFirstQuartile,g.AdVideoFirstQuartile,this),a.subscribe(this._onAdVideoMidpoint,g.AdVideoMidpoint,this),a.subscribe(this._onAdVideoThirdQuartile,g.AdVideoThirdQuartile,this),a.subscribe(this._onAdVideoComplete,g.AdVideoComplete,this),a.subscribe(this._onAdClickThru,g.AdClickThru,this),a.subscribe(this._onAdInteraction,g.AdInteraction,this),a.subscribe(this._onAdUserAcceptInvitation,g.AdUserAcceptInvitation,this),a.subscribe(this._onAdUserMinimize,g.AdUserMinimize,this),a.subscribe(this._onAdUserClose,g.AdUserClose,this),a.subscribe(this._onAdPaused,g.AdPaused,this),a.subscribe(this._onAdPlaying,g.AdPlaying,this),a.subscribe(this._onAdLog,g.AdLog,this),a.subscribe(this._onAdError,g.AdError,this))},b.prototype._unregisterVPAIDWrapper=function(a){"object"==typeof a&&"function"==typeof a.unsubscribe&&(this._logger.log("Unregistering event subscriptions on wrapper instance:",a),a.unsubscribe(this._onAdLoaded,g.AdLoaded),a.unsubscribe(this._onAdStarted,g.AdStarted),a.unsubscribe(this._onAdStopped,g.AdStopped),a.unsubscribe(this._onAdSkipped,g.AdSkipped),a.unsubscribe(this._onAdSkippableStateChange,g.AdSkippableStateChange),a.unsubscribe(this._onAdSizeChange,g.AdSizeChange),a.unsubscribe(this._onAdLinearChange,g.AdLinearChange),a.unsubscribe(this._onAdDurationChange,g.AdDurationChange),a.unsubscribe(this._onAdExpandedChange,g.AdExpandedChange),a.unsubscribe(this._onAdVolumeChange,g.AdVolumeChange),a.unsubscribe(this._onAdImpression,g.AdImpression),a.unsubscribe(this._onAdVideoStart,g.AdVideoStart),a.unsubscribe(this._onAdVideoFirstQuartile,g.AdVideoFirstQuartile),a.unsubscribe(this._onAdVideoMidpoint,g.AdVideoMidpoint),a.unsubscribe(this._onAdVideoThirdQuartile,g.AdVideoThirdQuartile),a.unsubscribe(this._onAdVideoComplete,g.AdVideoComplete),a.unsubscribe(this._onAdClickThru,g.AdClickThru),a.unsubscribe(this._onAdInteraction,g.AdInteraction),a.unsubscribe(this._onAdUserAcceptInvitation,g.AdUserAcceptInvitation),a.unsubscribe(this._onAdUserMinimize,g.AdUserMinimize),a.unsubscribe(this._onAdUserClose,g.AdUserClose),a.unsubscribe(this._onAdPaused,g.AdPaused),a.unsubscribe(this._onAdPlaying,g.AdPlaying),a.unsubscribe(this._onAdLog,g.AdLog),a.unsubscribe(this._onAdError,g.AdError))},b.prototype._startProgressMonitor=function(){this._progressMonitorInterval||(this._logger.debug("Starting progress monitor at remainingTime="+this._wrapper.getAdRemainingTime()),this._progressMonitorInterval=setInterval(this._onProgress,e.MEASUREMENT_FREQUENCY),this._onProgress())},b.prototype._stopProgressMonitor=function(){if(this._progressMonitorInterval){this._logger.debug("Stopping progress monitor at remainingTime="+this._wrapper.getAdRemainingTime());try{clearInterval(this._progressMonitorInterval),this._progressMonitorInterval=null}catch(a){}}},b}(c);return j}),define("AdapterFactory",["require","exports","LRAdapter","VPAIDAdapter"],function(a,b,c,d){var e=function(){function a(){this.adapterInstanceDictionary={}}return a.setInstanceData=function(a){this.instanceData=a},a.getAvailableAdapters=function(){var a=["LR"];return this.instanceData&&this.instanceData.getDisableIframes()!==!0&&a.push("VPAID"),a},a.prototype.getAdapterInstance=function(b,e){var f=this,g=function(a){f.adapterInstanceDictionary[b]||(f.adapterInstanceDictionary[b]=a),e(f.adapterInstanceDictionary[b]||null)};if(-1===a.getAvailableAdapters().indexOf(b)||this.adapterInstanceDictionary.hasOwnProperty(b))g(this.adapterInstanceDictionary[b]);else switch(b){case"LR":new c(g);break;case"VPAID":new d(g)}},a}();return e}),define("AdapterConfiguration",["require","exports"],function(a,b){var c=function(){function a(a,b){var c=a.getAdParameters();this.adRequestTimeout=c.adRequestTimeout,this.adCreativeTimeout=c.adCreativeTimeout,this.timeoutVPAIDLoad=c.timeoutVPAIDLoad,this.timeoutVPAIDInit=c.timeoutVPAIDInit,this.timeoutVPAIDStart=c.timeoutVPAIDStart,
this.desiredBitrate=c.desiredBitrate,this.linearSkin=c.linearSkin,this.indexMessage=c.indexMessage||b.indexMessage,this.countdownMessage=c.countdownMessage||b.countdownMessage,this.clickthroughMessage=c.clickthroughMessage||b.clickthroughMessage,this.skipCountdownMessage=c.skipCountdownMessage||b.skipCountdownMessage,this.skipMessage=c.skipMessage||b.skipMessage,this.showCountdown=c.showCountdown,this.clickElement=c.clickElement,this.playerHandlesClick=c.playerHandlesClick,this.pauseOnClick=c.pauseOnClick,this.placementType=b.placementType,this.allowExpand=b.allowExpand,this.allowSMS=b.allowSMS,this.allowTelephone=b.allowTelephone,this.allowWebcal=b.allowWebcal,this.allowResize=b.allowResize,this.allowPhoto=b.allowPhoto,this.allowCalendar=b.allowCalendar,this.mimeTypePriorityList=a.mimeTypePriorityList}return a.prototype.propertyOrDefault=function(a,b){return null!==a?a:b},a}();return c}),define("AdExtensionManager",["require","exports"],function(a,b){var c=function(){function a(){}return a.prototype.init=function(a){this.adResponse=a},a.prototype.register=function(a,b){this.adapter=a,this.adCandidate=b},a.prototype.unregister=function(){},a.prototype.onFullscreenEnter=function(){},a.prototype.onFullscreenExit=function(){},a}();return c}),define("AdSourceRequest",["require","exports"],function(a,b){var c=function(){function a(a,b){this.status=0,this.totalDuration=0,this.responses=[],this.id=a,this.adSource=b;var c=b.getErc();null!==c&&(this.status=c)}return a.prototype.getId=function(){return this.id},a.prototype.getAdSource=function(){return this.adSource},a.prototype.getStatus=function(){return this.status},a.prototype.setStatus=function(a){this.status=a},a.prototype.getTotalDuration=function(){return this.totalDuration},a.prototype.increaseTotalDuration=function(a){this.totalDuration+=a},a.prototype.addResponse=function(a){this.responses.push(a)},a.prototype.getResponses=function(){return this.responses},a}();return c}),define("HTTPRequest",["require","exports"],function(a,b){var c=function(){function a(){this.aborted=!1}return a.prototype.setXMLHttpRequest=function(a){this.requestObject=a},a.prototype.getReadyState=function(){return this.requestObject.readyState},a.prototype.abort=function(){this.aborted=!0,this.requestObject.abort()},a.prototype.isAborted=function(){return this.aborted},a}();return c}),!function(){"use strict";var a={};a.request=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if("object"!=typeof a||!a.url)return null;d="corserror",e="error",f="parsererror",g="timeout",i={latency:null,duration:null},q=a.url,o="GET","POST"===a.type&&(o="POST"),j=function(b){"function"==typeof a.onloadstart&&a.onloadstart(b)},k=function(b){"function"==typeof a.onprogress&&a.onprogress(b)},l=function(d){if(void 0===c.responseText||null===c.responseText)return m(e),c;if(r=d.responseText,"json"===a.dataType)try{r=JSON.parse(d.responseText)}catch(g){return void m(f,g)}if("xml"===a.dataType)try{if(r=d.responseXML||null,(!r||!d.responseXML.documentElement)&&"string"==typeof d.responseText&&d.responseText.length>0){if(!window.DOMParser)throw null;try{r=(new window.DOMParser).parseFromString(d.responseText,"text/xml")}catch(h){throw null}}if(r&&"parsererror"===r.documentElement.tagName)throw null;if(r&&r.getElementsByTagName("parsererror").length>0)throw null}catch(j){return void m(f)}b&&(b=!1,"function"==typeof a.success&&a.success(r,"success",c,i))},m=function(d,f){var g=e,h=e;s&&(clearTimeout(s),s=void 0),b&&(b=!1,"function"==typeof a.error&&("string"==typeof d&&(g=d),"object"==typeof f&&(h=f.message),a.error(c,g,h,i)))},b=!0;try{h=document.createElement("a"),h.href=q,n=h.hostname}catch(v){}if(!window.XMLHttpRequest||""!==n&&window.location.hostname!==n&&void 0===(new window.XMLHttpRequest).withCredentials){if(!window.XDomainRequest)return window.setTimeout(function(){m(d)},0),null;c=new window.XDomainRequest;try{c.open(o,q)}catch(w){return window.setTimeout(function(){m(e,w)},0),c}c.onload=function(){i.duration=Date.now()-p,l(c)},c.onprogress=function(){i.latency=Date.now()-p},c.onerror=function(a){i.duration=Date.now()-p,m(e,a)},c.ontimeout=function(a){m(g,a)},"number"==typeof a.timeout&&(c.timeout=a.timeout)}else{c=new window.XMLHttpRequest,c.overrideMimeType&&("json"===a.dataType&&c.overrideMimeType("application/json"),"xml"===a.dataType&&c.overrideMimeType("text/xml"));try{c.open(o,q,!0)}catch(w){return window.setTimeout(function(){m(e,w)},0),c}if(c.withCredentials=!0,"POST"===o&&c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){return b&&(2===c.readyState&&(i.latency=Date.now()-p),4===c.readyState)?(i.duration=Date.now()-p,200!==c.status?void m(e):void l(c)):void 0},c.onloadstart=j,"object"==typeof a.xhrFields)for(u in a.xhrFields)a.xhrFields.hasOwnProperty(u)&&(c[u]=a.xhrFields[u]);"number"==typeof a.timeout&&(t=a.timeout)}try{c.onprogress=k,"number"==typeof t&&(s=setTimeout(function(){m(g)},t)),p=Date.now(),c.send(a.data)}catch(x){window.setTimeout(function(){m(e,x)},0)}return c},"object"==typeof exports?module.exports=a:"function"==typeof define&&define("Ajax",[],function(){return a})}(),!function(){function a(){function a(){!function(a){function b(){function a(a){var b,c,e,f,g,h,j=d.dyn_tree,k=d.stat_desc.static_tree,l=d.stat_desc.extra_bits,m=d.stat_desc.extra_base,n=d.stat_desc.max_length,p=0;for(f=0;i>=f;f++)a.bl_count[f]=0;for(j[2*a.heap[a.heap_max]+1]=0,b=a.heap_max+1;o>b;b++)c=a.heap[b],f=j[2*j[2*c+1]+1]+1,f>n&&(f=n,p++),j[2*c+1]=f,c>d.max_code||(a.bl_count[f]++,g=0,c>=m&&(g=l[c-m]),h=j[2*c],a.opt_len+=h*(f+g),k&&(a.static_len+=h*(k[2*c+1]+g)));if(0!==p){do{for(f=n-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[n]--,p-=2}while(p>0);for(f=n;0!==f;f--)for(c=a.bl_count[f];0!==c;)e=a.heap[--b],e>d.max_code||(j[2*e+1]!=f&&(a.opt_len+=(f-j[2*e+1])*j[2*e],j[2*e+1]=f),c--)}}function b(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function c(a,c,d){var e,f,g,h=[],j=0;for(e=1;i>=e;e++)h[e]=j=j+d[e-1]<<1;for(f=0;c>=f;f++)g=a[2*f+1],0!==g&&(a[2*f]=b(h[g]++,g))}var d=this;d.build_tree=function(b){var e,f,g,h=d.dyn_tree,i=d.stat_desc.static_tree,j=d.stat_desc.elems,k=-1;for(b.heap_len=0,b.heap_max=o,e=0;j>e;e++)0!==h[2*e]?(b.heap[++b.heap_len]=k=e,b.depth[e]=0):h[2*e+1]=0;for(;b.heap_len<2;)g=b.heap[++b.heap_len]=2>k?++k:0,h[2*g]=1,b.depth[g]=0,b.opt_len--,i&&(b.static_len-=i[2*g+1]);for(d.max_code=k,e=Math.floor(b.heap_len/2);e>=1;e--)b.pqdownheap(h,e);g=j;do e=b.heap[1],b.heap[1]=b.heap[b.heap_len--],b.pqdownheap(h,1),f=b.heap[1],b.heap[--b.heap_max]=e,b.heap[--b.heap_max]=f,h[2*g]=h[2*e]+h[2*f],b.depth[g]=Math.max(b.depth[e],b.depth[f])+1,h[2*e+1]=h[2*f+1]=g,b.heap[1]=g++,b.pqdownheap(h,1);while(b.heap_len>=2);b.heap[--b.heap_max]=b.heap[1],a(b),c(h,d.max_code,b.bl_count)}}function c(a,b,c,d,e){var f=this;f.static_tree=a,f.extra_bits=b,f.extra_base=c,f.elems=d,f.max_length=e}function d(a,b,c,d,e){var f=this;f.good_length=a,f.max_lazy=b,f.nice_length=c,f.max_chain=d,f.func=e}function e(a,b,c,d){var e=a[2*b],f=a[2*c];return f>e||e==f&&d[b]<=d[c]}function f(){function a(){var a;for(Ea=2*Aa,Ga[Ia-1]=0,a=0;Ia-1>a;a++)Ga[a]=0;Va=P[Wa].max_lazy,Ya=P[Wa].good_length,Za=P[Wa].nice_length,Ua=P[Wa].max_chain,Qa=0,Ma=0,Sa=0,Na=Ta=ba-1,Pa=0,Ha=0}function d(){var a;for(a=0;n>a;a++)$a[2*a]=0;for(a=0;j>a;a++)_a[2*a]=0;for(a=0;k>a;a++)ab[2*a]=0;$a[2*p]=1,bb.opt_len=bb.static_len=0,hb=jb=0}function f(){cb.dyn_tree=$a,cb.stat_desc=c.static_l_desc,db.dyn_tree=_a,db.stat_desc=c.static_d_desc,eb.dyn_tree=ab,eb.stat_desc=c.static_bl_desc,lb=0,mb=0,kb=8,d()}function g(a,b){var c,d,e=-1,f=a[1],g=0,h=7,i=4;for(0===f&&(h=138,i=3),a[2*(b+1)+1]=65535,c=0;b>=c;c++)d=f,f=a[2*(c+1)+1],++g<h&&d==f||(i>g?ab[2*d]+=g:0!==d?(d!=e&&ab[2*d]++,ab[2*r]++):10>=g?ab[2*s]++:ab[2*t]++,g=0,e=d,0===f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4))}function h(){var a;for(g($a,cb.max_code),g(_a,db.max_code),eb.build_tree(bb),a=k-1;a>=3&&0===ab[2*b.bl_order[a]+1];a--);return bb.opt_len+=3*(a+1)+5+5+4,a}function i(a){bb.pending_buf[bb.pending++]=a}function l(a){i(255&a),i(a>>>8&255)}function o(a){i(a>>8&255),i(255&a&255)}function q(a,b){var c,d=b;mb>u-d?(c=a,lb|=c<<mb&65535,l(lb),lb=c>>>u-mb,mb+=d-u):(lb|=a<<mb&65535,mb+=d)}function J(a,b){var c=2*a;q(65535&b[c],65535&b[c+1])}function ea(a,b){var c,d,e=-1,f=a[1],g=0,h=7,i=4;for(0===f&&(h=138,i=3),c=0;b>=c;c++)if(d=f,f=a[2*(c+1)+1],!(++g<h&&d==f)){if(i>g){do J(d,ab);while(0!==--g)}else 0!==d?(d!=e&&(J(d,ab),g--),J(r,ab),q(g-3,2)):10>=g?(J(s,ab),q(g-3,3)):(J(t,ab),q(g-11,7));g=0,e=d,0===f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4)}}function fa(a,c,d){var e;for(q(a-257,5),q(c-1,5),q(d-4,4),e=0;d>e;e++)q(ab[2*b.bl_order[e]+1],3);ea($a,a-1),ea(_a,c-1)}function ga(){16==mb?(l(lb),lb=0,mb=0):mb>=8&&(i(255&lb),lb>>>=8,mb-=8)}function ha(){q(_<<1,3),J(p,c.static_ltree),ga(),9>1+kb+10-mb&&(q(_<<1,3),J(p,c.static_ltree),ga()),kb=7}function ia(a,c){var d,e,f;if(bb.pending_buf[ib+2*hb]=a>>>8&255,bb.pending_buf[ib+2*hb+1]=255&a,bb.pending_buf[fb+hb]=255&c,hb++,0===a?$a[2*c]++:(jb++,a--,$a[2*(b._length_code[c]+m+1)]++,_a[2*b.d_code(a)]++),0===(8191&hb)&&Wa>2){for(d=8*hb,e=Qa-Ma,f=0;j>f;f++)d+=_a[2*f]*(5+b.extra_dbits[f]);if(d>>>=3,jb<Math.floor(hb/2)&&d<Math.floor(e/2))return!0}return hb==gb-1}function ja(a,c){var d,e,f,g,h=0;if(0!==hb)do d=bb.pending_buf[ib+2*h]<<8&65280|255&bb.pending_buf[ib+2*h+1],e=255&bb.pending_buf[fb+h],h++,0===d?J(e,a):(f=b._length_code[e],J(f+m+1,a),g=b.extra_lbits[f],0!==g&&(e-=b.base_length[f],q(e,g)),d--,f=b.d_code(d),J(f,c),g=b.extra_dbits[f],0!==g&&(d-=b.base_dist[f],q(d,g)));while(hb>h);J(p,a),kb=a[2*p+1]}function ka(){mb>8?l(lb):mb>0&&i(255&lb),lb=0,mb=0}function la(a,b,c){ka(),kb=8,c&&(l(b),l(~b)),bb.pending_buf.set(Da.subarray(a,a+b),bb.pending),bb.pending+=b}function ma(a,b,c){q(($<<1)+(c?1:0),3),la(a,b,!0)}function na(a,b,e){var f,g,i=0;Wa>0?(cb.build_tree(bb),db.build_tree(bb),i=h(),f=bb.opt_len+3+7>>>3,g=bb.static_len+3+7>>>3,f>=g&&(f=g)):f=g=b+5,f>=b+4&&-1!=a?ma(a,b,e):g==f?(q((_<<1)+(e?1:0),3),ja(c.static_ltree,c.static_dtree)):(q((aa<<1)+(e?1:0),3),fa(cb.max_code+1,db.max_code+1,i+1),ja($a,_a)),d(),e&&ka()}function oa(a){na(Ma>=0?Ma:-1,Qa-Ma,a),Ma=Qa,va.flush_pending()}function pa(){var a,b,c,d;do{if(d=Ea-Sa-Qa,0===d&&0===Qa&&0===Sa)d=Aa;else if(-1==d)d--;else if(Qa>=Aa+Aa-da){Da.set(Da.subarray(Aa,Aa+Aa),0),Ra-=Aa,Qa-=Aa,Ma-=Aa,a=Ia,c=a;do b=65535&Ga[--c],Ga[c]=b>=Aa?b-Aa:0;while(0!==--a);a=Aa,c=a;do b=65535&Fa[--c],Fa[c]=b>=Aa?b-Aa:0;while(0!==--a);d+=Aa}if(0===va.avail_in)return;a=va.read_buf(Da,Qa+Sa,d),Sa+=a,Sa>=ba&&(Ha=255&Da[Qa],Ha=(Ha<<La^255&Da[Qa+1])&Ka)}while(da>Sa&&0!==va.avail_in)}function qa(a){var b,c=65535;for(c>xa-5&&(c=xa-5);;){if(1>=Sa){if(pa(),0===Sa&&a==z)return R;if(0===Sa)break}if(Qa+=Sa,Sa=0,b=Ma+c,(0===Qa||Qa>=b)&&(Sa=Qa-b,Qa=b,oa(!1),0===va.avail_out))return R;if(Qa-Ma>=Aa-da&&(oa(!1),0===va.avail_out))return R}return oa(a==C),0===va.avail_out?a==C?T:R:a==C?U:S}function ra(a){var b,c,d=Ua,e=Qa,f=Ta,g=Qa>Aa-da?Qa-(Aa-da):0,h=Za,i=Ca,j=Qa+ca,k=Da[e+f-1],l=Da[e+f];Ta>=Ya&&(d>>=2),h>Sa&&(h=Sa);do if(b=a,Da[b+f]==l&&Da[b+f-1]==k&&Da[b]==Da[e]&&Da[++b]==Da[e+1]){e+=2,b++;do;while(Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&j>e);if(c=ca-(j-e),e=j-ca,c>f){if(Ra=a,f=c,c>=h)break;k=Da[e+f-1],l=Da[e+f]}}while((a=65535&Fa[a&i])>g&&0!==--d);return Sa>=f?f:Sa}function sa(a){for(var b,c=0;;){if(da>Sa){if(pa(),da>Sa&&a==z)return R;if(0===Sa)break}if(Sa>=ba&&(Ha=(Ha<<La^255&Da[Qa+(ba-1)])&Ka,c=65535&Ga[Ha],Fa[Qa&Ca]=Ga[Ha],Ga[Ha]=Qa),0!==c&&Aa-da>=(Qa-c&65535)&&Xa!=x&&(Na=ra(c)),Na>=ba)if(b=ia(Qa-Ra,Na-ba),Sa-=Na,Va>=Na&&Sa>=ba){Na--;do Qa++,Ha=(Ha<<La^255&Da[Qa+(ba-1)])&Ka,c=65535&Ga[Ha],Fa[Qa&Ca]=Ga[Ha],Ga[Ha]=Qa;while(0!==--Na);Qa++}else Qa+=Na,Na=0,Ha=255&Da[Qa],Ha=(Ha<<La^255&Da[Qa+1])&Ka;else b=ia(0,255&Da[Qa]),Sa--,Qa++;if(b&&(oa(!1),0===va.avail_out))return R}return oa(a==C),0===va.avail_out?a==C?T:R:a==C?U:S}function ta(a){for(var b,c,d=0;;){if(da>Sa){if(pa(),da>Sa&&a==z)return R;if(0===Sa)break}if(Sa>=ba&&(Ha=(Ha<<La^255&Da[Qa+(ba-1)])&Ka,d=65535&Ga[Ha],Fa[Qa&Ca]=Ga[Ha],Ga[Ha]=Qa),Ta=Na,Oa=Ra,Na=ba-1,0!==d&&Va>Ta&&Aa-da>=(Qa-d&65535)&&(Xa!=x&&(Na=ra(d)),5>=Na&&(Xa==w||Na==ba&&Qa-Ra>4096)&&(Na=ba-1)),Ta>=ba&&Ta>=Na){c=Qa+Sa-ba,b=ia(Qa-1-Oa,Ta-ba),Sa-=Ta-1,Ta-=2;do++Qa<=c&&(Ha=(Ha<<La^255&Da[Qa+(ba-1)])&Ka,d=65535&Ga[Ha],Fa[Qa&Ca]=Ga[Ha],Ga[Ha]=Qa);while(0!==--Ta);if(Pa=0,Na=ba-1,Qa++,b&&(oa(!1),0===va.avail_out))return R}else if(0!==Pa){if(b=ia(0,255&Da[Qa-1]),b&&oa(!1),Qa++,Sa--,0===va.avail_out)return R}else Pa=1,Qa++,Sa--}return 0!==Pa&&(b=ia(0,255&Da[Qa-1]),Pa=0),oa(a==C),0===va.avail_out?a==C?T:R:a==C?U:S}function ua(b){return b.total_in=b.total_out=0,b.msg=null,bb.pending=0,bb.pending_out=0,wa=W,za=z,f(),a(),D}var va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb=this,cb=new b,db=new b,eb=new b;bb.depth=[];var fb,gb,hb,ib,jb,kb,lb,mb;bb.bl_count=[],bb.heap=[],$a=[],_a=[],ab=[],bb.pqdownheap=function(a,b){for(var c=bb.heap,d=c[b],f=b<<1;f<=bb.heap_len&&(f<bb.heap_len&&e(a,c[f+1],c[f],bb.depth)&&f++,!e(a,d,c[f],bb.depth));)c[b]=c[f],b=f,f<<=1;c[b]=d},bb.deflateInit=function(a,b,c,d,e,f){return d||(d=Z),e||(e=L),f||(f=y),a.msg=null,b==v&&(b=6),1>e||e>K||d!=Z||9>c||c>15||0>b||b>9||0>f||f>x?G:(a.dstate=bb,Ba=c,Aa=1<<Ba,Ca=Aa-1,Ja=e+7,Ia=1<<Ja,Ka=Ia-1,La=Math.floor((Ja+ba-1)/ba),Da=new Uint8Array(2*Aa),Fa=[],Ga=[],gb=1<<e+6,bb.pending_buf=new Uint8Array(4*gb),xa=4*gb,ib=Math.floor(gb/2),fb=3*gb,Wa=b,Xa=f,ya=255&d,ua(a))},bb.deflateEnd=function(){return wa!=W&&wa!=X&&wa!=Y?G:(bb.pending_buf=null,Ga=null,Fa=null,Da=null,bb.dstate=null,wa==X?H:D)},bb.deflateParams=function(a,b,c){var d=D;return b==v&&(b=6),0>b||b>9||0>c||c>x?G:(P[Wa].func!=P[b].func&&0!==a.total_in&&(d=a.deflate(A)),Wa!=b&&(Wa=b,Va=P[Wa].max_lazy,Ya=P[Wa].good_length,Za=P[Wa].nice_length,Ua=P[Wa].max_chain),Xa=c,d)},bb.deflateSetDictionary=function(a,b,c){var d,e=c,f=0;if(!b||wa!=W)return G;if(ba>e)return D;for(e>Aa-da&&(e=Aa-da,f=c-e),Da.set(b.subarray(f,f+e),0),Qa=e,Ma=e,Ha=255&Da[0],Ha=(Ha<<La^255&Da[1])&Ka,d=0;e-ba>=d;d++)Ha=(Ha<<La^255&Da[d+(ba-1)])&Ka,Fa[d&Ca]=Ga[Ha],Ga[Ha]=d;return D},bb.deflate=function(a,b){var c,d,e,f,g;if(b>C||0>b)return G;if(!a.next_out||!a.next_in&&0!==a.avail_in||wa==Y&&b!=C)return a.msg=Q[F-G],G;if(0===a.avail_out)return a.msg=Q[F-I],I;if(va=a,f=za,za=b,wa==W&&(d=Z+(Ba-8<<4)<<8,e=(Wa-1&255)>>1,e>3&&(e=3),d|=e<<6,0!==Qa&&(d|=V),d+=31-d%31,wa=X,o(d)),0!==bb.pending){if(va.flush_pending(),0===va.avail_out)return za=-1,D}else if(0===va.avail_in&&f>=b&&b!=C)return va.msg=Q[F-I],I;if(wa==Y&&0!==va.avail_in)return a.msg=Q[F-I],I;if(0!==va.avail_in||0!==Sa||b!=z&&wa!=Y){switch(g=-1,P[Wa].func){case M:g=qa(b);break;case N:g=sa(b);break;case O:g=ta(b)}if((g==T||g==U)&&(wa=Y),g==R||g==T)return 0===va.avail_out&&(za=-1),D;if(g==S){if(b==A)ha();else if(ma(0,0,!1),b==B)for(c=0;Ia>c;c++)Ga[c]=0;if(va.flush_pending(),0===va.avail_out)return za=-1,D}}return b!=C?D:E}}function g(){var a=this;a.next_in_index=0,a.next_out_index=0,a.avail_in=0,a.total_in=0,a.avail_out=0,a.total_out=0}function h(a){var b=this,c=new g,d=512,e=z,f=new Uint8Array(d);"undefined"==typeof a&&(a=v),c.deflateInit(a),c.next_out=f,b.append=function(a,b){var g,h,i=[],j=0,k=0,l=0;if(a.length){c.next_in_index=0,c.next_in=a,c.avail_in=a.length;do{if(c.next_out_index=0,c.avail_out=d,g=c.deflate(e),g!=D)throw"deflating: "+c.msg;c.next_out_index&&i.push(c.next_out_index==d?new Uint8Array(f):new Uint8Array(f.subarray(0,c.next_out_index))),l+=c.next_out_index,b&&c.next_in_index>0&&c.next_in_index!=j&&(b(c.next_in_index),j=c.next_in_index)}while(c.avail_in>0||0===c.avail_out);return h=new Uint8Array(l),i.forEach(function(a){h.set(a,k),k+=a.length}),h}},b.flush=function(){var a,b,e=[],g=0,h=0;do{if(c.next_out_index=0,c.avail_out=d,a=c.deflate(C),a!=E&&a!=D)throw"deflating: "+c.msg;d-c.avail_out>0&&e.push(new Uint8Array(f.subarray(0,c.next_out_index))),h+=c.next_out_index}while(c.avail_in>0||0===c.avail_out);return c.deflateEnd(),b=new Uint8Array(h),e.forEach(function(a){b.set(a,g),g+=a.length}),b}}var i=15,j=30,k=19,l=29,m=256,n=m+1+l,o=2*n+1,p=256,q=7,r=16,s=17,t=18,u=16,v=-1,w=1,x=2,y=0,z=0,A=1,B=3,C=4,D=0,E=1,F=2,G=-2,H=-3,I=-5,J=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];b._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],b.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],b.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],b.d_code=function(a){return 256>a?J[a]:J[256+(a>>>7)]},b.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],b.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],c.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],c.static_l_desc=new c(c.static_ltree,b.extra_lbits,m+1,n,i),c.static_d_desc=new c(c.static_dtree,b.extra_dbits,0,j,i),c.static_bl_desc=new c(null,b.extra_blbits,0,k,q);var K=9,L=8,M=0,N=1,O=2,P=[new d(0,0,0,0,M),new d(4,4,8,4,N),new d(4,5,16,8,N),new d(4,6,32,32,N),new d(4,4,16,16,O),new d(8,16,32,32,O),new d(8,16,128,128,O),new d(8,32,128,256,O),new d(32,128,258,1024,O),new d(32,258,258,4096,O)],Q=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],R=0,S=1,T=2,U=3,V=32,W=42,X=113,Y=666,Z=8,$=0,_=1,aa=2,ba=3,ca=258,da=ca+ba+1;g.prototype={deflateInit:function(a,b){var c=this;return c.dstate=new f,b||(b=i),c.dstate.deflateInit(c,a,b)},deflate:function(a){var b=this;return b.dstate?b.dstate.deflate(b,a):G},deflateEnd:function(){var a=this;if(!a.dstate)return G;var b=a.dstate.deflateEnd();return a.dstate=null,b},deflateParams:function(a,b){var c=this;return c.dstate?c.dstate.deflateParams(c,a,b):G},deflateSetDictionary:function(a,b){var c=this;return c.dstate?c.dstate.deflateSetDictionary(c,a,b):G},read_buf:function(a,b,c){var d=this,e=d.avail_in;return e>c&&(e=c),0===e?0:(d.avail_in-=e,a.set(d.next_in.subarray(d.next_in_index,d.next_in_index+e),b),d.next_in_index+=e,d.total_in+=e,e)},flush_pending:function(){var a=this,b=a.dstate.pending;b>a.avail_out&&(b=a.avail_out),0!==b&&(a.next_out.set(a.dstate.pending_buf.subarray(a.dstate.pending_out,a.dstate.pending_out+b),a.next_out_index),a.next_out_index+=b,a.dstate.pending_out+=b,a.total_out+=b,a.avail_out-=b,a.dstate.pending-=b,0===a.dstate.pending&&(a.dstate.pending_out=0))}};var ea;a.zip?a.zip.Deflater=h:(ea=new h,a.addEventListener("message",function(b){var c=b.data;c.init&&(ea=new h(c.level),a.postMessage({oninit:!0})),c.append&&a.postMessage({onappend:!0,data:ea.append(c.data,function(b){a.postMessage({progress:!0,current:b})})}),c.flush&&a.postMessage({onflush:!0,data:ea.flush()})},!1))}(this)}!function(b){function c(){var a=-1,b=this;b.append=function(c){var d,e=b.table;for(d=0;d<c.length;d++)a=a>>>8^e[255&(a^c[d])]},b.get=function(){return~a}}function d(a,b,c){return a.slice?a.slice(b,b+c):a.webkitSlice?a.webkitSlice(b,b+c):a.mozSlice?a.mozSlice(b,b+c):a.msSlice?a.msSlice(b,b+c):void 0}function e(){}function f(a){function b(b,c){var f=new Blob([a],{type:s});d=new g(f),d.init(function(){e.size=d.size,b()},c)}function c(a,b,c,e){d.readUint8Array(a,b,c,e)}var d,e=this;e.size=0,e.init=b,e.readUint8Array=c}function g(a){function b(b){this.size=a.size,b()}function c(b,c,e,f){var g=new FileReader;g.onload=function(a){e(new Uint8Array(a.target.result))},g.onerror=f,g.readAsArrayBuffer(d(a,b,c))}var e=this;e.size=0,e.init=b,e.readUint8Array=c}function h(){}function i(a){function b(b){e=new Blob([],{type:a}),b()}function c(b,c){e=new Blob([e,o?b:b.buffer],{type:a}),c()}function d(a){a(e)}var e,f=this;f.init=b,f.writeUint8Array=c,f.getData=d}function j(a,b,c,d,e,f,g,h,i,j,k){function l(){a.removeEventListener(t,m,!1),i(p)}function m(a){var b=a.data,d=b.data;b.onappend&&(p+=d.length,c.writeUint8Array(d,function(){f(!1,d),n()},k)),b.onflush&&(d?(p+=d.length,c.writeUint8Array(d,function(){f(!1,d),l()},k)):l()),b.progress&&g&&g(o+b.current,e)}function n(){o=s*r,e>o?b.readUint8Array(d+o,Math.min(r,e-o),function(b){q||(q=!0,h&&h()),a.postMessage({append:!0,data:b}),s++,f(!0,b)},j):a.postMessage({flush:!0})}var o,p,q,s=0;p=0,a.addEventListener(t,m,!1),n()}function k(a,b,c,d,e,f,g,h,i,j,k){function l(){var s;m=n*r,e>m?b.readUint8Array(d+m,Math.min(r,e-m),function(b){q||(q=!0,h&&h()),s=a.append(b,function(){}),p!==!1&&(g&&g(d+m+r,e),o+=s.length,f(!0,b),c.writeUint8Array(s,function(){f(!1,s),n++,setTimeout(l,1)},k))},j):(s=a.flush(),s?(o+=s.length,c.writeUint8Array(s,function(){f(!1,s),i(o)},k)):i(o))}var m,n=0,o=0,p=!0,q=!1;return l(),{terminate:function(){p=!1}}}function l(d,e,f,g,h,i,l,m){function n(a,b){a&&s.append(b)}function o(a){g(a,s.get()),URL.revokeObjectURL(r)}function p(){q.removeEventListener(t,p,!1),j(q,d,e,0,d.size,n,h,i,o,l,m)}var q,r,s=new c;return b.Deflater.useWebWorkers?(r=URL.createObjectURL(new Blob(["(",a.toString(),")()"],{type:"application/javascript"})),q=new Worker(r),q.addEventListener(t,p,!1),q.postMessage({init:!0,level:f})):q=k(new b.zip.Deflater,d,e,0,d.size,n,h,i,o,l,m),q}function m(a,b,d,e,f,g,h,i,j,k){function l(){var c=m*r;e>c?a.readUint8Array(d+c,Math.min(r,e-c),function(a){o||(o=!0,i&&i()),f&&n.append(a),h&&h(c,e,a),b.writeUint8Array(a,function(){m++,l()},k)},j):g(e,n.get())}var m=0,n=new c,o=!1;l()}function n(a,b){function c(a,b){f&&f.terminate(),f=null,a&&a(b)}function d(){c(b,p)}function e(){c(b,q)}var f;return{deflate:function(b,g,h,i,j){function k(){c(function(){a.getData(g)})}function n(){j=j||{},b?0===j.level?m(b,a,0,b.size,!0,k,h,i,e,d):f=l(b,a,j.level,k,h,i,e,d):k()}b?b.init(n,e):n()},cancel:c}}var o,p="Error while writing file data.",q="Error while reading file data.",r=16384,s="text/plain",t="message";try{o=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(u){}c.prototype.table=function(){var a,b,c,d=[];for(a=0;256>a;a++){for(c=a,b=0;8>b;b++)1&c?c=c>>>1^3988292384:c>>>=1;d[a]=c}return d}(),f.prototype=new e,f.prototype.constructor=f,g.prototype=new e,g.prototype.constructor=g,h.prototype.getData=function(a){a(this.data)},i.prototype=new h,i.prototype.constructor=i,b.zip={},b.Deflater=function(){},b.Deflater.prototype={deflateText:function(a,b,c,d,e,g){var h=new i("application/octet-stream"),j=this;h.init(function(){j.deflateWriter=n(h,c,!1);var i=new f(a);j.deflateWriter.deflate(i,b,d,e,g)})},cancel:function(){this.deflateWriter&&(this.deflateWriter.cancel(),delete this.deflateWriter)}};var v=!1;try{new Worker(URL.createObjectURL(new Blob(["//test"],{type:"application/javascript"}))),v=!0}catch(w){}b.Deflater.useWebWorkers=v}(this);var b=!1;try{new Worker(URL.createObjectURL(new Blob(["//test"],{type:"application/javascript"}))),b=!0}catch(c){}b||a.call(this)}var b=new a;"undefined"!=typeof exports?module.exports=b.Deflater:"undefined"!=typeof define&&define("Deflater",[],function(){return b.Deflater})}(),define("HTTP",["require","exports","HTTPRequest","Ajax","Logger","Deflater"],function(a,b,c,d,e,f){var g=function(){function a(){}return a.compressData=function(a,b){var c,d,e=this,g=new f,h=0,i=0,j=200,k=function(){var d=i*h/1024,f=Math.round(d/(Date.now()-c)*1e4)/10;e.logger.debug("Compression performance after "+j+"ms: "+d+"KB compressed ("+f+"KB/sec)"),0===d&&(g.cancel(),e.logger.debug("Cancelling POST compression due to low performance"),b(a,!1))},l=function(){d=setTimeout(k,j),c=Date.now()},m=function(a,b){0===h&&(h=a),i+=1},n=function(f){var g=Date.now()-c;d&&(clearTimeout(d),d=null),e.logger.debug("Compressed request data in "+g+"ms, "+Math.round(f.size/10.24)/100+"KB / "+Math.round(a.length/10.24)/100+"KB ("+Math.round(f.size/a.length*100)+"% of original):"),b(f,!0)},o=function(c){d&&(clearTimeout(d),d=null),b(a,!1)},p={};try{g.deflateText(a,n,o,m,l,p)}catch(q){o()}},a.request=function(a){var b=this,e=new c,f={url:a.url,type:a.type,data:a.data,timeout:"number"==typeof a.timeout?1e3*a.timeout:void 0,xhrFields:a.xhrFields,onloadstart:a.onloadstart,onprogress:a.onprogress,dataType:a.dataType,success:function(c,d,e,f){var g=(f.latency/1e3).toFixed(1),h=(f.duration/1e3).toFixed(1);b.logger.log("HTTP complete, status="+e.status+", latency="+g+"s, duration="+h+"s, url="+a.url),a.success&&a.success(c,d,e,f)},error:function(c,d,f,g){var h="unknown";c.readyState>=4&&(h=c.status.toString()),e.isAborted()||b.logger.error("HTTP error, status="+h+", type="+d+", message="+f+", url="+a.url),a.error&&a.error(c,d,f,g)}};return this.logger.log("HTTP load, timeout="+a.timeout+" url="+a.url),e.setXMLHttpRequest(d.request(f)),e},a.logger=new e("HTTP"),a}();return g}),define("HTTPRequestQueue",["require","exports"],function(a,b){var c=function(){function a(){this.requestQueue=[]}return a.prototype.addRequest=function(a){var b=this.requestQueue.length;return this.requestQueue.push(a),b},a.prototype.removeRequest=function(b){var c=this.requestQueue[b];a.abortRequest(c),this.requestQueue.slice(b,1)},a.prototype.removeAllRequests=function(){this.requestQueue.forEach(function(b){a.abortRequest(b)}),this.requestQueue=[]},a.abortRequest=function(a){a&&(a.getReadyState()>1||a.getReadyState()<4)&&a.abort()},a}();return c}),define("LiveRailResponse",["require","exports"],function(a,b){var c=function(){function a(){this.content=a.TYPE_UNKNOWN}return a.TYPE_UNKNOWN=null,a.TYPE_SOURCES="sources",a.TYPE_ADS="ads",a.TYPE_ERROR="error",a}();return c}),define("AdAsset",["require","exports"],function(a,b){var c=function(){function a(a,b,c,d,e){this.mimeType=d,this.kbps=e,this.width=a,this.height=b,this.url=c}return a.prototype.getMimeType=function(){return this.mimeType},a.prototype.getKbps=function(){return this.kbps},a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},a.prototype.getUrl=function(){return this.url},a.prototype.toString=function(){return"kbps="+this.kbps+" width="+this.width+" height="+this.height+" mime="+this.mimeType+" url="+this.url},a.prototype.requiresFlash=function(){return"video/x-flv"===this.mimeType||"application/x-shockwave-flash"===this.mimeType},a}();return c}),define("AdExtensionData",["require","exports"],function(a,b){var c=function(){function a(a,b){this.id=a,this.url=b}return a.prototype.getId=function(){return this.id},a.prototype.getUrl=function(){return this.url},a}();return c}),define("AdSlot",["require","exports","Tracker","AdCandidate"],function(a,b,c,d){var e=function(){function a(a,b){this.trackers={},this.adCandidates=[],this.adCandidateIndex=-1,this.impressionOccurred=!1,this.type=a,this.rule=b}return a.prototype.addTracker=function(a){if(null!==a){var b=c.formTrackerKey(a.getType(),a.getValue());this.trackers[b]||(this.trackers[b]=[]),this.trackers[b].push(a)}},a.prototype.addAdCandidate=function(a){null!==a&&this.adCandidates.push(a)},a.prototype.getTrackers=function(a,b){var d=c.formTrackerKey(a,b);return this.trackers[d]||null},a.prototype.getUniqueAdapterIds=function(){var a=[],b={};return this.adCandidates.forEach(function(c){b[c.adapter]||(a.push(c.adapter),b[c.adapter]=!0)}),a},a.prototype.getNextAdCandidate=function(){var a=null;return this.adCandidateIndex+1<this.adCandidates.length&&(this.adCandidateIndex+=1,a=this.adCandidates[this.adCandidateIndex]),a},a.prototype.getAdCandidateCount=function(){return this.adCandidates.length},a.prototype.registerImpression=function(){var a=this.adCandidates[this.adCandidateIndex];(a.type===d.TYPE_LINEAR||a.type===d.TYPE_OVERLAY)&&(this.adCandidates[this.adCandidateIndex].registerImpression(),this.impressionOccurred=!0)},a.prototype.hadImpression=function(){return this.impressionOccurred},a.TYPE_LINEAR="in",a.TYPE_OVERLAY="ov",a}();return e}),define("AdSource",["require","exports"],function(a,b){var c=function(){function a(a){this.url=null,this.erc=null,this.attributes={},this.priorities=[],this.url=a}return a.prototype.hasValidUrl=function(){return null!==this.url&&this.url.trim().length>0},a.prototype.getUrl=function(){return this.url},a.prototype.getErc=function(){
return this.erc},a.prototype.setErc=function(a){var b=parseInt(a,10);isNaN(b)||(this.erc=b)},a.prototype.getAttributes=function(){return this.attributes},a.prototype.getAttribute=function(a){return void 0!==this.attributes[a]?this.attributes[a]:null},a.prototype.setAttribute=function(a,b){this.attributes[a]=b},a.prototype.getPriorities=function(){return this.priorities},a.prototype.addPriority=function(a){this.priorities.push(a)},a.prototype.setPriorityDepth=function(a){this.priorityDepth=a},a}();return c}),define("CompanionAd",["require","exports","Tracker"],function(a,b,c){var d=function(){function a(a,b,c,d){this.trackers={},this.type=a,this.size=b,this.content=c,this.clickUrl=d}return a.prototype.getType=function(){return this.type},a.prototype.getSize=function(){return this.size},a.prototype.getWidth=function(){var a=null;if(this.size){var b=parseInt(this.size.split("x")[0],10);isNaN(b)||(a=b)}return a},a.prototype.getHeight=function(){var a=null;if(this.size){var b=parseInt(this.size.split("x")[1],10);isNaN(b)||(a=b)}return a},a.prototype.getContent=function(){return this.content},a.prototype.getClickUrl=function(){return this.clickUrl},a.prototype.addTracker=function(a){if(null!==a){var b=c.formTrackerKey(a.getType(),a.getValue());this.trackers[b]||(this.trackers[b]=[]),this.trackers[b].push(a)}},a.prototype.getTrackers=function(a,b){var d=c.formTrackerKey(a,b);return this.trackers[d]||null},a}();return d}),function(){"use strict";var a={};a.parse=function(a,b){function c(a){return/^\s*$/.test(a)?null:a}function d(a,b){var e,f,g,h,i,j=null,k=0,l="",m=!1;if(a.attributes&&a.attributes.length>0)for(j={},k=0;k<a.attributes.length;k+=1)e=a.attributes.item(k),j["@"+e.name]=c(e.value.trim());if(a.childNodes&&a.childNodes.length>0)for(i=0;i<a.childNodes.length;i+=1)f=a.childNodes.item(i),4===f.nodeType?(0===l.length&&(m=!0,l=" "),l+=f.nodeValue,m&&l.length>1&&(m=!1,l=l.substring(1))):3===f.nodeType?l+=f.nodeValue.trim():1!==f.nodeType||f.prefix||(0===k&&(j={}),g=f.nodeName.toLowerCase(),h=d(f,b),j.hasOwnProperty(g)?(j[g].constructor!==Array&&(j[g]=[j[g]]),j[g].push(h)):(b[f.nodeName.toLowerCase()]?j[g]=[h]:j[g]=h,k+=1));return l&&(k>0?j.cdata=c(l):j=c(l)),k>0&&"function"==typeof Object.freeze&&Object.freeze(j),j}return"object"!=typeof b&&(b={}),"object"==typeof a?d(a,b):null},"object"==typeof exports?module.exports=a:"function"==typeof define&&define("JXONParser",[],function(){return a})}(),define("LinearCreative",["require","exports","Logger"],function(a,b,c){var d=function(){function a(a,b,d,e){this.logger=new c("LinearCreative"),this.skipOffset=null,this.skipIsPercent=!1,this.assets=[],this.type=a,this.duration=b,this.skipOffset=d,this.skipIsPercent=e}return a.prototype.getType=function(){return this.type},a.prototype.getDuration=function(){return this.duration},a.prototype.getSkipOffset=function(){return this.skipOffset},a.prototype.getSkipIsPercent=function(){return this.skipIsPercent},a.prototype.addAdAsset=function(a){null!==a&&this.assets.push(a)},a.prototype.getAdAsset=function(a,b){var c=this,d=null,e={},f={};return this.assets.forEach(function(b,d){c.logger.debug("Considering linear asset at index "+d+" ("+b.toString()+")");var g=e[b.getMimeType()],h=f[b.getMimeType()];(!h||h.getKbps()>b.getKbps())&&(f[b.getMimeType()]=b),b.getKbps()<=a&&(!g||b.getKbps()>g.getKbps())&&(e[b.getMimeType()]=b)}),b.every(function(a){return d=e[a]||f[a],d?!1:!0}),this.logger.debug("Selected linear asset: "+d.toString()),d},a}();return d});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("LiveRailResponseSources",["require","exports","LiveRailResponse"],function(a,b,c){var d=function(a){function b(){a.call(this),this.data=null,this.content=c.TYPE_SOURCES}return __extends(b,a),b.prototype.getData=function(){return this.data},b.prototype.setData=function(a){"string"==typeof a&&a.trim().length>0&&(this.data=a)},b.prototype.addAdSource=function(a){this.adSources||(this.adSources=[]),this.adSources.push(a)},b.prototype.getAdSources=function(){return this.adSources},b}(c);return d});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("LiveRailResponseSlots",["require","exports","LiveRailResponse"],function(a,b,c){var d=function(a){function b(){a.call(this),this.setupGeo="",this.trid="",this.placementDefinition=null,this.adSlots=[],this.adSlotIndex=-1,this.content=c.TYPE_ADS}return __extends(b,a),b.prototype.getSetupGeo=function(){return this.setupGeo},b.prototype.setSetupGeo=function(a){this.setupGeo=a},b.prototype.getTrid=function(){return this.trid},b.prototype.setTrid=function(a){this.trid=a},b.prototype.getPlacementDefinition=function(){return this.placementDefinition},b.prototype.setPlacementDefinition=function(a){this.placementDefinition=a},b.prototype.addAdSlot=function(a){this.adSlots.push(a)},b.prototype.getAdSlots=function(){return this.adSlots},b.prototype.getNextAdSlot=function(){var a=null;return this.adSlotIndex+1<this.adSlots.length&&(this.adSlotIndex+=1,a=this.adSlots[this.adSlotIndex]),a},b.prototype.getUniqueAdapterIds=function(){var a=[],b={};return this.adSlots.forEach(function(c){c.getUniqueAdapterIds().forEach(function(c){b[c]||(a.push(c),b[c]=!0)})}),a},b.prototype.getAdCandidateCount=function(){var a=0;return this.adSlots.forEach(function(b){a+=b.getAdCandidateCount()}),a},b}(c);return d});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("LiveRailResponseError",["require","exports","LiveRailResponse"],function(a,b,c){var d=function(a){function b(b){a.call(this),this.content=c.TYPE_ERROR,this.errorMsg=b}return __extends(b,a),b}(c);return d}),define("NonLinearCreative",["require","exports"],function(a,b){var c=function(){function a(a){this.type=a}return a.prototype.getAdAsset=function(){return this.asset},a.prototype.setAdAsset=function(a){this.asset=a},a}();return c}),define("PlacementDefinition",["require","exports","Utils"],function(a,b,c){var d=function(){function a(b){if(this.placementType=0,this.minViewabilityPercentage=a.DEFAULT_MIN_VIEWABILITY_PERCENTAGE,this.minViewabilityDuration=0,this.refreshInterval=a.DEFAULT_REFRESH_INTERVAL_SECONDS,this.refreshThreshold=a.DEFAULT_REFRESH_THRESHOLD_SECONDS,this.maxDuration=0,this.maxPodSlots=1,this.maxPodDuration=0,this.allowExpand=!0,this.allowSMS=!0,this.allowTelephone=!0,this.allowWebcal=!0,this.allowResize=!0,this.allowPhoto=!0,this.allowCalendar=!0,this.indexMessage=null,this.countdownMessage="Advertisement ({COUNTDOWNTIME})",this.clickthroughMessage="Learn More »",this.skipCountdownMessage="Skip ad in {COUNTDOWN}",this.skipMessage="Skip ad »",this.hasServerData=!1,b){this.hasServerData=!0;var d=c.returnString(b["@type"]);d===a.PLACEMENT_NAME_INSTREAM?this.placementType=1:d===a.PLACEMENT_NAME_OVERLAY&&(this.placementType=2),this.minViewabilityPercentage=c.returnUnsignedInt(b["@min_viewability_percentage"],this.minViewabilityPercentage),this.minViewabilityDuration=c.returnFloat(b["@min_viewability_duration"],this.minViewabilityDuration),this.refreshInterval=c.returnInt(b["@refresh"],this.refreshInterval),this.refreshThreshold=c.returnInt(b["@refresh_threshold"],this.refreshThreshold),this.maxDuration=c.returnFloat(b["@max_duration"],this.maxDuration),this.maxPodSlots=c.returnUnsignedInt(b["@max_pod_slots"],this.maxPodSlots),this.maxPodDuration=c.returnFloat(b["@max_pod_duration"],this.maxPodDuration),this.allowExpand=c.returnBoolean(b["@allow_expand"],this.allowExpand),this.allowSMS=c.returnBoolean(b["@allow_sms"],this.allowSMS),this.allowTelephone=c.returnBoolean(b["@allow_tel"],this.allowTelephone),this.allowWebcal=c.returnBoolean(b["@allow_webcal"],this.allowWebcal),this.allowResize=c.returnBoolean(b["@allow_resize"],this.allowResize),this.allowPhoto=c.returnBoolean(b["@allow_photo"],this.allowPhoto),this.allowCalendar=c.returnBoolean(b["@allow_calendar"],this.allowCalendar),this.indexMessage=c.returnString(b["@index_message"],this.indexMessage),this.countdownMessage=c.returnString(b["@countdown_message"],this.countdownMessage),this.clickthroughMessage=c.returnString(b["@click_through_message"],this.clickthroughMessage),this.skipCountdownMessage=c.returnString(b["@skip_countdown_message"],this.skipCountdownMessage),this.skipMessage=c.returnString(b["@skip_message"],this.skipMessage)}}return a.placementNameForType=function(b){switch(b){case 1:return a.PLACEMENT_NAME_INSTREAM;case 2:return a.PLACEMENT_NAME_OVERLAY;default:return null}},a.prototype.isFromServer=function(){return this.hasServerData},a.PLACEMENT_NAME_INSTREAM="video-in",a.PLACEMENT_NAME_OVERLAY="video-ov",a.PLACEMENT_NAME_BANNER="banner",a.PLACEMENT_NAME_INTERSTITIAL="interstitial",a.PLACEMENT_NAME_NATIVE="native",a.DEFAULT_REFRESH_INTERVAL_SECONDS=-1,a.DEFAULT_REFRESH_THRESHOLD_SECONDS=-1,a.DEFAULT_MIN_VIEWABILITY_PERCENTAGE=1,a}();return d}),define("LiveRailSchemaParser",["require","exports","AdAsset","AdCandidate","AdExtensionData","AdSlot","AdSource","CompanionAd","JXONParser","LinearCreative","LiveRailResponse","LiveRailResponseSources","LiveRailResponseSlots","LiveRailResponseError","Logger","NonLinearCreative","PlacementDefinition","Tracker","Utils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=function(){function a(){this.logger=new o("LiveRailSchemaParser")}return a.prototype.parseResponse=function(a){var b=null;try{var c=i.parse(a,{source:!0,adslot:!0,ad:!0,tracker:!0,url:!0,companion:!0,param:!0});if(!c)throw"JXONParser failure";this.logger.debug("Parsed LiveRail XML:",c);var d=c.liverail;switch(d["@content"]){case k.TYPE_SOURCES:b=new l,this.parseDataNode(d,b),this.parseAdSources(d,b);break;case k.TYPE_ADS:b=new m,this.parseAds(d,b);break;case k.TYPE_ERROR:b=new n(d.message);break;default:b=new k}}catch(e){return this.logger.error("Error parsing LiveRail response:",e),null}return b},a.prototype.parseDataNode=function(a,b){try{b.setData(a.data)}catch(c){this.logger.error("Error parsing data node:",c.message)}},a.prototype.parseAdSources=function(a,b){var c=this;try{a.sources.source.forEach(function(a){var d=c.parseAdSource(a);null!==d&&b.addAdSource(d)})}catch(d){this.logger.error("Error parsing ad sources:",d.message)}},a.prototype.parseAdSource=function(a){var b,c,d=null;try{d=new g(a.url[0]);for(var e in a)if(a.hasOwnProperty(e)&&"@"===e.substr(0,1))if(b=e.substr(1),c=a[e],"erc"===b)d.setErc(c);else{if(d.setAttribute(b,c),"asp"===b&&"string"==typeof c){var f=c.split(":");f.forEach(function(a){d.addPriority(parseInt(a,10))})}"dpt"===b&&d.setPriorityDepth(parseInt(c,10)-1)}}catch(h){this.logger.error("Error parsing ad source:",h.message)}return d},a.prototype.parseAds=function(a,b){var c=this;try{if(b.setSetupGeo(a.setup.data.geo),b.setTrid(a.setup.data.trid),a.setup.placement){var d=new q(a.setup.placement.definition);b.setPlacementDefinition(d)}a.ads&&Array.isArray(a.ads.adslot)&&a.ads.adslot.forEach(function(a){var d=c.parseAdSlot(a);null!==d&&b.addAdSlot(d)})}catch(e){this.logger.error("Error parsing ads:",e.message)}},a.prototype.parseAdSlot=function(a){var b=this,c=null;try{var d=new f(a["@type"],a["@rule"]);a.ad&&a.ad.forEach(function(a){var c=b.parseAdCandidate(a);null!==c&&d.addAdCandidate(c)}),a.trackers&&a.trackers.tracker&&a.trackers.tracker.forEach(function(a){var c=b.parseTracker(a);null!==c&&d.addTracker(c)}),null!==d&&(c=d)}catch(e){this.logger.error("Error parsing ad slot node:",e.message)}return c},a.prototype.parseAdCandidate=function(a){var b=this,c=null;try{if(a){c=new d,c.adapter=a["@adapter"],c.server=a["@server"],c.type=a["@type"],c.networkID=a["@nid"],c.connectionID=a["@coid"],c.scenarios=a["@ss"],c.values=a["@nr"],c.orderID=a["@oid"],c.orderLineID=a["@olid"],c.creativeID=a["@cid"]||"",c.uniqueCreativeID=a["@ucid"]||"",a.thirdparty&&a.thirdparty.param.forEach(function(a){c.setThirdPartyData(a["@name"],a.cdata)}),c.textTitle=a.text_title||"",c.textDescription=a.text_description||"",c.textUrl=a.text_url||"",c.clickThruUrl=s.returnString(a.clickthru,"").trim(),c.adChoicesUrl=s.returnString(a.adchoices_url,"").trim();var e=this.parseLinearCreative(a.linear);null!==e&&c.setLinearCreative(e);var f=this.parseNonLinearCreative(a.nonlinear);null!==f&&c.setNonLinearCreative(f),a.trackers&&a.trackers.tracker&&a.trackers.tracker.forEach(function(a){var d=b.parseTracker(a);null!==d&&c.addTracker(d)}),a.companions&&a.companions.companion&&a.companions.companion.forEach(function(a){var d=b.parseCompanion(a);null!==d&&c.addCompanionAd(d)})}}catch(g){this.logger.error("Error parsing ad candidate:",g.message)}return c},a.prototype.parseLinearCreative=function(a){var b=null;if(a)try{b=new j(a["@type"],s.returnFloat(a["@duration"],null),s.returnFloat(a["@skipoffset"],-1),a["@skipoffset"].indexOf("%")>-1),Array.isArray(a.url)&&a.url.forEach(function(a){var d=new c(s.returnUnsignedInt(a["@width"],null),s.returnUnsignedInt(a["@height"],null),a.cdata,a["@mimetype"],s.returnUnsignedInt(a["@kbps"],null));b.addAdAsset(d)})}catch(d){this.logger.error("Error parsing linear ad:",d.message)}return b},a.prototype.parseNonLinearCreative=function(a){var b=null;if(a)try{b=new p(a["@type"]);var d=a.creative,e=new c(d["@width"],d["@height"],d.url);b.setAdAsset(e)}catch(f){this.logger.error("Error parsing non linear ad:",f.message)}return b},a.prototype.parseCompanion=function(a){var b=this,c=null;if(a)try{c=new h(a["@type"],a["@size"],a.content,a.clickthru),a.trackers&&a.trackers.tracker&&a.trackers.tracker.forEach(function(a){var d=b.parseTracker(a);null!==d&&c.addTracker(d)})}catch(d){this.logger.error("Error parsing companion ad:",d.message)}return c},a.prototype.parseTracker=function(a){var b=null;try{b=new r(a["@type"],a["@value"]),a.url&&a.url.forEach(function(a){b.addUrl(a)})}catch(c){this.logger.error("Error parsing tracker:",c.message)}return b},a.prototype.parseAdExtension=function(a){var b=null;if(a)try{b=new e(a["@id"],a.url[0])}catch(c){this.logger.error("Error parsing ad extension:",c.message)}return b},a}();return t}),define("VASTResponseType",["require","exports"],function(a,b){var c;return function(a){a[a.unknown=0]="unknown",a[a.nodata=1]="nodata",a[a.empty=2]="empty",a[a.inline=3]="inline",a[a.wrapper=4]="wrapper",a[a.error=5]="error"}(c||(c={})),c}),define("VASTResponse",["require","exports","VASTResponseType"],function(a,b,c){var d=function(){function a(a,b){if(this.type=c.unknown,this.body="",this.wrapperUrl=null,this.mediaFileNodeList=null,this.body=b.responseText,null===a||"function"!=typeof a.getElementsByTagName)0===this.body.trim().length&&(this.type=c.nodata);else{var d=a.querySelector("VAST")||a.querySelector("VideoAdServingTemplate");if(d){var e=d.querySelector("Ad");if(!e)return void(d.hasAttribute("error")?this.type=c.error:this.type=c.empty);if(e){var f=e.querySelector("Wrapper");if(f){this.type=c.wrapper;var g=f.getElementsByTagName("VASTAdTagURI")[0]||f.getElementsByTagName("VASTAdTagURL")[0];return void(g&&(this.wrapperUrl=g.textContent))}}this.type=c.inline,this.mediaFileNodeList=e.getElementsByTagName("MediaFile")}}}return a.prototype.getType=function(){return this.type},a.prototype.getBody=function(){return this.body},a.prototype.getWrapperUrl=function(){return this.wrapperUrl},a.prototype.hasValidWrapperUrl=function(){return null!==this.wrapperUrl&&this.wrapperUrl.trim().length>0},a.prototype.hasValidMediaFileInList=function(a){var b=!1;if(this.mediaFileNodeList.length>0)for(var c,d,e=0;e<this.mediaFileNodeList.length;e+=1)if(d=this.mediaFileNodeList[e].attributes,d&&d.type&&"string"==typeof d.type.value){c=d.type.value.toLowerCase();for(var f=0;f<a.length;f+=1)if(a[f].toLowerCase()===c){b=!0;break}}return b},a}();return d}),define("AdProvider",["require","exports","AdSourceRequest","EventManager","HTTP","HTTPRequestQueue","LiveRailResponse","LiveRailSchemaParser","LogEvent","LogEventType","Logger","Utils","VASTResponse","VASTResponseType"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=function(){function a(a){this.active=!1,this.requestQueue=new f,this.logger=new k("AdProvider"),this.eventManager=new d,this.liverailSchemaParser=new h,this.adSourceDataNode=null,this.adParameters=a.getAdParameters(),this.mimeTypePriorityList=a.mimeTypePriorityList,this.endpointUrl=this.getAdServerEndpoint(a),this.logger.debug("Using ad server endpoint:",this.endpointUrl)}return a.prototype.getAd=function(a){this.logger.debug("getAd(",a,")"),this.active=!0,this.currentAdRequestParameters=a,this.makeFirstAdRequest()},a.prototype.cancel=function(){this.destroy()},a.prototype.subscribe=function(a,b,c){this.eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this.eventManager.unsubscribe(a,b)},a.prototype.destroy=function(){this.active=!1,this.endpointUrl=null,this.requestQueue.removeAllRequests()},a.prototype.getAdServerEndpoint=function(a){var b="https:"===a.parentWindow.location.protocol?"https:":"http:",c=b+"//ad4.liverail.com/";return a.urlPrefix&&(c=b+"//ad4."+a.urlPrefix+".liverail.com/"),c},a.prototype.onComplete=function(){this.eventManager.dispatch("complete")},a.prototype.makeFirstAdRequest=function(){var a=this;this.logger.log("Making first request to "+this.endpointUrl+" with parameters:",this.currentAdRequestParameters);var b=[];for(var c in this.currentAdRequestParameters)this.currentAdRequestParameters.hasOwnProperty(c)&&b.push(c);b.sort(),this.logger.log("Ad request parameters:");for(var d=0;d<b.length;d+=1)this.logger.log("    "+b[d]+" = "+this.currentAdRequestParameters[b[d]]);var f=l.serialize(this.currentAdRequestParameters);this.requestQueue.addRequest(e.request({url:this.endpointUrl,type:"POST",data:f,dataType:"xml",timeout:this.adParameters.adDeliveryTimeout,success:function(b){a.active&&a.handleFirstAdResponse(b,null)},error:function(b,c,d){if(a.active){var e=i.eventWithType(j.AdSourcesRequestFailed,{status:b.status,textStatus:c});"timeout"===c&&(e=i.eventWithType(j.AdSourcesRequestTimeout)),a.handleFirstAdResponse(null,e)}}}))},a.prototype.handleFirstAdResponse=function(b,c){null!==c?(this.destroy(),this.eventManager.dispatch(a.AdProviderError,[c])):this.parseLiveRailResponse(b,!0)},a.prototype.parseLiveRailResponse=function(b,c){this.logger.debug("Parsing LiveRail XML:",b);var d=this.liverailSchemaParser.parseResponse(b);if(d){this.logger.debug("Parsed LiveRail "+d.content+" response:",d);var e=null;switch(d.content){case g.TYPE_UNKNOWN:e=[i.eventWithType(j.XMLUnknownResponse)];break;case g.TYPE_ERROR:var f=d;e=[i.eventWithType(j.XMLErrorMessage,{message:f.errorMsg})];break;case g.TYPE_SOURCES:var h=d;if(c){if(!(h.getAdSources().length<=0))return this.adSourceDataNode=h.getData(),void this.queryAdSources(h.getAdSources());e=[i.eventWithType(j.NoAdSources)]}else e=[i.eventWithType(j.XMLDuplicateSources)];break;case g.TYPE_ADS:var k=d;if(!(k.getAdSlots().length<=0))return void this.eventManager.dispatch(a.AdProviderSuccess,[d]);e=[i.eventWithType(j.NoAdSlots)]}null!==e&&this.eventManager.dispatch(a.AdProviderError,e)}else this.eventManager.dispatch(a.AdProviderError,[i.eventWithType(j.XMLParseFailure)])},a.prototype.queryAdSources=function(a){var b=this;this.logger.log("Processing "+a.length+" ad sources"),this.adSourceRequests=[],this.adSourceQueryCount=0,this.registeredAdSourceCount=0,a.forEach(function(a,d){b.adSourceRequests[d]=new c(d,a),null!==a.getUrl()&&0===a.getErc()&&(b.adSourceQueryCount+=1,b.queryAdSourceURL(b.adSourceRequests[d]))})},a.prototype.queryAdSourceURL=function(b,c,d){var f=this;void 0===c&&(c=null),void 0===d&&(d=!0);var g=b.getId(),h=b.getResponses().length,i=null===c?b.getAdSource().getUrl():c;this.logger.log("Querying ad source: id="+g+" wrapper="+h+" url="+i);this.requestQueue.addRequest(e.request({url:i,type:"GET",dataType:"xml",timeout:this.adParameters.adRequestTimeout,xhrFields:{withCredentials:d},success:function(a,c,d,e){if(f.active){f.logger.verbose("Retrieved VAST response for request id "+g+":",a);var i=new m(a,d);switch(f.logger.verbose("Parsed VAST response for request id "+g+":",i),e.duration&&b.increaseTotalDuration(e.duration),i.getType()){case n.unknown:f.logger.warn("Ad request id "+g+" completed with unknown status"),b.setStatus(0),b.addResponse(i.getBody());break;case n.nodata:f.logger.debug("Ad source for request id "+g+" responded with no data"),b.setStatus(1);break;case n.empty:f.logger.debug("Ad source for request id "+g+" responded with empty VAST"),b.setStatus(1);break;case n.wrapper:if(i.hasValidWrapperUrl()){if(h<f.adParameters.wrapperLimit)return f.logger.debug("Ad source for request id "+g+" responded with wrapper url="+i.getWrapperUrl()),b.addResponse(i.getBody()),void f.queryAdSourceURL(b,i.getWrapperUrl());f.logger.debug("Ad request id "+g+" has exceed the wrapper limit of "+f.adParameters.wrapperLimit),b.setStatus(302)}else f.logger.error("Ad source for request id "+g+" responded with invalid wrapper"),b.setStatus(0),b.addResponse(i.getBody());break;case n.inline:i.hasValidMediaFileInList(f.mimeTypePriorityList)?(f.logger.log("Ad request id "+g+" completed successfully"),b.setStatus(0),b.addResponse(i.getBody())):(f.logger.warn("Ad source response for request id "+g+" contains no usable MediaFile nodes"),b.setStatus(200));break;case n.error:f.logger.log("Ad request id "+g+" completed with C2S proxy error"),b.setStatus(0),b.addResponse(i.getBody())}f.registerAdSourceRequest()}},error:function(e,h,j,k){if(f.active){if(k.duration&&b.increaseTotalDuration(k.duration),d&&"error"===h&&0===e.status)return f.logger.error("Possible CORS error, retrying ad call using withCredentials:false"),void f.queryAdSourceURL(b,c,!1);"timeout"!==h&&204===e.status?(f.logger.debug("Ad source for request id "+g+" responded with 204 No Content"),b.setStatus(1)):(f.logger.error("Error loading ad source:"+h+", id="+g+", ajaxObject=",e,", url="+i),"parsererror"===h?(b.addResponse(e.responseText),b.setStatus(0)):"timeout"===h?b.setStatus(301):b.setStatus(300)),(301===b.getStatus()||300===b.getStatus())&&f.eventManager.dispatch(a.AdSourceRequestError,[b]),f.registerAdSourceRequest()}}}))},a.prototype.registerAdSourceRequest=function(){this.active&&(this.registeredAdSourceCount+=1,this.registeredAdSourceCount===this.adSourceQueryCount&&this.prepareSecondAdRequest())},a.prototype.prepareSecondAdRequest=function(){var a={},b=this.currentAdRequestParameters;for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);null!==this.adSourceDataNode&&(a.data=this.adSourceDataNode),a.LR_POSTXML="true",this.adSourceRequests.forEach(function(b){var c=b.getAdSource().getAttributes(),d=b.getId();for(var e in c)c.hasOwnProperty(e)&&(a[e+d]=c[e]||"");if(a["erc"+d]=b.getStatus(),b.getTotalDuration()>0&&(a["rtt"+d]=b.getTotalDuration()),b.getAdSource().hasValidUrl()&&0===b.getStatus()){var f=b.getResponses();f.length>1&&(a["subresponse"+d]=[]),f.forEach(function(b,c){0===c?a["response"+d]=b:a["subresponse"+d].push(b)})}}),this.makeSecondAdRequest(a)},a.prototype.makeSecondAdRequest=function(a){var b=this;this.logger.log("Making second request to "+this.endpointUrl+" with parameters:",a);var c=this.endpointUrl,d=l.serialize(a);e.compressData(d,function(a,f){var g,h=k.getDebugLevel();f&&3>h?(c+="?compressed",g=a):(b.logger.verbose("Debug level "+h+", passing uncompressed request data"),g=d),b.requestQueue.addRequest(e.request({url:c,type:"POST",data:g,dataType:"xml",timeout:b.adParameters.adDeliveryTimeout,success:function(a){b.active&&b.handleSecondAdResponse(a,null)},error:function(a,c,d){if(b.active){var e=i.eventWithType(j.AdsRequestFailed);"timeout"===c&&(e=i.eventWithType(j.AdsRequestTimeout)),b.handleSecondAdResponse(null,e)}}}))})},a.prototype.handleSecondAdResponse=function(b,c){null!==c?(this.destroy(),this.eventManager.dispatch(a.AdProviderError,[c])):this.parseLiveRailResponse(b,!1)},a.AdProviderSuccess="AdProviderSuccess",a.AdProviderError="AdProviderError",a.AdSourceRequestError="AdSourceRequestError",a}();return o}),function(){"use strict";var a={getBrowserFeatures:function(){var a={mode:"fast"};return JSON.stringify(a)}};"undefined"!=typeof exports?module.exports=a:"undefined"!=typeof define&&define("BrowserFeatures",[],function(){return a})}(),define("InterfaceAsset",["require","exports"],function(a,b){var c=function(){function a(a){this.base64String=a.base64String}return a.getBase64ImgSrc=function(a){return"data:image/png;base64,"+a.base64String},a.getCSSBackgroundUrl=function(b){return"url('"+a.getBase64ImgSrc(b)+"')"},a.AD_CHOICES_ICON={base64String:"iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAA58mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMwNjcgNzkuMTU3NzQ3LCAyMDE1LzAzLzMwLTIzOjQwOjQyICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNi0wMS0wNVQxMjoyNjoxOC0wODowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE2LTAxLTA1VDEyOjI4OjI2LTA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNi0wMS0wNVQxMjoyODoyNi0wODowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDoyYTM2ZTRjNy1iN2NlLTRmZDQtYTA5Yi02YWI0MWRlMmYzODY8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyYmM4ZWNjYS1mNDc5LTExNzgtYjM3ZC1jM2MyN2FlMjk1ZTI8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDo1MDNkYjI2Ny1kOWFhLTQxNzQtODI0MC0yZDhhMzEwNTAzMGM8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NTAzZGIyNjctZDlhYS00MTc0LTgyNDAtMmQ4YTMxMDUwMzBjPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE2LTAxLTA1VDEyOjI2OjE4LTA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6MmEzNmU0YzctYjdjZS00ZmQ0LWEwOWItNmFiNDFkZTJmMzg2PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE2LTAxLTA1VDEyOjI4OjI2LTA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoTWFjaW50b3NoKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+Mjg8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+Mjg8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PqGe3N0AAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAi1JREFUeNrc1jGLE0EUAOAhxWFxBLEQOSRIOK46rERSiBxiEawsjJXVFSLCtVYWCweSHNmZN5udNyxJ3Mx7+AuuECsRK7G2sJAgV4iIiIWIhBAr75LdNWZzewouTLPszjfzZt6bEZPJRPzNJv4ZKKVb08jPNPJ7QGZl6Zoo8EmBGumptjyZacgvi4IzQP6aAguE0+AUAMgjQH4LSOOi4LmgsnxPCCFaQfe8RooAeZSEfeO2Cpyhuzj9sTS8DkhPkjMGyy8WheeC2tJm1k+yE29qpP3kGi8C5wZ3gmCl2YzKQgjhY1zTSM/zwLnAvWBQBUuftaXv0nD913uF7rq29GoROBeoQlc77My4u8nRK+SbgPQmC1adeGupkMrAXZaG657nlbJC5nleCdDdAUvDFIy0mwtsNBoljexrpM5OEKzM2xzNZlQG5HfJvM4XUnT1wxw17tY8UKn4dAb4OhcIxt0+KgpuOzuk8Skw7j4gHST6GvkY1woDW63+qjb0QCN9SKzdWCOxH7qN3JsmC3wUujPK8K5G/pJcL4XspOH1pdNiGtTWPdTIPiB9yyj48V4wqB478WfB5JbnkTbUV/i4unRpkx26NJOD4SADpJFG7ioVXzh+8Ub2AbpnJdLVdtirtMNeBSx/PIIoaoe9SmHH0yxOnzxjVr0gKCsc3JDSrRVyAIPlH78Bh3+qLsuB6eI7BiSnVHTuZC5Rhq6ApSEgHWikDmB/40Svif/tzfvnAOvtSxz/Lz6cAAAAAElFTkSuQmCC"
},a.LARGE_PLAY_BUTTON={base64String:"iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABFZJREFUeNrs3dtLI1ccB/BcNJe1yU7cohN121wUjCL1FitUUUnBQl5WWHxSqP+AD4Kvviq+CL4JFYuXFx+0IIIvwS1aSBHUQrVBnGTKrsaUrk4mpslE1+zvBLObtkubpmDmJL8vDDPJHDLhw5n5nRn0RKn4e3QMw9TD2gILc/8ek7FdLBHul/Q2LwiCD9bxzEYlmS8ArjeZTHYajcbH3d3dzWaz2aLRaHRkn8FgYEtLS3XFIHdzcxOPRCIXZDuRSMSDwSC/s7NzCDZhpVLpBcgX6bbKDLxnAPe52+3utdvtnfAB0vHx8etAIBBJtzk9Pb0uBsDa2tqP0ttWq9XQ0NDwBDqQluM47+bm5gtRFH8ExO/eAQLcVwDYMzIy8rVWq/14e3v71d7e3msF5l2cTueTvr6+GkmSfl9YWPgWAL8HyC01wDHQLZ8PDw8/B+WalZWVE5/PJyLZn3N+fh7jeV5saWl5arPZKg4ODsI6ne5QDde43ra2ti9gx5eLi4u+s7OzGHJ9OHBZuyWIUB8c19fXPFiFVdD7LE1NTc1wrRMQ799DjIgVMSN2BJCFs5g9OTkRkCe7ECtiRuxU6SEKVJgI0mQXYkXMyLYq/ebl5WUCabJLppUKOf5fEBABERABERCDgAiIgAiIQUAEREAExCBg0QBOT0/XmEwmNQLmmMHBwcqtrS3HwMDAYwTMMZWVldqZmZna5eVlu81m0yBgjunq6mI2NjYco6OjFQiYY8rKykrGxsaeejweR2trqx4Bc4zdbn+0trbWQEORkfUwhoYiI/txoNyLDDUDabkWGaruRORYZKi8lZNTkaH6XlgORYb6hwn5LjIF8zQmX0WmoB5n5aPIFOTzQJZlNdAjDQ9xrJJCw9vd3RUmJiZe+v3+BAL+h4RCIWlqaurl+vp6+CGPWxCAq6urocnJyeDV1dWbhz421YAcx/0xPj7O7+/v5+2/C6gEjEajt3Nzc8HZ2dnf8v1dqAN86CJRMID5KhIFAZjPIkE1oByKBJWAcioS1AHKrUhQAyjXIkEFoJyLhKwBaSgSsgZ0uVy/0H4fjn8fiIAIiIAIiEFABERABMQgIAIiIAJiEBABaQMks9ZmTryK+ecQK2KWBhTIlL9ms/kR0mQXYnU/TbKQAgyFQnxdXR2DNNmFWBGzFODd3Z3P6/UeVlVVGfA0zu70JVbEjNipIGTm3vDFxYXP7XZb9Hq9Gpk+HGJDjIhVagZfsFPHIWS6d47j4k6ns7mxsbHC7/eLsVjsDZK9T3l5uWZoaKhOq9VKS0tLy+DzQzgc/jnV2yRJegUr69HR0Wl7e7ujo6PjU5PJVBqNRm/I3MnFDFddXa3v6elh+/v7P4GXV/Pz898A3K+iKJKp4G+VGW11RqPxGXTLepfL9ZnVaq1nWbYe+55CQU7ZQCDg83g8P5Hr3j1eahij/GtjhmEs0KiTTDINiw75FIpkMhmHhYfORX7Jgc/c91aAAQBVWxmAi5XwnAAAAABJRU5ErkJggg=="},a.SMALL_PLAY_BUTTON={base64String:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAActJREFUeNpiZAACAQEBAyAFwiCgwEA5eAClL3z48OECC9ACByDHITg42F5cXFyBlZWVg5eXV4Jc0z9//vzi9+/fP16+fPlg7dq1CkDzBVj+//9vERUV5S4mJmZ47Nix5+/fv//49OnTF9+/f/9LqgWcnJzM0tLSnIKCguyOjo42kZGRHMuWLfvBwsjIyKGsrGyxYsWKm3fu3PlCSRiBHAY14wvQsT8jIiIsgObvZOLj42MHKaDUAnQAMw9kPtOnT59+/vr16w8DjQDIfCYQg42NjYWBhoCJgQ6AaEu6urpkgKmGmaaWhIWFie/YsUMTmDR5aBpcwMzKPn/+fPXp06fLk+IrsuLE09NT5MiRIzqBgYH8NI14bm5ulv7+fhVQXNE0da1ateple3v7c0LqyMofwMLvZ0VFxYP9+/cTVUqQbMmcOXOetbS0PCdFD9GW3L1791tpaemDc+fOfSfVYURb4uzsfH14FCtDwxJQnayrq8tPTYNB5gFryg8wSz48evTogpOTkyyofqaGBSBzgEWPwoMHDy6AzGcEtVaAVaS7t7e3A6iup5ZPgEn+xNatWw8Aa8adjNB62IOJicmC2nHx79+/E0BLdgAEGACb67HFg0eK6wAAAABJRU5ErkJggg=="},a.SMALL_PAUSE_BUTTON={base64String:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAV1JREFUeNpiZAACAQEBAyAFwiCgwEA5eAClL3z48OECC9ACByDHITg42F5cXFyBlZWVg5eXV4Jc0z9//vzi9+/fP16+fPlg7dq1CkDzBVj+//9vERUV5S4mJmZ47Nix5+/fv//49OnTF9+/f/9LqgWcnJzM0tLSnIKCguyOjo42kZGRHMuWLfvBwsjIyKGsrGyxYsWKm3fu3PlCSRiBHAY14wvQsT8jIiIsgObvZOLj42MHKaDUAnQAMw9kPtOnT59+/vr16w8DjQDIfCYQg42NjYWBhoCJgQ6AKEsePHhgDMKExAa/T0YtGbVk8FpCVHGioKBwlhix0TihniWgOllXV5efmgaDzAPWlB9glnx49OjRBScnJ1lQ/UwNC0DmeHp6KgBL6Qsg8xlBrRVgFenu7e3tAKrrqeWTu3fvnti6desBYM24kxFaD3swMTFZUDsu/v37dwJoyQ6AAAMA3I+OLwkeBn4AAAAASUVORK5CYII="},a.SMALL_MUTE_BUTTON={base64String:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAjhJREFUeNpiZAACAQEBAyAFwiCgwEA5eAClL3z48OECC9ACByDHITg42F5cXFyBlZWVg5eXV4Jc0z9//vzi9+/fP16+fPlg7dq1CkDzBVj+//9vERUV5S4mJmZ47Nix5+/fv//49OnTF9+/f/9LqgWcnJzM0tLSnIKCguyOjo42kZGRHMuWLfvBwsjIyKGsrGyxYsWKm3fu3PlCSRiBHAY14wvQsT8jIiIsgObvZOLj42MHKaDUAnQAMw9kPtOnT59+/vr16w8DjQDIfCYQg42NjYWBhoCJgQ6AJEsSEhKEQbSSkhIbiJ4+fbq8kZERJ9UsAVnQ0NAAzqgZGRliIIu6u7ufL168WA2YZJkptgTZAhA4fvz459LSUsl79+79Aqai721tbTL49OON8AcPHhhjE1+/fv3HlpYWkKUPT58+/RmY6cRAbKpHPDc3Nws2NlUt+fr1KzxvAcupn2RbkpiYeBOE7969+w1ZHFgu8Rw6dOgDiG1qasp77ty5z2THyf79+8FFw4ULF24tWLBAWV9fnxfE9/T0FAClLFAKU1FR4QQmjLsUBxewsPvr7+9/a/v27W9A/BkzZrwCpSxQCqupqXkAkifbJ+ggMzMTnIJAFiDzh16xMvgtAdXJurq6/NQ0GGQesKb8ALPkw6NHjy44OTnJgupnalgAMgeYzBWAxdIFkPmMoNYKsIp09/b2dgDV9dTyCTADn9i6desBYM24kxFaD3swMTFZUDsu/v37dwJoyQ6AAAMA3dXxPPfPejcAAAAASUVORK5CYII="},a.SMALL_UNMUTE_BUTTON={base64String:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZpJREFUeNpiZAACAQEBAyAFwiCgwEA5eAClL3z48OECC9ACByDHITg42F5cXFyBlZWVg5eXV4Jc0z9//vzi9+/fP16+fPlg7dq1CkDzBRj5+fkroqKi/MXExAyPHTv2/P379z+fPn36HQj+kmoBJycns7S0NKegoCC7o6OjzOPHj88sW7ZsIwsjIyOHsrKyxYoVK27euXPnCyVhBHIY1IwvIMdGRERYAM3fycLHx8cOUkCpBegAZh7IfKZPnz79/PXr1x8GGgGQ+UwgBhsbGwsDDQETAx0ASZZYWVkJ09QSkAX+/v4KNLOEEgtAAG+Ed3Z2Gg/PiKdJcC1YsOAmiPby8pIFlm1cNLHk+vXr4KLh4cOHt5KSkpRlZWV5aRZc3759+ztlypRbV65ceUPzOFm8ePHDkZ266GcJqE7W1dXlp6bBIPOANeUHmCUfHj16dMHJyUkWVD9TwwKQOZ6engoPHjy4ADKfEdRaAVaR7t7e3g6gup5aPrl79+6JrVu3HgDWjDsZofWwBxMTkwW14+Lfv38ngJbsAAgwAALln4vEJfLOAAAAAElFTkSuQmCC"},a}();return c}),define("ClickToPlayInterface",["require","exports","EventManager","InterfaceAsset","Utils"],function(a,b,c,d,e){var f=function(){function a(b){var d=this;this.eventManager=new c,this.onclick=function(b){b.preventDefault(),b.stopPropagation(),b.which>1||(d.environmentData.videoSlot.play(),d.environmentData.videoSlot.pause(),d.eventManager.dispatch(a.EVENT_CLICK))},this.environmentData=b}return a.prototype.register=function(){this.frame=e.addElement({target:this.environmentData.slot,styles:{width:"100%",height:"100%",position:"absolute",cursor:"pointer",top:"0px",left:"0px","background-color":"#000"},events:{contextmenu:function(a){a.preventDefault()},click:this.onclick}}),this.button=e.addElement({target:this.frame,type:"img",styles:{position:"absolute",display:"block",border:"0px none",cursor:"pointer",top:"50%",left:"50%",width:"80px",height:"80px",margin:"-40px 0px 0px -40px"},attributes:{src:d.getBase64ImgSrc(new d(d.LARGE_PLAY_BUTTON))},events:{contextmenu:function(a){a.preventDefault()},click:this.onclick}}),this.videoSlotOriginalStylePosition=this.environmentData.videoSlot.style.getPropertyValue("position"),this.videoSlotOriginalPriorityPosition=this.environmentData.videoSlot.style.getPropertyPriority("position"),this.videoSlotOriginalStyleLeft=this.environmentData.videoSlot.style.getPropertyValue("left"),this.videoSlotOriginalPriorityLeft=this.environmentData.videoSlot.style.getPropertyPriority("left"),this.videoSlotOriginalStyleRight=this.environmentData.videoSlot.style.getPropertyValue("right"),this.videoSlotOriginalPriorityRight=this.environmentData.videoSlot.style.getPropertyPriority("right"),this.environmentData.videoSlot.style.setProperty("position","relative","important"),this.environmentData.videoSlot.style.setProperty("left","-100000px","important"),this.environmentData.videoSlot.style.removeProperty("right")},a.prototype.unregister=function(){this.environmentData.videoSlot.style.setProperty("position",this.videoSlotOriginalStylePosition,this.videoSlotOriginalPriorityPosition),this.environmentData.videoSlot.style.setProperty("left",this.videoSlotOriginalStyleLeft,this.videoSlotOriginalPriorityLeft),this.environmentData.videoSlot.style.setProperty("right",this.videoSlotOriginalStyleRight,this.videoSlotOriginalPriorityRight),this.environmentData.slot&&this.frame&&this.environmentData.slot.removeChild(this.frame),this.frame=null,this.button=null},a.prototype.subscribe=function(a,b,c){this.eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this.eventManager.unsubscribe(a,b)},a.EVENT_CLICK="click",a}();return f}),define("CompanionPlacement",["require","exports"],function(a,b){var c=function(){function a(a,b,c,d,e){void 0===d&&(d=null),void 0===e&&(e=null),this.width=a,this.height=b,this.companionId=c,null!==d&&(this.defaultId=d),null!==e&&(this.purge=e)}return a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},a.prototype.getCompanionId=function(){return this.companionId},a.prototype.getDefaultId=function(){return this.defaultId},a.prototype.getPurge=function(){return this.purge},a}();return c}),define("CompanionManager",["require","exports","Logger","CompanionPlacement","Utils"],function(require,exports,Logger,CompanionPlacement,Utils){var CompanionManager=function(){function CompanionManager(){this.logger=new Logger("CompanionManager")}return CompanionManager.prototype.showCompanions=function(companionAds,companionPlacements,targetWindow){var _this=this;return this.logger.log("showCompanions(",companionAds,",",companionPlacements,")"),"object"==typeof targetWindow&&"object"==typeof targetWindow.document&&targetWindow.document.getElementById?void companionAds.forEach(function(companionAd){function onWrapperLoad(){wrapper.contentWindow&&wrapper.contentWindow.postMessage&&("http://cdn-static.liverail.com"===content.substr(0,30)?wrapper.contentWindow.postMessage(uniqueId,"http://cdn-static.liverail.com"):"https://cdn-static-secure.liverail.com"===content.substr(0,38)&&wrapper.contentWindow.postMessage(uniqueId,"https://cdn-static-secure.liverail.com"))}function handleMessage(a){var b=window;a||(a=b.event),a.data===uniqueId&&"function"==typeof lrCompanionClickThru&&lrCompanionClickThru(companionFingerprint)}var content=companionAd.getContent(),size=companionAd.getSize(),width=companionAd.getWidth(),height=companionAd.getHeight(),companionPlacement=CompanionManager.resolveCompanionPlacement(companionAd,companionPlacements),companionElement=CompanionManager.locateElement(companionPlacement.getCompanionId(),targetWindow),defaultElement=CompanionManager.locateElement(companionPlacement.getDefaultId(),targetWindow);if(!companionElement)return void _this.logger.log("Unable to find "+size+" placement, dropping companion ad");var companionHTML="";companionAd.getTrackers("impression").forEach(function(a){a.getUrls().forEach(function(a){companionHTML+='<img src="'+a+'" width="1" height="1" style="display: none; visibility: hidden;" />'})});var clickUrl=companionAd.getClickUrl();clickUrl&&null!==clickUrl.match(/^http(s)?:\/\/t4\.liverail\.com/)&&(clickUrl=clickUrl.replace(/&redirect=(%20|%0A|%0D|%09|%0C|%0B|%00)+/,"&redirect="));var lrCompanionClickThru="function"==typeof targetWindow.lrCompanionClickThru?targetWindow.lrCompanionClickThru:null,wrapper=null,lrCompanionDisplayCallback=targetWindow.lrCompanionDisplayCallback||{};switch(typeof lrCompanionDisplayCallback[size]){case"function":lrCompanionDisplayCallback[size]();break;case"string":eval(lrCompanionDisplayCallback[size])}switch(companionAd.getType()){case"iframe":lrCompanionClickThru?wrapper=CompanionManager.createWrapperFrame(width,height,content,targetWindow):companionHTML+='<iframe src="'+content+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="width: '+width+"px; height: "+height+'px; border: 0px; margin: 0px;"></iframe>';break;case"image":if("string"==typeof clickUrl&&null!==clickUrl.match(/^http(s)?:\/\/t4.liverail.com/)){var clickthruRedirect=clickUrl.split(/&redirect=/)[1];("string"!=typeof clickthruRedirect||clickthruRedirect.length<=0)&&(clickUrl=null)}companionHTML+=(clickUrl?'<a href="'+clickUrl+'" target="_blank">':"")+'<img src="'+content+'" border="0" style="width: '+width+"px; height: "+height+'px; border: 0px; margin: 0px;" />'+(clickUrl?"</a>":"");break;case"flash":var delimiter=-1===content.indexOf("?")?"?":"&",clickTag=clickUrl&&content.match(/cdn(-secure)?\.liverail\.com/)?delimiter+"clickTAG="+encodeURIComponent(clickUrl):delimiter;companionHTML+='<object width="'+width+'" height="'+height+'"><param name="movie" value="'+content+clickTag+'"><param name="wmode" value="opaque"><param name="allowScriptAccess" value="always"><embed src="'+content+clickTag+'" type="application/x-shockwave-flash" allowScriptAccess="always" wmode="opaque" width="'+width+'" height="'+height+'"></embed></object>';break;case"js":lrCompanionClickThru?wrapper=CompanionManager.createWrapperFrame(width,height,("https:"===targetWindow.location.protocol?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/js/companion_iframe.html?type=js&content="+encodeURIComponent(content),targetWindow):companionHTML+='<iframe src="'+("https:"===window.location.protocol?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/js/companion_iframe.html?type=js&content="+encodeURIComponent(content)+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="width: '+width+"px; height: "+height+'px; border: 0px; margin: 0px;"></iframe>';break;default:companionHTML+=content}if(_this.logger.log("Showing "+size+" "+companionAd.getType()+" companion ad"),lrCompanionClickThru){var companionFingerprint={type:companionAd.getType(),width:width,height:height,companionElement:companionElement};if(wrapper){var uniqueId=Utils.genUniqueId().toString();if(wrapper.onload=function(){onWrapperLoad()},"function"!=typeof wrapper.onload){var legacyWrapper=wrapper;legacyWrapper.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&onWrapperLoad()}}targetWindow.addEventListener("message",handleMessage,!1),companionElement.innerHTML="",companionElement.appendChild(wrapper)}else{var divWrapper=targetWindow.document.createElement("div");divWrapper.onmouseup=function(a){a||(a=targetWindow.event),3!==a.which&&2!==a.button&&"function"==typeof lrCompanionClickThru&&lrCompanionClickThru(companionFingerprint)},divWrapper.innerHTML=companionHTML,companionElement.innerHTML="",companionElement.appendChild(divWrapper)}}else companionElement.innerHTML=companionHTML;defaultElement&&(defaultElement.style.display="none"),companionElement.style.display="block"}):void this.logger.error("Invalid target window, dropping companion ads")},CompanionManager.prototype.hideCompanions=function(companionAds,companionPlacements,targetWindow){var _this=this;this.logger.log("hideCompanions(",companionAds,",",companionPlacements),companionAds.forEach(function(companionAd){var size=companionAd.getSize(),companionPlacement=CompanionManager.resolveCompanionPlacement(companionAd,companionPlacements),companionElement=CompanionManager.locateElement(companionPlacement.getCompanionId(),targetWindow),defaultElement=CompanionManager.locateElement(companionPlacement.getDefaultId(),targetWindow);if(companionElement&&companionPlacement.getPurge()){_this.logger.log("Hiding "+size+" "+companionAd.getType()+" companion ad");var lrCompanionPurgeDelay=targetWindow.lrCompanionPurgeDelay||{},lrCompanionPurgeCallback=targetWindow.lrCompanionPurgeCallback||{};switch(typeof lrCompanionPurgeCallback[size]){case"function":lrCompanionPurgeCallback[size]();break;case"string":eval(lrCompanionPurgeCallback[size])}lrCompanionPurgeDelay[size]>0?setTimeout(function(){CompanionManager.hideCompanionElement(companionElement,defaultElement)},lrCompanionPurgeDelay[size]):CompanionManager.hideCompanionElement(companionElement,defaultElement)}})},CompanionManager.resolveCompanionPlacement=function(a,b){return b[a.getSize()]||new CompanionPlacement(a.getWidth(),a.getHeight(),"lr_comp_"+a.getSize(),"lr_comp_default_"+a.getSize(),!1)},CompanionManager.locateElement=function(a,b){try{var c=b.document.getElementById(a);if(null!==c)return c;if(b!==window.top&&b.parent&&b.parent!==b)return this.locateElement(a,b.parent)}catch(d){}return null},CompanionManager.createWrapperFrame=function(a,b,c,d){var e=d.document.createElement("iframe");return e.src=c,e.style.border="0px",e.style.margin="0px",e.style.width=a+"px",e.style.height=b+"px",e.style.overflow="hidden",e.scrolling="no",e.frameBorder="0",e.marginWidth="0",e.marginHeight="0",e},CompanionManager.hideCompanionElement=function(a,b){a.style.display="none",b&&(b.style.display="block")},CompanionManager}();return CompanionManager}),define("InventoryPodSlot",["require","exports"],function(a,b){var c=function(){function a(){this._adResponse=null,this._hadImpression=!1,this._retryCount=0}return a.prototype.setAdResponse=function(a){this._adResponse=a},a.prototype.getAdResponse=function(){return this._adResponse},a.prototype.getRetryCount=function(){return this._retryCount},a.prototype.registerRetry=function(){this._retryCount+=1},a.prototype.registerAdSlotCompletion=function(a){a.hadImpression()&&(this._hadImpression=!0)},a.prototype.hadImpression=function(){return this._hadImpression},a}();return c}),define("InventoryPod",["require","exports","InventoryPodSlot","PlacementDefinition"],function(a,b,c,d){var e=function(){function a(a){this.adParameters=null,this.placementDefinition=new d,this.podSlotQueue=[],this.failedSlots=0,this.playedDuration=0,this.startTime=0,this.adParameters=a}return a.prototype.getMaxDuration=function(){return this.placementDefinition.isFromServer()?this.placementDefinition.maxDuration:this.adParameters?this.adParameters.maxDuration:0},a.prototype.getMaxPodSlots=function(){return this.placementDefinition.isFromServer()?this.placementDefinition.maxPodSlots:this.adParameters?this.adParameters.maxPodSlots:0},a.prototype.getMaxPodDuration=function(){return this.placementDefinition.isFromServer()?this.placementDefinition.maxPodDuration:this.adParameters?this.adParameters.maxPodDuration:0},a.prototype.getNewInventoryPodSlot=function(){var a=null;return this.hasCompleted()||(a=new c,this.podSlotQueue.push(a)),a},a.prototype.setStartTime=function(){0===this.startTime&&(this.startTime=Date.now())},a.prototype.getElapsedRealtime=function(){return(Date.now()-this.startTime)/1e3},a.prototype.increasePlayedDuration=function(a){this.playedDuration+=Math.max(0,a)},a.prototype.getPlayedDuration=function(){return this.playedDuration},a.prototype.getRemainingDuration=function(){if(this.isDurationBased()){var a=Math.max(0,this.getMaxPodDuration()-this.getPlayedDuration());return this.getMaxDuration()>0?Math.round(Math.min(this.getMaxDuration(),a)):a}return null},a.prototype.getPodSlotIndex=function(){return this.podSlotQueue.length-1},a.prototype.getCurrentPodPosition=function(){return Math.max(this.podSlotQueue.length-this.failedSlots,1)},a.prototype.getTotalSlots=function(){return Math.max(this.getMaxPodSlots()-this.failedSlots,0)},a.prototype.hasCompleted=function(){return this.isDurationBased()&&this.getRemainingDuration()<3?!0:this.isSlotBased()&&this.podSlotQueue.length>=this.getMaxPodSlots()&&this.podSlotQueue.length>0?!0:this.podSlotQueue.length>=10?!0:this.getPlayedDuration()>=600},a.prototype.isDurationBased=function(){return this.getMaxPodDuration()>0},a.prototype.isSlotBased=function(){return this.getMaxPodSlots()>0||!this.isDurationBased()},a.prototype.setPlacementDefinition=function(a){null!==a&&(this.placementDefinition=a)},a.prototype.getPlacementDefinition=function(){return this.placementDefinition},a.prototype.registerInventoryPodSlotCompletion=function(a){a.hadImpression()||(this.failedSlots+=1)},a.TYPE_INSTREAM="in",a.TYPE_OVERLAY="ov",a}();return e}),define("InventoryPodHistory",["require","exports"],function(a,b){var c=function(){function a(){this.failedConnectionIds=[],this.servedCreativeIds=[],this.failedCreativeIds=[]}return a.prototype.registerAdSourceFailure=function(a){var b=a.getAttribute("cid");b&&this.failedConnectionIds.push(a.getAttribute("cid"))},a.prototype.getFailedConnectionIds=function(){return this.failedConnectionIds},a.prototype.registerAdCandidateCompletion=function(a){var b=a.uniqueCreativeID||a.creativeID;a.hadImpression()?b&&this.servedCreativeIds.push(b):b&&"0"!==b?this.failedCreativeIds.push(b):a.connectionID&&this.failedConnectionIds.push(a.connectionID)},a.prototype.getServedCreativeIds=function(){return this.servedCreativeIds},a.prototype.getFailedCreativeIds=function(){return this.failedCreativeIds},a}();return c}),define("LinearSkin",["require","exports","AdManagerEvents","EventManager","Logger"],function(a,b,c,d,e){var f=function(){function a(a,b,f){this.eventManager=new d(c),this.adapter=null,this.adCandidate=null,this.environmentData=b,this.inventoryPod=f,this.logger=new e(a)}return a.prototype.register=function(a,b){this.logger.debug("Registering adapter:",a,"adCandidate:",b),this.adapter=a,this.adCandidate=b,this.registerAdapterSubscriptions(this.adapter)},a.prototype.unregister=function(){null!==this.adapter&&(this.logger.debug("Unregistering adapter:",this.adapter,"adCandidate:",this.adCandidate),this.unregisterAdapterSubscriptions(this.adapter),this.adapter=null,this.adCandidate=null)},a.prototype.registerAdapterSubscriptions=function(a){this.logger.log("Registering event subscriptions on adapter:",a),a.subscribe(this.onAdStopped,c.AdStopped,this),a.subscribe(this.onAdSkipped,c.AdSkipped,this),a.subscribe(this.onAdSkippableStateChange,c.AdSkippableStateChange,this),a.subscribe(this.onAdSizeChange,c.AdSizeChange,this),a.subscribe(this.onAdLinearChange,c.AdLinearChange,this),a.subscribe(this.onAdDurationChange,c.AdDurationChange,this),a.subscribe(this.onAdExpandedChange,c.AdExpandedChange,this),a.subscribe(this.onAdVolumeChange,c.AdVolumeChange,this),a.subscribe(this.onAdImpression,c.AdImpression,this),a.subscribe(this.onAdVideoStart,c.AdVideoStart,this),a.subscribe(this.onAdVideoComplete,c.AdVideoComplete,this),a.subscribe(this.onAdClickThru,c.AdClickThru,this),a.subscribe(this.onAdInteraction,c.AdInteraction,this),a.subscribe(this.onAdUserAcceptInvitation,c.AdUserAcceptInvitation,this),a.subscribe(this.onAdUserMinimize,c.AdUserMinimize,this),a.subscribe(this.onAdUserClose,c.AdUserClose,this),a.subscribe(this.onAdPaused,c.AdPaused,this),a.subscribe(this.onAdPlaying,c.AdPlaying,this),a.subscribe(this.onAdError,c.AdError,this)},a.prototype.unregisterAdapterSubscriptions=function(a){this.logger.log("Unregistering event subscriptions on adapter:",a),a.unsubscribe(this.onAdStopped,c.AdStopped),a.unsubscribe(this.onAdSkipped,c.AdSkipped),a.unsubscribe(this.onAdSkippableStateChange,c.AdSkippableStateChange),a.unsubscribe(this.onAdSizeChange,c.AdSizeChange),a.unsubscribe(this.onAdLinearChange,c.AdLinearChange),a.unsubscribe(this.onAdDurationChange,c.AdDurationChange),a.unsubscribe(this.onAdExpandedChange,c.AdExpandedChange),a.unsubscribe(this.onAdVolumeChange,c.AdVolumeChange),a.unsubscribe(this.onAdImpression,c.AdImpression),a.unsubscribe(this.onAdVideoStart,c.AdVideoStart),a.unsubscribe(this.onAdVideoComplete,c.AdVideoComplete),a.unsubscribe(this.onAdClickThru,c.AdClickThru),a.unsubscribe(this.onAdInteraction,c.AdInteraction),a.unsubscribe(this.onAdUserAcceptInvitation,c.AdUserAcceptInvitation),a.unsubscribe(this.onAdUserMinimize,c.AdUserMinimize),a.unsubscribe(this.onAdUserClose,c.AdUserClose),a.unsubscribe(this.onAdPaused,c.AdPaused),a.unsubscribe(this.onAdPlaying,c.AdPlaying),a.unsubscribe(this.onAdError,c.AdError)},a.prototype.onAdLoaded=function(){},a.prototype.onAdStarted=function(){},a.prototype.onAdStopped=function(){},a.prototype.onAdSkipped=function(){},a.prototype.onAdSkippableStateChange=function(){},a.prototype.onAdSizeChange=function(){},a.prototype.onAdLinearChange=function(){},a.prototype.onAdDurationChange=function(){},a.prototype.onAdExpandedChange=function(){},a.prototype.onAdVolumeChange=function(){},a.prototype.onAdImpression=function(){},a.prototype.onAdVideoStart=function(){},a.prototype.onAdVideoFirstQuartile=function(){},a.prototype.onAdVideoMidpoint=function(){},a.prototype.onAdVideoThirdQuartile=function(){},a.prototype.onAdVideoComplete=function(){},a.prototype.onAdClickThru=function(a,b,c){},a.prototype.onAdInteraction=function(){},a.prototype.onAdUserAcceptInvitation=function(){},a.prototype.onAdUserMinimize=function(){},a.prototype.onAdUserClose=function(){},a.prototype.onAdPaused=function(){},a.prototype.onAdPlaying=function(){},a.prototype.onAdError=function(){},a.prototype.subscribe=function(a,b,c){this.eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this.eventManager.unsubscribe(a,b)},a}();return f});var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};return define("DefaultLinearSkin",["require","exports","AdManagerEvents","InterfaceAsset","LinearSkin","LogEvent","LogEventType","Utils"],function(a,b,c,d,e,f,g,h){var i=function(a){function b(b,d){var e=this;a.call(this,"DefaultLinearSkin",b,d),this._countdownInterval=null,this._countdownMessage="",this._largePlayButton=null,this._layoutAdded=!1,this._skipElement=null,this._smallMuteButton=null,this._smallPlayButton=null,this.onAdChoicesButtonClick=function(a){if(e.adapter&&h.checkWindowSanity()){if(a.which>1)return;e.logger.log("AdChoices button was clicked"),a.stopPropagation(),a.preventDefault(),e.environmentData.parentWindow.open(e.adCandidate.adChoicesUrl,"_blank")?e.dispatchLogEvent(f.eventWithType(g.AdChoicesClick,{url:e.adCandidate.adChoicesUrl})):e.dispatchLogEvent(f.eventWithType(g.AdChoicesClickFailed,{url:e.adCandidate.adChoicesUrl}))}},this.onClickElementClick=function(a){if(e.adapter&&h.checkWindowSanity()){if(a.which>1)return;e.logger.log("Click element was clicked"),a.stopPropagation(),a.preventDefault(),e.adapter.supports(1)&&(e.adapter.isPaused()?e.adapter.resumeAd():e.adCandidate.hasValidClickthruUrl()&&(!e.adapter.getAdapterConfiguration().playerHandlesClick&&e.adapter.getAdapterConfiguration().pauseOnClick&&(e.logger.log("Pause-on-click is enabled, calling pauseAd()"),e.adapter.pauseAd()),e.eventManager.dispatch(c.AdClickThru,[e.adCandidate.clickThruUrl,"",!0])))}},this.onPlayButtonClick=function(a){e.adapter.isPaused()?e.adapter.resumeAd():e.adapter.pauseAd()},this.onSkipElementClick=function(a){0===e.adapter.getAdSkippableRemainingTime()&&e.adapter.getAdSkippableState()===!0?(e.logger.log("Skip button pressed"),e.adapter.skipAd()):e.logger.warn("Skip button pressed -- ad not skippable at this time")},this.onSmallMuteElementClick=function(a){e.adapter.getAdVolume()>0?e.adapter.setAdVolume(0):e.adapter.setAdVolume(1)},this.onSmallPlayElementClick=function(a){e.adapter.isPaused()?e.adapter.resumeAd():e.adapter.pauseAd()},this.onCountdownInterval=function(){if(e._countdownFrame&&e.adapter.getAdRemainingTime()>=0){var a=e.adapter.getAdDuration()-e.adapter.getAdRemainingTime(),b=Math.ceil(Math.round(e.adapter.getAdDuration())-a),c=Math.floor(b/60),d=Math.floor(b%60),f=c+":"+(10>d?"0":"")+d,g=e._countdownMessage.replace(/\{COUNTDOWN\}/g,b.toString()).replace(/\{COUNTDOWNTIME\}/g,f);e._countdownHTML!==g&&(e._countdownHTML=g,e._countdownFrame.innerHTML=e._countdownHTML)}if(e._skipElement)if(e.adapter.getAdSkippableRemainingTime()>=0||e.adapter.getAdSkippableState()===!0){var h,i;e.adapter.getAdSkippableRemainingTime()>0?(h=e.adapter.getAdapterConfiguration().skipCountdownMessage.replace("{COUNTDOWN}",Math.ceil(e.adapter.getAdSkippableRemainingTime()).toString()),i="default"):(h=e.adapter.getAdapterConfiguration().skipMessage,i="pointer"),e._skipHTML!==h&&(e._skipHTML=h,e._skipElement.innerHTML=e._skipHTML,e._skipElement.style.setProperty("cursor",i,"important"),e._skipElement.style.setProperty("display","block","important"))}else e._skipElement.style.setProperty("display","none","important")}}return __extends(b,a),b.prototype.register=function(b,c){a.prototype.register.call(this,b,c)},b.prototype.unregister=function(){this.adapter&&(this.removeSkinLayout(),a.prototype.unregister.call(this))},b.prototype.addSkinLayout=function(){if(this.logger.debug("Adding skin layout"),!this._layoutAdded&&(this._layoutAdded=!0,this.skinIsEnabled()&&(this.isLegacyInterstitial()||(this._countdownMessage=this.parseCountdownMessage(),this.adapter.getAdapterConfiguration().showCountdown&&this.adapter.supports(0)&&(this._countdownFrame=this.addElement({target:this.environmentData.slot,styles:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"18px","line-height":"19px","text-indent":"5px","text-align":"left","text-decoration":"none",background:"rgba(0,0,0,0.5)",color:"rgb(208,208,208)","font-family":"Helvetica, Arial, sans","font-size":"11px",cursor:"default","user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-o-user-select":"none"},events:{contextmenu:function(a){a.preventDefault()}}})))),!this._clickElement&&this.adapter.supports(1)&&(this._clickElement=this.addElement({target:this.environmentData.slot,styles:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",cursor:"default"},events:{click:this.onClickElementClick,contextmenu:function(a){a.preventDefault()}}}),this.adCandidate.hasValidClickthruUrl()&&this._clickElement.style.setProperty("cursor","pointer","important")),this.skinIsEnabled()&&(this.isLegacyInterstitial()||this.adapter.supports(2)&&(this._largePlayButton=this.addElement({target:this.environmentData.slot,type:"img",styles:{position:"absolute",opacity:"0.7",display:"none",border:"0px none",cursor:"pointer",top:"50%",left:"50%",width:"80px",height:"80px",margin:"-40px 0px 0px -40px",transition:"opacity 250ms ease-out","-webkit-transition":"opacity 250ms ease-out","-moz-transition":"opacity 250ms ease-out","user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-o-user-select":"none"},attributes:{src:d.getBase64ImgSrc(new d(d.LARGE_PLAY_BUTTON))},events:{contextmenu:function(a){a.preventDefault()},click:this.onPlayButtonClick,mouseover:function(a){var b=a.srcElement;b.style.setProperty("opacity","1.0","important")},mouseout:function(a){var b=a.srcElement;b.style.setProperty("opacity","0.7","important")}}})),this.adapter.supports(3)&&(this._skipElement=this.addElement({target:this.environmentData.slot,styles:{position:"absolute",display:"none",right:"0px",bottom:"16%",padding:"6px 12px 6px 12px","font-family":"Helvetica, Arial, sans","font-size":"14px","text-align":"left",background:"rgba(0,0,0,0.5)",color:"rgb(208,208,208)",border:"1px solid rgb(76,76,76)","border-right-width":"0px","user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-o-user-select":"none"},events:{contextmenu:function(a){a.preventDefault()},click:this.onSkipElementClick}})),!this.isLegacyInterstitial()&&(2===this.adapter.getAdapterConfiguration().linearSkin&&this.adapter.supports(2)&&(this._smallMuteButton=this.addElement({type:"img",target:this.environmentData.slot,styles:{position:"absolute",opacity:"0.7",display:"block",border:"0px none",cursor:"pointer",bottom:"5px",left:"35px",width:"25px",height:"25px",transition:"opacity 250ms ease-out","-webkit-transition":"opacity 250ms ease-out","-moz-transition":"opacity 250ms ease-out","user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-o-user-select":"none"},events:{contextmenu:function(a){a.preventDefault()},click:this.onSmallMuteElementClick,mouseover:function(a){var b=a.srcElement;b.style.setProperty("opacity","1.0","important")},mouseout:function(a){var b=a.srcElement;b.style.setProperty("opacity","0.7","important")}}}),this.renderSmallMuteAsset(),this._smallPlayButton=this.addElement({type:"img",target:this.environmentData.slot,styles:{position:"absolute",opacity:"0.7",display:"block",border:"0px none",cursor:"pointer",bottom:"5px",left:"5px",width:"25px",height:"25px",transition:"opacity 250ms ease-out","-webkit-transition":"opacity 250ms ease-out","-moz-transition":"opacity 250ms ease-out","user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-o-user-select":"none"},events:{contextmenu:function(a){a.preventDefault()},click:this.onSmallPlayElementClick,mouseover:function(a){var b=a.srcElement;b.style.setProperty("opacity","1.0","important")},mouseout:function(a){var b=a.srcElement;b.style.setProperty("opacity","0.7","important")}}}),this.renderSmallPlayAsset()),this.adCandidate.hasValidAdChoicesUrl()&&this.adapter.supports(2))))){var a=new d(d.AD_CHOICES_ICON);this._adChoicesButton=this.addElement({target:this.environmentData.slot,text:"AdChoices",styles:{"background-color":"rgba(17,17,17,0.8)","background-image":d.getCSSBackgroundUrl(a),"background-position":"right center","background-repeat":"no-repeat","background-size":"14px",position:"absolute",display:"inline-block",top:"0px",right:"0px",height:"18px","line-height":"19px","text-align":"left",padding:"0px 17px 0px 3px",color:"rgb(208,208,208)",opacity:"0.7","font-family":"Helvetica, Arial, sans",
"font-size":"11px",cursor:"pointer","text-decoration":"none",transition:"opacity 250ms ease-out","-webkit-transition":"opacity 250ms ease-out","-moz-transition":"opacity 250ms ease-out","user-select":"none","-webkit-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-o-user-select":"none"},events:{click:this.onAdChoicesButtonClick,contextmenu:function(a){a.preventDefault()},mouseover:function(a){var b=a.srcElement;b.style.setProperty("opacity","1.0","important")},mouseout:function(a){var b=a.srcElement;b.style.setProperty("opacity","0.7","important")}}})}this.registerCountdownInterval()},b.prototype.renderSmallMuteAsset=function(){this.adapter.getAdVolume()>0?this._smallMuteButton.src=d.getBase64ImgSrc(new d(d.SMALL_MUTE_BUTTON)):this._smallMuteButton.src=d.getBase64ImgSrc(new d(d.SMALL_UNMUTE_BUTTON))},b.prototype.renderSmallPlayAsset=function(){this.adapter.isPaused()?this._smallPlayButton.src=d.getBase64ImgSrc(new d(d.SMALL_PLAY_BUTTON)):this._smallPlayButton.src=d.getBase64ImgSrc(new d(d.SMALL_PAUSE_BUTTON))},b.prototype.removeSkinLayout=function(){this._layoutAdded&&(this.unregisterCountdownInterval(),this._layoutAdded=!1,this._clickElement&&(this.environmentData.slot.removeChild(this._clickElement),this._clickElement=null),this._skipElement&&(this.environmentData.slot.removeChild(this._skipElement),this._skipElement=null),this._largePlayButton&&(this.environmentData.slot.removeChild(this._largePlayButton),this._largePlayButton=null),this._countdownFrame&&(this.environmentData.slot.removeChild(this._countdownFrame),this._countdownFrame=null),this._smallMuteButton&&(this.environmentData.slot.removeChild(this._smallMuteButton),this._smallMuteButton=null),this._smallPlayButton&&(this.environmentData.slot.removeChild(this._smallPlayButton),this._smallPlayButton=null),this._adChoicesButton&&(this.environmentData.slot.removeChild(this._adChoicesButton),this._adChoicesButton=null),this.unsetSlotPosition())},b.prototype.onAdImpression=function(){this.addSkinLayout()},b.prototype.onAdStopped=function(){this.removeSkinLayout()},b.prototype.onAdError=function(){this.removeSkinLayout()},b.prototype.onAdPaused=function(){this._largePlayButton&&this._largePlayButton.style.setProperty("display","block","important"),this._smallPlayButton&&this.renderSmallPlayAsset()},b.prototype.onAdPlaying=function(){this._largePlayButton&&this._largePlayButton.style.setProperty("display","none","important"),this._smallPlayButton&&this.renderSmallPlayAsset()},b.prototype.onAdVolumeChange=function(){this._smallMuteButton&&this.renderSmallMuteAsset()},b.prototype.addElement=function(a){return this.setSlotPosition(),h.addElement(a)},b.prototype.dispatchLogEvent=function(a){this.eventManager.dispatch(c.LogEvent,[a])},b.prototype.registerCountdownInterval=function(){null!==this._countdownInterval&&this.unregisterCountdownInterval(),this._countdownInterval=setInterval(this.onCountdownInterval,500),this.onCountdownInterval()},b.prototype.unregisterCountdownInterval=function(){clearInterval(this._countdownInterval),this._countdownInterval=null},b.prototype.parseCountdownMessage=function(){var a="";if(this.adapter.getAdapterConfiguration().indexMessage&&this.inventoryPod.getTotalSlots()>1){var b=this.adapter.getAdapterConfiguration().indexMessage;b=b.replace(/\{ADINDEX\}/g,this.inventoryPod.getCurrentPodPosition().toString()),b=b.replace(/\{ADSTOTAL\}/g,this.inventoryPod.getTotalSlots().toString()),a=b}return this.adapter.getAdapterConfiguration().countdownMessage&&(a.length>0&&(a+=" "),a+=this.adapter.getAdapterConfiguration().countdownMessage),a},b.prototype.skinIsEnabled=function(){return(1===this.adapter.getAdapterConfiguration().linearSkin||2===this.adapter.getAdapterConfiguration().linearSkin)&&!h.detectDevice("phone")},b.prototype.isLegacyInterstitial=function(){return 1===this.environmentData.integration&&null===this.environmentData.integrationVersion},b.prototype.setSlotPosition=function(){if(!this._targetSlotPositionSet){this._targetSlotPositionSet=!0;var a,b=this.environmentData.slot,c=this.environmentData.parentWindow;c.getComputedStyle&&(a=c.getComputedStyle(b,null).getPropertyValue("position")),this._targetSlotOriginalStylePosition=void 0,this._targetSlotOriginalPriorityPosition=void 0,"static"===a&&(this.logger.log("Setting slot element position to relative"),this._targetSlotOriginalStylePosition=b.style.getPropertyValue("position"),this._targetSlotOriginalPriorityPosition=b.style.getPropertyPriority("position"),b.style.setProperty("position","relative","important"))}},b.prototype.unsetSlotPosition=function(){if(this._targetSlotPositionSet){this._targetSlotPositionSet=!1;var a=this.environmentData.slot;void 0!==this._targetSlotOriginalStylePosition&&(this.logger.log("Resetting slot element position to "+this._targetSlotOriginalStylePosition),a.style.setProperty("position",this._targetSlotOriginalStylePosition,this._targetSlotOriginalPriorityPosition))}},b}(e);return i}),define("LinearSkinFactory",["require","exports","DefaultLinearSkin"],function(a,b,c){var d=function(){function a(){}return a.getLinearSkinInstance=function(a,b){var d;switch(a.getAdParameters().linearSkin){default:d=new c(a,b)}return d},a}();return d}),function(){"use strict";var a={isCssAllSupported:function(){return"all"in document.documentElement.style},isCssFeatureQueriesSupported:function(){var a="CSS"in window&&"supports"in window.CSS;return a||"supportsCSS"in window},isDragAndDropSupported:function(){var a=document.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},isOggSupported:function(){var a=document.createElement("video"),b=!1;try{if(b=!!a.canPlayType){var c=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");b=""!=c}}catch(d){}return b},isCssVariablesSupported:function(){return window.CSS&&void 0!==window.CSS.supports&&null!==window.CSS.supports&&window.CSS.supports("--fake-var",0)},isScopedCssSupported:function(){var a=document.createElement("style");return a.setAttribute("scoped","true"),a.scoped===!0},isCssPositionStickySupported:function(){var a="position:",b="sticky",c=["-webkit-","-moz-","-o-","-ms-"],d=document.createElement("a"),e=d.style;return e.cssText=a+c.join(b+";"+a).slice(0,-a.length),-1!==e.position.indexOf(b)},getTimeZoneOffset:function(){var a=new Date;return a.getTimezoneOffset()},isDialogSupported:function(){var a=document.createElement("dialog");return!!a.show},isVideoSupported:function(){var a=document.createElement("video");return!!a.canPlayType},isAudioSupported:function(){var a=document.createElement("audio");return!!a.canPlayType},isAudioContextSupported:function(){try{var a=new window.AudioContext,b=a.createOscillator();return b.frequency.value=10,10==b.frequency.value}catch(c){return!1}},getAncestorOrigin:function(){var a="";if(window.location&&location.ancestorOrigins&&location.ancestorOrigins.length>0){a=location.ancestorOrigins.item(0);for(var b=1;b<location.ancestorOrigins.length;++b)a=a+","+location.ancestorOrigins.item(b)}return a},isGetRandomValuesSupported:function(){return!!window.crypto&&!!window.crypto.getRandomValues||!!window.msCrypto&&!!window.msCrypto.getRandomValues},isUserDataNotSupported:function(){var a=document.createElement("div");return!a.addBehavior},isChromeExtension:function(){return!!window.chrome&&!!window.chrome.runtime&&!!window.chrome.runtime.id},isPopup:function(){return!!window.opener&&window.opener!==window},getHref:function(){return window.opener&&window.opener.location&&window.opener.location.href?window.opener.location.href:""},isCanvasSupported:function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},isEmojiSupported:function(){if(!this.isCanvasSupported())return!1;var a=window.devicePixelRatio||1,b=12*a,c=document.createElement("canvas"),d=c.getContext("2d");return d.fillStyle="#f00",d.textBaseline="top",d.font="32px Arial",d.fillText("🐨",0,0),0!==d.getImageData(b,b,1,1).data[0]},getTime:function(){return window.performance&&window.performance.now?window.performance.now():Date.now?Date.now():new Date},getHash:function(a){var b=0,c=a.length;if(0===c)return b;for(var d=0;c>d;d++){var e=a.charCodeAt(d);b=32*b-b+e,b|=0}return b},getCanvasPrint:function(){if(!this.isCanvasSupported())return 0;var a=document.createElement("canvas"),b=a.getContext("2d"),c="https://facebook.com";return b.textBaseline="top",b.font="14px Arial",b.textBaseline="alphabetic",b.fillStyle="#f60",b.fillRect(125,1,62,20),b.fillStyle="#069",b.fillText(c,2,15),b.fillStyle="rgba(102, 204, 0, 0.7)",b.fillText(c,4,17),this.getHash(a.toDataURL())},getBrowserFeatures:function(){var a=this.getTime(),b={ua:navigator.userAgent,version:navigator.appVersion,platform:navigator.platform,isIframe:parent!==window,ref:document.referrer,url:document.URL,width:screen.width,height:screen.height,awidth:screen.availWidth,aheight:screen.availHeight,left:window.screenLeft?window.screenLeft:window.screenX,top:window.screenTop?window.screenTop:window.screenY,cssall:this.isCssAllSupported(),cfq:this.isCssFeatureQueriesSupported(),cssvar:this.isCssVariablesSupported(),scope:this.isScopedCssSupported(),sticky:this.isCssPositionStickySupported(),scroll:"scrollBehavior"in document.documentElement.style,plugins:navigator.plugins.length,pmode:!!window.callPhantom||!!window._phantom,colorDepth:screen.colorDepth,websql:!!window.openDatabase,dnd:this.isDragAndDropSupported(),ce:"registerElement"in document,imp:"import"in document.createElement("link"),tz:this.getTimeZoneOffset(),ogg:this.isOggSupported(),dialog:this.isDialogSupported(),video:this.isVideoSupported(),audio:this.isAudioSupported(),ac:this.isAudioContextSupported(),ancestor:this.getAncestorOrigin(),chrome:!!window.chrome,chromewebstore:!!window.chrome&&!!window.chrome.webstore,random:this.isGetRandomValuesSupported(),ie:!window.ActiveXObject,userdata:this.isUserDataNotSupported(),srcset:"srcset"in document.createElement("img"),canvas:this.isCanvasSupported(),emoji:this.isEmojiSupported(),pic:"HTMLPictureElement"in window,wc:"willChange"in document.documentElement.style,ext:this.isChromeExtension(),focus:document.hasFocus(),pop:this.isPopup(),href:this.getHref(),devorient:"DeviceOrientationEvent"in window,devmotion:"DeviceMotionEvent"in window,canvasfp:this.getCanvasPrint(),time:this.getTime()-a};return JSON.stringify(b)}};"undefined"!=typeof exports?module.exports=a:"undefined"!=typeof define&&define("PluginBrowserFeatures",[],function(){return a})}(),define("Rectangle",["require","exports"],function(a,b){"use strict";function c(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0}return a.__markCompiled&&a.__markCompiled(),c.RectangleZero=function(){return new c(0,0,0,0)},c.RectangleFromClientRect=function(a){return new c(a.left||0,a.top||0,a.width||a.right-a.left||0,a.height||a.bottom-a.top||0)},c.ClientRectFromRectangle=function(a){return{width:a.width,height:a.height,left:a.x,top:a.y,right:a.x+a.width,bottom:a.y+a.height}},c.RectangleFromWindow=function(a){try{var b=void 0,d=void 0,e=a.document.documentElement,f=e.hasOwnProperty?e.hasOwnProperty("ontouchstart"):!1;return f?(b=a.innerWidth,d=a.innerHeight):(b=a.document.documentElement.clientWidth||a.innerWidth||a.document.body.clientWidth,d=a.document.documentElement.clientHeight||a.innerHeight||a.document.body.clientHeight),new c(0,0,b,d)}catch(g){return null}},c.prototype.area=function(){return this.width*this.height},c.prototype.getData=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},c.prototype.intersection=function(a){var b=Math.max(this.x,a.x),d=Math.max(this.y,a.y),e=Math.min(this.x+this.width,a.x+a.width),f=Math.min(this.y+this.height,a.y+a.height);return e>=b&&f>=d?new c(b,d,e-b,f-d):null},c.prototype.offset=function(a,b){return new c(this.x+a,this.y+b,this.width,this.height)},c}),define("HTMLElementFrameContext",["require","exports","Rectangle"],function(a,b,c){"use strict";function d(a,b){this.crossDomainWindowCount=0,this.error=null,this.focus=null,this.locations=[],this.offsetRect=null,this.pageURL=null,this.parentWindow=null,this.topLocationURL=null,this.topReferrerURL=null,this.topURL=null,this.topWindow=null,this.topWindowLevel=0,this.type=null,this.viewportRect=null,this.windowCount=0;try{var e=a.ownerDocument;if(this.parentWindow=b||a.ownerDocument.defaultView||e.parentWindow,!this.parentWindow)return;for(var f=a,g=this.parentWindow;g&&this.windowCount<100;){this.windowCount++;var h=null,i=null,j=null,k=null;try{h=g.document.referrer,i=g.location.href||g.document.location.href,"function"==typeof g.document.hasFocus&&(k=g.document.hasFocus()),this.topReferrerURL=h,this.topLocationURL=i,this.topWindow=g,this.topWindowLevel=this.windowCount,f&&f.getBoundingClientRect&&0===this.crossDomainWindowCount&&(j=f.getBoundingClientRect())}catch(l){this.crossDomainWindowCount++}if(this.locations.push(i),j&&(this.offsetRect?this.offsetRect=this.offsetRect.offset(j.left,j.top):this.offsetRect=c.RectangleFromClientRect(j)),this.parentWindow&&this.parentWindow.top)if(g===this.parentWindow.top)i&&(this.pageURL=i,this.focus=k),this.windowCount>1?i?this.type=d.TYPE_SAME_ORIGIN:this.type=d.TYPE_CROSS_ORIGIN:this.type=d.TYPE_NONE,this.type!==d.TYPE_CROSS_ORIGIN&&(this.viewportRect=c.RectangleFromWindow(g)),g=null;else{g.parent===this.parentWindow.top&&(this.pageURL=h),f=null;try{f=g.frameElement}catch(l){}g=g.parent}else g=null}this.topURL=this.pageURL||this.topReferrerURL||this.topLocationURL}catch(m){this.error=m}}return a.__markCompiled&&a.__markCompiled(),d.TYPE_NONE=0,d.TYPE_SAME_ORIGIN=1,d.TYPE_CROSS_ORIGIN=2,d.prototype.getData=function(){var a=null;if(this.error)try{a=this.error.toString()}catch(b){a="Unknown error"}return{crossDomainWindowCount:this.crossDomainWindowCount,error:a,focus:this.focus,locations:this.locations,offsetRect:this.offsetRect?this.offsetRect.getData():null,pageURL:this.pageURL,topWindowLevel:this.topWindowLevel,topLocationURL:this.topLocationURL,topReferrerURL:this.topReferrerURL,topURL:this.topURL,type:this.type,viewportRect:this.viewportRect?this.viewportRect.getData():null,windowCount:this.windowCount}},d}),define("PigeonEvent",["require","exports"],function(a,b){var c=function(){function a(a){this.time=Date.now()/1e3,this.extra={},this.name=a}return a.prototype.addExtraDictionary=function(a){var b=this;a&&Object.keys(a).forEach(function(c){b.extra[c]=""+a[c]})},a.prototype.addExtraParam=function(a,b){a&&(this.extra[a]=""+b)},a.prototype.toDictionary=function(){return{name:this.name,time:this.time,extra:this.extra}},a}();return c}),define("PigeonLogger",["require","exports","HTTP","Logger","Utils"],function(a,b,c,d,e){var f=function(){function a(){}return a.logEvent=function(b){a.lastEventTime=Date.now(),a.eventQueue.push(b),null===a.delayTimer&&(a.delayTimer=setTimeout(a.delayTimerHandler,200))},a.dispatchEventQueue=function(){if(a.eventQueue.length>0){a.logger.verbose("Logging "+a.eventQueue.length+" events");var b=Date.now()/1e3,d=[];a.eventQueue.forEach(function(a){d.push(a.toDictionary())});var f={seq:a.sequenceId++,time:b,app_id:541974109282702,app_ver:"2.3.0",log_type:"client_event",session_id:a.getSessionID(),data:d};c.request({url:"https://graph.facebook.com/logging_client_events",type:"POST",timeout:null,data:e.serialize({access_token:"541974109282702|7d5d3313170a82367ae5fbb6f8d9aa6e",message:JSON.stringify(f)}),xhrFields:{withCredentials:!1},error:function(b,c,d){a.logger.error("Failed to communicate with logging endpoint, error="+d)}}),a.eventQueue=[]}},a.delayTimerHandler=function(){a.delayTimer=null,a.dispatchEventQueue()},a.getSessionID=function(){var b=Date.now();return(!a.sessionId||b-a.SESSION_TIMEOUT>a.lastEventTime)&&(a.sessionId=b.toString(16)+"-"+(~~(16777215*Math.random())).toString(16)),a.sessionId},a.delayTimer=null,a.eventQueue=[],a.logger=new d("PigeonLogger"),a.sequenceId=0,a.sessionId=null,a.sessionIDInitialized=!1,a.SESSION_TIMEOUT=18e4,a}();return f}),define("ViewabilityMeasurement",["require","exports","HTMLElementFrameContext","Rectangle"],function(a,b,c,d){"use strict";function e(a){this.error=null,this.focus=null,this.viewable=e.VIEWABLE_UNKNOWN,this.viewableRatio=null,this.visibleRect=null;try{if(a.parentWindow){var b=a.parentWindow.document;void 0!==b.hidden?this.focus=!b.hidden:void 0!==b.webkitHidden?this.focus=!b.webkitHidden:void 0!==b.mozHidden?this.focus=!b.mozHidden:void 0!==b.msHidden&&(this.focus=!b.msHidden)}var c=a.offsetRect;null!==a.focus&&(this.focus=a.focus),a.viewportRect&&c&&0===a.crossDomainWindowCount&&(this.visibleRect=a.viewportRect.intersection(c),this.visibleRect&&c&&c.area()>0?this.viewableRatio=this.visibleRect.area()/c.area():this.viewableRatio=0),this.focus===!1&&(this.viewableRatio=0),null!==this.viewableRatio&&(this.viewableRatio>=.5?this.viewable=e.VIEWABLE_TRUE:this.viewable=e.VIEWABLE_FALSE)}catch(d){this.error=d}}return a.__markCompiled&&a.__markCompiled(),e.VIEWABLE_UNKNOWN=0,e.VIEWABLE_TRUE=1,e.VIEWABLE_FALSE=2,e.prototype.getData=function(){var a=null;if(this.error)try{a=this.error.toString()}catch(b){a="Unknown error"}return{error:a,focus:this.focus,viewable:this.viewable,viewableRatio:this.viewableRatio,visibleRect:this.visibleRect?this.visibleRect.getData():null}},e}),define("TrackingManager",["require","exports","HTMLElementFrameContext","LogEvent","LogEventType","Logger","PigeonEvent","PigeonLogger","ViewabilityMeasurement"],function(a,b,c,d,e,f,g,h,i){var j=function(){function a(a){this._environmentData=a,this._logger=new f("TrackingManager")}return a.prototype.dispatchTrackers=function(a,b){var c=this;void 0===a&&(a=[]),a.forEach(function(a){a.getUrls().forEach(function(f){if(b)for(var g in b)if(b.hasOwnProperty(g)){var h="\\["+g+"\\]",i=b[g];f=f.replace(new RegExp(h,"gi"),i)}var j="type="+a.getType()+(a.getValue()?", value="+a.getValue():"")+", url="+f,k=Date.now();c._logger.log("Tracker load, "+j);try{var l=c._environmentData.placementContext&&c._environmentData.placementContext.topWindow?c._environmentData.placementContext.topWindow.document:document,m=l.createElement("img");m.src=f,m.style.setProperty("display","none","important"),m.style.setProperty("width","1px","important"),m.style.setProperty("height","1px","important");var n=function(){l.body.removeChild(m)};m.onload=function(){var a=(Date.now()-k)/1e3;c._logger.log("Tracker complete, duration="+a+"s, "+j),n()},m.onerror=function(){var a=(Date.now()-k)/1e3;c._logger.log("Tracker error, duration="+a+"s, "+j),n()},l.body.appendChild(m)}catch(o){c._logger.error("Error loading tracker:",o);var p="Unknown error";try{p=o.toString()}catch(q){}c.registerLogEvent(d.eventWithType(e.TrackingPixelLoadError,{url:f,error:p}))}})})},a.prototype.registerAdCandidate=function(a){this._adCandidate=a},a.prototype.registerLogEvent=function(b,d){var e=new g(a.LIVERAIL_EVENT);e.addExtraDictionary(this._environmentData.getCurrentAdRequestParameters()),e.addExtraParam(a.ERROR_CODE,b.id),e.addExtraParam(a.ERROR_MSG,b.message),e.addExtraParam(a.ERROR_DETAIL,JSON.stringify(b.detail)),this._adCandidate&&(e.addExtraParam(a.AD_LOAD_CLOCK,this._adCandidate.getLoadClock()),e.addExtraParam(a.AD_ADAPTER,this._adCandidate.adapter),e.addExtraParam(a.AD_SERVER,this._adCandidate.server),e.addExtraParam(a.AD_HAD_IMPRESSION,this._adCandidate.hadImpression()),e.addExtraParam(a.AD_TYPE,this._adCandidate.type),e.addExtraParam(a.AD_NID,this._adCandidate.networkID),e.addExtraParam(a.AD_COID,this._adCandidate.connectionID),e.addExtraParam(a.AD_SS,this._adCandidate.scenarios),e.addExtraParam(a.AD_NR,this._adCandidate.values),e.addExtraParam(a.AD_OID,this._adCandidate.orderID),e.addExtraParam(a.AD_OLID,this._adCandidate.orderLineID),e.addExtraParam(a.AD_CID,this._adCandidate.creativeID),e.addExtraParam(a.AD_UCID,this._adCandidate.uniqueCreativeID),e.addExtraParam(a.AD_VOLUME,100*d));var f=new c(this._environmentData.videoSlot,this._environmentData.parentWindow);e.addExtraParam(a.PLACEMENT_CONTEXT,JSON.stringify(f.getData())),e.addExtraParam(a.VIEWABILITY_MEASUREMENT,JSON.stringify(new i(f).getData())),h.logEvent(e)},a.prototype.unregisterAdCandidate=function(){delete this._adCandidate},a.LIVERAIL_EVENT="liverail_sdk_internal",a.ERROR_CODE="error_code",a.ERROR_MSG="error_msg",a.ERROR_DETAIL="error_detail",a.AD_ADAPTER="ad_adapter",a.AD_SERVER="ad_server",a.AD_LOAD_CLOCK="ad_load_clock",a.AD_HAD_IMPRESSION="ad_had_impression",a.AD_TYPE="ad_type",a.AD_NID="ad_nid",a.AD_COID="ad_coid",a.AD_SS="ad_ss",a.AD_NR="ad_nr",a.AD_OID="ad_oid",a.AD_OLID="ad_olid",a.AD_CID="ad_cid",a.AD_UCID="ad_ucid",a.AD_VOLUME="ad_volume",a.PLACEMENT_CONTEXT="placement_context",a.VIEWABILITY_MEASUREMENT="viewability_measurement",a}();return j}),define("ViewabilityRule",["require","exports"],function(a,b){"use strict";function c(a,b,c,d){this.viewableRatio=a,this.duration=c,this.startTime=b,"function"==typeof d&&(this.endCallback=d)}return a.__markCompiled&&a.__markCompiled(),c}),define("ViewabilityStatistics",["require","exports","ViewabilityMeasurement"],function(a,b,c){"use strict";function d(){this.$ViewabilityStatistics1=null,this.$ViewabilityStatistics2=null,this.$ViewabilityStatistics3=0,this.$ViewabilityStatistics4=0,this.$ViewabilityStatistics5=null,this.$ViewabilityStatistics6=null,this.$ViewabilityStatistics7=0}return a.__markCompiled&&a.__markCompiled(),d.prototype.getData=function(){return{avgViewableRatio:this.$ViewabilityStatistics1,curViewableRatio:this.$ViewabilityStatistics2,maxViewableRatio:this.$ViewabilityStatistics5,measurementCount:this.$ViewabilityStatistics3,measurementDuration:this.$ViewabilityStatistics4,minViewableRatio:this.$ViewabilityStatistics6}},d.prototype.registerProgress=function(a,b){this.$ViewabilityStatistics3++,this.$ViewabilityStatistics4+=a;var c=b.viewableRatio;null!==c&&void 0!==c&&(this.$ViewabilityStatistics2=c,this.$ViewabilityStatistics7+=c,this.$ViewabilityStatistics1=this.$ViewabilityStatistics7/this.$ViewabilityStatistics3,(null===this.$ViewabilityStatistics6||void 0===this.$ViewabilityStatistics6||this.$ViewabilityStatistics6>c)&&(this.$ViewabilityStatistics6=c),(null===this.$ViewabilityStatistics5||void 0===this.$ViewabilityStatistics5||this.$ViewabilityStatistics5<c)&&(this.$ViewabilityStatistics5=c))},d}),define("ViewabilityTest",["require","exports","ViewabilityMeasurement","ViewabilityRule","ViewabilityStatistics"],function(a,b,c,d,e){"use strict";function f(a){this.$ViewabilityTest1=!1,this.$ViewabilityTest2=!1,this.$ViewabilityTest3=a,this.$ViewabilityTest4=new e,this.$ViewabilityTest5=new e}return a.__markCompiled&&a.__markCompiled(),f.prototype.registerEnd=function(){this.$ViewabilityTest6||this.$ViewabilityTest7()},f.prototype.registerProgress=function(a,b){if(!this.$ViewabilityTest6){this.$ViewabilityTest4.registerProgress(a,b),this.$ViewabilityTest5.registerProgress(a,b);var c=b.viewableRatio;(null===c||void 0===c||c<this.$ViewabilityTest3.viewableRatio)&&(this.$ViewabilityTest5=new e);var d=this.$ViewabilityTest5.getData().measurementDuration;return this.$ViewabilityTest3.startTime>=0&&this.$ViewabilityTest4.getData().measurementDuration>this.$ViewabilityTest3.startTime&&0===d?void this.$ViewabilityTest8():void(d>=this.$ViewabilityTest3.duration&&this.$ViewabilityTest9())}},f.prototype.$ViewabilityTest7=function(){this.$ViewabilityTest6=!0;var a=this.$ViewabilityTest2?this.$ViewabilityTest5:this.$ViewabilityTest4,b=this.$ViewabilityTest3.endCallback;b&&b({results:{complete:this.$ViewabilityTest1,passed:this.$ViewabilityTest2},statistics:a.getData()})},f.prototype.$ViewabilityTest8=function(){this.$ViewabilityTest1=!0,this.$ViewabilityTest7()},f.prototype.$ViewabilityTest9=function(){this.$ViewabilityTest2=!0,this.$ViewabilityTest8()},f}),define("ViewabilityManager",["require","exports","HTMLElementFrameContext","ViewabilityMeasurement","ViewabilityRule","ViewabilityStatistics","ViewabilityTest"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d,e){this.$ViewabilityManager1=!0,this.$ViewabilityManager2=c,this.$ViewabilityManager3=a,this.$ViewabilityManager4=b,this.$ViewabilityManager5=e,this.$ViewabilityManager6=[];for(var f=0;f<d.length;f++)this.$ViewabilityManager6.push(new g(d[f]));this.$ViewabilityManager7(),this.$ViewabilityManager8()}return a.__markCompiled&&a.__markCompiled(),h.prototype.destroy=function(){this.$ViewabilityManager9(),this.$ViewabilityManager1=!1,this.$ViewabilityManager10()},h.prototype.getStatistics=function(){return this.$ViewabilityManager11.getData()},h.prototype.pause=function(){this.$ViewabilityManager1&&this.$ViewabilityManager9()},h.prototype.resetStatistics=function(){this.$ViewabilityManager7()},h.prototype.resume=function(){this.$ViewabilityManager1&&this.$ViewabilityManager8()},h.prototype.$ViewabilityManager10=function(){this.$ViewabilityManager6.forEach(function(a){a.registerEnd()})},h.prototype.$ViewabilityManager7=function(){this.$ViewabilityManager11=new f},h.prototype.$ViewabilityManager8=function(){void 0===this.$ViewabilityManager12&&(this.$ViewabilityManager12=setInterval(function(){this.$ViewabilityManager13()}.bind(this),this.$ViewabilityManager2))},h.prototype.$ViewabilityManager9=function(){void 0!==this.$ViewabilityManager12&&(clearInterval(this.$ViewabilityManager12),delete this.$ViewabilityManager12)},h.prototype.$ViewabilityManager13=function(){if(this.$ViewabilityManager1){var a=new c(this.$ViewabilityManager3,this.$ViewabilityManager4),b=new d(a);this.$ViewabilityManager11.registerProgress(this.$ViewabilityManager2,b);for(var e=0;e<this.$ViewabilityManager6.length;e++)this.$ViewabilityManager6[e].registerProgress(this.$ViewabilityManager2,b);var f=this.$ViewabilityManager5;f&&f({statistics:this.$ViewabilityManager11.getData()})}},h}),define("VPAIDViewMode",["require","exports"],function(a,b){var c=function(){function a(){}return a.normal="normal",a.thumbnail="thumbnail",a.fullscreen="fullscreen",a}();return c}),define("AdManager",["require","exports","AdapterConfiguration","AdapterFactory","AdExtensionManager","AdManagerEvents","AdProvider","BrowserFeatures","ClickToPlayInterface","CompanionManager","EventManager","GlobalConfig","InventoryPod","InventoryPodHistory","Logger","LogEvent","LogEventType","LinearSkinFactory","PluginBrowserFeatures","TrackingManager","Utils","ViewabilityManager","ViewabilityRule","VPAIDViewMode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=function(){function a(a){var b=this;this.logger=new o("AdManager"),this.eventManager=new k(f),this.companionManager=new j,this.adExtensionManager=new e,this.adapterFactory=new d,this.adVolume=1,this.adVolumeSet=!0,this.onVideoSlotContextMenu=function(a){u.checkWindowSanity()&&a.preventDefault()},this.onVideoSlotVolumeChange=function(){u.checkWindowSanity()&&b.updateAdVolume(b.environmentData.videoSlot.muted?0:b.environmentData.videoSlot.volume)},this.updateViewMode=function(){if(u.checkWindowSanity()){var a=x.normal,c=b.environmentData.parentWindow.document,d=b.videoSlot;(c.fullscreenEnabled||c.fullScreen||c.webkitIsFullScreen||c.mozFullScreen||c.msFullscreenEnabled||d&&d.webkitDisplayingFullscreen)&&(a=x.fullscreen),b.viewMode!==a&&(b.adCandidate&&b.state>4&&b.state<10&&(a===x.fullscreen?b.trackingManager.dispatchTrackers(b.adCandidate.getTrackers("fullscreen")):b.trackingManager.dispatchTrackers(b.adCandidate.getTrackers("leaveFullscreen"))),b.viewMode=a)}},this.onAdSourceRequestError=function(a){var c=a.getAdSource();b.inventoryPodHistory.registerAdSourceFailure(c)},this.onAdProviderSuccess=function(a){0===b.inventoryPod.getPodSlotIndex()&&null!==a.getPlacementDefinition()&&b.inventoryPod.setPlacementDefinition(a.getPlacementDefinition()),b.inventoryPodSlot.setAdResponse(a),b.environmentData.setSessionId(a.getTrid()),b.initializeInventoryPodSlot()},this.onAdProviderError=function(a){b.registerLogEvent(a),b.onInventoryPodComplete(a)},this.adLinear=a.getDefaultAdLinear()}return a.prototype.getAdLinear=function(){return this.adLinear},a.prototype.getAdWidth=function(){return this.adapter?this.adapter.getAdWidth():0},a.prototype.getAdHeight=function(){return this.adapter?this.adapter.getAdHeight():0},a.prototype.getAdExpanded=function(){return this.adapter?this.adapter.getAdExpanded():!1},a.prototype.getAdSkippableState=function(){return this.adapter?this.adapter.getAdSkippableState():!1},a.prototype.getAdSkippableRemainingTime=function(){return this.adapter?this.adapter.getAdSkippableRemainingTime():-2},a.prototype.getAdRemainingTime=function(){return this.adapter?Math.ceil(this.adapter.getAdRemainingTime()):-2},a.prototype.getAdDuration=function(){return this.adapter?Math.ceil(this.adapter.getAdDuration()):-2},a.prototype.getAdVolume=function(){return this.adapter&&this.adapter.getAdVolume()>=0?this.adapter.getAdVolume():this.adVolume},a.prototype.setAdVolume=function(a){var b=u.returnFloat(a);isNaN(b)||(this.adVolumeSet=!0,this.updateAdVolume(b))},a.prototype.getAdCompanions=function(){return this.adapter?this.adapter.getAdCompanions():""},a.prototype.getAdIcons=function(){return this.adapter?this.adapter.getAdIcons():!1},a.prototype.handshakeVersion=function(a){return"2.0"},a.prototype.initAd=function(a,b,c,d,e,f){this.destroy(),this.state=1,this.registerEnvironmentData(f.environmentData),this.logger.log("Initializing with environmentData:",this.environmentData),this.inventoryPod=new m(this.environmentData.getAdParameters()),this.inventoryPodHistory=new n,this.trackingManager=new t(this.environmentData),this.registerAdProvider(this.environmentData),this.instantiateInventoryPodSlot()},a.prototype.resizeAd=function(a,b,c){return this.adapter?this.adapter.resizeAd(a,b,c):void 0},a.prototype.startAd=function(){3===this.state&&this.startNextInventoryPodSlot()},a.prototype.stopAd=function(){if(this.state>0){var a=this.state;if(this.state=2,a>=4&&this.adapter)return this.adCandidate&&this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("close")),void this.adapter.stopAd();this.onInventoryPodComplete()}else this.destroy(),this.eventManager.dispatch(f.AdStopped)},a.prototype.pauseAd=function(){return this.adapter?this.adapter.pauseAd():void 0},a.prototype.resumeAd=function(){return this.adapter?this.adapter.resumeAd():void 0},a.prototype.expandAd=function(){return this.adapter?this.adapter.expandAd():void 0},a.prototype.collapseAd=function(){return this.adapter?this.adapter.collapseAd():void 0},a.prototype.skipAd=function(){return this.adapter?this.adapter.skipAd():void 0},a.prototype.subscribe=function(a,b,c){this.eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this.eventManager.unsubscribe(a,b)},a.prototype.onAdLoaded=function(){this.registerLogEvent(p.eventWithType(q.AdLoaded)),this.registerLinearSkin(),this.registerDocument(),this.adapter.startAd()},a.prototype.onAdStarted=function(){this.onAdLinearChange()},a.prototype.onAdStopped=function(){this.state>3&&(this.state=10),this.adCandidate.registerComplete(),this.onAdapterComplete()},a.prototype.onAdSkipped=function(){this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("skip")),this.registerAdapterProgressFinalBoundary(),this.eventManager.dispatch(f.AdSkipped)},a.prototype.onAdSkippableStateChange=function(){this.eventManager.dispatch(f.AdSkippableStateChange)},a.prototype.onAdSizeChange=function(){this.updateViewMode(),this.eventManager.dispatch(f.AdSizeChange)},a.prototype.onAdLinearChange=function(){var a=this.adapter.getAdLinear();this.adLinear!==a&&(this.adLinear=a,this.eventManager.dispatch(f.AdLinearChange))},a.prototype.onAdDurationChange=function(){this.adCandidate.updateCreativeDuration(this.adapter.getAdDuration()),this.eventManager.dispatch(f.AdDurationChange)},a.prototype.onAdExpandedChange=function(){this.eventManager.dispatch(f.AdExpandedChange)},a.prototype.onAdVolumeChange=function(){this.adVolume>0&&0===this.adapter.getAdVolume()?this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("mute")):0===this.adVolume&&this.adapter.getAdVolume()>0&&this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("unmute")),this.adVolume=this.adapter.getAdVolume(),
this.eventManager.dispatch(f.AdVolumeChange)},a.prototype.onAdImpression=function(){this.state>=3&&this.state<6&&(this.state=6,this.impressionCount+=1,this.adCandidate.setProgressBoundary(0,this.adapter.getAdVolume()),this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("impression")),this.registerLogEvent(p.eventWithType(q.AdImpression)),(0===this.adVolume||this.environmentData.videoSlot&&this.environmentData.videoSlot.muted)&&this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("mute")),this.updateViewMode(),this.adSlot.registerImpression(),this.registerViewabilityManager(),this.eventManager.dispatch(f.AdImpression),this.companionManager.showCompanions(this.adCandidate.getCompanionAds(),this.environmentData.companionPlacements,this.environmentData.parentWindow))},a.prototype.onAdVideoStart=function(){this.state<5&&(this.state=5),this.eventManager.dispatch(f.AdVideoStart)},a.prototype.onAdVideoFirstQuartile=function(){6===this.state&&(this.state=7,this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("view",25))),this.eventManager.dispatch(f.AdVideoFirstQuartile)},a.prototype.onAdVideoMidpoint=function(){7===this.state&&(this.state=8,this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("view",50))),this.eventManager.dispatch(f.AdVideoMidpoint)},a.prototype.onAdVideoThirdQuartile=function(){8===this.state&&(this.state=9,this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("view",75))),this.eventManager.dispatch(f.AdVideoThirdQuartile)},a.prototype.onAdVideoComplete=function(){9===this.state&&(this.state=10,this.adCandidate.registerComplete(),this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("view",100))),this.registerAdapterProgressFinalBoundary(),this.eventManager.dispatch(f.AdVideoComplete)},a.prototype.onAdClickThru=function(a,b,c){if(this.state<6||this.state>=10)return void this.logger.debug("Video click occurred -- ad is not currently playing, ignoring");if(this.logger.log("AdClickThru occurred, clickUrl="+a,"clickId="+b,"adManagerHandles="+c),c&&0===a.length)return void this.logger.log("Missing click URL, ignoring AdClickThru");var d="",e="",g=!1;if(c===!1)this.logger.log("Creative handles click, ignoring clickUrl");else if(this.environmentData.getAdParameters().playerHandlesClick===!0)this.logger.log("Player handles click"),d=a,e=b,g=!0;else if(this.logger.log("AdManager handles click, url="+a),!this.environmentData.parentWindow.open(a,this.environmentData.getAdParameters().clickthruTarget))return void this.registerLogEvent(p.eventWithType(q.AdClickThroughFailed,{url:a}));this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("clickthru")),this.registerLogEvent(p.eventWithType(q.AdClickThrough,{url:a,playerHandles:g})),this.eventManager.dispatch(f.AdClickThru,[d,e,g])},a.prototype.onAdInteraction=function(){this.eventManager.dispatch(f.AdInteraction)},a.prototype.onAdUserAcceptInvitation=function(){this.eventManager.dispatch(f.AdUserAcceptInvitation)},a.prototype.onAdUserMinimize=function(){this.eventManager.dispatch(f.AdUserMinimize)},a.prototype.onAdUserClose=function(){this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("close")),this.eventManager.dispatch(f.AdUserClose)},a.prototype.onAdPaused=function(){this.viewabilityManager.pause(),this.state>=6&&this.state<10&&(this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("pause")),this.eventManager.dispatch(f.AdPaused))},a.prototype.onAdPlaying=function(){this.viewabilityManager.resume(),this.state>=6&&this.state<10&&(this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("resume")),this.eventManager.dispatch(f.AdPlaying))},a.prototype.onAdLog=function(a){this.eventManager.dispatch(f.AdLog,[a])},a.prototype.onAdError=function(a){this.logger.error("Received AdError from adapter, error=",a),this.state=10,this.adCandidate.registerComplete(),this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("error"),{ERRORCODE:a.id}),this.registerLogEvent(a),this.onAdapterComplete()},a.prototype.onLogEvent=function(a){this.registerLogEvent(a)},a.prototype.destroy=function(){if(this.logger.debug("destroy()"),this.state=0,this.unregisterAdProvider(),this.unregisterViewabilityManager(),this.unregisterDocument(),this.adapter){var a=this.adapter;this.unregisterAdapter(),a.destroy()}this.unregisterLinearSkin(),this.unregisterEnvironmentData(),this.unregisterVideoSlot(),this.unregisterClickToPlayInterface(),this.impressionCount=0,this.trackingManager=null,this.inventoryPodHistory=null,this.inventoryPod=null,this.inventoryPodSlot=null,this.adSlot=null,this.adCandidate=null,this.linearSkin=null,this.videoElementControls=void 0,this.viewMode=x.normal},a.prototype.registerClickToPlayInterface=function(){this.logger.log("Registering click-to-play interface"),this.clickToPlayInterface=new i(this.environmentData),this.clickToPlayInterface.subscribe(this.onClickToPlay,i.EVENT_CLICK,this),this.clickToPlayInterface.register()},a.prototype.unregisterClickToPlayInterface=function(){this.clickToPlayInterface&&(this.logger.log("Unregistering click-to-play interface"),this.clickToPlayInterface.unsubscribe(this.onClickToPlay,i.EVENT_CLICK),this.clickToPlayInterface.unregister(),this.clickToPlayInterface=null)},a.prototype.onClickToPlay=function(){this.logger.log("User initiated click-to-play"),this.unregisterClickToPlayInterface(),this.runAdCandidate()},a.prototype.registerLogEvent=function(a){this.trackingManager.registerLogEvent(a,this.getAdVolume())},a.prototype.registerEnvironmentData=function(a){this.unregisterEnvironmentData(),this.environmentData=a},a.prototype.unregisterEnvironmentData=function(){this.environmentData&&(this.environmentData=null)},a.prototype.registerVideoSlot=function(a){a&&(this.videoSlot=a,this.videoSlot.pause(),this.videoSlot.controls!==!1&&(this.logger.verbose("Preserving controls from videoSlot:",this.videoSlot.controls),this.videoElementControls=this.videoSlot.controls),this.logger.verbose("Setting videoSlot controls to false"),this.videoSlot.controls=!1,this.videoSlot.addEventListener("volumechange",this.onVideoSlotVolumeChange,!1),this.videoSlot.addEventListener("contextmenu",this.onVideoSlotContextMenu,!0))},a.prototype.unregisterVideoSlot=function(){this.videoSlot&&(void 0!==this.videoElementControls&&(this.logger.verbose("Restoring controls on videoSlot to:",this.videoElementControls),this.videoSlot.controls=this.videoElementControls),this.videoSlot.removeEventListener("volumechange",this.onVideoSlotVolumeChange,!1),this.videoSlot.removeEventListener("contextmenu",this.onVideoSlotContextMenu,!0),this.videoSlot=null)},a.prototype.updateAdVolume=function(a){this.adVolume!==a&&(this.adapter?this.adapter.setAdVolume(a):(this.adVolume=a,this.eventManager.dispatch(f.AdVolumeChange)))},a.prototype.instantiateInventoryPodSlot=function(){var a=this.inventoryPodSlot;return this.inventoryPodSlot=this.inventoryPod.getNewInventoryPodSlot(),null!==this.inventoryPodSlot&&(null===this.adSlot||this.inventoryPod.isSlotBased()||this.inventoryPod.isDurationBased()&&a&&a.getAdResponse()&&a.getAdResponse().getAdCandidateCount()>0)?(this.logger.debug("Instantiated new inventory pod slot:",this.inventoryPodSlot),void this.startInventoryPodSlot()):void this.onInventoryPodComplete()},a.prototype.startInventoryPodSlot=function(){this.logger.log("Inventory pod slot "+this.inventoryPod.getPodSlotIndex()+", retries: "+this.inventoryPodSlot.getRetryCount()+" -------------------------------------------------------"),this.environmentData.setSlotIndex(this.inventoryPod.getPodSlotIndex()),this.environmentData.setRetryIndex(this.inventoryPodSlot.getRetryCount()),this.environmentData.setPodPosition(this.inventoryPod.getCurrentPodPosition()),this.environmentData.setRemainingDuration(this.inventoryPod.getRemainingDuration()),this.environmentData.setFailedConnectionIds(this.inventoryPodHistory.getFailedConnectionIds()),this.environmentData.setServedCreativeIds(this.inventoryPodHistory.getServedCreativeIds()),this.environmentData.setFailedCreativeIds(this.inventoryPodHistory.getFailedCreativeIds()),this.environmentData.updateCurrentAdParameters(),this.adProvider.getAd(this.environmentData.getCurrentAdRequestParameters())},a.prototype.onInventoryPodComplete=function(a){var b=this.impressionCount>0,c=this.state;this.videoSlot&&this.videoSlot.pause(),this.destroy(),b||2===c?this.eventManager.dispatch(f.AdStopped):this.eventManager.dispatch(f.AdError,[a||p.eventWithType(q.NoFill)])},a.prototype.initializeInventoryPodSlot=function(){var a=this;this.preInstantiateAdapters(this.inventoryPodSlot.getAdResponse().getUniqueAdapterIds(),function(){a.onInventoryPodSlotLoaded()})},a.prototype.preInstantiateAdapters=function(a,b){var c=this;if(a.length>0){this.logger.debug("Inventory pod slot requires adapters: "+a.join(","));var d=0,e=function(e,f){null===f?c.logger.error("Failed to instantiate "+e+"Adapter"):c.logger.debug(e+"Adapter instance ready"),d+=1,d===a.length&&b()};a.forEach(function(a){c.adapterFactory.getAdapterInstance(a,function(b){e(a,b)})})}else b()},a.prototype.onInventoryPodSlotLoaded=function(){this.adSlot=this.inventoryPodSlot.getAdResponse().getNextAdSlot(),this.adSlot&&this.trackingManager.dispatchTrackers(this.adSlot.getTrackers("adslot"));var a="";try{a=h.getBrowserFeatures()}catch(b){a=JSON.stringify({error:b.message})}var c="";try{c=s.getBrowserFeatures()}catch(b){c=JSON.stringify({error:b.message})}return this.registerLogEvent(p.eventWithType(q.AdPodSlotLoaded,{browserFeatures:a,pluginBrowserFeatures:c})),this.adSlot&&0!==this.adSlot.getAdCandidateCount()?void(this.state<3?(this.state=3,this.eventManager.dispatch(f.AdLoaded)):this.startNextInventoryPodSlot()):void this.onInventoryPodSlotComplete()},a.prototype.startNextInventoryPodSlot=function(){this.startNextAdSlot()},a.prototype.onInventoryPodSlotComplete=function(){this.inventoryPod.registerInventoryPodSlotCompletion(this.inventoryPodSlot),2===this.state?this.onInventoryPodComplete():this.instantiateInventoryPodSlot()},a.prototype.startNextAdSlot=function(){null===this.adSlot?this.onInventoryPodSlotComplete():this.startNextAdCandidate()},a.prototype.onAdSlotComplete=function(){var a=this.adSlot;this.adSlot=null,this.inventoryPodSlot.registerAdSlotCompletion(a),a.hadImpression()||2===this.state?this.onInventoryPodSlotComplete():!a.hadImpression()&&this.inventoryPodSlot.getRetryCount()<this.environmentData.getAdParameters().maximumRetry?(this.logger.log("Inventory pod slot failed, retrying"),this.inventoryPodSlot.registerRetry(),this.environmentData.setRetryIndex(this.inventoryPodSlot.getRetryCount()),this.startInventoryPodSlot()):this.startNextAdSlot()},a.prototype.startNextAdCandidate=function(){if(this.adCandidate=this.adSlot.getNextAdCandidate(),null!==this.adCandidate){if(this.trackingManager.registerAdCandidate(this.adCandidate),this.videoSlot||this.registerVideoSlot(this.environmentData.videoSlot),3===this.state&&!this.environmentData.videoSlotCanAutoPlay)return void this.registerClickToPlayInterface();this.runAdCandidate()}else this.onAdSlotComplete()},a.prototype.onAdCandidateComplete=function(){this.companionManager.hideCompanions(this.adCandidate.getCompanionAds(),this.environmentData.companionPlacements,this.environmentData.parentWindow),this.adCandidate.hadImpression()&&this.inventoryPod.increasePlayedDuration(this.adCandidate.getDuration()),this.logger.log("Ad pod playedDuration="+this.inventoryPod.getPlayedDuration()+"s elapsedRealtime="+this.inventoryPod.getElapsedRealtime()+"s"),this.inventoryPodHistory.registerAdCandidateCompletion(this.adCandidate),this.trackingManager.unregisterAdCandidate(),2===this.state?this.onAdSlotComplete():this.startNextAdCandidate()},a.prototype.beginInventoryPod=function(){this.linearSkin=r.getLinearSkinInstance(this.environmentData,this.inventoryPod),this.adVolumeSet||(this.adVolume=this.environmentData.videoSlot.volume),this.inventoryPod.setStartTime()},a.prototype.onAdapterInstantiated=function(){3===this.state&&(this.state=4,this.eventManager.dispatch(f.AdStarted))},a.prototype.runAdCandidate=function(){var a=this;3===this.state&&this.beginInventoryPod(),this.logger.log("Running ad candidate:",this.adCandidate),this.adapterFactory.getAdapterInstance(this.adCandidate.adapter,function(b){null!==b?(a.onAdapterInstantiated(),a.adapter=b,a.logger.log("Registering "+a.adCandidate.adapter+"Adapter instance:",a.adapter),a.registerAdapter(),a.adCandidate.registerLoad(),a.adapter.initAd(a.environmentData.initWidth,a.environmentData.initHeight,a.environmentData.getAdParameters().viewMode,a.environmentData.getAdParameters().desiredBitrate,null,{slot:a.environmentData.slot,videoSlot:a.environmentData.videoSlot,videoSlotCanAutoPlay:!0,environmentData:a.environmentData,adCandidate:a.adCandidate,adapterConfiguration:new c(a.environmentData,a.inventoryPod.getPlacementDefinition())})):(a.logger.error(a.adCandidate.adapter+"Adapter not available"),a.registerLogEvent(p.eventWithType(q.AdapterMising,{adapterID:a.adCandidate.adapter})),a.onAdapterComplete())})},a.prototype.getAdapterCurrentTime=function(){if(this.adapter){var a=this.adapter.getAdDuration(),b=this.adapter.getAdRemainingTime();if(a>=0&&b>=0)return this.adapter.getAdDuration()-this.adapter.getAdRemainingTime()}return-1},a.prototype.onAdapterProgress=function(){var b=this.getAdapterCurrentTime(),c=this.adCandidate.getLastProgressTime();if(b>=0){if(this.adCandidate.registerProgress(b,this.adapter.getAdVolume()),c>b)return void this.onAdapterProgressBoundary(Math.floor(c));if(b>c+2*l.MEASUREMENT_FREQUENCY)return void this.onAdapterProgressBoundary(Math.floor(c));b-this.adCandidate.getLastProgressBoundaryTime()>=a.PROGRESS_BOUNDARY&&this.onAdapterProgressBoundary(Math.floor(b))}},a.prototype.onAdapterProgressBoundary=function(a){if(0!==this.adCandidate.getProgressCount()){var b=this.dumpViewabilityStats(),c=this.adCandidate.getAvgVolume(),d=this.adCandidate.getMinVolume();this.logger.debug("Adapter progress boundary reached, boundaryTime="+a+" avgVolume="+c+" minVolume="+d+" viewabilityStats=",b),this.trackingManager.dispatchTrackers(this.adCandidate.getTrackers("time"),{INTERVAL_START_TIME:this.adCandidate.getLastProgressBoundaryTime(),INTERVAL_END_TIME:a,VOLUME_AVG:c,VOLUME_MIN:d,VIEWABLE_RATIO_AVG:b.avgViewableRatio,VIEWABLE_RATIO_MIN:b.minViewableRatio}),this.trackingManager.registerLogEvent(p.eventWithType(q.AdProgressBoundary,{startTime:this.adCandidate.getLastProgressBoundaryTime(),endTime:a,volumeAvg:c,volumeMin:d,viewabilityStats:b})),this.adCandidate.setProgressBoundary(a,this.adapter.getAdVolume())}},a.prototype.registerAdapterProgressFinalBoundary=function(){var a=this.getAdapterCurrentTime();0>a&&(a=this.adCandidate.getLastProgressTime()),this.onAdapterProgressBoundary(Math.ceil(a))},a.prototype.onAdapterComplete=function(){this.state>4&&(this.state=4),this.unregisterViewabilityManager(),this.unregisterAdapter(),this.unregisterLinearSkin(),this.unregisterDocument(),this.onAdCandidateComplete()},a.prototype.registerAdProvider=function(a){this.adProvider||(this.adProvider=new g(a),this.adProvider.subscribe(this.onAdProviderSuccess,g.AdProviderSuccess),this.adProvider.subscribe(this.onAdProviderError,g.AdProviderError),this.adProvider.subscribe(this.onAdSourceRequestError,g.AdSourceRequestError))},a.prototype.unregisterAdProvider=function(){this.adProvider&&(this.adProvider.cancel(),this.adProvider.unsubscribe(this.onAdProviderSuccess,g.AdProviderSuccess),this.adProvider.unsubscribe(this.onAdProviderError,g.AdProviderError),this.adProvider.unsubscribe(this.onAdSourceRequestError,g.AdSourceRequestError),this.adProvider=null)},a.prototype.registerAdapter=function(){this.logger.log("Setting "+this.adCandidate.adapter+"Adapter volume to "+this.adVolume),this.adapter.setAdVolume(this.adVolume),this.registerAdapterSubscriptions(this.adapter)},a.prototype.unregisterAdapter=function(){this.adapter&&(this.unregisterAdapterSubscriptions(this.adapter),this.adapter=null)},a.prototype.registerAdapterSubscriptions=function(a){this.logger.log("Registering event subscriptions on adapter instance:",a),a.subscribe(this.onAdLoaded,f.AdLoaded,this),a.subscribe(this.onAdStarted,f.AdStarted,this),a.subscribe(this.onAdStopped,f.AdStopped,this),a.subscribe(this.onAdSkipped,f.AdSkipped,this),a.subscribe(this.onAdSkippableStateChange,f.AdSkippableStateChange,this),a.subscribe(this.onAdSizeChange,f.AdSizeChange,this),a.subscribe(this.onAdLinearChange,f.AdLinearChange,this),a.subscribe(this.onAdDurationChange,f.AdDurationChange,this),a.subscribe(this.onAdExpandedChange,f.AdExpandedChange,this),a.subscribe(this.onAdVolumeChange,f.AdVolumeChange,this),a.subscribe(this.onAdImpression,f.AdImpression,this),a.subscribe(this.onAdVideoStart,f.AdVideoStart,this),a.subscribe(this.onAdVideoFirstQuartile,f.AdVideoFirstQuartile,this),a.subscribe(this.onAdVideoMidpoint,f.AdVideoMidpoint,this),a.subscribe(this.onAdVideoThirdQuartile,f.AdVideoThirdQuartile,this),a.subscribe(this.onAdVideoComplete,f.AdVideoComplete,this),a.subscribe(this.onAdClickThru,f.AdClickThru,this),a.subscribe(this.onAdInteraction,f.AdInteraction,this),a.subscribe(this.onAdUserAcceptInvitation,f.AdUserAcceptInvitation,this),a.subscribe(this.onAdUserMinimize,f.AdUserMinimize,this),a.subscribe(this.onAdUserClose,f.AdUserClose,this),a.subscribe(this.onAdPaused,f.AdPaused,this),a.subscribe(this.onAdPlaying,f.AdPlaying,this),a.subscribe(this.onAdLog,f.AdLog,this),a.subscribe(this.onAdError,f.AdError,this),a.subscribe(this.onLogEvent,f.LogEvent,this),a.subscribe(this.onAdapterProgress,f.AdProgress,this)},a.prototype.unregisterAdapterSubscriptions=function(a){this.logger.log("Unregistering event subscriptions on adapter instance:",a),a.unsubscribe(this.onAdLoaded,f.AdLoaded),a.unsubscribe(this.onAdStarted,f.AdStarted),a.unsubscribe(this.onAdStopped,f.AdStopped),a.unsubscribe(this.onAdSkipped,f.AdSkipped),a.unsubscribe(this.onAdSkippableStateChange,f.AdSkippableStateChange),a.unsubscribe(this.onAdSizeChange,f.AdSizeChange),a.unsubscribe(this.onAdLinearChange,f.AdLinearChange),a.unsubscribe(this.onAdDurationChange,f.AdDurationChange),a.unsubscribe(this.onAdExpandedChange,f.AdExpandedChange),a.unsubscribe(this.onAdVolumeChange,f.AdVolumeChange),a.unsubscribe(this.onAdImpression,f.AdImpression),a.unsubscribe(this.onAdVideoStart,f.AdVideoStart),a.unsubscribe(this.onAdVideoFirstQuartile,f.AdVideoFirstQuartile),a.unsubscribe(this.onAdVideoMidpoint,f.AdVideoMidpoint),a.unsubscribe(this.onAdVideoThirdQuartile,f.AdVideoThirdQuartile),a.unsubscribe(this.onAdVideoComplete,f.AdVideoComplete),a.unsubscribe(this.onAdClickThru,f.AdClickThru),a.unsubscribe(this.onAdInteraction,f.AdInteraction),a.unsubscribe(this.onAdUserAcceptInvitation,f.AdUserAcceptInvitation),a.unsubscribe(this.onAdUserMinimize,f.AdUserMinimize),a.unsubscribe(this.onAdUserClose,f.AdUserClose),a.unsubscribe(this.onAdPaused,f.AdPaused),a.unsubscribe(this.onAdPlaying,f.AdPlaying),a.unsubscribe(this.onAdLog,f.AdLog),a.unsubscribe(this.onAdError,f.AdError),a.unsubscribe(this.onLogEvent,f.LogEvent),a.unsubscribe(this.onAdapterProgress,f.AdProgress)},a.prototype.registerLinearSkin=function(){this.linearSkin.subscribe(this.onAdClickThru,f.AdClickThru,this),this.linearSkin.subscribe(this.onLogEvent,f.LogEvent,this),this.linearSkin.register(this.adapter,this.adCandidate)},a.prototype.unregisterLinearSkin=function(){this.linearSkin&&(this.linearSkin.unsubscribe(this.onAdClickThru,f.AdClickThru),this.linearSkin.unsubscribe(this.onLogEvent,f.LogEvent),this.linearSkin.unregister())},a.prototype.registerDocument=function(){u.addDocumentFullscreenEventListener(this.environmentData.parentWindow.document,this.updateViewMode,!1),this.videoSlot&&(this.videoSlot.addEventListener("webkitbeginfullscreen",this.updateViewMode,!1),this.videoSlot.addEventListener("webkitendfullscreen",this.updateViewMode,!1))},a.prototype.unregisterDocument=function(){this.environmentData&&this.environmentData.parentWindow&&u.removeDocumentFullscreenEventListener(this.environmentData.parentWindow.document,this.updateViewMode,!1),this.videoSlot&&(this.videoSlot.removeEventListener("webkitbeginfullscreen",this.updateViewMode,!1),this.videoSlot.removeEventListener("webkitendfullscreen",this.updateViewMode,!1))},a.prototype.registerViewabilityManager=function(){var a=this;if(!this.viewabilityManager){var b=new w(.5,-1,2e3,function(b){a.logger.log("MRC viewability test complete:",b),b.results.passed&&(a.trackingManager.dispatchTrackers(a.adCandidate.getTrackers("viewable_mrc")),a.registerLogEvent(p.eventWithType(q.MRCViewable,b)))}),c=new w(.01,0,3e3,function(b){a.logger.log("FB viewability test complete:",b),b.results.passed&&(a.trackingManager.dispatchTrackers(a.adCandidate.getTrackers("viewable_fb")),a.registerLogEvent(p.eventWithType(q.FBViewable,b)))}),d=new w(.01,0,1e4,function(b){a.logger.log("View through test complete:",b),b.results.passed&&(a.trackingManager.dispatchTrackers(a.adCandidate.getTrackers("viewthrough")),a.registerLogEvent(p.eventWithType(q.ViewThrough,b)))});this.viewabilityManager=new v(this.environmentData.videoSlot,this.environmentData.parentWindow,l.MEASUREMENT_FREQUENCY,[b,c,d])}},a.prototype.unregisterViewabilityManager=function(){this.viewabilityManager&&this.viewabilityManager.destroy(),this.viewabilityManager=null},a.prototype.dumpViewabilityStats=function(){var a=this.viewabilityManager.getStatistics();return this.viewabilityManager.resetStatistics(),a},a.PROGRESS_BOUNDARY=5,a}();return y}),define("FlashVPAIDBridge",["require","exports","EventManager","Logger","Utils","VPAIDEvents"],function(a,b,c,d,e,f){var g=function(){function a(a,b,e){var g=this;this.logger=new d("FlashVPAIDBridge"),this.eventManager=new c(f),this.adVolume=-1,this.flashBuild="201406161543",this.creativeUrl=a,this.slot=b.slot,this.slotWindow=b.parentWindow,this.bgcolor=b.getAdParameters().bgcolor,this.destroy(),this.loadFlashVPAID(function(a){g.flashVPAID=a,g.logger.log("Loaded Flash VPAID:",g.flashVPAID),e(g)})}return a.prototype.getAdLinear=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdLinear():!1},a.prototype.getAdWidth=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdWidth():0},a.prototype.getAdHeight=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdHeight():0},a.prototype.getAdExpanded=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdExpanded():!1},a.prototype.getAdSkippableState=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdSkippableState():!1},a.prototype.getAdSkippableRemainingTime=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdSkippableRemainingTime():-2},a.prototype.getAdRemainingTime=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdRemainingTime():-2},a.prototype.getAdDuration=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdDuration():-2},a.prototype.getAdVolume=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdVolume():this.adVolume},a.prototype.setAdVolume=function(a){this.adVolume=a,this.bridgeInterfaceExists()&&this.flashVPAID.setAdVolume(a)},a.prototype.getAdCompanions=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdCompanions():""},a.prototype.getAdIcons=function(){return this.bridgeInterfaceExists()?this.flashVPAID.getAdIcons():!1},a.prototype.handshakeVersion=function(a){return a},a.prototype.initAd=function(a,b,c,d,f,g){if(this.logger.log("initAd() width:",a," height:",b," viewMode:",c,"desiredBitrate:",d,"creativeData:",f,"environmentVars:",g),this.bridgeInterfaceExists()){this.adVolume>-1&&(this.logger.debug("Setting Flash VPAID adVolume property to "+this.adVolume),this.flashVPAID.setAdVolume(this.adVolume));var h=f.AdParameters||"";this.flashVPAID.initAd(-1,-1,c,d,h,e.stringifyParameterObject(g))}},a.prototype.resizeAd=function(a,b,c){return this.bridgeInterfaceExists()?this.flashVPAID.resizeAd(a,b,c):void 0},a.prototype.startAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.startAd():void 0},a.prototype.stopAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.stopAd():void 0},a.prototype.pauseAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.pauseAd():void 0},a.prototype.resumeAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.resumeAd():void 0},a.prototype.expandAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.expandAd():void 0},a.prototype.collapseAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.collapseAd():void 0},a.prototype.skipAd=function(){return this.bridgeInterfaceExists()?this.flashVPAID.skipAd():void 0},a.prototype.subscribe=function(a,b,c){this.eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this.eventManager.unsubscribe(a,b)},a.prototype.destroy=function(){this.unloadFlashVPAID(),this.flashContainer=null,this.flashVPAID=null},a.prototype.loadFlashVPAID=function(b){function c(){window.setTimeout(function(){"function"==typeof f.getVPAID&&null!==f.getVPAID()?b(f):c()},100)}var d,e,f,g,h,i=this,j="",k={onVPAIDEvent:function(a){return i.onVPAIDEvent(a)}};this.slotWindow.LiveRail||(this.slotWindow.LiveRail={}),this.slotWindow.LiveRail.VPAIDListeners||(this.slotWindow.LiveRail.VPAIDListeners={}),a.instanceCount+=1,e="LiveRail.VPAIDListeners.FlashVPAIDBridge_"+a.instanceCount,g=("https:"===this.slotWindow.location.protocol?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/swf/ui/vpaid-player.swf",g+="?build="+this.flashBuild,d="jscontext="+e,d+="&vpaidURL="+encodeURIComponent(this.creativeUrl),d+="&allowDomains=*",d+="&currentSecurityDomain=false",j+='<object style="display: block; width: 100%; height: 100%;"',navigator.userAgent.match(/MSIE/i)?(j+=' id="'+e+'"',j+=' name="'+e+'"',j+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">',j+='<param name="movie" value="'+g+'" />'):(j+=' data="'+g+'"',j+=' type="application/x-shockwave-flash">'),j+='<param name="quality" value="high" />',j+='<param name="allowfullscreen" value="true" />',j+='<param name="allowscriptaccess" value="always" />',j+='<param name="flashvars" value="'+d+'" />',this.bgcolor?(j+='<param name="wmode" value="opaque" />',j+='<param name="bgcolor" value="#'+this.bgcolor+'" />'):j+='<param name="wmode" value="transparent" />',j+="</object>",this.slotWindow.LiveRail.VPAIDListeners["FlashVPAIDBridge_"+a.instanceCount]=k,this.flashContainer=this.slotWindow.document.createElement("div"),this.flashContainer.style.position="absolute",this.flashContainer.style.top="0px",this.flashContainer.style.left="0px",this.flashContainer.style.width="100%",this.flashContainer.style.height="100%";var l=this.slot;this.slotWindow.getComputedStyle?h=this.slotWindow.getComputedStyle(this.slot,null).getPropertyValue("position"):l.currentStyle&&(h=l.currentStyle.position),this.targetSlotOriginalPosition=void 0,"static"===h&&(this.targetSlotOriginalPosition=this.slot.style.position,this.slot.style.position="relative"),this.slot.appendChild(this.flashContainer),this.flashContainer.innerHTML=j,f=this.flashContainer.childNodes[0],c(),this.logger.verbose("Loaded JS-Flash event interface:",k)},a.prototype.unloadFlashVPAID=function(){this.slot&&this.flashContainer&&(this.slot.removeChild(this.flashContainer),this.logger.log("Unloaded Flash VPAID"),this.targetSlotOriginalPosition&&(this.logger.log("Resetting slot element position to "+this.targetSlotOriginalPosition),this.slot.style.position=this.targetSlotOriginalPosition))},a.prototype.onVPAIDEvent=function(a){var b=this;f.hasOwnProperty(a.type)&&window.setTimeout(function(){switch(b.logger.verbose("Received "+a.type+" event from Flash bridge:",a,")"),a.type){case"AdClickThru":b.eventManager.dispatch(f.AdClickThru,[a.data.url,a.data.id,a.data.playerHandles]);break;case"AdInteraction":b.eventManager.dispatch(f.AdInteraction,[a.data.id]);break;case"AdLog":b.eventManager.dispatch(f.AdLog,[a.data.message]);break;case"AdStopped":b.destroy(),b.eventManager.dispatch(f.AdStopped);break;case"AdError":b.destroy(),b.eventManager.dispatch(f.AdError,[a.data]);break;default:b.eventManager.dispatch(a.type)}},0)},a.prototype.bridgeInterfaceExists=function(){return this.flashVPAID&&e.isFunction(this.flashVPAID.handshakeVersion)},a.instanceCount=0,a}();return g}),define("FlashAdManagerController",["require","exports","EventManager","FlashVPAIDBridge","Logger","VPAIDEvents"],function(a,b,c,d,e,f){var g=function(){function a(a){this.logger=new e("FlashAdManagerBridge"),this.eventManager=new c(f),this.adVolume=-1,this.instanceData=a,this.destroy()}return a.prototype.getAdLinear=function(){return this.flashBridge?this.flashBridge.getAdLinear():!1},a.prototype.getAdWidth=function(){return this.flashBridge?this.flashBridge.getAdWidth():0},a.prototype.getAdHeight=function(){return this.flashBridge?this.flashBridge.getAdHeight():0},a.prototype.getAdExpanded=function(){return this.flashBridge?this.flashBridge.getAdExpanded():!1},a.prototype.getAdSkippableState=function(){return this.flashBridge?this.flashBridge.getAdSkippableState():!1},a.prototype.getAdSkippableRemainingTime=function(){return this.flashBridge?this.flashBridge.getAdSkippableRemainingTime():-2},a.prototype.getAdRemainingTime=function(){return this.flashBridge?this.flashBridge.getAdRemainingTime():-2},a.prototype.getAdDuration=function(){return this.flashBridge?this.flashBridge.getAdDuration():-2},a.prototype.getAdVolume=function(){return this.flashBridge?this.flashBridge.getAdVolume():this.adVolume},a.prototype.setAdVolume=function(a){this.adVolume=a,this.flashBridge&&this.flashBridge.setAdVolume(a)},a.prototype.getAdCompanions=function(){return this.flashBridge?this.flashBridge.getAdCompanions():""},a.prototype.getAdIcons=function(){return this.flashBridge?this.flashBridge.getAdIcons():!1},a.prototype.handshakeVersion=function(a){return a},a.prototype.initAd=function(a,b,c,e,f,g){var h=this;this.logger.log("initAd(",a,",",b,",",c,",",e,",",f,",",g),this.destroy();var i=g.environmentData,j=("https:"===i.parentWindow.location.protocol?"https://cdn-static-secure":"http://cdn-static")+".liverail.com/swf/v4/admanager.swf?adLinear="+this.instanceData.getDefaultAdLinear();new d(j,i,function(d){h.flashBridge=d,h.registerBridgeSubscriptions(h.flashBridge),h.flashBridge.initAd(a,b,c,e,{AdParameters:""},i.inputParameters)})},a.prototype.resizeAd=function(a,b,c){return this.flashBridge?this.flashBridge.resizeAd(a,b,c):void 0},a.prototype.startAd=function(){return this.flashBridge?this.flashBridge.startAd():void 0},a.prototype.stopAd=function(){return this.flashBridge?this.flashBridge.stopAd():void 0},a.prototype.pauseAd=function(){return this.flashBridge?this.flashBridge.pauseAd():void 0},a.prototype.resumeAd=function(){return this.flashBridge?this.flashBridge.resumeAd():void 0},a.prototype.expandAd=function(){return this.flashBridge?this.flashBridge.expandAd():void 0},a.prototype.collapseAd=function(){return this.flashBridge?this.flashBridge.collapseAd():void 0},a.prototype.skipAd=function(){return this.flashBridge?this.flashBridge.skipAd():void 0},a.prototype.subscribe=function(a,b,c){this.eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this.eventManager.unsubscribe(a,b)},a.prototype.destroy=function(){this.flashBridge&&(this.unregisterBridgeSubscriptions(this.flashBridge),this.flashBridge=null)},a.prototype.registerBridgeSubscriptions=function(a){this.logger.log("Registering event subscriptions on bridge instance:",a),a.subscribe(this.onAdLoaded,f.AdLoaded,this),a.subscribe(this.onAdStarted,f.AdStarted,this),a.subscribe(this.onAdStopped,f.AdStopped,this),a.subscribe(this.onAdSkipped,f.AdSkipped,this),a.subscribe(this.onAdSkippableStateChange,f.AdSkippableStateChange,this),a.subscribe(this.onAdSizeChange,f.AdSizeChange,this),a.subscribe(this.onAdLinearChange,f.AdLinearChange,this),a.subscribe(this.onAdDurationChange,f.AdDurationChange,this),a.subscribe(this.onAdExpandedChange,f.AdExpandedChange,this),a.subscribe(this.onAdVolumeChange,f.AdVolumeChange,this),
a.subscribe(this.onAdImpression,f.AdImpression,this),a.subscribe(this.onAdVideoStart,f.AdVideoStart,this),a.subscribe(this.onAdVideoFirstQuartile,f.AdVideoFirstQuartile,this),a.subscribe(this.onAdVideoMidpoint,f.AdVideoMidpoint,this),a.subscribe(this.onAdVideoThirdQuartile,f.AdVideoThirdQuartile,this),a.subscribe(this.onAdVideoComplete,f.AdVideoComplete,this),a.subscribe(this.onAdClickThru,f.AdClickThru,this),a.subscribe(this.onAdInteraction,f.AdInteraction,this),a.subscribe(this.onAdUserAcceptInvitation,f.AdUserAcceptInvitation,this),a.subscribe(this.onAdUserMinimize,f.AdUserMinimize,this),a.subscribe(this.onAdUserClose,f.AdUserClose,this),a.subscribe(this.onAdPaused,f.AdPaused,this),a.subscribe(this.onAdPlaying,f.AdPlaying,this),a.subscribe(this.onAdLog,f.AdLog,this),a.subscribe(this.onAdError,f.AdError,this)},a.prototype.unregisterBridgeSubscriptions=function(a){this.logger.log("Unregistering event subscriptions on adapter instance:",a),a.unsubscribe(this.onAdLoaded,f.AdLoaded),a.unsubscribe(this.onAdStarted,f.AdStarted),a.unsubscribe(this.onAdStopped,f.AdStopped),a.unsubscribe(this.onAdSkipped,f.AdSkipped),a.unsubscribe(this.onAdSkippableStateChange,f.AdSkippableStateChange),a.unsubscribe(this.onAdSizeChange,f.AdSizeChange),a.unsubscribe(this.onAdLinearChange,f.AdLinearChange),a.unsubscribe(this.onAdDurationChange,f.AdDurationChange),a.unsubscribe(this.onAdExpandedChange,f.AdExpandedChange),a.unsubscribe(this.onAdVolumeChange,f.AdVolumeChange),a.unsubscribe(this.onAdImpression,f.AdImpression),a.unsubscribe(this.onAdVideoStart,f.AdVideoStart),a.unsubscribe(this.onAdVideoFirstQuartile,f.AdVideoFirstQuartile),a.unsubscribe(this.onAdVideoMidpoint,f.AdVideoMidpoint),a.unsubscribe(this.onAdVideoThirdQuartile,f.AdVideoThirdQuartile),a.unsubscribe(this.onAdVideoComplete,f.AdVideoComplete),a.unsubscribe(this.onAdClickThru,f.AdClickThru),a.unsubscribe(this.onAdInteraction,f.AdInteraction),a.unsubscribe(this.onAdUserAcceptInvitation,f.AdUserAcceptInvitation),a.unsubscribe(this.onAdUserMinimize,f.AdUserMinimize),a.unsubscribe(this.onAdUserClose,f.AdUserClose),a.unsubscribe(this.onAdPaused,f.AdPaused),a.unsubscribe(this.onAdPlaying,f.AdPlaying),a.unsubscribe(this.onAdLog,f.AdLog),a.unsubscribe(this.onAdError,f.AdError)},a.prototype.onAdLoaded=function(){this.eventManager.dispatch(f.AdLoaded)},a.prototype.onAdStarted=function(){this.eventManager.dispatch(f.AdStarted)},a.prototype.onAdStopped=function(){this.destroy(),this.eventManager.dispatch(f.AdStopped)},a.prototype.onAdSkipped=function(){this.eventManager.dispatch(f.AdSkipped)},a.prototype.onAdSkippableStateChange=function(){this.eventManager.dispatch(f.AdSkippableStateChange)},a.prototype.onAdSizeChange=function(){this.eventManager.dispatch(f.AdSizeChange)},a.prototype.onAdLinearChange=function(){this.eventManager.dispatch(f.AdLinearChange)},a.prototype.onAdDurationChange=function(){this.eventManager.dispatch(f.AdDurationChange)},a.prototype.onAdExpandedChange=function(){this.eventManager.dispatch(f.AdExpandedChange)},a.prototype.onAdVolumeChange=function(){this.eventManager.dispatch(f.AdVolumeChange)},a.prototype.onAdImpression=function(){this.eventManager.dispatch(f.AdImpression)},a.prototype.onAdVideoStart=function(){this.eventManager.dispatch(f.AdVideoStart)},a.prototype.onAdVideoFirstQuartile=function(){this.eventManager.dispatch(f.AdVideoFirstQuartile)},a.prototype.onAdVideoMidpoint=function(){this.eventManager.dispatch(f.AdVideoMidpoint)},a.prototype.onAdVideoThirdQuartile=function(){this.eventManager.dispatch(f.AdVideoThirdQuartile)},a.prototype.onAdVideoComplete=function(){this.eventManager.dispatch(f.AdVideoComplete)},a.prototype.onAdClickThru=function(a,b,c){this.eventManager.dispatch(f.AdClickThru,[a,b,c])},a.prototype.onAdInteraction=function(){this.eventManager.dispatch(f.AdInteraction)},a.prototype.onAdUserAcceptInvitation=function(){this.eventManager.dispatch(f.AdUserAcceptInvitation)},a.prototype.onAdUserMinimize=function(){this.eventManager.dispatch(f.AdUserMinimize)},a.prototype.onAdUserClose=function(){this.eventManager.dispatch(f.AdUserClose)},a.prototype.onAdPaused=function(){this.eventManager.dispatch(f.AdPaused)},a.prototype.onAdPlaying=function(){this.eventManager.dispatch(f.AdPlaying)},a.prototype.onAdLog=function(a){this.eventManager.dispatch(f.AdLog,[a])},a.prototype.onAdError=function(a){this.destroy(),this.eventManager.dispatch(f.AdError,[a])},a}();return g}),define("AdManagerFactory",["require","exports","AdManager","FlashAdManagerController"],function(a,b,c,d){var e=function(){function a(a){this.adManagerDictionary={},this.instanceData=a}return a.prototype.adManagerForEnvironment=function(a){if(!this.adManagerDictionary[a])switch(a){case 1:this.adManagerDictionary[a]=new c(this.instanceData);break;case 2:this.adManagerDictionary[a]=new d(this.instanceData);break;case 0:this.adManagerDictionary[a]=null}return this.adManagerDictionary[a]},a}();return e}),define("AdParameters",["require","exports"],function(a,b){var c=function(){function a(){this.maximumRetry=1,this.maxPodSlots=0,this.maxPodDuration=0,this.maxDuration=0,this.adDeliveryTimeout=10,this.adRequestTimeout=10,this.adCreativeTimeout=15,this.timeoutVPAIDLoad=10,this.timeoutVPAIDInit=15,this.timeoutVPAIDStart=10,this.viewMode="normal",this.wrapperLimit=3,this.desiredBitrate=800,this.showCountdown=!1,this.clickthruTarget="_blank",this.linearSkin=1,this.countdownMessage=null,this.indexMessage=null,this.clickthroughMessage=null,this.clickElement=null,this.skipCountdownMessage=null,this.skipMessage=null,this.playerHandlesClick=!1,this.pauseOnClick=!0}return a}();return c}),define("EnvironmentData",["require","exports","AdapterFactory","AdParameters","CompanionPlacement","HTMLElementFrameContext","InventoryPod","Logger","MimeType","Utils","ViewabilityMeasurement"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(){function a(a,b){this.placementId=null,this.adUnitType=g.TYPE_INSTREAM,this.integration=0,this.integrationVersion=null,this.urlPrefix=null,this.mimeTypeBlockList=[],this.mimeTypePriorityList=[],this.inputParameters={},this.companionPlacements={},this.logger=new h("EnvironmentData"),this.adParameters=new d,this.adRequestParameters={},this.currentAdRequestParameters={},this.slotIndex=0,this.retryIndex=0,this.podPosition=null,this.remainingDuration=1,this.sessionId=null,this.failedConnectionIds="",this.servedCreativeIds="",this.failedCreativeIds="",this.processInitData(a,b)}return a.prototype.getAdParameters=function(){return this.adParameters},a.prototype.getCurrentAdRequestParameters=function(){return this.currentAdRequestParameters},a.prototype.setSlotIndex=function(a){this.slotIndex=a},a.prototype.setRetryIndex=function(a){this.retryIndex=a},a.prototype.setPodPosition=function(a){this.podPosition=a},a.prototype.setRemainingDuration=function(a){this.remainingDuration=a},a.prototype.setSessionId=function(a){this.sessionId=a},a.prototype.setFailedConnectionIds=function(a){this.failedConnectionIds=a.join()||""},a.prototype.setServedCreativeIds=function(a){this.servedCreativeIds=a.join()||""},a.prototype.setFailedCreativeIds=function(a){this.failedCreativeIds=a.join()||""},a.prototype.updateCurrentAdParameters=function(){var a={};for(var b in this.adRequestParameters)this.adRequestParameters.hasOwnProperty(b)&&(a[b]=this.adRequestParameters[b]);this.placementContext=new f(this.videoSlot,this.parentWindow),this.logger.debug("Retrieved placement context:",this.placementContext),this.viewabiltyMeasurement=new k(this.placementContext),this.logger.debug("Retrieved viewability measurement:",this.viewabiltyMeasurement),a.LR_VIEWABLE=j.returnString(this.viewabiltyMeasurement.viewable),a.LR_VIEWABLE_RATIO=j.returnString(this.viewabiltyMeasurement.viewableRatio),a.LR_WINDOW_DEPTH=j.returnString(this.placementContext.crossDomainWindowCount),a.LR_WINDOW_LOCATION=j.returnString(this.placementContext.topLocationURL),a.LR_WINDOW_REFERRER=j.returnString(this.placementContext.topReferrerURL),a.LR_IFRAME=j.returnString(this.placementContext.type),a.LR_URL&&"[LR_URL]"!==a.LR_URL.toUpperCase()||(a.LR_URL=j.returnString(this.placementContext.topURL)),a.LR_PAGE_URL=j.returnString(this.placementContext.pageURL);var c=null,d=null;this.placementContext.offsetRect&&(c=this.placementContext.offsetRect.width,d=this.placementContext.offsetRect.height),a.LR_WIDTH=j.returnString(c),a.LR_HEIGHT=j.returnString(d);var e=null,g=null;0===this.placementContext.crossDomainWindowCount&&this.placementContext.viewportRect&&(e=this.placementContext.viewportRect.width,g=this.placementContext.viewportRect.height),a.LR_VIEWPORT_WIDTH=j.returnString(e),a.LR_VIEWPORT_HEIGHT=j.returnString(g);var h=3;null===c||null===d||300>=c||250>d?(this.logger.log("Detected in-banner placement"),h=2):1===this.integration&&(this.logger.log("Detected interstitial placement"),h=1),a.LR_ADTYPE=j.returnString(h);var i=navigator.language||navigator.browserLanguage||"",l=i.split("-");a.LR_LOCALE=l[0]+(l[1]?"_"+l[1].toUpperCase():""),delete a.LR_SESSION_ID,this.sessionId&&(a.LR_SESSION_ID=this.sessionId),null!==this.remainingDuration&&(a.LR_DURATION=Math.round(this.remainingDuration)),a.LR_SLOT_INDEX=this.slotIndex,a.LR_RETRY_INDEX=this.retryIndex,a.LR_POD_CURRENT=this.podPosition,a.blacklist_connection_id=this.failedConnectionIds,a.served_creative_id=this.servedCreativeIds,a.failed_creative_id=this.failedCreativeIds,this.currentAdRequestParameters=a},a.prototype.addMimeTypeToPriorityList=function(a){-1===this.mimeTypeBlockList.indexOf(a)&&this.mimeTypePriorityList.push(a)},a.prototype.processInitData=function(a,b){var d=this;this.videoSlot=b.videoSlot,this.slot=b.slot||this.videoSlot.parentNode,this.videoSlotCanAutoPlay=b.videoSlotCanAutoPlay;var e=this.slot.ownerDocument;"object"==typeof this.slot&&"object"==typeof this.slot.ownerDocument?this.parentWindow=this.slot.ownerDocument.defaultView||e.parentWindow:"object"==typeof this.videoSlot&&"object"==typeof this.videoSlot.ownerDocument?this.parentWindow=this.videoSlot.ownerDocument.defaultView||e.parentWindow:b.window&&(this.parentWindow=b.window),this.initWidth=b.width,this.initHeight=b.height,this.adParameters.desiredBitrate=j.returnInt(b.desiredBitrate,this.adParameters.desiredBitrate),h.getDebugLevel()>0&&(this.adRequestParameters.LR_DEBUG=j.returnString(h.getDebugLevel())),this.processParameterSet(b.environmentVars),delete this.adRequestParameters.LR_MUTED;var f=null;if(this.videoSlot&&(f=this.videoSlot.muted||this.videoSlot.volume<=0?1:0),-1!==b.adVolume&&(f=b.adVolume<=0?1:0),null!==f&&(this.adRequestParameters.LR_MUTED=j.returnString(f)),this.adRequestParameters.LR_SCHEMA="liverail",delete this.adRequestParameters.LR_FORMAT,this.mimeTypePriorityList=[],1===b.environmentType&&(this.logger.verbose("Determining format support:"),a.getDisableIframes()!==!0&&(this.addMimeTypeToPriorityList(i.JavaScript),this.addMimeTypeToPriorityList(i.JavaScriptAlt)),[i.HLS,i.HLSAlt,i.MP4,i.WebM,i.OGG,i.Mobile3GP].forEach(function(a){var b=d.videoSlot.canPlayType(a);d.logger.verbose("    "+a+":",b),""!==b&&"no"!==b.toLowerCase()&&d.addMimeTypeToPriorityList(a)}),j.detectFlash()&&!j.videoElementIsFullscreen(this.parentWindow.document)&&(this.addMimeTypeToPriorityList(i.FLV),this.addMimeTypeToPriorityList(i.Flash)),this.adRequestParameters.LR_FORMAT=this.mimeTypePriorityList.join(";")),this.adRequestParameters.LR_ADAPTERS=c.getAvailableAdapters().join(),this.adRequestParameters.LR_SDK="js",this.adRequestParameters.LR_SDK_VERSION="2.3.0","string"==typeof this.adRequestParameters.LR_ADMAP){this.adRequestParameters.LR_ADMAP=this.adRequestParameters.LR_ADMAP.split(";",1)[0];var k=this.adRequestParameters.LR_ADMAP.split(":");void 0===this.adRequestParameters.LR_ADUNIT&&(this.adRequestParameters.LR_ADUNIT=k[0]),void 0===this.adRequestParameters.LR_SCENARIO&&(this.adRequestParameters.LR_SCENARIO=k[1]),void 0===this.adRequestParameters.LR_VIDEO_POSITION&&(this.adRequestParameters.LR_VIDEO_POSITION=k[2])}this.adRequestParameters.LR_ADUNIT=this.adRequestParameters.LR_ADUNIT||g.TYPE_INSTREAM,this.adRequestParameters.LR_SCENARIO=this.adRequestParameters.LR_SCENARIO||"",this.adRequestParameters.LR_VIDEO_POSITION=this.adRequestParameters.LR_VIDEO_POSITION||0,this.adRequestParameters.LR_ADUNIT===g.TYPE_INSTREAM||this.adRequestParameters.LR_ADUNIT===g.TYPE_OVERLAY?(this.adUnitType=this.adRequestParameters.LR_ADUNIT,this.logger.log("Set adUnitType to:",this.adUnitType)):this.logger.error("Invalid adUnitType passed to LR_ADUNIT:",this.adRequestParameters.LR_ADUNIT),this.adRequestParameters.LR_ADMAP=this.adRequestParameters.LR_ADUNIT+":"+this.adRequestParameters.LR_SCENARIO+":"+this.adRequestParameters.LR_VIDEO_POSITION},a.prototype.processParameterSet=function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b],d=null;switch("LR_"===b.substr(0,3).toUpperCase()&&(d=j.returnString(c)),d&&(this.inputParameters[b]=d),b.toUpperCase()){case"LR_ENVIRONMENT":break;case"LR_PUBLISHER_ID":d&&(d.match(/[^0-9]/)||(this.publisherId=j.returnUnsignedInt(c,this.publisherId)),this.adRequestParameters[b]=d);break;case"LR_PLACEMENT_ID":d&&(this.placementId=d,this.adRequestParameters[b]=d);break;case"LR_INTEGRATION":switch(d){case"int":this.integration=1;break;case"jw":this.integration=2;break;case"bc":this.integration=3;break;case"vjs":this.integration=4;break;case"pdk":this.integration=5;break;default:this.integration=0}0!==this.integration&&this.logger.log("Set integration to "+this.integration+" (",d,")"),this.ingestAdRequestParameter(b,d);break;case"LR_INTEGRATION_VERSION":d&&(this.integrationVersion=d,this.logger.log("Set integration version to "+this.integrationVersion),this.ingestAdRequestParameter(b,d));break;case"LR_FORMAT_BLOCKLIST":if(d){var e=d.split(";");e&&(this.mimeTypeBlockList=e,this.logger.log("Set mime type blocklist to:",this.mimeTypeBlockList))}break;case"LR_ALLOW_RETRY":this.adParameters.maximumRetry=Math.min(7,Math.max(0,j.returnInt(c,this.adParameters.maxDuration))),this.logger.log("Set maximumRetry to:",this.adParameters.maximumRetry);break;case"LR_DURATION":this.adParameters.maxDuration=Math.max(0,j.returnFloat(c,this.adParameters.maxDuration)),this.ingestAdRequestParameter(b,d),this.logger.log("Set maxDuration to:",this.adParameters.maxDuration);break;case"LR_POD_SLOTS":this.adParameters.maxPodSlots=j.returnUnsignedInt(c,this.adParameters.maxPodSlots),this.logger.log("Set maxPodSlots to:",this.adParameters.maxPodSlots);break;case"LR_POD_DURATION":this.adParameters.maxPodDuration=Math.max(0,j.returnFloat(c,this.adParameters.maxPodDuration)),this.logger.log("Set maxPodDuration to:",this.adParameters.maxPodDuration);break;case"LR_WRAPPER_LIMIT":this.adParameters.wrapperLimit=j.returnUnsignedInt(c,this.adParameters.wrapperLimit),this.logger.log("Set wrapper limit to:",this.adParameters.wrapperLimit);break;case"LR_CLICK_TARGET":this.adParameters.clickthruTarget=j.returnString(c,this.adParameters.clickthruTarget),this.logger.log("Set clickthrough target to:",this.adParameters.clickthruTarget);break;case"LR_TIMEOUT_DELIVERY":this.adParameters.adDeliveryTimeout=Math.max(0,j.returnFloat(c,this.adParameters.adDeliveryTimeout)),this.logger.log("Set delivery timeout to:",this.adParameters.adDeliveryTimeout);break;case"LR_TIMEOUT_ADSOURCE":this.adParameters.adRequestTimeout=Math.max(0,j.returnFloat(c,this.adParameters.adRequestTimeout)),this.logger.log("Set ad source timeout to:",this.adParameters.adRequestTimeout);break;case"LR_TIMEOUT_STREAM":this.adParameters.adCreativeTimeout=Math.max(0,j.returnFloat(c,this.adParameters.adCreativeTimeout)),this.logger.log("Set stream timeout to:",this.adParameters.adCreativeTimeout);break;case"LR_TIMEOUT_VPAID_LOAD":this.adParameters.timeoutVPAIDLoad=Math.max(0,j.returnFloat(c,this.adParameters.timeoutVPAIDLoad)),this.logger.log("Set VPAID load timeout to:",this.adParameters.timeoutVPAIDLoad);break;case"LR_TIMEOUT_VPAID_INIT":this.adParameters.timeoutVPAIDInit=Math.max(0,j.returnFloat(c,this.adParameters.timeoutVPAIDInit)),this.logger.log("Set VPAID init timeout to:",this.adParameters.timeoutVPAIDInit);break;case"LR_TIMEOUT_VPAID_START":this.adParameters.timeoutVPAIDStart=Math.max(0,j.returnFloat(c,this.adParameters.timeoutVPAIDStart)),this.logger.log("Set VPAID start timeout to:",this.adParameters.timeoutVPAIDStart);break;case"LR_LAYOUT_SKIN_ID":this.adParameters.linearSkin=j.returnUnsignedInt(c,this.adParameters.linearSkin),this.logger.log("Set layout skin id to:",this.adParameters.linearSkin);break;case"LR_LAYOUT_SHOW_COUNTDOWN":this.adParameters.showCountdown=j.returnBoolean(c,this.adParameters.showCountdown),this.logger.log("Set showCountdown to:",this.adParameters.showCountdown);break;case"LR_LAYOUT_SKIN_MESSAGE":this.adParameters.countdownMessage=j.returnString(c,this.adParameters.countdownMessage),this.adParameters.showCountdown=!0,this.logger.log("Set countdown message to:",this.adParameters.countdownMessage);break;case"LR_LAYOUT_CLICK_MESSAGE":this.adParameters.clickthroughMessage=j.returnString(c,this.adParameters.clickthroughMessage),this.logger.log("Set clickthrough message to:",this.adParameters.clickthroughMessage);break;case"LR_LAYOUT_LINEAR_PAUSEONCLICKTHRU":this.adParameters.pauseOnClick=j.returnBoolean(c,this.adParameters.pauseOnClick),this.logger.log("Set pause on clickthrough to:",this.adParameters.pauseOnClick);break;case"LR_SKIP_COUNTDOWN":this.adParameters.skipCountdownMessage=j.returnString(c,this.adParameters.skipCountdownMessage),this.logger.log("Set skip countdown message to:",this.adParameters.skipCountdownMessage);break;case"LR_SKIP_MESSAGE":this.adParameters.skipMessage=j.returnString(c,this.adParameters.skipMessage),this.logger.log("Set skip message to:",this.adParameters.skipMessage);break;case"LR_LAYOUT_SKIN_ADINDEX":this.adParameters.indexMessage=j.returnString(c,this.adParameters.indexMessage),this.logger.log("Set index message to:",this.adParameters.indexMessage);break;case"LR_BITRATE":this.adParameters.desiredBitrate=j.returnUnsignedInt(c,this.adParameters.desiredBitrate),this.logger.log("Set desired bitrate to:",this.adParameters.desiredBitrate);break;case"LR_PLAYER_HANDLES_CLICK":this.adParameters.playerHandlesClick=j.returnBoolean(c,this.adParameters.playerHandlesClick),this.logger.log("Set playerHandlesClick to:",this.adParameters.playerHandlesClick);break;case"LR_DEBUG":var f=j.returnUnsignedInt(c,null);null!==f&&(this.adRequestParameters[b]=d,h.setDebugLevelOverride(f));break;case"LR_COMPANIONS":this.parseCompanionPlacements(d),this.ingestAdRequestParameter(b,d);break;case"BGCOLOR":this.adParameters.bgcolor=j.returnString(c,this.adParameters.bgcolor),this.logger.log("Set bgcolor to:",this.adParameters.bgcolor);break;case"URLPREFIX":var g=j.returnString(c,null);g&&!g.match(/[^A-Za-z0-9\.]/)&&(this.urlPrefix=g,this.logger.log("Set urlPrefix to:",this.urlPrefix));break;default:this.ingestAdRequestParameter(b,d)}}},a.prototype.ingestAdRequestParameter=function(a,b){null!==b&&(this.adRequestParameters[a]=b)},a.prototype.parseCompanionPlacements=function(a){if("string"==typeof a)for(var b=a.split("|"),c=0;c<b.length;c+=1){var d=b[c].split(":");if(d.length>=3){var f=j.returnUnsignedInt(d[0],null),g=j.returnUnsignedInt(d[1],null),h=j.returnString(d[2],null),i=j.returnString(d[3],null),k=j.returnBoolean(d[4],null),l=f+"x"+g,m=new e(f,g,h,i,k);this.logger.log("Parsed "+l+" companion placement:",m),this.companionPlacements[l]=m}}},a}();return l}),define("EnvironmentManager",["require","exports","AdManagerFactory","EnvironmentData","EventManager","LogEvent","LogEventType","Logger","Utils","VPAIDEvents"],function(a,b,c,d,e,f,g,h,i,j){var k=function(){function a(a){this.logger=new h("EnvironmentManager"),this.eventManager=new e(j),this.adVolume=1,this.adVolumeSet=!1,this.instanceData=a,this.adManagerFactory=new c(this.instanceData),this.adLinear=this.instanceData.getDefaultAdLinear(),this.destroy()}return a.prototype.getAdLinear=function(){return this.adManager?this.adManager.getAdLinear():this.adLinear},a.prototype.getAdWidth=function(){return this.adManager?this.adManager.getAdWidth():0},a.prototype.getAdHeight=function(){return this.adManager?this.adManager.getAdHeight():0},a.prototype.getAdExpanded=function(){return this.adManager?this.adManager.getAdExpanded():!1},a.prototype.getAdSkippableState=function(){return this.adManager?this.adManager.getAdSkippableState():!1},a.prototype.getAdSkippableRemainingTime=function(){return this.adManager?this.adManager.getAdSkippableRemainingTime():-2},a.prototype.getAdRemainingTime=function(){return this.adManager?this.adManager.getAdRemainingTime():-2},a.prototype.getAdDuration=function(){return this.adManager?this.adManager.getAdDuration():-2},a.prototype.getAdVolume=function(){return this.adManager?this.adManager.getAdVolume():this.adVolume},a.prototype.setAdVolume=function(a){this.logger.log("--> setAdVolume(",a,")"),a>=0&&1>=a&&(this.adVolume=a,this.adVolumeSet=!0,this.adManager?this.adManager.setAdVolume(a):this.onAdVolumeChange())},a.prototype.getAdCompanions=function(){return this.adManager?this.adManager.getAdCompanions():""},a.prototype.getAdIcons=function(){return this.adManager?this.adManager.getAdIcons():!1},a.prototype.handshakeVersion=function(a){return this.logger.log("--> handshakeVersion("+a+")"),"2.0"},a.prototype.initAd=function(b,c,e,h,j,k){this.logger.log("--> initAd() width:",b," height:",c," viewMode:",e,"desiredBitrate:",h,"creativeData:",j,"environmentVars:",k),this.destroy(),this.state=1;var l=a.consolidateEnvironmentVars([this.instanceData.getQueryStringParameters(),j,k]),m=this.chooseEnvironmentType(l.LR_ENVIRONMENT),n=k.slot,o=k.videoSlot,p=i.returnBoolean(k.videoSlotCanAutoPlay,!0);1===m&&void 0===o&&a.isValidElement(n)&&(n.innerHTML="",p=k.videoSlotCanAutoPlay||!1,o=document.createElement("video"),o.style.setProperty("display","block","important"),o.style.setProperty("width",b+"px","important"),o.style.setProperty("height",c+"px","important"),n.appendChild(o)),o&&!this.adVolumeSet&&(this.adVolume=o.volume);var q={width:b,height:c,viewMode:e,desiredBitrate:h,environmentVars:l,environmentType:m,slot:n,videoSlot:o,videoSlotCanAutoPlay:p,window:k.window,adVolume:this.adVolume};switch(this.environmentData=new d(this.instanceData,q),m){case 0:return void this.onAdError(f.eventWithType(g.NoAvailableEnvironment));case 1:if(!a.isValidPlayer(o))return void this.onAdError(f.eventWithType(g.InvalidVideoElement));break;case 2:if(!a.isValidElement(n))return void this.onAdError(f.eventWithType(g.InvalidSlotElement))}this.environmentData.publisherId>0||null!==this.environmentData.placementId?(this.adManager=this.adManagerFactory.adManagerForEnvironment(m),this.adVolumeSet&&(this.logger.debug("Setting AdManager volume to "+this.adVolume),this.adManager.setAdVolume(this.adVolume)),this.registerEventSubscriptions(this.adManager),this.adManager.initAd(b,c,e,h,{},{environmentData:this.environmentData})):this.onAdError(f.eventWithType(g.InvalidPlacement))},a.prototype.resizeAd=function(a,b,c){return this.adManager?this.adManager.resizeAd(a,b,c):void 0},a.prototype.startAd=function(){return this.logger.log("--> startAd()"),0===this.state?void this.onAdError(f.eventWithType(g.StartAdBeforeInitAd)):1===this.state?void(this.startAdCalled=!0):4===this.state?void this.logger.error("AdManager already started, ignoring startAd"):void(3===this.state&&this.startAdManager())},a.prototype.stopAd=function(){return this.logger.log("--> stopAd()"),this.adManager?this.adManager.stopAd():void this.onAdStopped()},a.prototype.pauseAd=function(){return this.logger.log("--> pauseAd()"),this.adManager?this.adManager.pauseAd():void 0},a.prototype.resumeAd=function(){return this.logger.log("--> resumeAd()"),this.adManager?this.adManager.resumeAd():void 0},a.prototype.expandAd=function(){return this.logger.log("--> expandAd()"),this.adManager?this.adManager.expandAd():void 0},a.prototype.collapseAd=function(){return this.logger.log("--> collapseAd()"),this.adManager?this.adManager.collapseAd():void 0},a.prototype.skipAd=function(){return this.logger.log("--> skipAd()"),this.adManager?this.adManager.skipAd():void 0},a.prototype.subscribe=function(a,b,c){this.eventManager.subscribe(a,b,c)},a.prototype.unsubscribe=function(a,b){this.eventManager.unsubscribe(a,b)},a.prototype.onAdLoaded=function(){this.logger.log("<-- Dispatching AdLoaded event"),this.state=3,this.eventManager.dispatch(j.AdLoaded),this.startAdCalled===!0&&3===this.state&&(this.logger.log("startAd already called - calling lazy startAd"),this.startAdCalled=!1,this.startAdManager())},a.prototype.onAdStarted=function(){this.logger.log("<-- Dispatching AdStarted event"),this.eventManager.dispatch(j.AdStarted)},a.prototype.onAdStopped=function(){this.logger.log("<-- Dispatching AdStopped event"),this.eventManager.dispatch(j.AdStopped)},a.prototype.onAdSkipped=function(){this.logger.log("<-- Dispatching AdSkipped event"),this.eventManager.dispatch(j.AdSkipped)},a.prototype.onAdSkippableStateChange=function(){this.logger.log("<-- Dispatching AdSkippableStateChange event"),this.eventManager.dispatch(j.AdSkippableStateChange)},a.prototype.onAdSizeChange=function(){this.logger.log("<-- Dispatching AdSizeChange event"),this.eventManager.dispatch(j.AdSizeChange)},a.prototype.onAdLinearChange=function(){this.adLinear=this.adManager.getAdLinear(),this.logger.log("<-- Dispatching AdLinearChange event"),this.eventManager.dispatch(j.AdLinearChange)},a.prototype.onAdDurationChange=function(){this.logger.log("<-- Dispatching AdDurationChange event"),this.eventManager.dispatch(j.AdDurationChange)},a.prototype.onAdExpandedChange=function(){this.logger.log("<-- Dispatching AdExpandedChange event"),this.eventManager.dispatch(j.AdExpandedChange)},a.prototype.onAdVolumeChange=function(){this.logger.log("<-- Dispatching AdVolumeChange event"),this.eventManager.dispatch(j.AdVolumeChange)},a.prototype.onAdImpression=function(){this.logger.log("<-- Dispatching AdImpression event"),this.eventManager.dispatch(j.AdImpression)},a.prototype.onAdVideoStart=function(){this.logger.log("<-- Dispatching AdVideoStart event"),this.eventManager.dispatch(j.AdVideoStart)},a.prototype.onAdVideoFirstQuartile=function(){this.logger.log("<-- Dispatching AdVideoFirstQuartile event"),this.eventManager.dispatch(j.AdVideoFirstQuartile)},a.prototype.onAdVideoMidpoint=function(){this.logger.log("<-- Dispatching AdVideoMidpoint event"),this.eventManager.dispatch(j.AdVideoMidpoint)},a.prototype.onAdVideoThirdQuartile=function(){this.logger.log("<-- Dispatching AdVideoThirdQuartile event"),this.eventManager.dispatch(j.AdVideoThirdQuartile)},a.prototype.onAdVideoComplete=function(){this.logger.log("<-- Dispatching AdVideoComplete event"),this.eventManager.dispatch(j.AdVideoComplete)},a.prototype.onAdClickThru=function(a,b,c){this.logger.log("<-- Dispatching AdClickThru event, url="+a+" id="+b+" playerHandles="+c),this.eventManager.dispatch(j.AdClickThru,[a,b,c])},a.prototype.onAdInteraction=function(){this.logger.log("<-- Dispatching AdInteraction event"),this.eventManager.dispatch(j.AdInteraction)},a.prototype.onAdUserAcceptInvitation=function(){this.logger.log("<-- Dispatching AdUserAcceptInvitation event"),this.eventManager.dispatch(j.AdUserAcceptInvitation)},a.prototype.onAdUserMinimize=function(){this.logger.log("<-- Dispatching AdUserMinimize event"),this.eventManager.dispatch(j.AdUserMinimize)},a.prototype.onAdUserClose=function(){this.logger.log("<-- Dispatching AdUserClose event"),this.eventManager.dispatch(j.AdUserClose)},a.prototype.onAdPaused=function(){this.logger.log("<-- Dispatching AdPaused event"),this.eventManager.dispatch(j.AdPaused)},a.prototype.onAdPlaying=function(){this.logger.log("<-- Dispatching AdPlaying event"),this.eventManager.dispatch(j.AdPlaying)},a.prototype.onAdLog=function(a){this.logger.log("<-- Dispatching AdLog event, message="+a),this.eventManager.dispatch(j.AdLog,[a])},a.prototype.onAdError=function(a){this.logger.log("<-- Dispatching AdError event, message="+a.message+" id="+a.id),this.destroy(),this.eventManager.dispatch(j.AdError,[a.message,a.id])},a.prototype.destroy=function(){this.adManager&&(this.unregisterEventSubscriptions(this.adManager),this.adManager=null),this.state=0,this.environmentData=null,this.startAdCalled=!1},a.prototype.startAdManager=function(){this.state=4,this.adManager&&this.adManager.startAd()},a.prototype.registerEventSubscriptions=function(a){this.logger.log("Registering event subscriptions"),a.subscribe(this.onAdLoaded,j.AdLoaded,this),a.subscribe(this.onAdStarted,j.AdStarted,this),a.subscribe(this.onAdStopped,j.AdStopped,this),a.subscribe(this.onAdSkipped,j.AdSkipped,this),a.subscribe(this.onAdSkippableStateChange,j.AdSkippableStateChange,this),a.subscribe(this.onAdSizeChange,j.AdSizeChange,this),a.subscribe(this.onAdLinearChange,j.AdLinearChange,this),a.subscribe(this.onAdDurationChange,j.AdDurationChange,this),a.subscribe(this.onAdExpandedChange,j.AdExpandedChange,this),a.subscribe(this.onAdVolumeChange,j.AdVolumeChange,this),a.subscribe(this.onAdImpression,j.AdImpression,this),a.subscribe(this.onAdVideoStart,j.AdVideoStart,this),a.subscribe(this.onAdVideoFirstQuartile,j.AdVideoFirstQuartile,this),a.subscribe(this.onAdVideoMidpoint,j.AdVideoMidpoint,this),a.subscribe(this.onAdVideoThirdQuartile,j.AdVideoThirdQuartile,this),a.subscribe(this.onAdVideoComplete,j.AdVideoComplete,this),a.subscribe(this.onAdClickThru,j.AdClickThru,this),a.subscribe(this.onAdInteraction,j.AdInteraction,this),a.subscribe(this.onAdUserAcceptInvitation,j.AdUserAcceptInvitation,this),a.subscribe(this.onAdUserMinimize,j.AdUserMinimize,this),a.subscribe(this.onAdUserClose,j.AdUserClose,this),a.subscribe(this.onAdPaused,j.AdPaused,this),a.subscribe(this.onAdPlaying,j.AdPlaying,this),a.subscribe(this.onAdLog,j.AdLog,this),a.subscribe(this.onAdError,j.AdError,this)},a.prototype.unregisterEventSubscriptions=function(a){this.logger.log("Unregistering event subscriptions"),a.unsubscribe(this.onAdLoaded,j.AdLoaded),a.unsubscribe(this.onAdStarted,j.AdStarted),a.unsubscribe(this.onAdStopped,j.AdStopped),a.unsubscribe(this.onAdSkipped,j.AdSkipped),a.unsubscribe(this.onAdSkippableStateChange,j.AdSkippableStateChange),a.unsubscribe(this.onAdSizeChange,j.AdSizeChange),a.unsubscribe(this.onAdLinearChange,j.AdLinearChange),a.unsubscribe(this.onAdDurationChange,j.AdDurationChange),a.unsubscribe(this.onAdExpandedChange,j.AdExpandedChange),a.unsubscribe(this.onAdVolumeChange,j.AdVolumeChange),a.unsubscribe(this.onAdImpression,j.AdImpression),a.unsubscribe(this.onAdVideoStart,j.AdVideoStart),a.unsubscribe(this.onAdVideoFirstQuartile,j.AdVideoFirstQuartile),a.unsubscribe(this.onAdVideoMidpoint,j.AdVideoMidpoint),a.unsubscribe(this.onAdVideoThirdQuartile,j.AdVideoThirdQuartile),a.unsubscribe(this.onAdVideoComplete,j.AdVideoComplete),a.unsubscribe(this.onAdClickThru,j.AdClickThru),a.unsubscribe(this.onAdInteraction,j.AdInteraction),a.unsubscribe(this.onAdUserAcceptInvitation,j.AdUserAcceptInvitation),a.unsubscribe(this.onAdUserMinimize,j.AdUserMinimize),a.unsubscribe(this.onAdUserClose,j.AdUserClose),a.unsubscribe(this.onAdPaused,j.AdPaused),a.unsubscribe(this.onAdPlaying,j.AdPlaying),a.unsubscribe(this.onAdLog,j.AdLog),a.unsubscribe(this.onAdError,j.AdError)},a.consolidateEnvironmentVars=function(a){for(var b={},c=0;c<a.length;c+=1)for(var d in a[c])a[c].hasOwnProperty(d)&&(b[d]=a[c][d]);return b},a.prototype.chooseEnvironmentType=function(a){void 0===a&&(a="html5");for(var b=0,c=a.split(","),d=0;d<c.length;d+=1){switch(this.logger.log("Considering environment: "+c[d]),c[d]){case"flash":i.detectFlash()&&(b=2);break;case"html5":i.detectHTML5()&&(b=1)}if(0!==b){this.logger.log("Selected environment: "+c[d]);break}}return 0===b&&this.logger.error("No available environment"),b},a.isValidElement=function(a){return"object"==typeof a&&null!==a&&!!a.tagName},a.isValidPlayer=function(a){return"object"==typeof a&&null!==a&&"function"==typeof a.canPlayType},a}();return k}),define("getVPAIDAd",["require","exports","Logger","InstanceData","AdapterFactory","EnvironmentManager"],function(a,b,c,d,e,f){
function g(){var a=new d;a.getDisableIframes()&&c.setDebugLevelOverride(0),null!==a.getDebugLevel()&&c.setDebugLevelOverride(a.getDebugLevel()),e.setInstanceData(a);var b=new f(a),g={getAdLinear:function(){return b.getAdLinear()},getAdWidth:function(){return b.getAdWidth()},getAdHeight:function(){return b.getAdHeight()},getAdExpanded:function(){return b.getAdExpanded()},getAdSkippableState:function(){return b.getAdSkippableState()},getAdSkippableRemainingTime:function(){return b.getAdSkippableRemainingTime()},getAdRemainingTime:function(){return b.getAdRemainingTime()},getAdDuration:function(){return b.getAdDuration()},getAdVolume:function(){return b.getAdVolume()},setAdVolume:function(a){return b.setAdVolume(a)},getAdCompanions:function(){return b.getAdCompanions()},getAdIcons:function(){return b.getAdIcons()},handshakeVersion:function(a){return b.handshakeVersion(a)},initAd:function(a,c,d,e,f,g){return b.initAd(a,c,d,e,f,g)},resizeAd:function(a,c,d){return b.resizeAd(a,c,d)},startAd:function(){return b.startAd()},stopAd:function(){return b.stopAd()},pauseAd:function(){return b.pauseAd()},resumeAd:function(){return b.resumeAd()},expandAd:function(){return b.expandAd()},collapseAd:function(){return b.collapseAd()},skipAd:function(){return b.skipAd()},subscribe:function(a,c,d){return b.subscribe(a,c,d)},unsubscribe:function(a,c){return b.unsubscribe(a,c)}},h=new c;return h.log("Loaded LiveRail.AdManager (release 2.3.0, build 201602111554):",g),h.log("Using calling URL:",a.getCallingURL()),h.log("Using instance data:",a),g}return g}),require("getVPAIDAd")});
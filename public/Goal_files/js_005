/*** lodash.min.js ***/
/*!
Lo-Dash 1.0.0-rc.3 lodash.com/license
Underscore.js 1.4.3 underscorejs.org/LICENSE
*/
;(function(e,t){function n(e){if(e&&typeof e=="object"&&e.__wrapped__)return e;if(!(this instanceof n))return new n(e);this.__wrapped__=e}function r(e,t,n){t||(t=0);var r=e.length,i=r-t>=(n||tt);if(i)for(var s={},n=t-1;++n<r;){var o=e[n]+"";(Et.call(s,o)?s[o]:s[o]=[]).push(e[n])}return function(n){if(i){var r=n+"";return Et.call(s,r)&&-1<R(s[r],n)}return-1<R(e,n,t)}}function i(e){return e.charCodeAt(0)}function s(e,t){var n=e.b,r=t.b,e=e.a,t=t.a;if(e!==t){if(e>t||typeof e=="undefined")return 1;if(
e<t||typeof t=="undefined")return-1}return n<r?-1:1}function o(e,t,n){function r(){var u=arguments,a=s?this:t;return i||(e=t[o]),n.length&&(u=u.length?n.concat(p(u)):n),this instanceof r?(h.prototype=e.prototype,a=new h,h.prototype=null,u=e.apply(a,u),x(u)?u:a):e.apply(a,u)}var i=S(e),s=!n,o=t;return s&&(n=t),i||(t=e),r}function u(e,t,n){return e?typeof e!="function"?function(t){return t[e]}:typeof t!="undefined"?n?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)
}:e:V}function a(){for(var e={b:"",c:"",e:Xt,f:Wt,g:"",h:Jt,i:Gt,j:mt,k:"",l:!0},t,n=0;t=arguments[n];n++)for(var r in t)e[r]=t[r];t=e.a,e.d=/^[^,]+/.exec(t)[0],n=Function,r="var i,l="+e.d+",t="+e.d+";if(!"+e.d+")return t;"+e.k+";",e.b?(r+="var m=l.length;i=-1;if(typeof m=='number'){",e.i&&(r+="if(k(l)){l=l.split('')}"),r+="while(++i<m){"+e.b+"}}else {"):e.h&&(r+="var m=l.length;i=-1;if(m&&j(l)){while(++i<m){i+='';"+e.g+"}}else {"),e.e||(r+="var u=typeof l=='function'&&s.call(l,'prototype');");if(
e.f&&e.l)r+="var q=-1,r=p[typeof l]?n(l):[],m=r.length;while(++q<m){i=r[q];",e.e||(r+="if(!(u&&i=='prototype')){"),r+=e.g+"",e.e||(r+="}");else{r+="for(i in l){";if(!e.e||e.l)r+="if(",e.e||(r+="!(u&&i=='prototype')"),!e.e&&e.l&&(r+="&&"),e.l&&(r+="h.call(l,i)"),r+="){";r+=e.g+";";if(!e.e||e.l)r+="}"}r+="}";if(e.e){r+="var f=l.constructor;";for(var i=0;7>i;i++)r+="i='"+e.j[i]+"';if(","constructor"==e.j[i]&&(r+="!(f&&f.prototype===l)&&"),r+="h.call(l,i)){"+e.g+"}"}if(e.b||e.h)r+="}";return r+=e.c+";return t"
,n("e,h,j,k,p,n,s","return function("+t+"){"+r+"}")(u,Et,v,N,nn,At,xt)}function f(e){return"\\"+rn[e]}function l(e){return hn[e]}function c(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function h(){}function p(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);for(var r=-1,n=n-t||0,i=Array(0>n?0:n);++r<n;)i[r]=e[t+r];return i}function d(e){return pn[e]}function v(e){return Tt.call(e)==Dt}function m(e){var t=!1;if(!e||typeof e!="object"||v(e))return t;var n=e.constructor;return!
S(n)&&(!Yt||!c(e))||n instanceof n?Vt?(ln(e,function(e,n,r){return t=!Et.call(r,n),!1}),!1===t):(ln(e,function(e,n){t=n}),!1===t||Et.call(e,t)):t}function g(e){var t=[];return cn(e,function(e,n){t.push(n)}),t}function y(e,t,n,r,i){if(null==e)return e;n&&(t=!1);if(n=x(e)){var s=Tt.call(e);if(!en[s]||Yt&&c(e))return e;var o=vn(e)}if(!n||!t)return n?o?p(e):fn({},e):e;n=tn[s];switch(s){case Ht:case Bt:return new n(+e);case jt:case qt:return new n(e);case It:return n(e.source,at.exec(e))}r||(r=[]),i||
(i=[]);for(s=r.length;s--;)if(r[s]==e)return i[s];var u=o?n(e.length):{};return r.push(e),i.push(u),(o?_:cn)(e,function(e,n){u[n]=y(e,t,null,r,i)}),o&&(Et.call(e,"index")&&(u.index=e.index),Et.call(e,"input")&&(u.input=e.input)),u}function b(e){var t=[];return ln(e,function(e,n){S(e)&&t.push(n)}),t.sort()}function w(e){var t={};return cn(e,function(e,n){t[e]=n}),t}function E(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var i=Tt.call(e),s=Tt.call(t);i==Dt&&(i=Ft),s==Dt&&
(s=Ft);if(i!=s)return!1;switch(i){case Ht:case Bt:return+e==+t;case jt:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case It:case qt:return e==t+""}s=i==Pt;if(!s){if(e.__wrapped__||t.__wrapped__)return E(e.__wrapped__||e,t.__wrapped__||t);if(i!=Ft||Yt&&(c(e)||c(t)))return!1;var i=!Kt&&v(e)?Object:e.constructor,o=!Kt&&v(t)?Object:t.constructor;if(i!=o&&(!S(i)||!(i instanceof i&&S(o)&&o instanceof o)))return!1}n||(n=[]),r||(r=[]);for(i=n.length;i--;)if(n[i]==e)return r[i]==t;var u=!0,a=0;n.push(e),r.push(
t);if(s){a=e.length;if(u=a==t.length)for(;a--&&(u=E(e[a],t[a],n,r)););return u}return ln(e,function(e,i,s){if(Et.call(s,i))return a++,u=Et.call(t,i)&&E(e,t[i],n,r)}),u&&ln(t,function(e,t,n){if(Et.call(n,t))return u=-1<--a}),u}function S(e){return typeof e=="function"}function x(e){return e?nn[typeof e]:!1}function T(e){return typeof e=="number"||Tt.call(e)==jt}function N(e){return typeof e=="string"||Tt.call(e)==qt}function C(e,t,n){var r=arguments,i=0,s=2,o=r[3],u=r[4];n!==et&&(o=[],u=[],typeof
n!="number"&&(s=r.length));for(;++i<s;)cn(r[i],function(t,n){var r,i,s;if(t&&((i=vn(t))||mn(t))){for(var a=o.length;a--;)if(r=o[a]==t)break;r?e[n]=u[a]:(o.push(t),u.push(s=(s=e[n],i)?vn(s)?s:[]:mn(s)?s:{}),e[n]=C(s,t,et,o,u))}else t!=null&&(e[n]=t)});return e}function k(e){var t=[];return cn(e,function(e){t.push(e)}),t}function L(e,t,n){var r=-1,i=e?e.length:0,s=!1,n=(0>n?Ot(0,i+n):n)||0;return typeof i=="number"?s=-1<(N(e)?e.indexOf(t,n):R(e,t,n)):an(e,function(e){if(++r>=n)return!(s=e===t)}),s}
function A(e,t,n){var r=!0,t=u(t,n);if(vn(e))for(var n=-1,i=e.length;++n<i&&(r=!!t(e[n],n,e)););else an(e,function(e,n,i){return r=!!t(e,n,i)});return r}function O(e,t,n){var r=[],t=u(t,n);if(vn(e))for(var n=-1,i=e.length;++n<i;){var s=e[n];t(s,n,e)&&r.push(s)}else an(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function M(e,t,n){var r,t=u(t,n);return _(e,function(e,n,i){if(t(e,n,i))return r=e,!1}),r}function _(e,t,n){if(t&&typeof n=="undefined"&&vn(e))for(var n=-1,r=e.length;++n<r&&!1!==t(e[
n],n,e););else an(e,t,n);return e}function D(e,t,n){var r=-1,i=e?e.length:0,s=Array(typeof i=="number"?i:0),t=u(t,n);if(vn(e))for(;++r<i;)s[r]=t(e[r],r,e);else an(e,function(e,n,i){s[++r]=t(e,n,i)});return s}function P(e,t,n){var r=-Infinity,s=-1,o=e?e.length:0,a=r;if(t||!vn(e))t=!t&&N(e)?i:u(t,n),an(e,function(e,n,i){n=t(e,n,i),n>r&&(r=n,a=e)});else for(;++s<o;)e[s]>a&&(a=e[s]);return a}function H(e,t){return D(e,t+"")}function B(e,t,n,r){var i=3>arguments.length,t=u(t,r,et);if(vn(e)){var s=-1,o=
e.length;for(i&&(n=e[++s]);++s<o;)n=t(n,e[s],s,e)}else an(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function j(e,t,n,r){var i=e,s=e?e.length:0,o=3>arguments.length;if(typeof s!="number")var a=gn(e),s=a.length;else Gt&&N(e)&&(i=e.split(""));return t=u(t,r,et),_(e,function(e,r,u){r=a?a[--s]:--s,n=o?(o=!1,i[r]):t(n,i[r],r,u)}),n}function F(e,t,n){var r,t=u(t,n);if(vn(e))for(var n=-1,i=e.length;++n<i&&!(r=t(e[n],n,e)););else an(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function I(e
,t,n){if(e){var r=e.length;return null==t||n?e[0]:p(e,0,Mt(Ot(0,t),r))}}function q(e,t){for(var n=-1,r=e?e.length:0,i=[];++n<r;){var s=e[n];vn(s)?St.apply(i,t?s:q(s)):i.push(s)}return i}function R(e,t,n){var r=-1,i=e?e.length:0;if(typeof n=="number")r=(0>n?Ot(0,i+n):n||0)-1;else if(n)return r=z(e,t),e[r]===t?r:-1;for(;++r<i;)if(e[r]===t)return r;return-1}function U(e,t,n){return p(e,null==t||n?1:Ot(0,t))}function z(e,t,n,r){for(var i=0,s=e?e.length:i,n=n?u(n,r):V,t=n(t);i<s;)r=i+s>>>1,n(e[r])<t?i=
r+1:s=r;return i}function W(e,t,n,r){var i=-1,s=e?e.length:0,o=[],a=o;typeof t=="function"&&(r=n,n=t,t=!1);var f=!t&&75<=s;if(f)var l={};n&&(a=[],n=u(n,r));for(;++i<s;){var r=e[i],c=n?n(r,i,e):r;if(f)var h=c+"",h=Et.call(l,h)?!(a=l[h]):a=l[h]=[];if(t?!i||a[a.length-1]!==c:h||0>R(a,c))(n||f)&&a.push(c),o.push(r)}return o}function X(e,t){return zt||Nt&&2<arguments.length?Nt.call.apply(Nt,arguments):o(e,t,p(arguments,2))}function V(e){return e}function $(e){_(b(e),function(t){var r=n[t]=e[t];n.prototype
[t]=function(){var e=[this.__wrapped__];return St.apply(e,arguments),e=r.apply(n,e),new n(e)}})}function J(){return this.__wrapped__}var K=typeof exports=="object"&&exports,Q=typeof global=="object"&&global;Q.global===Q&&(e=Q);var G=[],Y=new function(){},Z=0,et=Y,tt=30,nt=e._,rt=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,it=/&(?:amp|lt|gt|quot|#x27);/g,st=/\b__p\+='';/g,ot=/\b(__p\+=)''\+/g,ut=/(__e\(.*?\)|\b__t\))\+'';/g,at=/\w*$/,ft=/(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g
,lt=RegExp("^"+(Y.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),ct=/\$\{((?:(?=\\?)\\?[\s\S])*?)}/g,ht=/<%=([\s\S]+?)%>/g,pt=/($^)/,dt=/[&<>"']/g,vt=/['\n\r\t\u2028\u2029\\]/g,mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),gt=Math.ceil,yt=G.concat,bt=Math.floor,wt=lt.test(wt=Object.getPrototypeOf)&&wt,Et=Y.hasOwnProperty,St=G.push,xt=Y.propertyIsEnumerable,Tt=Y.toString,Nt=lt.test(Nt=
p.bind)&&Nt,Ct=lt.test(Ct=Array.isArray)&&Ct,kt=e.isFinite,Lt=e.isNaN,At=lt.test(At=Object.keys)&&At,Ot=Math.max,Mt=Math.min,_t=Math.random,Dt="[object Arguments]",Pt="[object Array]",Ht="[object Boolean]",Bt="[object Date]",jt="[object Number]",Ft="[object Object]",It="[object RegExp]",qt="[object String]",Rt=!!e.attachEvent,Ut=Nt&&!/\n|true/.test(Nt+Rt),zt=Nt&&!Ut,Wt=At&&(Rt||Ut),Xt,Vt,$t=($t={0:1,length:1},G.splice.call($t,0,1),$t[0]),Jt=!0;(function(){function e(){this.x=1}var t=[];e.prototype=
{valueOf:1,y:1};for(var n in new e)t.push(n);for(n in arguments)Jt=!n;Xt=!/valueOf/.test(t),Vt="x"!=t[0]})(1);var Kt=arguments.constructor==Object,Qt=!v(arguments),Gt="xx"!="x"[0]+Object("x")[0];try{var Yt=("[object Object]",Tt.call(document)==Ft)}catch(Zt){}var en={"[object Function]":!1};en[Dt]=en[Pt]=en[Ht]=en[Bt]=en[jt]=en[Ft]=en[It]=en[qt]=!0;var tn={};tn[Pt]=Array,tn[Ht]=Boolean,tn[Bt]=Date,tn[Ft]=Object,tn[jt]=Number,tn[It]=RegExp,tn[qt]=String;var nn={"boolean":!1,"function":!0,object:!0,
number:!1,string:!1,"undefined":!1},rn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};n.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ht,variable:""};var sn={a:"o,v,g",k:"for(var a=1,b=typeof g=='number'?2:arguments.length;a<b;a++){if((l=arguments[a])){",g:"t[i]=l[i]",c:"}}"},on={a:"d,c,w",k:"c=c&&typeof w=='undefined'?c:e(c,w)",b:"if(c(l[i],i,d)===false)return t",g:"if(c(l[i],i,d)===false)return t"},un={b:null},an=a(on),fn=a(sn
);Qt&&(v=function(e){return e?Et.call(e,"callee"):!1});var ln=a(on,un,{l:!1}),cn=a(on,un),hn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},pn=w(hn),dn=a(sn,{g:"if(t[i]==null)"+sn.g}),vn=Ct||function(e){return Kt&&e instanceof Array||Tt.call(e)==Pt};S(/x/)&&(S=function(e){return e instanceof Function||"[object Function]"==Tt.call(e)});var mn=wt?function(e){if(!e||typeof e!="object")return!1;var t=e.valueOf,n=typeof t=="function"&&(n=wt(t))&&wt(n);return n?e==n||wt(e)==n&&!v(e):m(e)
}:m,gn=At?function(e){return typeof e=="function"&&xt.call(e,"prototype")?g(e):x(e)?At(e):[]}:g;n.after=function(e,t){return 1>e?t():function(){if(1>--e)return t.apply(this,arguments)}},n.assign=fn,n.bind=X,n.bindAll=function(e){for(var t=arguments,n=1<t.length?0:(t=b(e),-1),r=t.length;++n<r;){var i=t[n];e[i]=X(e[i],e)}return e},n.bindKey=function(e,t){return o(e,t,p(arguments,2))},n.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r},n.compose=function(
){var e=arguments;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},n.countBy=function(e,t,n){var r={},t=u(t,n);return _(e,function(e,n,i){n=t(e,n,i),Et.call(r,n)?r[n]++:r[n]=1}),r},n.debounce=function(e,t,n){function r(){u=null,n||(s=e.apply(o,i))}var i,s,o,u;return function(){var a=n&&!u;return i=arguments,o=this,clearTimeout(u),u=setTimeout(r,t),a&&(s=e.apply(o,i)),s}},n.defaults=dn,n.defer=function(e){var n=p(arguments,1);return setTimeout(function(){e
.apply(t,n)},1)},n.delay=function(e,n){var r=p(arguments,2);return setTimeout(function(){e.apply(t,r)},n)},n.difference=function(e){for(var t=-1,n=e?e.length:0,i=yt.apply(G,arguments),i=r(i,n),s=[];++t<n;){var o=e[t];i(o)||s.push(o)}return s},n.filter=O,n.flatten=q,n.forEach=_,n.forIn=ln,n.forOwn=cn,n.functions=b,n.groupBy=function(e,t,n){var r={},t=u(t,n);return _(e,function(e,n,i){n=t(e,n,i),(Et.call(r,n)?r[n]:r[n]=[]).push(e)}),r},n.initial=function(e,t,n){if(!e)return[];var r=e.length;return p
(e,0,Mt(Ot(0,r-(null==t||n?1:t||0)),r))},n.intersection=function(e){var t=arguments,n=t.length,i={0:{}},s=-1,o=e?e.length:0,u=100<=o,a=[],f=a;e:for(;++s<o;){var l=e[s];if(u)var c=l+"",c=Et.call(i[0],c)?!(f=i[0][c]):f=i[0][c]=[];if(c||0>R(f,l)){u&&f.push(l);for(var h=n;--h;)if(!(i[h]||(i[h]=r(t[h],0,100)))(l))continue e;a.push(l)}}return a},n.invert=w,n.invoke=function(e,t){var n=p(arguments,2),r=typeof t=="function",i=[];return _(e,function(e){i.push((r?t:e[t]).apply(e,n))}),i},n.keys=gn,n.map=D,
n.max=P,n.memoize=function(e,t){var n={};return function(){var r=t?t.apply(this,arguments):arguments[0];return Et.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},n.merge=C,n.min=function(e,t,n){var r=Infinity,s=-1,o=e?e.length:0,a=r;if(t||!vn(e))t=!t&&N(e)?i:u(t,n),an(e,function(e,n,i){n=t(e,n,i),n<r&&(r=n,a=e)});else for(;++s<o;)e[s]<a&&(a=e[s]);return a},n.object=function(e,t){for(var n=-1,r=e?e.length:0,i={};++n<r;){var s=e[n];t?i[s]=t[n]:i[s[0]]=s[1]}return i},n.omit=function(e,t,n){var r=typeof
t=="function",i={};if(r)t=u(t,n);else var s=yt.apply(G,arguments);return ln(e,function(e,n,o){if(r?!t(e,n,o):0>R(s,n,1))i[n]=e}),i},n.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},n.pairs=function(e){var t=[];return cn(e,function(e,n){t.push([n,e])}),t},n.partial=function(e){return o(e,p(arguments,1))},n.pick=function(e,t,n){var r={};if(typeof t!="function")for(var i=0,s=yt.apply(G,arguments),o=s.length;++i<o;){var a=s[i];a in e&&(r[a]=e[a])}
else t=u(t,n),ln(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r},n.pluck=H,n.range=function(e,t,n){e=+e||0,n=+n||1,null==t&&(t=e,e=0);for(var r=-1,t=Ot(0,gt((t-e)/n)),i=Array(t);++r<t;)i[r]=e,e+=n;return i},n.reject=function(e,t,n){return t=u(t,n),O(e,function(e,n,r){return!t(e,n,r)})},n.rest=U,n.shuffle=function(e){var t=-1,n=Array(e?e.length:0);return _(e,function(e){var r=bt(_t()*(++t+1));n[t]=n[r],n[r]=e}),n},n.sortBy=function(e,t,n){var r=[],t=u(t,n);_(e,function(e,n,i){r.push({a:t(e,n,i),b
:n,c:e})}),e=r.length;for(r.sort(s);e--;)r[e]=r[e].c;return r},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t){function n(){u=new Date,o=null,i=e.apply(s,r)}var r,i,s,o,u=0;return function(){var a=new Date,f=t-(a-u);return r=arguments,s=this,0>=f?(clearTimeout(o),o=null,u=a,i=e.apply(s,r)):o||(o=setTimeout(n,f)),i}},n.times=function(e,t,n){for(var e=+e||0,r=-1,i=Array(e);++r<e;)i[r]=t.call(n,r);return i},n.toArray=function(e){return typeof (e?e.length:0)=="number"?Gt&&N(e)?e.split("")
:p(e):k(e)},n.union=function(){return W(yt.apply(G,arguments))},n.uniq=W,n.values=k,n.where=function(e,t){var n=gn(t);return O(e,function(e){for(var r=n.length;r--;){var i=e[n[r]]===t[n[r]];if(!i)break}return!!i})},n.without=function(e){for(var t=-1,n=e?e.length:0,i=r(arguments,1,20),s=[];++t<n;){var o=e[t];i(o)||s.push(o)}return s},n.wrap=function(e,t){return function(){var n=[e];return St.apply(n,arguments),t.apply(this,n)}},n.zip=function(e){for(var t=-1,n=e?P(H(arguments,"length")):0,r=Array(
n);++t<n;)r[t]=H(arguments,t);return r},n.collect=D,n.drop=U,n.each=_,n.extend=fn,n.methods=b,n.select=O,n.tail=U,n.unique=W,$(n),n.clone=y,n.cloneDeep=function(e){return y(e,!0)},n.contains=L,n.escape=function(e){return null==e?"":(e+"").replace(dt,l)},n.every=A,n.find=M,n.has=function(e,t){return e?Et.call(e,t):!1},n.identity=V,n.indexOf=R,n.isArguments=v,n.isArray=vn,n.isBoolean=function(e){return!0===e||!1===e||Tt.call(e)==Ht},n.isDate=function(e){return e instanceof Date||Tt.call(e)==Bt},n.isElement=
function(e){return e?1===e.nodeType:!1},n.isEmpty=function(e){var t=!0;if(!e)return t;var n=Tt.call(e),r=e.length;return n==Pt||n==qt||n==Dt||Qt&&v(e)||n==Ft&&typeof r=="number"&&S(e.splice)?!r:(cn(e,function(){return t=!1}),t)},n.isEqual=E,n.isFinite=function(e){return kt(e)&&!Lt(parseFloat(e))},n.isFunction=S,n.isNaN=function(e){return T(e)&&e!=+e},n.isNull=function(e){return null===e},n.isNumber=T,n.isObject=x,n.isPlainObject=mn,n.isRegExp=function(e){return e instanceof RegExp||Tt.call(e)==It
},n.isString=N,n.isUndefined=function(e){return typeof e=="undefined"},n.lastIndexOf=function(e,t,n){var r=e?e.length:0;for(typeof n=="number"&&(r=(0>n?Ot(0,r+n):Mt(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},n.mixin=$,n.noConflict=function(){return e._=nt,this},n.random=function(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t&&(t=e,e=0),e+bt(_t()*((+t||0)-e+1))},n.reduce=B,n.reduceRight=j,n.result=function(e,t){var n=e?e[t]:null;return S(n)?e[t]():n},n.size=function(e){var t=e?e.length:0;
return typeof t=="number"?t:gn(e).length},n.some=F,n.sortedIndex=z,n.template=function(e,t,r){e||(e=""),r||(r={});var i,s,o=n.templateSettings,u=0,a=r.interpolate||o.interpolate||pt,l="__p+='",c=r.variable||o.variable,h=c;e.replace(RegExp((r.escape||o.escape||pt).source+"|"+a.source+"|"+(a===ht?ct:pt).source+"|"+(r.evaluate||o.evaluate||pt).source+"|$","g"),function(t,n,r,s,o,a){return r||(r=s),l+=e.slice(u,a).replace(vt,f),n&&(l+="'+__e("+n+")+'"),o&&(l+="';"+o+";__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"
),i||(i=o||rt.test(n||r)),u=a+t.length,t}),l+="';\n",h||(c="obj",i?l="with("+c+"){"+l+"}":(r=RegExp("(\\(\\s*)"+c+"\\."+c+"\\b","g"),l=l.replace(ft,"$&"+c+".").replace(r,"$1__d"))),l=(i?l.replace(st,""):l).replace(ot,"$1").replace(ut,"$1;"),l="function("+c+"){"+(h?"":c+"||("+c+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":(h?"":",__d="+c+"."+c+"||"+c)+";")+l+"return __p}";try{s=Function("_","return "+l)(n)}catch(p){throw p.source=
l,p}return t?s(t):(s.source=l,s)},n.unescape=function(e){return null==e?"":(e+"").replace(it,d)},n.uniqueId=function(e){return(null==e?"":e+"")+ ++Z},n.all=A,n.any=F,n.detect=M,n.foldl=B,n.foldr=j,n.include=L,n.inject=B,cn(n,function(e,t){n.prototype[t]||(n.prototype[t]=function(){var t=[this.__wrapped__];return St.apply(t,arguments),e.apply(n,t)})}),n.first=I,n.last=function(e,t,n){if(e){var r=e.length;return null==t||n?e[r-1]:p(e,Ot(0,r-t))}},n.take=I,n.head=I,cn(n,function(e,t){n.prototype[t]||
(n.prototype[t]=function(t,r){var i=e(this.__wrapped__,t,r);return null==t||r?i:new n(i)})}),n.VERSION="1.0.0-rc.3",n.prototype.toString=function(){return this.__wrapped__+""},n.prototype.value=J,n.prototype.valueOf=J,an(["join","pop","shift"],function(e){var t=G[e];n.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),an(["push","reverse","sort","unshift"],function(e){var t=G[e];n.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),an(["concat","slice","splice"
],function(e){var t=G[e];n.prototype[e]=function(){var e=t.apply(this.__wrapped__,arguments);return new n(e)}}),$t&&an(["pop","shift","splice"],function(e){var t=G[e],r="splice"==e;n.prototype[e]=function(){var e=this.__wrapped__,i=t.apply(e,arguments);return 0===e.length&&delete e[0],r?new n(i):i}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=n,define(function(){return n})):K?typeof module=="object"&&module&&module.exports==K?(module.exports=n)._=n:K._=n:e._=n})(this);
/*** underscore.string.min.js ***/
!function(e,t){"use strict";var n=t.prototype.trim,r=t.prototype.trimRight,i=t.prototype.trimLeft,s=function(e){return e*1||0},o=function(e,t){if(t<1)return"";var n="";while(t>0)t&1&&(n+=e),t>>=1,e+=e;return n},u=[].slice,a=function(e){return e==null?"\\s":e.source?e.source:"["+p.escapeRegExp(e)+"]"},f={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},l={};for(var c in f)l[f[c]]=c;var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var n=o,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var s=1,o=r.length,u="",a,f=[],l,c,p,d,v,m;for(l=0;l<o;l++){u=e(r[l]);if(u==="string")f.push(r[l]);else if(u==="array"){p=r[l];if(p[2]){a=i[s];for(c=0;c<p[2].length;c++){if(!a.hasOwnProperty(p[2][c]))throw new Error(h('[_.sprintf] property "%s" does not exist',p[2][c]));a=a[p[2][c]]}}else p[1]?a=i[p[1]]:a=i[s++];if(/[^s]/.test(p[8])&&e(a)!="number")throw new Error(h("[_.sprintf] expecting number but found %s",e(a)));switch(p[8]){case"b":a=a.toString(2);break;case"c":a=t.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=p[7]?a.toExponential(p[7]):a.toExponential();break;case"f":a=p[7]?parseFloat(a).toFixed(p[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=t(a))&&p[7]?a.substring(0,p[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(p[8])&&p[3]&&a>=0?"+"+a:a,v=p[4]?p[4]=="0"?"0":p[4].charAt(1):" ",m=p[6]-t(a).length,d=p[6]?n(v,m):"",f.push(p[5]?a+d:d+a)}}return f.join("")},r.cache={},r.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},r}(),p={VERSION:"2.3.0",isBlank:function(e){return e==null&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return e==null?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=e==null?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,n){return e==null?[]:(e=t(e),n=~~n,n>0?e.match(new RegExp(".{1,"+n+"}","g")):[e])},clean:function(e){return p.strip(e).replace(/\s+/g," ")},count:function(e,n){return e==null||n==null?0:t(e).split(n).length-1},chars:function(e){return e==null?[]:t(e).split("")},swapCase:function(e){return e==null?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return e==null?"":t(e).replace(/[&<>"']/g,function(e){return"&"+l[e]+";"})},unescapeHTML:function(e){return e==null?"":t(e).replace(/\&([^;]+);/g,function(e,n){var r;return n in f?f[n]:(r=n.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(r[1],16)):(r=n.match(/^#(\d+)$/))?t.fromCharCode(~~r[1]):e})},escapeRegExp:function(e){return e==null?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,r){var i=p.chars(e);return i.splice(~~t,~~n,r),i.join("")},insert:function(e,t,n){return p.splice(e,t,0,n)},include:function(e,n){return n===""?!0:e==null?!1:t(e).indexOf(n)!==-1},join:function(){var e=u.call(arguments),t=e.shift();return t==null&&(t=""),e.join(t)},lines:function(e){return e==null?[]:t(e).split("\n")},reverse:function(e){return p.chars(e).reverse().join("")},startsWith:function(e,n){return n===""?!0:e==null||n==null?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(0,n.length)===n)},endsWith:function(e,n){return n===""?!0:e==null||n==null?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(e.length-n.length)===n)},succ:function(e){return e==null?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return e==null?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return p.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return p.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return p.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return p.titleize(t(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return p.capitalize(p.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return e==null?"":!r&&n?n.call(e):(r=a(r),t(e).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,n){return e==null?"":!n&&i?i.call(e):(n=a(n),t(e).replace(new RegExp("^"+n+"+"),""))},rtrim:function(e,n){return e==null?"":!n&&r?r.call(e):(n=a(n),t(e).replace(new RegExp(n+"+$"),""))},truncate:function(e,n,r){return e==null?"":(e=t(e),r=r||"...",n=~~n,e.length>n?e.slice(0,n)+r:e)},prune:function(e,n,r){if(e==null)return"";e=t(e),n=~~n,r=r!=null?t(r):"...";if(e.length<=n)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=e.slice(0,n+1).replace(/.(?=\W*\w*$)/g,i);return s.slice(s.length-2).match(/\w\w/)?s=s.replace(/\s*\S+$/,""):s=p.rtrim(s.slice(0,s.length-1)),(s+r).length>e.length?e:e.slice(0,s.length)+r},words:function(e,t){return p.isBlank(e)?[]:p.trim(e,t).split(t||/\s+/)},pad:function(e,n,r,i){e=e==null?"":t(e),n=~~n;var s=0;r?r.length>1&&(r=r.charAt(0)):r=" ";switch(i){case"right":return s=n-e.length,e+o(r,s);case"both":return s=n-e.length,o(r,Math.ceil(s/2))+e+o(r,Math.floor(s/2));default:return s=n-e.length,o(r,s)+e}},lpad:function(e,t,n){return p.pad(e,t,n)},rpad:function(e,t,n){return p.pad(e,t,n,"right")},lrpad:function(e,t,n){return p.pad(e,t,n,"both")},sprintf:h,vsprintf:function(e,t){return t.unshift(e),h.apply(null,t)},toNumber:function(e,n){if(e==null||e=="")return 0;e=t(e);var r=s(s(e).toFixed(~~n));return r===0&&!e.match(/^0+$/)?Number.NaN:r},numberFormat:function(e,t,n,r){if(isNaN(e)||e==null)return"";e=e.toFixed(~~t),r=r||",";var i=e.split("."),s=i[0],o=i[1]?(n||".")+i[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},strRight:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strRightBack:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.lastIndexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strLeft:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(0,r):e},strLeftBack:function(e,t){if(e==null)return"";e+="",t=t!=null?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,r){t=t||", ",n=n||" and ";var i=e.slice(),s=i.pop();return e.length>2&&r&&(n=p.rtrim(t)+n),i.length?i.join(t)+n+s:s},toSentenceSerial:function(){var e=u.call(arguments);return e[3]=!0,p.toSentence.apply(p,e)},slugify:function(e){if(e==null)return"";var n="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",r="aaaaaaaaceeeeeiiiilnoooooouuuunczz",i=new RegExp(a(n),"g");return e=t(e).toLowerCase().replace(i,function(e){var t=n.indexOf(e);return r.charAt(t)||"-"}),p.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return p.surround(e,'"')},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse)$/))continue;e[t]=this[t]}return e},repeat:function(e,n,r){if(e==null)return"";n=~~n;if(r==null)return o(t(e),n);for(var i=[];n>0;i[--n]=e);return i.join(r)},levenshtein:function(e,n){if(e==null&&n==null)return 0;if(e==null)return t(n).length;if(n==null)return t(e).length;e=t(e),n=t(n);var r=[],i,s;for(var o=0;o<=n.length;o++)for(var u=0;u<=e.length;u++)o&&u?e.charAt(u-1)===n.charAt(o-1)?s=i:s=Math.min(r[u],r[u-1],i)+1:s=o+u,i=r[u],r[u]=s;return r.pop()}};p.strip=p.trim,p.lstrip=p.ltrim,p.rstrip=p.rtrim,p.center=p.lrpad,p.rjust=p.lpad,p.ljust=p.rpad,p.contains=p.include,p.q=p.quote,typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(module.exports=p),exports._s=p):typeof define=="function"&&define.amd?define("underscore.string",[],function(){return p}):(e._=e._||{},e._.string=e._.str=p)}(this,String);
/*** callbacks.lodash.js ***/
(function(global,undefined){var _customCallbacks=function(callbacks,ctx){var callIndex=-1;return function(){callIndex++;(callbacks[callIndex]||callbacks["default"]||function(){}).apply(ctx||this,arguments);};};global._=global._||{};global._.customCallbacks=global._.customCallbacks=_customCallbacks;}(this));
/*** jstorage.js ***/
(function(){var JSTORAGE_VERSION="0.4.0",$=window.jQuery||window.$||(window.$={}),JSON={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(str){return String(str).evalJSON();}||$.parseJSON||$.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||$.toJSON};if(!JSON.parse||!JSON.stringify){throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");}var _storage={__jstorage_meta:{CRC32:{}}},_storage_service={jStorage:"{}"},_storage_elm=null,_storage_size=0,_backend=false,_observers={},_observer_timeout=false,_observer_update=0,_pubsub_observers={},_pubsub_last=+new Date(),_ttl_timeout,_XMLService={isXML:function(elm){var documentElement=(elm?elm.ownerDocument||elm:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;},encode:function(xmlNode){if(!this.isXML(xmlNode)){return false;}try{return new XMLSerializer().serializeToString(xmlNode);}catch(E1){try{return xmlNode.xml;}catch(E2){}}return false;},decode:function(xmlString){var dom_parser=("DOMParser" in window&&(new DOMParser()).parseFromString)||(window.ActiveXObject&&function(_xmlString){var xml_doc=new ActiveXObject("Microsoft.XMLDOM");xml_doc.async="false";xml_doc.loadXML(_xmlString);return xml_doc;}),resultXML;if(!dom_parser){return false;}resultXML=dom_parser.call("DOMParser" in window&&(new DOMParser())||window,xmlString,"text/xml");return this.isXML(resultXML)?resultXML:false;}};function _init(){var localStorageReallyWorks=false;if("localStorage" in window){try{window.localStorage.setItem("_tmptest","tmpval");localStorageReallyWorks=true;window.localStorage.removeItem("_tmptest");}catch(BogusQuotaExceededErrorOnIos5){}}if(localStorageReallyWorks){try{if(window.localStorage){_storage_service=window.localStorage;_backend="localStorage";_observer_update=_storage_service.jStorage_update;}}catch(E3){}}else{if("globalStorage" in window){try{if(window.globalStorage){_storage_service=window.globalStorage[window.location.hostname];_backend="globalStorage";_observer_update=_storage_service.jStorage_update;}}catch(E4){}}else{_storage_elm=document.createElement("link");if(_storage_elm.addBehavior){_storage_elm.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(_storage_elm);try{_storage_elm.load("jStorage");}catch(E){_storage_elm.setAttribute("jStorage","{}");_storage_elm.save("jStorage");_storage_elm.load("jStorage");}var data="{}";try{data=_storage_elm.getAttribute("jStorage");}catch(E5){}try{_observer_update=_storage_elm.getAttribute("jStorage_update");}catch(E6){}_storage_service.jStorage=data;_backend="userDataBehavior";}else{_storage_elm=null;return;}}}_load_storage();_handleTTL();_setupObserver();_handlePubSub();if("addEventListener" in window){window.addEventListener("pageshow",function(event){if(event.persisted){_storageObserver();}},false);}}function _reloadData(){var data="{}";if(_backend=="userDataBehavior"){_storage_elm.load("jStorage");try{data=_storage_elm.getAttribute("jStorage");}catch(E5){}try{_observer_update=_storage_elm.getAttribute("jStorage_update");}catch(E6){}_storage_service.jStorage=data;}_load_storage();_handleTTL();_handlePubSub();}function _setupObserver(){if(_backend=="localStorage"||_backend=="globalStorage"){if("addEventListener" in window){window.addEventListener("storage",_storageObserver,false);}else{document.attachEvent("onstorage",_storageObserver);}}else{if(_backend=="userDataBehavior"){setInterval(_storageObserver,1000);}}}function _storageObserver(){var updateTime;clearTimeout(_observer_timeout);_observer_timeout=setTimeout(function(){if(_backend=="localStorage"||_backend=="globalStorage"){updateTime=_storage_service.jStorage_update;}else{if(_backend=="userDataBehavior"){_storage_elm.load("jStorage");try{updateTime=_storage_elm.getAttribute("jStorage_update");}catch(E5){}}}if(updateTime&&updateTime!=_observer_update){_observer_update=updateTime;_checkUpdatedKeys();}},25);}function _checkUpdatedKeys(){var oldCrc32List=JSON.parse(JSON.stringify(_storage.__jstorage_meta.CRC32)),newCrc32List;_reloadData();newCrc32List=JSON.parse(JSON.stringify(_storage.__jstorage_meta.CRC32));var key,updated=[],removed=[];for(key in oldCrc32List){if(oldCrc32List.hasOwnProperty(key)){if(!newCrc32List[key]){removed.push(key);continue;}if(oldCrc32List[key]!=newCrc32List[key]&&String(oldCrc32List[key]).substr(0,2)=="2."){updated.push(key);}}}for(key in newCrc32List){if(newCrc32List.hasOwnProperty(key)){if(!oldCrc32List[key]){updated.push(key);}}}_fireObservers(updated,"updated");_fireObservers(removed,"deleted");}function _fireObservers(keys,action){keys=[].concat(keys||[]);if(action=="flushed"){keys=[];for(var key in _observers){if(_observers.hasOwnProperty(key)){keys.push(key);}}action="deleted";}for(var i=0,len=keys.length;i<len;i++){if(_observers[keys[i]]){for(var j=0,jlen=_observers[keys[i]].length;j<jlen;j++){_observers[keys[i]][j](keys[i],action);}}}}function _publishChange(){var updateTime=(+new Date()).toString();if(_backend=="localStorage"||_backend=="globalStorage"){_storage_service.jStorage_update=updateTime;}else{if(_backend=="userDataBehavior"){_storage_elm.setAttribute("jStorage_update",updateTime);_storage_elm.save("jStorage");}}_storageObserver();}function _load_storage(){if(_storage_service.jStorage){try{_storage=JSON.parse(String(_storage_service.jStorage));}catch(E6){_storage_service.jStorage="{}";}}else{_storage_service.jStorage="{}";}_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0;if(!_storage.__jstorage_meta){_storage.__jstorage_meta={};}if(!_storage.__jstorage_meta.CRC32){_storage.__jstorage_meta.CRC32={};}}function _save(){_dropOldEvents();try{_storage_service.jStorage=JSON.stringify(_storage);if(_storage_elm){_storage_elm.setAttribute("jStorage",_storage_service.jStorage);_storage_elm.save("jStorage");}_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0;}catch(E7){}}function _checkKey(key){if(!key||(typeof key!="string"&&typeof key!="number")){throw new TypeError("Key name must be string or numeric");}if(key=="__jstorage_meta"){throw new TypeError("Reserved key name");}return true;}function _handleTTL(){var curtime,i,TTL,CRC32,nextExpire=Infinity,changed=false,deleted=[];clearTimeout(_ttl_timeout);if(!_storage.__jstorage_meta||typeof _storage.__jstorage_meta.TTL!="object"){return;}curtime=+new Date();TTL=_storage.__jstorage_meta.TTL;CRC32=_storage.__jstorage_meta.CRC32;for(i in TTL){if(TTL.hasOwnProperty(i)){if(TTL[i]<=curtime){delete TTL[i];delete CRC32[i];delete _storage[i];changed=true;deleted.push(i);}else{if(TTL[i]<nextExpire){nextExpire=TTL[i];}}}}if(nextExpire!=Infinity){_ttl_timeout=setTimeout(_handleTTL,nextExpire-curtime);}if(changed){_save();_publishChange();_fireObservers(deleted,"deleted");}}function _handlePubSub(){var i,len;if(!_storage.__jstorage_meta.PubSub){return;}var pubelm,_pubsubCurrent=_pubsub_last;for(i=len=_storage.__jstorage_meta.PubSub.length-1;i>=0;i--){pubelm=_storage.__jstorage_meta.PubSub[i];if(pubelm[0]>_pubsub_last){_pubsubCurrent=pubelm[0];_fireSubscribers(pubelm[1],pubelm[2]);}}_pubsub_last=_pubsubCurrent;}function _fireSubscribers(channel,payload){if(_pubsub_observers[channel]){for(var i=0,len=_pubsub_observers[channel].length;i<len;i++){_pubsub_observers[channel][i](channel,JSON.parse(JSON.stringify(payload)));}}}function _dropOldEvents(){if(!_storage.__jstorage_meta.PubSub){return;}var retire=+new Date()-2000;for(var i=0,len=_storage.__jstorage_meta.PubSub.length;i<len;i++){if(_storage.__jstorage_meta.PubSub[i][0]<=retire){_storage.__jstorage_meta.PubSub.splice(i,_storage.__jstorage_meta.PubSub.length-i);break;}}if(!_storage.__jstorage_meta.PubSub.length){delete _storage.__jstorage_meta.PubSub;}}function _publish(channel,payload){if(!_storage.__jstorage_meta){_storage.__jstorage_meta={};}if(!_storage.__jstorage_meta.PubSub){_storage.__jstorage_meta.PubSub=[];}_storage.__jstorage_meta.PubSub.unshift([+new Date,channel,payload]);_save();_publishChange();}function murmurhash2_32_gc(str,seed){var l=str.length,h=seed^l,i=0,k;while(l>=4){k=((str.charCodeAt(i)&255))|((str.charCodeAt(++i)&255)<<8)|((str.charCodeAt(++i)&255)<<16)|((str.charCodeAt(++i)&255)<<24);k=(((k&65535)*1540483477)+((((k>>>16)*1540483477)&65535)<<16));k^=k>>>24;k=(((k&65535)*1540483477)+((((k>>>16)*1540483477)&65535)<<16));h=(((h&65535)*1540483477)+((((h>>>16)*1540483477)&65535)<<16))^k;l-=4;++i;}switch(l){case 3:h^=(str.charCodeAt(i+2)&255)<<16;case 2:h^=(str.charCodeAt(i+1)&255)<<8;case 1:h^=(str.charCodeAt(i)&255);h=(((h&65535)*1540483477)+((((h>>>16)*1540483477)&65535)<<16));}h^=h>>>13;h=(((h&65535)*1540483477)+((((h>>>16)*1540483477)&65535)<<16));h^=h>>>15;return h>>>0;}$.jStorage={version:JSTORAGE_VERSION,set:function(key,value,options){_checkKey(key);options=options||{};if(typeof value=="undefined"){this.deleteKey(key);return value;}if(_XMLService.isXML(value)){value={_is_xml:true,xml:_XMLService.encode(value)};}else{if(typeof value=="function"){return undefined;}else{if(value&&typeof value=="object"){value=JSON.parse(JSON.stringify(value));}}}_storage[key]=value;_storage.__jstorage_meta.CRC32[key]="2."+murmurhash2_32_gc(JSON.stringify(value));this.setTTL(key,options.TTL||0);_fireObservers(key,"updated");return value;},get:function(key,def){_checkKey(key);if(key in _storage){if(_storage[key]&&typeof _storage[key]=="object"&&_storage[key]._is_xml){return _XMLService.decode(_storage[key].xml);}else{return _storage[key];}}return typeof(def)=="undefined"?null:def;},deleteKey:function(key){_checkKey(key);if(key in _storage){delete _storage[key];if(typeof _storage.__jstorage_meta.TTL=="object"&&key in _storage.__jstorage_meta.TTL){delete _storage.__jstorage_meta.TTL[key];}delete _storage.__jstorage_meta.CRC32[key];_save();_publishChange();_fireObservers(key,"deleted");return true;}return false;},setTTL:function(key,ttl){var curtime=+new Date();_checkKey(key);ttl=Number(ttl)||0;if(key in _storage){if(!_storage.__jstorage_meta.TTL){_storage.__jstorage_meta.TTL={};}if(ttl>0){_storage.__jstorage_meta.TTL[key]=curtime+ttl;}else{delete _storage.__jstorage_meta.TTL[key];}_save();_handleTTL();_publishChange();return true;}return false;},getTTL:function(key){var curtime=+new Date(),ttl;_checkKey(key);if(key in _storage&&_storage.__jstorage_meta.TTL&&_storage.__jstorage_meta.TTL[key]){ttl=_storage.__jstorage_meta.TTL[key]-curtime;return ttl||0;}return 0;},flush:function(){_storage={__jstorage_meta:{CRC32:{}}};_save();_publishChange();_fireObservers(null,"flushed");return true;},storageObj:function(){function F(){}F.prototype=_storage;return new F();},index:function(){var index=[],i;for(i in _storage){if(_storage.hasOwnProperty(i)&&i!="__jstorage_meta"){index.push(i);}}return index;},storageSize:function(){return _storage_size;},currentBackend:function(){return _backend;},storageAvailable:function(){return !!_backend;},listenKeyChange:function(key,callback){_checkKey(key);if(!_observers[key]){_observers[key]=[];}_observers[key].push(callback);},stopListening:function(key,callback){_checkKey(key);if(!_observers[key]){return;}if(!callback){delete _observers[key];return;}for(var i=_observers[key].length-1;i>=0;i--){if(_observers[key][i]==callback){_observers[key].splice(i,1);}}},subscribe:function(channel,callback){channel=(channel||"").toString();if(!channel){throw new TypeError("Channel not defined");}if(!_pubsub_observers[channel]){_pubsub_observers[channel]=[];}_pubsub_observers[channel].push(callback);},publish:function(channel,payload){channel=(channel||"").toString();if(!channel){throw new TypeError("Channel not defined");}_publish(channel,payload);},reInit:function(){_reloadData();}};_init();})();
/*** globals.js ***/
(function(window,document,undefined){Date.now=Date.now||function(){return +new Date;};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){for(var i=(start||0),j=this.length;i<j;i++){if(this[i]===obj){return i;}}return -1;};}if(!Array.prototype.map){Array.prototype.map=function(fun){if(this===void 0||this===null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError();}var res=new Array(len);var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){res[i]=fun.call(thisArg,t[i],i,t);}}return res;};}function GoalNamespace(){}window.Goal=window.Goal||new GoalNamespace();_.mixin(_.str.exports());window.namespace=function(namespace){var parent;var currentNamespacePart;var nestedNamespace;var namespacesCount;if(typeof namespace==="string"){parent=window;namespace=namespace.split(".");namespacesCount=namespace.length;for(var namespaceIndex=0;namespaceIndex<namespacesCount;namespaceIndex++){currentNamespacePart=namespace[namespaceIndex];nestedNamespace=(typeof parent[currentNamespacePart]==="object")?parent[currentNamespacePart]:{};parent[currentNamespacePart]=parent=nestedNamespace;}}};Goal.namedConditions={"ieMobile":function(){return(/IEMobile/i).test(window.navigator.userAgent);},"ieDesktop":function(){return !Goal.namedConditions.ieMobile()&&(/(msie) (?!10|9)([\w.]+)/i).test(window.navigator.userAgent);},"desktop":function(){return Goal.namedConditions.ieDesktop()||Modernizr.mq("only screen and (min-width: 1020px)");},"tablet":function(){return !Goal.namedConditions.desktop();},"iPhone":function(){return(/iPhone/i).test(window.navigator.userAgent);},"Android":function(){return(/Android/i).test(window.navigator.userAgent);}};Goal.when=function(conditions,callback){if(Goal.is(conditions)){callback();}return Goal;};Goal.is=function(conditions){var result;var method;if(conditions==="all"){result=true;}else{if(_.isString(conditions)){method=(conditions.indexOf("all")===0)?_.all:_.some;conditions=conditions.replace(/(some|all)\s*->\s*/i,"");conditions=conditions.split(",");result=method(conditions,function(condition){return !!(_.result(Goal.namedConditions,condition)||false);});}else{if(_.isFunction(conditions)){result=!!conditions();}else{result=!!conditions;}}}return result;};Goal.onPages=function(pageNames,callback){var pages;var currentPage;if(!_.isString(pageNames)){pageNames="";}pages=pageNames.split(",");currentPage=Goal.settings.environment.page;if(_.contains(pages,currentPage)||_.contains(pages,"all")){Goal.log(Goal.fmt('Goal:globals:onPages Code executed on page "%@" (Pages allowed: "%@")',currentPage,pageNames));callback(Goal.settings.environment.page);}return Goal;};Goal.whenAll=function(conditions,callback){return Goal.when("all ->"+conditions,callback);};Goal.whenSome=function(conditions,callback){return Goal.when("some ->"+conditions,callback);};Goal.log=function(){Goal.debug.apply(this,_.union(["log"],Array.prototype.slice.call(arguments)));};Goal.warn=function(){Goal.debug.apply(this,_.union(["warn"],Array.prototype.slice.call(arguments)));};Goal.error=function(){Goal.debug.apply(this,_.union(["error"],Array.prototype.slice.call(arguments)));};Goal.clearConsole=function(){Goal.debug.apply(this,_.union(["clear"]));};Goal.debug=function(debugType){var args;var currentDateAndTime;if(Goal.settings&&Goal.settings.environment&&Goal.settings.environment.loggingEnabled){if(window.console&&window.console[debugType]&&window.console[debugType].apply){args=Array.prototype.slice.call(arguments,1);currentDateAndTime=[Goal.helpers.date.ddmmyyyy(),Goal.helpers.time.hhmmss()].join(" ");window.console[debugType].apply(window.console,[Goal.fmt("Goal:%@ (%@)",debugType,currentDateAndTime),args]);}}};Goal.translate=function(translationPath,type){var splittedPath;var translation;if(!_.isString(type)||type!=="english"){type="current";}if(!_.isString(translationPath)){Goal.warn(Goal.fmt('Goal:translate:%@ @translationPath param must be string, received "%@" instead',type,translationPath));return"";}try{splittedPath=translationPath.split(".");translation=type==="english"?Goal.translations.english:Goal.translations.current;_.each(splittedPath,function(subpath){translation=translation[subpath];});if(_.isEmpty(translation)){Goal.warn(Goal.fmt('Goal:translate:%@ Translation for "%@" Not Found',type,_.last(splittedPath)));return"";}return translation;}catch(error){Goal.warn(Goal.fmt('Goal:translate:%@ @translationPath "%@" Not Found In Translations',type,translationPath));return"";}};Goal.fmt=function(string){var formats;var index;formats=Array.prototype.slice.call(arguments,1);index=0;return string.replace(/%@([0-9]+)?/g,function(match,argumentIndex){argumentIndex=(argumentIndex)?parseInt(argumentIndex,10)-1:index++;match=formats[argumentIndex];return((match===null)?"(null)":(match===undefined)?"":match).toString();});};Goal.store=(function(){var collection={};var set=function(key,value){if(typeof key!=="string"&&typeof key!=="number"){Goal.error(Goal.fmt("The key must be of type string or number!"));}if(value===undefined){Goal.error(Goal.fmt("You must provide the value parameter!"));}collection[key]=value;};var get=function(key){return collection[key];};var unset=function(key){delete collection[key];};return{set:set,get:get,unset:unset};}());})(this,this.document);
/*** helpers.js ***/
(function(window,document,undefined){namespace("Goal.helpers");Goal.helpers.date={fixDateString:function(dateString){return dateString.replace(/-/g,"/");},ddmmyyyy:function(timestamp){var date;date=timestamp?new Date(timestamp):new Date();return[Goal.helpers.numbers.prefixWithZero(date.getDate()),Goal.helpers.numbers.prefixWithZero(date.getMonth()+1),Goal.helpers.numbers.prefixWithZero(date.getFullYear())].join("/");},yyyymmdd:function(timestamp){return Goal.helpers.date.ddmmyyyy(timestamp).split("/").reverse().join("/");}};Goal.helpers.time={hhmmss:function(timestamp){var date;date=timestamp?new Date(timestamp):new Date();return[Goal.helpers.numbers.prefixWithZero(date.getHours()),Goal.helpers.numbers.prefixWithZero(date.getMinutes()),Goal.helpers.numbers.prefixWithZero(date.getSeconds())].join(":");}};Goal.helpers.string={htmlSpecialCharsDecode:function(str,fullMode){fullMode=fullMode||false;if(fullMode){return $("<div />").html(str).text();}else{return _.unescape(str);}},stripSlashes:function(str){str=str.replace(/\\'/g,"'");str=str.replace(/\\"/g,'"');str=str.replace(/\\0/g,"\0");str=str.replace(/\\\\/g,"\\");return str;}};Goal.helpers.numbers={prefixWithZero:function(number){var prefixedNumber;prefixedNumber=(number<10&&number>=0)?"0"+number:number;return String(prefixedNumber);}};})(this,this.document);
/*** events.js ***/
(function(window,document,undefined){namespace("Goal.events");namespace("Goal.intervals");Goal.events.page={init:{all:function(){Goal.log("Goal:events:page:init:all called");Goal.events.page.init.setPhoneScale();},setPhoneScale:function(){var viewportMeta=document.querySelector('meta[name="viewport"]');function allowScrollHorizontally(){var pageWrapperWidth=$(".page-wrapper header").width();var pageWidth=document.documentElement.clientWidth;var $pageWrapper=$(".page-wrapper");if(pageWrapperWidth>=pageWidth){$pageWrapper.addClass("page-wrapper-visible");}else{$pageWrapper.removeClass("page-wrapper-visible");}}if(!viewportMeta){return;}Goal.whenSome("iPhone,Android",function(){Goal.log("Goal:events:page:init:setPhoneScale Changing viewport properties");var optimalScale=1;if(screen.width<660){optimalScale=screen.width/660;}if(optimalScale<1){optimalScale=0.8*optimalScale;}var content=["width=device-width","initial-scale=%scale","minimum-scale=%scale"].join(", ").replace(/%scale/g,optimalScale);viewportMeta.setAttribute("content",content);});allowScrollHorizontally();}},reload:function(){Goal.log("Goal:events:page:reload called");window.location.reload();},resized:(function(){var previousWidth=$(window).width();return function(){var currentWidth=$(window).width();if(previousWidth!==currentWidth){previousWidth=currentWidth;Goal.clearConsole();Goal.log("Goal:events:page:resized called");$('[data-widget="carousel"]').iosSlider("destroy",true);Goal.application.rebind();}};}()),scrollToAnchor:function(){var $anchor=$(Goal.fmt("a[name=%@]",window.location.hash.replace("#","")));if(window.location.hash&&($anchor.length>0)){Goal.log("Goal:events:page:scrollToAnchor called");$("html, body").scrollTop($anchor.offset().top);}}};Goal.events.images={loadLazily:{forDevice:function(deviceType){Goal.log(Goal.fmt("Goal:events:images:loadLazily:%@ called",deviceType));$("img[data-image-src]").addClass("hidden").filter(Goal.fmt('[data-image-load-for*="%@"]',deviceType)).removeClass("hidden").each(function(){$(this).attr("src",$(this).data("imageSrc"));});},tablet:function(){Goal.events.images.loadLazily.forDevice("tablet");},desktop:function(){Goal.events.images.loadLazily.forDevice("desktop");}}};})(this,this.document);
/*** charts.js ***/
/*!
* Chart.js
* http://chartjs.org/
*
* Copyright 2013 Nick Downie
* Released under the MIT license
* https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
*/
;window.Chart=function(context){var chart=this;var animationOptions={linear:function(t){return t;},easeInQuad:function(t){return t*t;},easeOutQuad:function(t){return -1*t*(t-2);},easeInOutQuad:function(t){if((t/=1/2)<1){return 1/2*t*t;}return -1/2*((--t)*(t-2)-1);},easeInCubic:function(t){return t*t*t;},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1);},easeInOutCubic:function(t){if((t/=1/2)<1){return 1/2*t*t*t;}return 1/2*((t-=2)*t*t+2);},easeInQuart:function(t){return t*t*t*t;},easeOutQuart:function(t){return -1*((t=t/1-1)*t*t*t-1);},easeInOutQuart:function(t){if((t/=1/2)<1){return 1/2*t*t*t*t;}return -1/2*((t-=2)*t*t*t-2);},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t;},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1);},easeInOutQuint:function(t){if((t/=1/2)<1){return 1/2*t*t*t*t*t;}return 1/2*((t-=2)*t*t*t*t+2);},easeInSine:function(t){return -1*Math.cos(t/1*(Math.PI/2))+1;},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2));},easeInOutSine:function(t){return -1/2*(Math.cos(Math.PI*t/1)-1);},easeInExpo:function(t){return(t==0)?1:1*Math.pow(2,10*(t/1-1));},easeOutExpo:function(t){return(t==1)?1:1*(-Math.pow(2,-10*t/1)+1);},easeInOutExpo:function(t){if(t==0){return 0;}if(t==1){return 1;}if((t/=1/2)<1){return 1/2*Math.pow(2,10*(t-1));}return 1/2*(-Math.pow(2,-10*--t)+2);},easeInCirc:function(t){if(t>=1){return t;}return -1*(Math.sqrt(1-(t/=1)*t)-1);},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t);},easeInOutCirc:function(t){if((t/=1/2)<1){return -1/2*(Math.sqrt(1-t*t)-1);}return 1/2*(Math.sqrt(1-(t-=2)*t)+1);},easeInElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0){return 0;}if((t/=1)==1){return 1;}if(!p){p=1*0.3;}if(a<Math.abs(1)){a=1;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(1/a);}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p));},easeOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0){return 0;}if((t/=1)==1){return 1;}if(!p){p=1*0.3;}if(a<Math.abs(1)){a=1;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(1/a);}return a*Math.pow(2,-10*t)*Math.sin((t*1-s)*(2*Math.PI)/p)+1;},easeInOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t==0){return 0;}if((t/=1/2)==2){return 1;}if(!p){p=1*(0.3*1.5);}if(a<Math.abs(1)){a=1;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(1/a);}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p));}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p)*0.5+1;},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s);},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1);},easeInOutBack:function(t){var s=1.70158;if((t/=1/2)<1){return 1/2*(t*t*(((s*=(1.525))+1)*t-s));}return 1/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2);},easeInBounce:function(t){return 1-animationOptions.easeOutBounce(1-t);},easeOutBounce:function(t){if((t/=1)<(1/2.75)){return 1*(7.5625*t*t);}else{if(t<(2/2.75)){return 1*(7.5625*(t-=(1.5/2.75))*t+0.75);}else{if(t<(2.5/2.75)){return 1*(7.5625*(t-=(2.25/2.75))*t+0.9375);}else{return 1*(7.5625*(t-=(2.625/2.75))*t+0.984375);}}}},easeInOutBounce:function(t){if(t<1/2){return animationOptions.easeInBounce(t*2)*0.5;}return animationOptions.easeOutBounce(t*2-1)*0.5+1*0.5;}};var width=context.canvas.width;var height=context.canvas.height;if(window.devicePixelRatio){context.canvas.style.width=width+"px";context.canvas.style.height=height+"px";context.canvas.height=height*window.devicePixelRatio;context.canvas.width=width*window.devicePixelRatio;context.scale(window.devicePixelRatio,window.devicePixelRatio);}this.PolarArea=function(data,options){chart.PolarArea.defaults={scaleOverlay:true,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null};var config=(options)?mergeChartConfig(chart.PolarArea.defaults,options):chart.PolarArea.defaults;return new PolarArea(data,config,context);};this.Radar=function(data,options){chart.Radar.defaults={scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:false,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:true,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:true,pointDotRadius:3,pointDotStrokeWidth:1,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var config=(options)?mergeChartConfig(chart.Radar.defaults,options):chart.Radar.defaults;return new Radar(data,config,context);};this.Pie=function(data,options){chart.Pie.defaults={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null};var config=(options)?mergeChartConfig(chart.Pie.defaults,options):chart.Pie.defaults;return new Pie(data,config,context);};this.Doughnut=function(data,options){chart.Doughnut.defaults={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null};var config=(options)?mergeChartConfig(chart.Doughnut.defaults,options):chart.Doughnut.defaults;return new Doughnut(data,config,context);};this.Line=function(data,options){chart.Line.defaults={scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:true,pointDot:true,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var config=(options)?mergeChartConfig(chart.Line.defaults,options):chart.Line.defaults;return new Line(data,config,context);};this.Bar=function(data,options){chart.Bar.defaults={scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var config=(options)?mergeChartConfig(chart.Bar.defaults,options):chart.Bar.defaults;return new Bar(data,config,context);};var clear=function(c){c.clearRect(0,0,width,height);};var PolarArea=function(data,config,ctx){var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString;calculateDrawingSizes();valueBounds=getValueBounds();labelTemplateString=(config.scaleShowLabels)?config.scaleLabel:null;if(!config.scaleOverride){calculatedScale=calculateScale(scaleHeight,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,labels:[]};populateLabels(labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,config.scaleStepWidth);}scaleHop=maxSize/(calculatedScale.steps);animationLoop(config,drawScale,drawAllSegments,ctx);function calculateDrawingSizes(){maxSize=(Min([width,height])/2);maxSize-=Max([config.scaleFontSize*0.5,config.scaleLineWidth*0.5]);labelHeight=config.scaleFontSize*2;if(config.scaleShowLabelBackdrop){labelHeight+=(2*config.scaleBackdropPaddingY);maxSize-=config.scaleBackdropPaddingY*1.5;}scaleHeight=maxSize;labelHeight=Default(labelHeight,5);}function drawScale(){for(var i=0;i<calculatedScale.steps;i++){if(config.scaleShowLine){ctx.beginPath();ctx.arc(width/2,height/2,scaleHop*(i+1),0,(Math.PI*2),true);ctx.strokeStyle=config.scaleLineColor;ctx.lineWidth=config.scaleLineWidth;ctx.stroke();}if(config.scaleShowLabels){ctx.textAlign="center";ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;var label=calculatedScale.labels[i];if(config.scaleShowLabelBackdrop){var textWidth=ctx.measureText(label).width;ctx.fillStyle=config.scaleBackdropColor;ctx.beginPath();ctx.rect(Math.round(width/2-textWidth/2-config.scaleBackdropPaddingX),Math.round(height/2-(scaleHop*(i+1))-config.scaleFontSize*0.5-config.scaleBackdropPaddingY),Math.round(textWidth+(config.scaleBackdropPaddingX*2)),Math.round(config.scaleFontSize+(config.scaleBackdropPaddingY*2)));ctx.fill();}ctx.textBaseline="middle";ctx.fillStyle=config.scaleFontColor;ctx.fillText(label,width/2,height/2-(scaleHop*(i+1)));}}}function drawAllSegments(animationDecimal){var startAngle=-Math.PI/2,angleStep=(Math.PI*2)/data.length,scaleAnimation=1,rotateAnimation=1;if(config.animation){if(config.animateScale){scaleAnimation=animationDecimal;}if(config.animateRotate){rotateAnimation=animationDecimal;}}for(var i=0;i<data.length;i++){ctx.beginPath();ctx.arc(width/2,height/2,scaleAnimation*calculateOffset(data[i].value,calculatedScale,scaleHop),startAngle,startAngle+rotateAnimation*angleStep,false);ctx.lineTo(width/2,height/2);ctx.closePath();ctx.fillStyle=data[i].color;ctx.fill();if(config.segmentShowStroke){ctx.strokeStyle=config.segmentStrokeColor;ctx.lineWidth=config.segmentStrokeWidth;ctx.stroke();}startAngle+=rotateAnimation*angleStep;}}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.length;i++){if(data[i].value>upperValue){upperValue=data[i].value;}if(data[i].value<lowerValue){lowerValue=data[i].value;}}var maxSteps=Math.floor((scaleHeight/(labelHeight*0.66)));var minSteps=Math.floor((scaleHeight/labelHeight*0.5));return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps};}};var Radar=function(data,config,ctx){var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString;if(!data.labels){data.labels=[];}calculateDrawingSizes();var valueBounds=getValueBounds();labelTemplateString=(config.scaleShowLabels)?config.scaleLabel:null;if(!config.scaleOverride){calculatedScale=calculateScale(scaleHeight,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,labels:[]};populateLabels(labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,config.scaleStepWidth);}scaleHop=maxSize/(calculatedScale.steps);animationLoop(config,drawScale,drawAllDataPoints,ctx);function drawAllDataPoints(animationDecimal){var rotationDegree=(2*Math.PI)/data.datasets[0].data.length;ctx.save();ctx.translate(width/2,height/2);for(var i=0;i<data.datasets.length;i++){ctx.beginPath();ctx.moveTo(0,animationDecimal*(-1*calculateOffset(data.datasets[i].data[0],calculatedScale,scaleHop)));for(var j=1;j<data.datasets[i].data.length;j++){ctx.rotate(rotationDegree);ctx.lineTo(0,animationDecimal*(-1*calculateOffset(data.datasets[i].data[j],calculatedScale,scaleHop)));}ctx.closePath();ctx.fillStyle=data.datasets[i].fillColor;ctx.strokeStyle=data.datasets[i].strokeColor;ctx.lineWidth=config.datasetStrokeWidth;ctx.fill();ctx.stroke();if(config.pointDot){ctx.fillStyle=data.datasets[i].pointColor;ctx.strokeStyle=data.datasets[i].pointStrokeColor;ctx.lineWidth=config.pointDotStrokeWidth;for(var k=0;k<data.datasets[i].data.length;k++){ctx.rotate(rotationDegree);ctx.beginPath();ctx.arc(0,animationDecimal*(-1*calculateOffset(data.datasets[i].data[k],calculatedScale,scaleHop)),config.pointDotRadius,2*Math.PI,false);ctx.fill();ctx.stroke();}}ctx.rotate(rotationDegree);}ctx.restore();}function drawScale(){var rotationDegree=(2*Math.PI)/data.datasets[0].data.length;ctx.save();ctx.translate(width/2,height/2);if(config.angleShowLineOut){ctx.strokeStyle=config.angleLineColor;ctx.lineWidth=config.angleLineWidth;for(var h=0;h<data.datasets[0].data.length;h++){ctx.rotate(rotationDegree);ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(0,-maxSize);ctx.stroke();}}for(var i=0;i<calculatedScale.steps;i++){ctx.beginPath();if(config.scaleShowLine){ctx.strokeStyle=config.scaleLineColor;ctx.lineWidth=config.scaleLineWidth;ctx.moveTo(0,-scaleHop*(i+1));for(var j=0;j<data.datasets[0].data.length;j++){ctx.rotate(rotationDegree);ctx.lineTo(0,-scaleHop*(i+1));}ctx.closePath();ctx.stroke();}if(config.scaleShowLabels){ctx.textAlign="center";ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;ctx.textBaseline="middle";if(config.scaleShowLabelBackdrop){var textWidth=ctx.measureText(calculatedScale.labels[i]).width;ctx.fillStyle=config.scaleBackdropColor;ctx.beginPath();ctx.rect(Math.round(-textWidth/2-config.scaleBackdropPaddingX),Math.round((-scaleHop*(i+1))-config.scaleFontSize*0.5-config.scaleBackdropPaddingY),Math.round(textWidth+(config.scaleBackdropPaddingX*2)),Math.round(config.scaleFontSize+(config.scaleBackdropPaddingY*2)));ctx.fill();}ctx.fillStyle=config.scaleFontColor;ctx.fillText(calculatedScale.labels[i],0,-scaleHop*(i+1));}}for(var k=0;k<data.labels.length;k++){ctx.font=config.pointLabelFontStyle+" "+config.pointLabelFontSize+"px "+config.pointLabelFontFamily;ctx.fillStyle=config.pointLabelFontColor;var opposite=Math.sin(rotationDegree*k)*(maxSize+config.pointLabelFontSize);var adjacent=Math.cos(rotationDegree*k)*(maxSize+config.pointLabelFontSize);if(rotationDegree*k==Math.PI||rotationDegree*k==0){ctx.textAlign="center";}else{if(rotationDegree*k>Math.PI){ctx.textAlign="right";}else{ctx.textAlign="left";}}ctx.textBaseline="middle";ctx.fillText(data.labels[k],opposite,-adjacent);}ctx.restore();}function calculateDrawingSizes(){maxSize=(Min([width,height])/2);labelHeight=config.scaleFontSize*2;var labelLength=0;for(var i=0;i<data.labels.length;i++){ctx.font=config.pointLabelFontStyle+" "+config.pointLabelFontSize+"px "+config.pointLabelFontFamily;var textMeasurement=ctx.measureText(data.labels[i]).width;if(textMeasurement>labelLength){labelLength=textMeasurement;}}maxSize-=Max([labelLength,((config.pointLabelFontSize/2)*1.5)]);maxSize-=config.pointLabelFontSize;maxSize=CapValue(maxSize,null,0);scaleHeight=maxSize;labelHeight=Default(labelHeight,5);}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.datasets.length;i++){for(var j=0;j<data.datasets[i].data.length;j++){if(data.datasets[i].data[j]>upperValue){upperValue=data.datasets[i].data[j];}if(data.datasets[i].data[j]<lowerValue){lowerValue=data.datasets[i].data[j];}}}var maxSteps=Math.floor((scaleHeight/(labelHeight*0.66)));var minSteps=Math.floor((scaleHeight/labelHeight*0.5));return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps};}};var Pie=function(data,config,ctx){var segmentTotal=0;var pieRadius=Min([height/2,width/2])-5;for(var i=0;i<data.length;i++){segmentTotal+=data[i].value;}animationLoop(config,null,drawPieSegments,ctx);function drawPieSegments(animationDecimal){var cumulativeAngle=-Math.PI/2,scaleAnimation=1,rotateAnimation=1;if(config.animation){if(config.animateScale){scaleAnimation=animationDecimal;}if(config.animateRotate){rotateAnimation=animationDecimal;}}for(var i=0;i<data.length;i++){var segmentAngle=rotateAnimation*((data[i].value/segmentTotal)*(Math.PI*2));ctx.beginPath();ctx.arc(width/2,height/2,scaleAnimation*pieRadius,cumulativeAngle,cumulativeAngle+segmentAngle);ctx.lineTo(width/2,height/2);ctx.closePath();ctx.fillStyle=data[i].color;ctx.fill();if(config.segmentShowStroke){ctx.lineWidth=config.segmentStrokeWidth;ctx.strokeStyle=config.segmentStrokeColor;ctx.stroke();}cumulativeAngle+=segmentAngle;}}};var Doughnut=function(data,config,ctx){var segmentTotal=0;var doughnutRadius=Min([height/2,width/2])-5;var cutoutRadius=doughnutRadius*(config.percentageInnerCutout/100);for(var i=0;i<data.length;i++){segmentTotal+=data[i].value;}animationLoop(config,null,drawPieSegments,ctx);function drawPieSegments(animationDecimal){var cumulativeAngle=-Math.PI/2,scaleAnimation=1,rotateAnimation=1;if(config.animation){if(config.animateScale){scaleAnimation=animationDecimal;}if(config.animateRotate){rotateAnimation=animationDecimal;}}for(var i=0;i<data.length;i++){var segmentAngle=rotateAnimation*((data[i].value/segmentTotal)*(Math.PI*2));ctx.beginPath();ctx.arc(width/2,height/2,scaleAnimation*doughnutRadius,cumulativeAngle,cumulativeAngle+segmentAngle,false);ctx.arc(width/2,height/2,scaleAnimation*cutoutRadius,cumulativeAngle+segmentAngle,cumulativeAngle,true);ctx.closePath();ctx.fillStyle=data[i].color;ctx.fill();if(config.segmentShowStroke){ctx.lineWidth=config.segmentStrokeWidth;ctx.strokeStyle=config.segmentStrokeColor;ctx.stroke();}cumulativeAngle+=segmentAngle;}}};var Line=function(data,config,ctx){var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0;calculateDrawingSizes();valueBounds=getValueBounds();labelTemplateString=(config.scaleShowLabels)?config.scaleLabel:"";if(!config.scaleOverride){calculatedScale=calculateScale(scaleHeight,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,labels:[]};populateLabels(labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,config.scaleStepWidth);}scaleHop=Math.floor(scaleHeight/calculatedScale.steps);calculateXAxisSize();animationLoop(config,drawScale,drawLines,ctx);function drawLines(animPc){for(var i=0;i<data.datasets.length;i++){ctx.strokeStyle=data.datasets[i].strokeColor;ctx.lineWidth=config.datasetStrokeWidth;ctx.beginPath();ctx.moveTo(yAxisPosX,xAxisPosY-animPc*(calculateOffset(data.datasets[i].data[0],calculatedScale,scaleHop)));for(var j=1;j<data.datasets[i].data.length;j++){if(config.bezierCurve){ctx.bezierCurveTo(xPos(j-0.5),yPos(i,j-1),xPos(j-0.5),yPos(i,j),xPos(j),yPos(i,j));}else{ctx.lineTo(xPos(j),yPos(i,j));}}ctx.stroke();if(config.datasetFill){ctx.lineTo(yAxisPosX+(valueHop*(data.datasets[i].data.length-1)),xAxisPosY);ctx.lineTo(yAxisPosX,xAxisPosY);ctx.closePath();ctx.fillStyle=data.datasets[i].fillColor;ctx.fill();}else{ctx.closePath();}if(config.pointDot){ctx.fillStyle=data.datasets[i].pointColor;ctx.strokeStyle=data.datasets[i].pointStrokeColor;ctx.lineWidth=config.pointDotStrokeWidth;for(var k=0;k<data.datasets[i].data.length;k++){ctx.beginPath();ctx.arc(yAxisPosX+(valueHop*k),xAxisPosY-animPc*(calculateOffset(data.datasets[i].data[k],calculatedScale,scaleHop)),config.pointDotRadius,0,Math.PI*2,true);ctx.fill();ctx.stroke();}}}function yPos(dataSet,iteration){return xAxisPosY-animPc*(calculateOffset(data.datasets[dataSet].data[iteration],calculatedScale,scaleHop));}function xPos(iteration){return yAxisPosX+(valueHop*iteration);}}function drawScale(){ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(width-widestXLabel/2+5,xAxisPosY);ctx.lineTo(width-(widestXLabel/2)-xAxisLength-5,xAxisPosY);ctx.stroke();if(rotateLabels>0){ctx.save();ctx.textAlign="right";}else{ctx.textAlign="center";}ctx.fillStyle=config.scaleFontColor;for(var i=0;i<data.labels.length;i++){ctx.save();if(rotateLabels>0){ctx.translate(yAxisPosX+i*valueHop,xAxisPosY+config.scaleFontSize);ctx.rotate(-(rotateLabels*(Math.PI/180)));ctx.fillText(data.labels[i],0,0);ctx.restore();}else{ctx.fillText(data.labels[i],yAxisPosX+i*valueHop,xAxisPosY+config.scaleFontSize+3);}ctx.beginPath();ctx.moveTo(yAxisPosX+i*valueHop,xAxisPosY+3);if(config.scaleShowGridLines&&i>0){ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;ctx.lineTo(yAxisPosX+i*valueHop,5);}else{ctx.lineTo(yAxisPosX+i*valueHop,xAxisPosY+3);}ctx.stroke();}ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(yAxisPosX,xAxisPosY+5);ctx.lineTo(yAxisPosX,5);ctx.stroke();ctx.textAlign="right";ctx.textBaseline="middle";for(var j=0;j<calculatedScale.steps;j++){ctx.beginPath();ctx.moveTo(yAxisPosX-3,xAxisPosY-((j+1)*scaleHop));if(config.scaleShowGridLines){ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;ctx.lineTo(yAxisPosX+xAxisLength+5,xAxisPosY-((j+1)*scaleHop));}else{ctx.lineTo(yAxisPosX-0.5,xAxisPosY-((j+1)*scaleHop));}ctx.stroke();if(config.scaleShowLabels){ctx.fillText(calculatedScale.labels[j],yAxisPosX-8,xAxisPosY-((j+1)*scaleHop));}}}function calculateXAxisSize(){var longestText=1;if(config.scaleShowLabels){ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;for(var i=0;i<calculatedScale.labels.length;i++){var measuredText=ctx.measureText(calculatedScale.labels[i]).width;longestText=(measuredText>longestText)?measuredText:longestText;}longestText+=10;}xAxisLength=width-longestText-widestXLabel;valueHop=Math.floor(xAxisLength/(data.labels.length-1));yAxisPosX=width-widestXLabel/2-xAxisLength;xAxisPosY=scaleHeight+config.scaleFontSize/2;}function calculateDrawingSizes(){maxSize=height;ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;widestXLabel=1;for(var i=0;i<data.labels.length;i++){var textLength=ctx.measureText(data.labels[i]).width;widestXLabel=(textLength>widestXLabel)?textLength:widestXLabel;}if(width/data.labels.length<widestXLabel){rotateLabels=45;if(width/data.labels.length<Math.cos(rotateLabels)*widestXLabel){rotateLabels=90;maxSize-=widestXLabel;}else{maxSize-=Math.sin(rotateLabels)*widestXLabel;}}else{maxSize-=config.scaleFontSize;}maxSize-=5;labelHeight=config.scaleFontSize;maxSize-=labelHeight;scaleHeight=maxSize;}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.datasets.length;i++){for(var j=0;j<data.datasets[i].data.length;j++){if(data.datasets[i].data[j]>upperValue){upperValue=data.datasets[i].data[j];}if(data.datasets[i].data[j]<lowerValue){lowerValue=data.datasets[i].data[j];}}}var maxSteps=Math.floor((scaleHeight/(labelHeight*0.66)));var minSteps=Math.floor((scaleHeight/labelHeight*0.5));return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps};}};var Bar=function(data,config,ctx){var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0;calculateDrawingSizes();valueBounds=getValueBounds();labelTemplateString=(config.scaleShowLabels)?config.scaleLabel:"";if(!config.scaleOverride){calculatedScale=calculateScale(scaleHeight,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);}else{calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,labels:[]};populateLabels(labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,config.scaleStepWidth);}scaleHop=Math.floor(scaleHeight/calculatedScale.steps);calculateXAxisSize();animationLoop(config,drawScale,drawBars,ctx);function drawBars(animPc){ctx.lineWidth=config.barStrokeWidth;for(var i=0;i<data.datasets.length;i++){ctx.fillStyle=data.datasets[i].fillColor;ctx.strokeStyle=data.datasets[i].strokeColor;for(var j=0;j<data.datasets[i].data.length;j++){var barOffset=yAxisPosX+config.barValueSpacing+valueHop*j+barWidth*i+config.barDatasetSpacing*i+config.barStrokeWidth*i;ctx.beginPath();ctx.moveTo(barOffset,xAxisPosY);ctx.lineTo(barOffset,xAxisPosY-animPc*calculateOffset(data.datasets[i].data[j],calculatedScale,scaleHop)+(config.barStrokeWidth/2));ctx.lineTo(barOffset+barWidth,xAxisPosY-animPc*calculateOffset(data.datasets[i].data[j],calculatedScale,scaleHop)+(config.barStrokeWidth/2));ctx.lineTo(barOffset+barWidth,xAxisPosY);if(config.barShowStroke){ctx.stroke();}ctx.closePath();ctx.fill();}}}function drawScale(){ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(width-widestXLabel/2+5,xAxisPosY);ctx.lineTo(width-(widestXLabel/2)-xAxisLength-5,xAxisPosY);ctx.stroke();if(rotateLabels>0){ctx.save();ctx.textAlign="right";}else{ctx.textAlign="center";}ctx.fillStyle=config.scaleFontColor;for(var i=0;i<data.labels.length;i++){ctx.save();if(rotateLabels>0){ctx.translate(yAxisPosX+i*valueHop,xAxisPosY+config.scaleFontSize);ctx.rotate(-(rotateLabels*(Math.PI/180)));ctx.fillText(data.labels[i],0,0);ctx.restore();}else{ctx.fillText(data.labels[i],yAxisPosX+i*valueHop+valueHop/2,xAxisPosY+config.scaleFontSize+3);}ctx.beginPath();ctx.moveTo(yAxisPosX+(i+1)*valueHop,xAxisPosY+3);ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;ctx.lineTo(yAxisPosX+(i+1)*valueHop,5);ctx.stroke();}ctx.lineWidth=config.scaleLineWidth;ctx.strokeStyle=config.scaleLineColor;ctx.beginPath();ctx.moveTo(yAxisPosX,xAxisPosY+5);ctx.lineTo(yAxisPosX,5);ctx.stroke();ctx.textAlign="right";ctx.textBaseline="middle";for(var j=0;j<calculatedScale.steps;j++){ctx.beginPath();ctx.moveTo(yAxisPosX-3,xAxisPosY-((j+1)*scaleHop));if(config.scaleShowGridLines){ctx.lineWidth=config.scaleGridLineWidth;ctx.strokeStyle=config.scaleGridLineColor;ctx.lineTo(yAxisPosX+xAxisLength+5,xAxisPosY-((j+1)*scaleHop));}else{ctx.lineTo(yAxisPosX-0.5,xAxisPosY-((j+1)*scaleHop));}ctx.stroke();if(config.scaleShowLabels){ctx.fillText(calculatedScale.labels[j],yAxisPosX-8,xAxisPosY-((j+1)*scaleHop));}}}function calculateXAxisSize(){var longestText=1;if(config.scaleShowLabels){ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;for(var i=0;i<calculatedScale.labels.length;i++){var measuredText=ctx.measureText(calculatedScale.labels[i]).width;longestText=(measuredText>longestText)?measuredText:longestText;}longestText+=10;}xAxisLength=width-longestText-widestXLabel;valueHop=Math.floor(xAxisLength/(data.labels.length));barWidth=(valueHop-config.scaleGridLineWidth*2-(config.barValueSpacing*2)-(config.barDatasetSpacing*data.datasets.length-1)-((config.barStrokeWidth/2)*data.datasets.length-1))/data.datasets.length;yAxisPosX=width-widestXLabel/2-xAxisLength;xAxisPosY=scaleHeight+config.scaleFontSize/2;}function calculateDrawingSizes(){maxSize=height;ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily;widestXLabel=1;for(var i=0;i<data.labels.length;i++){var textLength=ctx.measureText(data.labels[i]).width;widestXLabel=(textLength>widestXLabel)?textLength:widestXLabel;}if(width/data.labels.length<widestXLabel){rotateLabels=45;if(width/data.labels.length<Math.cos(rotateLabels)*widestXLabel){rotateLabels=90;maxSize-=widestXLabel;}else{maxSize-=Math.sin(rotateLabels)*widestXLabel;}}else{maxSize-=config.scaleFontSize;}maxSize-=5;labelHeight=config.scaleFontSize;maxSize-=labelHeight;scaleHeight=maxSize;}function getValueBounds(){var upperValue=Number.MIN_VALUE;var lowerValue=Number.MAX_VALUE;for(var i=0;i<data.datasets.length;i++){for(var j=0;j<data.datasets[i].data.length;j++){if(data.datasets[i].data[j]>upperValue){upperValue=data.datasets[i].data[j];}if(data.datasets[i].data[j]<lowerValue){lowerValue=data.datasets[i].data[j];}}}var maxSteps=Math.floor((scaleHeight/(labelHeight*0.66)));var minSteps=Math.floor((scaleHeight/labelHeight*0.5));return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps};}};function calculateOffset(val,calculatedScale,scaleHop){var outerValue=calculatedScale.steps*calculatedScale.stepValue;var adjustedValue=val-calculatedScale.graphMin;var scalingFactor=CapValue(adjustedValue/outerValue,1,0);return(scaleHop*calculatedScale.steps)*scalingFactor;}function animationLoop(config,drawScale,drawData,ctx){var animFrameAmount=(config.animation)?1/CapValue(config.animationSteps,Number.MAX_VALUE,1):1,easingFunction=animationOptions[config.animationEasing],percentAnimComplete=(config.animation)?0:1;if(typeof drawScale!=="function"){drawScale=function(){};}requestAnimFrame(animLoop);function animateFrame(){var easeAdjustedAnimationPercent=(config.animation)?CapValue(easingFunction(percentAnimComplete),null,0):1;clear(ctx);if(config.scaleOverlay){drawData(easeAdjustedAnimationPercent);drawScale();}else{drawScale();drawData(easeAdjustedAnimationPercent);}}function animLoop(){percentAnimComplete+=animFrameAmount;animateFrame();if(percentAnimComplete<=1){requestAnimFrame(animLoop);}else{if(typeof config.onAnimationComplete=="function"){config.onAnimationComplete();}}}}var requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};})();function calculateScale(drawingHeight,maxSteps,minSteps,maxValue,minValue,labelTemplateString){var graphMin,graphMax,graphRange,stepValue,numberOfSteps,valueRange,rangeOrderOfMagnitude,decimalNum;valueRange=maxValue-minValue;rangeOrderOfMagnitude=calculateOrderOfMagnitude(valueRange);graphMin=Math.floor(minValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude);graphMax=Math.ceil(maxValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude);graphRange=graphMax-graphMin;stepValue=Math.pow(10,rangeOrderOfMagnitude);numberOfSteps=Math.round(graphRange/stepValue);while(numberOfSteps<minSteps||numberOfSteps>maxSteps){if(numberOfSteps<minSteps){stepValue/=2;numberOfSteps=Math.round(graphRange/stepValue);}else{stepValue*=2;numberOfSteps=Math.round(graphRange/stepValue);}}var labels=[];populateLabels(labelTemplateString,labels,numberOfSteps,graphMin,stepValue);return{steps:numberOfSteps,stepValue:stepValue,graphMin:graphMin,labels:labels};function calculateOrderOfMagnitude(val){return Math.floor(Math.log(val)/Math.LN10);}}function populateLabels(labelTemplateString,labels,numberOfSteps,graphMin,stepValue){if(labelTemplateString){for(var i=1;i<numberOfSteps+1;i++){labels.push(tmpl(labelTemplateString,{value:(graphMin+(stepValue*i)).toFixed(getDecimalPlaces(stepValue))}));}}}function Max(array){return Math.max.apply(Math,array);}function Min(array){return Math.min.apply(Math,array);}function Default(userDeclared,valueIfFalse){if(!userDeclared){return valueIfFalse;}else{return userDeclared;}}function isNumber(n){return !isNaN(parseFloat(n))&&isFinite(n);}function CapValue(valueToCap,maxValue,minValue){if(isNumber(maxValue)){if(valueToCap>maxValue){return maxValue;}}if(isNumber(minValue)){if(valueToCap<minValue){return minValue;}}return valueToCap;}function getDecimalPlaces(num){var numberOfDecimalPlaces;if(num%1!=0){return num.toString().split(".")[1].length;}else{return 0;}}function mergeChartConfig(defaults,userDefined){var returnObj={};for(var attrname in defaults){returnObj[attrname]=defaults[attrname];}for(var attrname in userDefined){returnObj[attrname]=userDefined[attrname];}return returnObj;}var cache={};function tmpl(str,data){var fn=!/\W/.test(str)?cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return data?fn(data):fn;}};
/*** excanvas.compiled.js ***/
if(!document.createElement("canvas").getContext){(function(){var ab=Math;var n=ab.round;var l=ab.sin;var A=ab.cos;var H=ab.abs;var N=ab.sqrt;var d=10;var f=d/2;var z=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];function y(){return this.context_||(this.context_=new D(this));}var t=Array.prototype.slice;function g(j,m,p){var i=t.call(arguments,2);return function(){return j.apply(m,i.concat(t.call(arguments)));};}function af(i){return String(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;");}function Y(m,j,i){if(!m.namespaces[j]){m.namespaces.add(j,i,"#default#VML");}}function R(j){Y(j,"g_vml_","urn:schemas-microsoft-com:vml");Y(j,"g_o_","urn:schemas-microsoft-com:office:office");if(!j.styleSheets.ex_canvas_){var i=j.createStyleSheet();i.owningElement.id="ex_canvas_";i.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}";}}R(document);var e={init:function(i){var j=i||document;j.createElement("canvas");j.attachEvent("onreadystatechange",g(this.init_,this,j));},init_:function(p){var m=p.getElementsByTagName("canvas");for(var j=0;j<m.length;j++){this.initElement(m[j]);}},initElement:function(j){if(!j.getContext){j.getContext=y;R(j.ownerDocument);j.innerHTML="";j.attachEvent("onpropertychange",x);j.attachEvent("onresize",W);var i=j.attributes;if(i.width&&i.width.specified){j.style.width=i.width.nodeValue+"px";}else{j.width=j.clientWidth;}if(i.height&&i.height.specified){j.style.height=i.height.nodeValue+"px";}else{j.height=j.clientHeight;}}return j;}};function x(j){var i=j.srcElement;switch(j.propertyName){case"width":i.getContext().clearRect();i.style.width=i.attributes.width.nodeValue+"px";i.firstChild.style.width=i.clientWidth+"px";break;case"height":i.getContext().clearRect();i.style.height=i.attributes.height.nodeValue+"px";i.firstChild.style.height=i.clientHeight+"px";break;}}function W(j){var i=j.srcElement;if(i.firstChild){i.firstChild.style.width=i.clientWidth+"px";i.firstChild.style.height=i.clientHeight+"px";}}e.init();var k=[];for(var ae=0;ae<16;ae++){for(var ad=0;ad<16;ad++){k[ae*16+ad]=ae.toString(16)+ad.toString(16);}}function B(){return[[1,0,0],[0,1,0],[0,0,1]];}function J(p,m){var j=B();for(var i=0;i<3;i++){for(var ah=0;ah<3;ah++){var Z=0;for(var ag=0;ag<3;ag++){Z+=p[i][ag]*m[ag][ah];}j[i][ah]=Z;}}return j;}function v(j,i){i.fillStyle=j.fillStyle;i.lineCap=j.lineCap;i.lineJoin=j.lineJoin;i.lineWidth=j.lineWidth;i.miterLimit=j.miterLimit;i.shadowBlur=j.shadowBlur;i.shadowColor=j.shadowColor;i.shadowOffsetX=j.shadowOffsetX;i.shadowOffsetY=j.shadowOffsetY;i.strokeStyle=j.strokeStyle;i.globalAlpha=j.globalAlpha;i.font=j.font;i.textAlign=j.textAlign;i.textBaseline=j.textBaseline;i.arcScaleX_=j.arcScaleX_;i.arcScaleY_=j.arcScaleY_;i.lineScale_=j.lineScale_;}var b={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function M(j){var p=j.indexOf("(",3);var i=j.indexOf(")",p+1);var m=j.substring(p+1,i).split(",");if(m.length!=4||j.charAt(3)!="a"){m[3]=1;}return m;}function c(i){return parseFloat(i)/100;}function r(j,m,i){return Math.min(i,Math.max(m,j));}function I(ag){var i,ai,aj,ah,ak,Z;ah=parseFloat(ag[0])/360%360;if(ah<0){ah++;}ak=r(c(ag[1]),0,1);Z=r(c(ag[2]),0,1);if(ak==0){i=ai=aj=Z;}else{var j=Z<0.5?Z*(1+ak):Z+ak-Z*ak;var m=2*Z-j;i=a(m,j,ah+1/3);ai=a(m,j,ah);aj=a(m,j,ah-1/3);}return"#"+k[Math.floor(i*255)]+k[Math.floor(ai*255)]+k[Math.floor(aj*255)];}function a(j,i,m){if(m<0){m++;}if(m>1){m--;}if(6*m<1){return j+(i-j)*6*m;}else{if(2*m<1){return i;}else{if(3*m<2){return j+(i-j)*(2/3-m)*6;}else{return j;}}}}var C={};function F(j){if(j in C){return C[j];}var ag,Z=1;j=String(j);if(j.charAt(0)=="#"){ag=j;}else{if(/^rgb/.test(j)){var p=M(j);var ag="#",ah;for(var m=0;m<3;m++){if(p[m].indexOf("%")!=-1){ah=Math.floor(c(p[m])*255);}else{ah=+p[m];}ag+=k[r(ah,0,255)];}Z=+p[3];}else{if(/^hsl/.test(j)){var p=M(j);ag=I(p);Z=p[3];}else{ag=b[j]||j;}}}return C[j]={color:ag,alpha:Z};}var o={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"};var L={};function E(i){if(L[i]){return L[i];}var p=document.createElement("div");var m=p.style;try{m.font=i;}catch(j){}return L[i]={style:m.fontStyle||o.style,variant:m.fontVariant||o.variant,weight:m.fontWeight||o.weight,size:m.fontSize||o.size,family:m.fontFamily||o.family};}function u(m,j){var i={};for(var ah in m){i[ah]=m[ah];}var ag=parseFloat(j.currentStyle.fontSize),Z=parseFloat(m.size);if(typeof m.size=="number"){i.size=m.size;}else{if(m.size.indexOf("px")!=-1){i.size=Z;}else{if(m.size.indexOf("em")!=-1){i.size=ag*Z;}else{if(m.size.indexOf("%")!=-1){i.size=(ag/100)*Z;}else{if(m.size.indexOf("pt")!=-1){i.size=Z/0.75;}else{i.size=ag;}}}}}i.size*=0.981;return i;}function ac(i){return i.style+" "+i.variant+" "+i.weight+" "+i.size+"px "+i.family;}var s={butt:"flat",round:"round"};function S(i){return s[i]||"square";}function D(i){this.m_=B();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=d*1;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=i;var m="width:"+i.clientWidth+"px;height:"+i.clientHeight+"px;overflow:hidden;position:absolute";var j=i.ownerDocument.createElement("div");j.style.cssText=m;i.appendChild(j);var p=j.cloneNode(false);p.style.backgroundColor="red";p.style.filter="alpha(opacity=0)";i.appendChild(p);this.element_=j;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1;}var q=D.prototype;q.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null;}this.element_.innerHTML="";};q.beginPath=function(){this.currentPath_=[];};q.moveTo=function(j,i){var m=V(this,j,i);this.currentPath_.push({type:"moveTo",x:m.x,y:m.y});this.currentX_=m.x;this.currentY_=m.y;};q.lineTo=function(j,i){var m=V(this,j,i);this.currentPath_.push({type:"lineTo",x:m.x,y:m.y});this.currentX_=m.x;this.currentY_=m.y;};q.bezierCurveTo=function(m,j,ak,aj,ai,ag){var i=V(this,ai,ag);var ah=V(this,m,j);var Z=V(this,ak,aj);K(this,ah,Z,i);};function K(i,Z,m,j){i.currentPath_.push({type:"bezierCurveTo",cp1x:Z.x,cp1y:Z.y,cp2x:m.x,cp2y:m.y,x:j.x,y:j.y});i.currentX_=j.x;i.currentY_=j.y;}q.quadraticCurveTo=function(ai,m,j,i){var ah=V(this,ai,m);var ag=V(this,j,i);var aj={x:this.currentX_+2/3*(ah.x-this.currentX_),y:this.currentY_+2/3*(ah.y-this.currentY_)};var Z={x:aj.x+(ag.x-this.currentX_)/3,y:aj.y+(ag.y-this.currentY_)/3};K(this,aj,Z,ag);};q.arc=function(al,aj,ak,ag,j,m){ak*=d;var ap=m?"at":"wa";var am=al+A(ag)*ak-f;var ao=aj+l(ag)*ak-f;var i=al+A(j)*ak-f;var an=aj+l(j)*ak-f;if(am==i&&!m){am+=0.125;}var Z=V(this,al,aj);var ai=V(this,am,ao);var ah=V(this,i,an);this.currentPath_.push({type:ap,x:Z.x,y:Z.y,radius:ak,xStart:ai.x,yStart:ai.y,xEnd:ah.x,yEnd:ah.y});};q.rect=function(m,j,i,p){this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+p);this.lineTo(m,j+p);this.closePath();};q.strokeRect=function(m,j,i,p){var Z=this.currentPath_;this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+p);this.lineTo(m,j+p);this.closePath();this.stroke();this.currentPath_=Z;};q.fillRect=function(m,j,i,p){var Z=this.currentPath_;this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+p);this.lineTo(m,j+p);this.closePath();this.fill();this.currentPath_=Z;};q.createLinearGradient=function(j,p,i,m){var Z=new U("gradient");Z.x0_=j;Z.y0_=p;Z.x1_=i;Z.y1_=m;return Z;};q.createRadialGradient=function(p,ag,m,j,Z,i){var ah=new U("gradientradial");ah.x0_=p;ah.y0_=ag;ah.r0_=m;ah.x1_=j;ah.y1_=Z;ah.r1_=i;return ah;};q.drawImage=function(aq,m){var aj,ah,al,ay,ao,am,at,aA;var ak=aq.runtimeStyle.width;var ap=aq.runtimeStyle.height;aq.runtimeStyle.width="auto";aq.runtimeStyle.height="auto";var ai=aq.width;var aw=aq.height;aq.runtimeStyle.width=ak;aq.runtimeStyle.height=ap;if(arguments.length==3){aj=arguments[1];ah=arguments[2];ao=am=0;at=al=ai;aA=ay=aw;}else{if(arguments.length==5){aj=arguments[1];ah=arguments[2];al=arguments[3];ay=arguments[4];ao=am=0;at=ai;aA=aw;}else{if(arguments.length==9){ao=arguments[1];am=arguments[2];at=arguments[3];aA=arguments[4];aj=arguments[5];ah=arguments[6];al=arguments[7];ay=arguments[8];}else{throw Error("Invalid number of arguments");}}}var az=V(this,aj,ah);var p=at/2;var j=aA/2;var ax=[];var i=10;var ag=10;ax.push(" <g_vml_:group",' coordsize="',d*i,",",d*ag,'"',' coordorigin="0,0"',' style="width:',i,"px;height:",ag,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var Z=[];Z.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",n(az.x/d),",","Dy=",n(az.y/d),"");var av=az;var au=V(this,aj+al,ah);var ar=V(this,aj,ah+ay);var an=V(this,aj+al,ah+ay);av.x=ab.max(av.x,au.x,ar.x,an.x);av.y=ab.max(av.y,au.y,ar.y,an.y);ax.push("padding:0 ",n(av.x/d),"px ",n(av.y/d),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",Z.join(""),", sizingmethod='clip');");}else{ax.push("top:",n(az.y/d),"px;left:",n(az.x/d),"px;");}ax.push(' ">','<g_vml_:image src="',aq.src,'"',' style="width:',d*al,"px;"," height:",d*ay,'px"',' cropleft="',ao/ai,'"',' croptop="',am/aw,'"',' cropright="',(ai-ao-at)/ai,'"',' cropbottom="',(aw-am-aA)/aw,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",ax.join(""));};q.stroke=function(al){var aj=[];var Z=false;var m=10;var am=10;aj.push("<g_vml_:shape",' filled="',!!al,'"',' style="position:absolute;width:',m,"px;height:",am,'px;"',' coordorigin="0,0"',' coordsize="',d*m,",",d*am,'"',' stroked="',!al,'"',' path="');var an=false;var ag={x:null,y:null};var ak={x:null,y:null};for(var ah=0;ah<this.currentPath_.length;ah++){var j=this.currentPath_[ah];var ai;switch(j.type){case"moveTo":ai=j;aj.push(" m ",n(j.x),",",n(j.y));break;case"lineTo":aj.push(" l ",n(j.x),",",n(j.y));break;case"close":aj.push(" x ");j=null;break;case"bezierCurveTo":aj.push(" c ",n(j.cp1x),",",n(j.cp1y),",",n(j.cp2x),",",n(j.cp2y),",",n(j.x),",",n(j.y));break;case"at":case"wa":aj.push(" ",j.type," ",n(j.x-this.arcScaleX_*j.radius),",",n(j.y-this.arcScaleY_*j.radius)," ",n(j.x+this.arcScaleX_*j.radius),",",n(j.y+this.arcScaleY_*j.radius)," ",n(j.xStart),",",n(j.yStart)," ",n(j.xEnd),",",n(j.yEnd));break;}if(j){if(ag.x==null||j.x<ag.x){ag.x=j.x;}if(ak.x==null||j.x>ak.x){ak.x=j.x;}if(ag.y==null||j.y<ag.y){ag.y=j.y;}if(ak.y==null||j.y>ak.y){ak.y=j.y;}}}aj.push(' ">');if(!al){w(this,aj);}else{G(this,aj,ag,ak);}aj.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",aj.join(""));};function w(m,ag){var j=F(m.strokeStyle);var p=j.color;var Z=j.alpha*m.globalAlpha;var i=m.lineScale_*m.lineWidth;if(i<1){Z*=i;}ag.push("<g_vml_:stroke",' opacity="',Z,'"',' joinstyle="',m.lineJoin,'"',' miterlimit="',m.miterLimit,'"',' endcap="',S(m.lineCap),'"',' weight="',i,'px"',' color="',p,'" />');}function G(aq,ai,aK,ar){var aj=aq.fillStyle;var aB=aq.arcScaleX_;var aA=aq.arcScaleY_;var j=ar.x-aK.x;var p=ar.y-aK.y;if(aj instanceof U){var an=0;var aF={x:0,y:0};var ax=0;var am=1;if(aj.type_=="gradient"){var al=aj.x0_/aB;var m=aj.y0_/aA;var ak=aj.x1_/aB;var aM=aj.y1_/aA;var aJ=V(aq,al,m);var aI=V(aq,ak,aM);var ag=aI.x-aJ.x;var Z=aI.y-aJ.y;an=Math.atan2(ag,Z)*180/Math.PI;if(an<0){an+=360;}if(an<0.000001){an=0;}}else{var aJ=V(aq,aj.x0_,aj.y0_);aF={x:(aJ.x-aK.x)/j,y:(aJ.y-aK.y)/p};j/=aB*d;p/=aA*d;var aD=ab.max(j,p);ax=2*aj.r0_/aD;am=2*aj.r1_/aD-ax;}var av=aj.colors_;av.sort(function(aN,i){return aN.offset-i.offset;});var ap=av.length;var au=av[0].color;var at=av[ap-1].color;var az=av[0].alpha*aq.globalAlpha;var ay=av[ap-1].alpha*aq.globalAlpha;var aE=[];for(var aH=0;aH<ap;aH++){var ao=av[aH];aE.push(ao.offset*am+ax+" "+ao.color);}ai.push('<g_vml_:fill type="',aj.type_,'"',' method="none" focus="100%"',' color="',au,'"',' color2="',at,'"',' colors="',aE.join(","),'"',' opacity="',ay,'"',' g_o_:opacity2="',az,'"',' angle="',an,'"',' focusposition="',aF.x,",",aF.y,'" />');}else{if(aj instanceof T){if(j&&p){var ah=-aK.x;var aC=-aK.y;ai.push("<g_vml_:fill",' position="',ah/j*aB*aB,",",aC/p*aA*aA,'"',' type="tile"',' src="',aj.src_,'" />');}}else{var aL=F(aq.fillStyle);var aw=aL.color;var aG=aL.alpha*aq.globalAlpha;ai.push('<g_vml_:fill color="',aw,'" opacity="',aG,'" />');}}}q.fill=function(){this.stroke(true);};q.closePath=function(){this.currentPath_.push({type:"close"});};function V(j,Z,p){var i=j.m_;return{x:d*(Z*i[0][0]+p*i[1][0]+i[2][0])-f,y:d*(Z*i[0][1]+p*i[1][1]+i[2][1])-f};}q.save=function(){var i={};v(this,i);this.aStack_.push(i);this.mStack_.push(this.m_);this.m_=J(B(),this.m_);};q.restore=function(){if(this.aStack_.length){v(this.aStack_.pop(),this);this.m_=this.mStack_.pop();}};function h(i){return isFinite(i[0][0])&&isFinite(i[0][1])&&isFinite(i[1][0])&&isFinite(i[1][1])&&isFinite(i[2][0])&&isFinite(i[2][1]);}function aa(j,i,p){if(!h(i)){return;}j.m_=i;if(p){var Z=i[0][0]*i[1][1]-i[0][1]*i[1][0];j.lineScale_=N(H(Z));}}q.translate=function(m,j){var i=[[1,0,0],[0,1,0],[m,j,1]];aa(this,J(i,this.m_),false);};q.rotate=function(j){var p=A(j);var m=l(j);var i=[[p,m,0],[-m,p,0],[0,0,1]];aa(this,J(i,this.m_),false);};q.scale=function(m,j){this.arcScaleX_*=m;this.arcScaleY_*=j;var i=[[m,0,0],[0,j,0],[0,0,1]];aa(this,J(i,this.m_),true);};q.transform=function(Z,p,ah,ag,j,i){var m=[[Z,p,0],[ah,ag,0],[j,i,1]];aa(this,J(m,this.m_),true);};q.setTransform=function(ag,Z,ai,ah,p,j){var i=[[ag,Z,0],[ai,ah,0],[p,j,1]];aa(this,i,true);};q.drawText_=function(am,ak,aj,ap,ai){var ao=this.m_,at=1000,j=0,ar=at,ah={x:0,y:0},ag=[];var i=u(E(this.font),this.element_);var p=ac(i);var au=this.element_.currentStyle;var Z=this.textAlign.toLowerCase();switch(Z){case"left":case"center":case"right":break;case"end":Z=au.direction=="ltr"?"right":"left";break;case"start":Z=au.direction=="rtl"?"right":"left";break;default:Z="left";}switch(this.textBaseline){case"hanging":case"top":ah.y=i.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":ah.y=-i.size/2.25;break;}switch(Z){case"right":j=at;ar=0.05;break;case"center":j=ar=at/2;break;}var aq=V(this,ak+ah.x,aj+ah.y);ag.push('<g_vml_:line from="',-j,' 0" to="',ar,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!ai,'" stroked="',!!ai,'" style="position:absolute;width:1px;height:1px;">');if(ai){w(this,ag);}else{G(this,ag,{x:-j,y:0},{x:ar,y:i.size});}var an=ao[0][0].toFixed(3)+","+ao[1][0].toFixed(3)+","+ao[0][1].toFixed(3)+","+ao[1][1].toFixed(3)+",0,0";var al=n(aq.x/d)+","+n(aq.y/d);ag.push('<g_vml_:skew on="t" matrix="',an,'" ',' offset="',al,'" origin="',j,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',af(am),'" style="v-text-align:',Z,";font:",af(p),'" /></g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",ag.join(""));};q.fillText=function(m,i,p,j){this.drawText_(m,i,p,j,false);};q.strokeText=function(m,i,p,j){this.drawText_(m,i,p,j,true);};q.measureText=function(m){if(!this.textMeasureEl_){var i='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",i);this.textMeasureEl_=this.element_.lastChild;}var j=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(j.createTextNode(m));return{width:this.textMeasureEl_.offsetWidth};};q.clip=function(){};q.arcTo=function(){};q.createPattern=function(j,i){return new T(j,i);};function U(i){this.type_=i;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[];}U.prototype.addColorStop=function(j,i){i=F(i);this.colors_.push({offset:j,color:i.color,alpha:i.alpha});};function T(j,i){Q(j);switch(i){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=i;break;default:O("SYNTAX_ERR");}this.src_=j.src;this.width_=j.width;this.height_=j.height;}function O(i){throw new P(i);}function Q(i){if(!i||i.nodeType!=1||i.tagName!="IMG"){O("TYPE_MISMATCH_ERR");}if(i.readyState!="complete"){O("INVALID_STATE_ERR");}}function P(i){this.code=this[i];this.message=i+": DOM Exception "+this.code;}var X=P.prototype=new Error;X.INDEX_SIZE_ERR=1;X.DOMSTRING_SIZE_ERR=2;X.HIERARCHY_REQUEST_ERR=3;X.WRONG_DOCUMENT_ERR=4;X.INVALID_CHARACTER_ERR=5;X.NO_DATA_ALLOWED_ERR=6;X.NO_MODIFICATION_ALLOWED_ERR=7;X.NOT_FOUND_ERR=8;X.NOT_SUPPORTED_ERR=9;X.INUSE_ATTRIBUTE_ERR=10;X.INVALID_STATE_ERR=11;X.SYNTAX_ERR=12;X.INVALID_MODIFICATION_ERR=13;X.NAMESPACE_ERR=14;X.INVALID_ACCESS_ERR=15;X.VALIDATION_ERR=16;X.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=e;CanvasRenderingContext2D=D;CanvasGradient=U;CanvasPattern=T;DOMException=P;})();}
/*** jquery.clndr.js ***/
/*! clndr.min.js v1.1.3 2014-01-17 */
;!function(a,b,c,d){function e(b,c){if(this.element=b,this.options=a.extend(!0,{},h,c),this.options.events.length&&(this.options.events=this.options.multiDayEvents?this.addMultiDayMomentObjectsToEvents(this.options.events):this.addMomentObjectToEvents(this.options.events)),this.month=this.options.startWithMonth?moment(this.options.startWithMonth).startOf("month"):moment().startOf("month"),this.options.constraints){if(this.options.constraints.startDate){var d=moment(this.options.constraints.startDate);this.month.isBefore(d,"month")&&(this.month.set("month",d.month()),this.month.set("year",d.year()));}if(this.options.constraints.endDate){var e=moment(this.options.constraints.endDate);this.month.isAfter(e,"month")&&this.month.set("month",e.month()).set("year",e.year());}}this._defaults=h,this._name=g,this.init();}var f="<div class='clndr-controls'><div class='clndr-control-button'><span class='clndr-previous-button'>previous</span></div><div class='month'><%= month %> <%= year %></div><div class='clndr-control-button rightalign'><span class='clndr-next-button'>next</span></div></div><table class='clndr-table' border='0' cellspacing='0' cellpadding='0'><thead><tr class='header-days'><% for(var i = 0; i < daysOfTheWeek.length; i++) { %><td class='header-day'><%= daysOfTheWeek[i] %></td><% } %></tr></thead><tbody><% for(var i = 0; i < numberOfRows; i++){ %><tr><% for(var j = 0; j < 7; j++){ %><% var d = j + i * 7; %><td class='<%= days[d].classes %>'><div class='day-contents'><%= days[d].day %></div></td><% } %></tr><% } %></tbody></table>",g="clndr",h={template:f,weekOffset:0,startWithMonth:null,clickEvents:{click:null,nextMonth:null,previousMonth:null,nextYear:null,previousYear:null,today:null,onMonthChange:null,onYearChange:null},targets:{nextButton:"clndr-next-button",previousButton:"clndr-previous-button",nextYearButton:"clndr-next-year-button",previousYearButton:"clndr-previous-year-button",todayButton:"clndr-today-button",day:"day",empty:"empty"},events:[],extras:null,dateParameter:"date",multiDayEvents:null,doneRendering:null,render:null,daysOfTheWeek:null,showAdjacentMonths:!0,adjacentDaysChangeMonth:!1,ready:null,constraints:null,forceSixRows:null};e.prototype.init=function(){if(this.daysOfTheWeek=this.options.daysOfTheWeek||[],!this.options.daysOfTheWeek){this.daysOfTheWeek=[];for(var b=0;7>b;b++){this.daysOfTheWeek.push(moment().weekday(b).format("dd").charAt(0));}}if(this.options.weekOffset&&(this.daysOfTheWeek=this.shiftWeekdayLabels(this.options.weekOffset)),!a.isFunction(this.options.render)){if(this.options.render=null,"undefined"==typeof _){throw new Error("Underscore was not found. Please include underscore.js OR provide a custom render function.");}this.compiledClndrTemplate=_.template(this.options.template);}a(this.element).html("<div class='clndr'></div>"),this.calendarContainer=a(".clndr",this.element),this.bindEvents(),this.render(),this.options.ready&&this.options.ready.apply(this,[]);},e.prototype.shiftWeekdayLabels=function(a){for(var b=this.daysOfTheWeek,c=0;a>c;c++){b.push(b.shift());}return b;},e.prototype.createDaysObject=function(b){daysArray=[];var c=b.startOf("month");if(this.eventsLastMonth=[],this.eventsThisMonth=[],this.eventsNextMonth=[],this.options.events.length){if(this.options.multiDayEvents){if(this.eventsThisMonth=a(this.options.events).filter(function(){return this._clndrStartDateObject.format("YYYY-MM")<=b.format("YYYY-MM")||b.format("YYYY-MM")<=this._clndrEndDateObject.format("YYYY-MM");}).toArray(),this.options.showAdjacentMonths){var d=b.clone().subtract("months",1),e=b.clone().add("months",1);this.eventsLastMonth=a(this.options.events).filter(function(){return this._clndrStartDateObject.format("YYYY-MM")<=d.format("YYYY-MM")||d.format("YYYY-MM")<=this._clndrEndDateObject.format("YYYY-MM");}).toArray(),this.eventsNextMonth=a(this.options.events).filter(function(){return this._clndrStartDateObject.format("YYYY-MM")<=e.format("YYYY-MM")||e.format("YYYY-MM")<=this._clndrEndDateObject.format("YYYY-MM");}).toArray();}}else{if(this.eventsThisMonth=a(this.options.events).filter(function(){return this._clndrDateObject.format("YYYY-MM")==b.format("YYYY-MM");}).toArray(),this.options.showAdjacentMonths){var d=b.clone().subtract("months",1),e=b.clone().add("months",1);this.eventsLastMonth=a(this.options.events).filter(function(){return this._clndrDateObject.format("YYYY-MM")==d.format("YYYY-MM");}).toArray(),this.eventsNextMonth=a(this.options.events).filter(function(){return this._clndrDateObject.format("YYYY-MM")==e.format("YYYY-MM");}).toArray();}}}var f=c.weekday()-this.options.weekOffset;if(0>f&&(f+=7),this.options.showAdjacentMonths){for(var g=0;f>g;g++){var h=moment([b.year(),b.month(),g-f+1]);daysArray.push(this.createDayObject(h,this.eventsLastMonth));}}else{for(var g=0;f>g;g++){daysArray.push(this.calendarDay({classes:this.options.targets.empty+" last-month"}));}}for(var i=c.daysInMonth(),g=1;i>=g;g++){var h=moment([b.year(),b.month(),g]);daysArray.push(this.createDayObject(h,this.eventsThisMonth));}for(var g=1;daysArray.length%7!==0;){if(this.options.showAdjacentMonths){var h=moment([b.year(),b.month(),i+g]);daysArray.push(this.createDayObject(h,this.eventsNextMonth));}else{daysArray.push(this.calendarDay({classes:this.options.targets.empty+" next-month"}));}g++;}if(this.options.forceSixRows&&42!==daysArray.length){for(var j=moment(daysArray[daysArray.length-1].date).add("days",1);daysArray.length<42;){this.options.showAdjacentMonths?(daysArray.push(this.createDayObject(moment(j),this.eventsNextMonth)),j.add("days",1)):daysArray.push(this.calendarDay({classes:this.options.targets.empty+" next-month"}));}}return daysArray;},e.prototype.createDayObject=function(a,b){var c=[],e=moment(),f=this,g=0,h=b.length;for(g;h>g;g++){if(f.options.multiDayEvents){var i=b[g]._clndrStartDateObject,j=b[g]._clndrEndDateObject;(a.isSame(i,"day")||a.isAfter(i,"day"))&&(a.isSame(j,"day")||a.isBefore(j,"day"))&&c.push(b[g]);}else{b[g]._clndrDateObject.date()==a.date()&&c.push(b[g]);}}var k="";return e.format("YYYY-MM-DD")==a.format("YYYY-MM-DD")&&(k+=" today"),a.isBefore(e,"day")&&(k+=" past"),c.length&&(k+=" event"),this.month.month()>a.month()?(k+=" adjacent-month",k+=this.month.year()===a.year()?" last-month":" next-month"):this.month.month()<a.month()&&(k+=" adjacent-month",k+=this.month.year()===a.year()?" next-month":" last-month"),this.options.constraints&&(this.options.constraints.startDate&&a.isBefore(moment(this.options.constraints.startDate))&&(k+=" inactive"),this.options.constraints.endDate&&a.isAfter(moment(this.options.constraints.endDate))&&(k+=" inactive")),!a.isValid()&&a.hasOwnProperty("_d")&&a._d!=d&&(a=moment(a._d)),k+=" calendar-day-"+a.format("YYYY-MM-DD"),this.calendarDay({day:a.date(),classes:this.options.targets.day+k,events:c,date:a});},e.prototype.render=function(){this.calendarContainer.children().remove();var a=this.createDaysObject(this.month),b=(this.month,{daysOfTheWeek:this.daysOfTheWeek,numberOfRows:Math.ceil(a.length/7),days:a,month:this.month.format("MMMM"),year:this.month.year(),eventsThisMonth:this.eventsThisMonth,eventsLastMonth:this.eventsLastMonth,eventsNextMonth:this.eventsNextMonth,extras:this.options.extras});if(this.options.render?this.calendarContainer.html(this.options.render.apply(this,[b])):this.calendarContainer.html(this.compiledClndrTemplate(b)),this.options.constraints){for(target in this.options.targets){target!=this.options.targets.day&&this.element.find("."+this.options.targets[target]).toggleClass("inactive",!1);}var c=null,d=null;this.options.constraints.startDate&&(c=moment(this.options.constraints.startDate)),this.options.constraints.endDate&&(d=moment(this.options.constraints.endDate)),c&&this.month.isSame(c,"month")&&this.element.find("."+this.options.targets.previousButton).toggleClass("inactive",!0),d&&this.month.isSame(d,"month")&&this.element.find("."+this.options.targets.nextButton).toggleClass("inactive",!0),c&&moment(c).subtract("years",1).isBefore(moment(this.month).subtract("years",1))&&this.element.find("."+this.options.targets.previousYearButton).toggleClass("inactive",!0),d&&moment(d).add("years",1).isAfter(moment(this.month).add("years",1))&&this.element.find("."+this.options.targets.nextYearButton).toggleClass("inactive",!0),(c&&c.isAfter(moment(),"month")||d&&d.isBefore(moment(),"month"))&&this.element.find("."+this.options.targets.today).toggleClass("inactive",!0);}this.options.doneRendering&&this.options.doneRendering.apply(this,[]);},e.prototype.bindEvents=function(){var b=a(this.element),c=this;b.on("click","."+this.options.targets.day,function(b){if(c.options.clickEvents.click){var d=c.buildTargetObject(b.currentTarget,!0);c.options.clickEvents.click.apply(c,[d]);}c.options.adjacentDaysChangeMonth&&(a(b.currentTarget).is(".last-month")?c.backActionWithContext(c):a(b.currentTarget).is(".next-month")&&c.forwardActionWithContext(c));}),b.on("click","."+this.options.targets.empty,function(b){if(c.options.clickEvents.click){var d=c.buildTargetObject(b.currentTarget,!1);c.options.clickEvents.click.apply(c,[d]);}c.options.adjacentDaysChangeMonth&&(a(b.currentTarget).is(".last-month")?c.backActionWithContext(c):a(b.currentTarget).is(".next-month")&&c.forwardActionWithContext(c));}),b.on("click","."+this.options.targets.previousButton,{context:this},this.backAction).on("click","."+this.options.targets.nextButton,{context:this},this.forwardAction).on("click","."+this.options.targets.todayButton,{context:this},this.todayAction).on("click","."+this.options.targets.nextYearButton,{context:this},this.nextYearAction).on("click","."+this.options.targets.previousYearButton,{context:this},this.previousYearAction);},e.prototype.buildTargetObject=function(b,c){var d={element:b,events:[],date:null};if(c){var e,f=b.className.indexOf("calendar-day-");0!==f?(e=b.className.substring(f+13,f+23),d.date=moment(e)):d.date=null,this.options.events&&(d.events=this.options.multiDayEvents?a.makeArray(a(this.options.events).filter(function(){return(d.date.isSame(this._clndrStartDateObject,"day")||d.date.isAfter(this._clndrStartDateObject,"day"))&&(d.date.isSame(this._clndrEndDateObject,"day")||d.date.isBefore(this._clndrEndDateObject,"day"));})):a.makeArray(a(this.options.events).filter(function(){return this._clndrDateObject.format("YYYY-MM-DD")==e;})));}return d;},e.prototype.forwardAction=function(a){var b=a.data.context;b.forwardActionWithContext(b);},e.prototype.backAction=function(a){var b=a.data.context;b.backActionWithContext(b);},e.prototype.backActionWithContext=function(a){if(!a.element.find("."+a.options.targets.previousButton).hasClass("inactive")){var b=!a.month.isSame(moment(a.month).subtract("months",1),"year");a.month.subtract("months",1),a.render(),a.options.clickEvents.previousMonth&&a.options.clickEvents.previousMonth.apply(a,[moment(a.month)]),a.options.clickEvents.onMonthChange&&a.options.clickEvents.onMonthChange.apply(a,[moment(a.month)]),b&&a.options.clickEvents.onYearChange&&a.options.clickEvents.onYearChange.apply(a,[moment(a.month)]);}},e.prototype.forwardActionWithContext=function(a){if(!a.element.find("."+a.options.targets.nextButton).hasClass("inactive")){var b=!a.month.isSame(moment(a.month).add("months",1),"year");a.month.add("months",1),a.render(),a.options.clickEvents.nextMonth&&a.options.clickEvents.nextMonth.apply(a,[moment(a.month)]),a.options.clickEvents.onMonthChange&&a.options.clickEvents.onMonthChange.apply(a,[moment(a.month)]),b&&a.options.clickEvents.onYearChange&&a.options.clickEvents.onYearChange.apply(a,[moment(a.month)]);}},e.prototype.todayAction=function(a){var b=a.data.context,c=!b.month.isSame(moment(),"month"),d=!b.month.isSame(moment(),"year");b.month=moment().startOf("month"),b.options.clickEvents.today&&b.options.clickEvents.today.apply(b,[moment(b.month)]),c&&(b.render(),b.month=moment(),b.options.clickEvents.onMonthChange&&b.options.clickEvents.onMonthChange.apply(b,[moment(b.month)]),d&&b.options.clickEvents.onYearChange&&b.options.clickEvents.onYearChange.apply(b,[moment(b.month)]));},e.prototype.nextYearAction=function(a){var b=a.data.context;b.element.find("."+b.options.targets.nextYearButton).hasClass("inactive")||(b.month.add("years",1),b.render(),b.options.clickEvents.nextYear&&b.options.clickEvents.nextYear.apply(b,[moment(b.month)]),b.options.clickEvents.onMonthChange&&b.options.clickEvents.onMonthChange.apply(b,[moment(b.month)]),b.options.clickEvents.onYearChange&&b.options.clickEvents.onYearChange.apply(b,[moment(b.month)]));},e.prototype.previousYearAction=function(a){var b=a.data.context;b.element.find("."+b.options.targets.previousYear).hasClass("inactive")||(b.month.subtract("years",1),b.render(),b.options.clickEvents.previousYear&&b.options.clickEvents.previousYear.apply(b,[moment(b.month)]),b.options.clickEvents.onMonthChange&&b.options.clickEvents.onMonthChange.apply(b,[moment(b.month)]),b.options.clickEvents.onYearChange&&b.options.clickEvents.onYearChange.apply(b,[moment(b.month)]));},e.prototype.forward=function(a){return this.month.add("months",1),this.render(),a&&a.withCallbacks&&(this.options.clickEvents.onMonthChange&&this.options.clickEvents.onMonthChange.apply(this,[moment(this.month)]),0===this.month.month()&&this.options.clickEvents.onYearChange&&this.options.clickEvents.onYearChange.apply(this,[moment(this.month)])),this;},e.prototype.back=function(a){return this.month.subtract("months",1),this.render(),a&&a.withCallbacks&&(this.options.clickEvents.onMonthChange&&this.options.clickEvents.onMonthChange.apply(this,[moment(this.month)]),11===this.month.month()&&this.options.clickEvents.onYearChange&&this.options.clickEvents.onYearChange.apply(this,[moment(this.month)])),this;},e.prototype.next=function(a){return this.forward(a),this;},e.prototype.previous=function(a){return this.back(a),this;},e.prototype.setMonth=function(a,b){return this.month.month(a),this.render(),b&&b.withCallbacks&&this.options.clickEvents.onMonthChange&&this.options.clickEvents.onMonthChange.apply(this,[moment(this.month)]),this;},e.prototype.nextYear=function(a){return this.month.add("year",1),this.render(),a&&a.withCallbacks&&this.options.clickEvents.onYearChange&&this.options.clickEvents.onYearChange.apply(this,[moment(this.month)]),this;},e.prototype.previousYear=function(a){return this.month.subtract("year",1),this.render(),a&&a.withCallbacks&&this.options.clickEvents.onYearChange&&this.options.clickEvents.onYearChange.apply(this,[moment(this.month)]),this;},e.prototype.setYear=function(a,b){return this.month.year(a),this.render(),b&&b.withCallbacks&&this.options.clickEvents.onYearChange&&this.options.clickEvents.onYearChange.apply(this,[moment(this.month)]),this;},e.prototype.setEvents=function(a){return this.options.events=this.options.multiDayEvents?this.addMultiDayMomentObjectsToEvents(a):this.addMomentObjectToEvents(a),this.render(),this;},e.prototype.addEvents=function(b){return this.options.events=this.options.multiDayEvents?a.merge(this.options.events,this.addMultiDayMomentObjectsToEvents(b)):a.merge(this.options.events,this.addMomentObjectToEvents(b)),this.render(),this;},e.prototype.addMomentObjectToEvents=function(a){var b=this,c=0,d=a.length;for(c;d>c;c++){a[c]._clndrDateObject=moment(a[c][b.options.dateParameter]);}return a;},e.prototype.addMultiDayMomentObjectsToEvents=function(a){var b=this,c=0,d=a.length;for(c;d>c;c++){a[c]._clndrStartDateObject=moment(a[c][b.options.multiDayEvents.startDate]),a[c]._clndrEndDateObject=moment(a[c][b.options.multiDayEvents.endDate]);}return a;},e.prototype.calendarDay=function(b){var c={day:"",classes:this.options.targets.empty,events:[],date:null};return a.extend({},c,b);},a.fn.clndr=function(a){if(1===this.length){if(!this.data("plugin_clndr")){var b=new e(this,a);return this.data("plugin_clndr",b),b;}}else{if(this.length>1){throw new Error("CLNDR does not support multiple elements yet. Make sure your clndr selector returns only one element.");}}};}(jQuery,window,document);
/*** jquery.dotdotdot.js ***/
(function($,undef){if($.fn.dotdotdot){return;}$.fn.dotdotdot=function(o){if(this.length==0){$.fn.dotdotdot.debug('No element found for "'+this.selector+'".');return this;}if(this.length>1){return this.each(function(){$(this).dotdotdot(o);});}var $dot=this;if($dot.data("dotdotdot")){$dot.trigger("destroy.dot");}$dot.data("dotdotdot-style",$dot.attr("style")||"");$dot.css("word-wrap","break-word");if($dot.css("white-space")==="nowrap"){$dot.css("white-space","normal");}$dot.bind_events=function(){$dot.bind("update.dot",function(e,c){e.preventDefault();e.stopPropagation();opts.maxHeight=(typeof opts.height=="number")?opts.height:getTrueInnerHeight($dot);opts.maxHeight+=opts.tolerance;if(typeof c!="undefined"){if(typeof c=="string"||("nodeType" in c&&c.nodeType===1)){c=$("<div />").append(c).contents();}if(c instanceof $){orgContent=c;}}$inr=$dot.wrapInner('<div class="dotdotdot" />').children();$inr.contents().detach().end().append(orgContent.clone(true)).find("br").replaceWith(" <br /> ").end().css({"height":"auto","width":"auto","border":"none","padding":0,"margin":0});var after=false,trunc=false;if(conf.afterElement){after=conf.afterElement.clone(true);after.show();conf.afterElement.detach();}if(test($inr,opts)){if(opts.wrap=="children"){trunc=children($inr,opts,after);}else{trunc=ellipsis($inr,$dot,$inr,opts,after);}}$inr.replaceWith($inr.contents());$inr=null;if($.isFunction(opts.callback)){opts.callback.call($dot[0],trunc,orgContent);}conf.isTruncated=trunc;return trunc;}).bind("isTruncated.dot",function(e,fn){e.preventDefault();e.stopPropagation();if(typeof fn=="function"){fn.call($dot[0],conf.isTruncated);}return conf.isTruncated;}).bind("originalContent.dot",function(e,fn){e.preventDefault();e.stopPropagation();if(typeof fn=="function"){fn.call($dot[0],orgContent);}return orgContent;}).bind("destroy.dot",function(e){e.preventDefault();e.stopPropagation();$dot.unwatch().unbind_events().contents().detach().end().append(orgContent).attr("style",$dot.data("dotdotdot-style")||"").data("dotdotdot",false);});return $dot;};$dot.unbind_events=function(){$dot.unbind(".dot");return $dot;};$dot.watch=function(){$dot.unwatch();if(opts.watch=="window"){var $window=$(window),_wWidth=$window.width(),_wHeight=$window.height();$window.bind("resize.dot"+conf.dotId,function(){if(_wWidth!=$window.width()||_wHeight!=$window.height()||!opts.windowResizeFix){_wWidth=$window.width();_wHeight=$window.height();if(watchInt){clearInterval(watchInt);}watchInt=setTimeout(function(){$dot.trigger("update.dot");},100);}});}else{watchOrg=getSizes($dot);watchInt=setInterval(function(){if($dot.is(":visible")){var watchNew=getSizes($dot);if(watchOrg.width!=watchNew.width||watchOrg.height!=watchNew.height){$dot.trigger("update.dot");watchOrg=watchNew;}}},500);}return $dot;};$dot.unwatch=function(){$(window).unbind("resize.dot"+conf.dotId);if(watchInt){clearInterval(watchInt);}return $dot;};var orgContent=$dot.contents(),opts=$.extend(true,{},$.fn.dotdotdot.defaults,o),conf={},watchOrg={},watchInt=null,$inr=null;if(!(opts.lastCharacter.remove instanceof Array)){opts.lastCharacter.remove=$.fn.dotdotdot.defaultArrays.lastCharacter.remove;}if(!(opts.lastCharacter.noEllipsis instanceof Array)){opts.lastCharacter.noEllipsis=$.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis;}conf.afterElement=getElement(opts.after,$dot);conf.isTruncated=false;conf.dotId=dotId++;$dot.data("dotdotdot",true).bind_events().trigger("update.dot");if(opts.watch){$dot.watch();}return $dot;};$.fn.dotdotdot.defaults={"ellipsis":"... ","wrap":"word","fallbackToLetter":true,"lastCharacter":{},"tolerance":0,"callback":null,"after":null,"height":null,"watch":false,"windowResizeFix":true};$.fn.dotdotdot.defaultArrays={"lastCharacter":{"remove":[" ","\u3000",",",";",".","!","?"],"noEllipsis":[]}};$.fn.dotdotdot.debug=function(msg){};var dotId=1;function children($elem,o,after){var $elements=$elem.children(),isTruncated=false;$elem.empty();for(var a=0,l=$elements.length;a<l;a++){var $e=$elements.eq(a);$elem.append($e);if(after){$elem.append(after);}if(test($elem,o)){$e.remove();isTruncated=true;break;}else{if(after){after.detach();}}}return isTruncated;}function ellipsis($elem,$d,$i,o,after){var isTruncated=false;var notx="a table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style";var noty="script, .dotdotdot-keep";$elem.contents().detach().each(function(){var e=this,$e=$(e);if(typeof e=="undefined"||(e.nodeType==3&&$.trim(e.data).length==0)){return true;}else{if($e.is(noty)){$elem.append($e);}else{if(isTruncated){return true;}else{$elem.append($e);if(after&&!$e.is(o.after)&&!$e.find(o.after).length){$elem[$elem.is(notx)?"after":"append"](after);}if(test($i,o)){if(e.nodeType==3){isTruncated=ellipsisElement($e,$d,$i,o,after);}else{isTruncated=ellipsis($e,$d,$i,o,after);}if(!isTruncated){$e.detach();isTruncated=true;}}if(!isTruncated){if(after){after.detach();}}}}}});return isTruncated;}function ellipsisElement($e,$d,$i,o,after){var e=$e[0];if(!e){return false;}var txt=getTextContent(e),space=(txt.indexOf(" ")!==-1)?" ":"\u3000",separator=(o.wrap=="letter")?"":space,textArr=txt.split(separator),position=-1,midPos=-1,startPos=0,endPos=textArr.length-1;if(o.fallbackToLetter&&startPos==0&&endPos==0){separator="";textArr=txt.split(separator);endPos=textArr.length-1;}while(startPos<=endPos&&!(startPos==0&&endPos==0)){var m=Math.floor((startPos+endPos)/2);if(m==midPos){break;}midPos=m;setTextContent(e,textArr.slice(0,midPos+1).join(separator)+o.ellipsis);if(!test($i,o)){position=midPos;startPos=midPos;}else{endPos=midPos;if(o.fallbackToLetter&&startPos==0&&endPos==0){separator="";textArr=textArr[0].split(separator);position=-1;midPos=-1;startPos=0;endPos=textArr.length-1;}}}if(position!=-1&&!(textArr.length==1&&textArr[0].length==0)){txt=addEllipsis(textArr.slice(0,position+1).join(separator),o);setTextContent(e,txt);}else{var $w=$e.parent();$e.detach();var afterLength=(after&&after.closest($w).length)?after.length:0;if($w.contents().length>afterLength){e=findLastTextNode($w.contents().eq(-1-afterLength),$d);}else{e=findLastTextNode($w,$d,true);if(!afterLength){$w.detach();}}if(e){txt=addEllipsis(getTextContent(e),o);setTextContent(e,txt);if(afterLength&&after){$(e).parent().append(after);}}}return true;}function test($i,o){return $i.innerHeight()>o.maxHeight;}function addEllipsis(txt,o){while($.inArray(txt.slice(-1),o.lastCharacter.remove)>-1){txt=txt.slice(0,-1);}if($.inArray(txt.slice(-1),o.lastCharacter.noEllipsis)<0){txt+=o.ellipsis;}return txt;}function getSizes($d){return{"width":$d.innerWidth(),"height":$d.innerHeight()};}function setTextContent(e,content){if(e.innerText){e.innerText=content;}else{if(e.nodeValue){e.nodeValue=content;}else{if(e.textContent){e.textContent=content;}}}}function getTextContent(e){if(e.innerText){return e.innerText;}else{if(e.nodeValue){return e.nodeValue;}else{if(e.textContent){return e.textContent;}else{return"";}}}}function getPrevNode(n){do{n=n.previousSibling;}while(n&&n.nodeType!==1&&n.nodeType!==3);return n;}function findLastTextNode($el,$top,excludeCurrent){var e=$el&&$el[0],p;if(e){if(!excludeCurrent){if(e.nodeType===3){return e;}if($.trim($el.text())){return findLastTextNode($el.contents().last(),$top);}}p=getPrevNode(e);while(!p){$el=$el.parent();if($el.is($top)||!$el.length){return false;}p=getPrevNode($el[0]);}if(p){return findLastTextNode($(p),$top);}}return false;}function getElement(e,$i){if(!e){return false;}if(typeof e==="string"){e=$(e,$i);return(e.length)?e:false;}return !e.jquery?false:e;}function getTrueInnerHeight($el){var h=$el.innerHeight(),a=["paddingTop","paddingBottom"];for(var z=0,l=a.length;z<l;z++){var m=parseInt($el.css(a[z]),10);if(isNaN(m)){m=0;}h-=m;}return h;}var _orgHtml=$.fn.html;$.fn.html=function(str){if(str!=undef&&!$.isFunction(str)&&this.data("dotdotdot")){return this.trigger("update",[str]);}return _orgHtml.apply(this,arguments);};var _orgText=$.fn.text;$.fn.text=function(str){if(str!=undef&&!$.isFunction(str)&&this.data("dotdotdot")){str=$("<div />").text(str).html();return this.trigger("update",[str]);}return _orgText.apply(this,arguments);};})(jQuery);
/*** jquery.iosslider-vertical.min.js ***/
/*
* iosSlider - http://iosscripts.com/iosslider-vertical/
*
* Touch Enabled, Responsive jQuery Vertical Content Slider Plugin
*
* iosSlider Vertical is a jQuery plugin which allows you to integrate a customizable,
* cross-browser content slider into your web presence. Designed for containing long,
* scrolling vertical content.
*
* Copyright (c) 2013 Marc Whitbread
*
* Version: v1.0.5 (08/12/2013)
* Minimum requirements: jQuery v1.4+
*
* Advanced requirements:
* 1) jQuery bind() click event override on slide requires jQuery v1.6+
*
* Terms of use:
*
* 1) iosSlider is licensed under the Creative Commons – Attribution-NonCommercial 3.0 License.
* 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
* Attribution is not required but always appreciated. For commercial projects, you
* must purchase a license. You may download and play with the script before deciding to
* fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
* is the right script for your project is paramount.
* 3) You are not permitted to make the resources found on iosscripts.com available for
* distribution elsewhere "as is" without prior consent. If you would like to feature
* iosSlider on your site, please do not link directly to the resource zip files. Please
* link to the appropriate page on iosscripts.com where users can find the download.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
* EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
* COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
* EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
* GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
* AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
* OF THE POSSIBILITY OF SUCH DAMAGE.
*/

(function(b){var oa=0,P=0,ba=0,U=0,Ha="ontouchstart"in window,Ia="onorientationchange"in window,fa=!1,da=!1,$=!1,pa=!1,ia="pointer",va="pointer",ja=[],O=[],wa=[],V=[],y=[],ca=[],z=[],h=[],u=[],xa=[],ga=[],e={showScrollbar:function(a,f){a.scrollbarHide&&b("."+f).css({opacity:a.scrollbarOpacity,filter:"alpha(opacity:"+100*a.scrollbarOpacity+")"})},hideScrollbar:function(b,f,c,n,h,d,s,u,z,y){if(b.scrollbar&&b.scrollbarHide)for(var v=c;v<c+25;v++)f[f.length]=e.hideScrollbarIntervalTimer(10*v,n[c],(c+ 24-v)/24,h,d,s,u,z,y,b)},hideScrollbarInterval:function(a,f,c,n,h,d,s,z,y){U=-1*a/u[z]*(h-d-s-n);e.setSliderOffset("."+c,U);b("."+c).css({opacity:y.scrollbarOpacity*f,filter:"alpha(opacity:"+100*y.scrollbarOpacity*f+")"})},slowScrollHorizontalInterval:function(a,f,c,n,T,d,s,S,I,K,v,w,x,r,C,g,G,k,q){if(q.infiniteSlider){if(c<=-1*u[g]){var m=b(a).height();if(c<=-1*xa[g]){var A=-1*v[0];b(f).each(function(c){e.setSliderOffset(b(f)[c],A+G);c<w.length&&(w[c]=-1*A);A+=C[c]});c+=-1*w[0];h[g]=-1*w[0]+G;u[g]= h[g]+m-d;z[g]=0}else{var l=0,t=e.getSliderOffset(b(f[0]),"y");b(f).each(function(c){e.getSliderOffset(this,"y")<t&&(t=e.getSliderOffset(this,"y"),l=c)});x=h[g]+m;e.setSliderOffset(b(f)[l],x);h[g]=-1*w[1]+G;u[g]=h[g]+m-d;w.splice(0,1);w.splice(w.length,0,-1*x+G);z[g]++}}if(c>=-1*h[g]||0<=c){m=b(a).height();if(0<=c)for(A=-1*v[0],b(f).each(function(c){e.setSliderOffset(b(f)[c],A+G);c<w.length&&(w[c]=-1*A);A+=C[c]}),c-=-1*w[0],h[g]=-1*w[0]+G,u[g]=h[g]+m-d,z[g]=r;0<-1*w[0]-m+G;){var D=0,F=e.getSliderOffset(b(f[0]), "y");b(f).each(function(c){e.getSliderOffset(this,"y")>F&&(F=e.getSliderOffset(this,"y"),D=c)});x=h[g]-C[D];e.setSliderOffset(b(f)[D],x);w.splice(0,0,-1*x+G);w.splice(w.length-1,1);h[g]=-1*w[0]+G;u[g]=h[g]+m-d;z[g]--;y[g]++}0>c&&(D=0,F=e.getSliderOffset(b(f[0]),"y"),b(f).each(function(c){e.getSliderOffset(this,"y")>F&&(F=e.getSliderOffset(this,"y"),D=c)}),x=h[g]-C[D],e.setSliderOffset(b(f)[D],x),w.splice(0,0,-1*x+G),w.splice(w.length-1,1),h[g]=-1*w[0]+G,u[g]=h[g]+m-d,z[g]--)}}v=!1;d=e.calcActiveOffset(q, c,w,d,z[g],r,K,g);x=(d+z[g]+r)%r;q.infiniteSlider?x!=ca[g]&&(v=!0):d!=y[g]&&(v=!0);if(v&&(r=new e.args("change",q,a,b(a).children(":eq("+x+")"),x,k),b(a).parent().data("args",r),""!=q.onSlideChange))q.onSlideChange(r);y[g]=d;ca[g]=x;c=Math.floor(c);e.setSliderOffset(a,c);q.scrollbar&&(U=Math.floor((-1*c-h[g]+G)/(u[g]-h[g]+G)*(s-S-T)),a=T-I,c>=-1*h[g]+G?(a=T-I- -1*U,e.setSliderOffset(b("."+n),0)):(c<=-1*u[g]+1&&(a=s-S-I-U),e.setSliderOffset(b("."+n),U)),b("."+n).css({height:a+"px"}))},slowScrollHorizontal:function(a, f,c,n,T,d,s,S,I,K,v,w,x,r,C,g,G,k,q,m,A,l){var t=e.getSliderOffset(a,"y");s=[];var D=0,F=25/1024*I;frictionCoefficient=l.frictionCoefficient;elasticFrictionCoefficient=l.elasticFrictionCoefficient;snapFrictionCoefficient=l.snapFrictionCoefficient;(d>l.snapVelocityThreshold||0<d&&c)&&l.snapToChildren&&!m?D=1:(d<-1*l.snapVelocityThreshold||0>d&&c)&&(l.snapToChildren&&!m)&&(D=-1);d<-1*F?d=-1*F:d>F&&(d=F);b(a)[0]!==b(q)[0]&&(D*=-1,d*=-2);q=z[g];if(l.infiniteSlider)var p=h[g],L=u[g];m=[];for(var F=[], H=0;H<r.length;H++)m[H]=r[H],H<f.length&&(F[H]=e.getSliderOffset(b(f[H]),"y"));for(;1<d||-1>d;){d*=frictionCoefficient;t+=d;(t>-1*h[g]||t<-1*u[g])&&!l.infiniteSlider&&(d*=elasticFrictionCoefficient,t+=d);if(l.infiniteSlider){if(t<=-1*L){for(var L=b(a).height(),N=0,P=F[0],H=0;H<F.length;H++)F[H]<P&&(P=F[H],N=H);H=p+L;F[N]=H;p=-1*m[1]+A;L=p+L-I;m.splice(0,1);m.splice(m.length,0,-1*H+A);q++}if(t>=-1*p){L=b(a).height();N=0;P=F[0];for(H=0;H<F.length;H++)F[H]>P&&(P=F[H],N=H);H=p-C[N];F[N]=H;m.splice(0, 0,-1*H+A);m.splice(m.length-1,1);p=-1*m[0]+A;L=p+L-I;q--}}s[s.length]=t}F=!1;d=e.calcActiveOffset(l,t,m,I,q,k,y[g],g);p=(d+q+k)%k;l.snapToChildren&&(l.infiniteSlider?p!=ca[g]&&(F=!0):d!=y[g]&&(F=!0),0>D&&!F?(d++,d>=r.length&&!l.infinteSlider&&(d=r.length-1)):0<D&&!F&&(d--,0>d&&!l.infinteSlider&&(d=0)));if(l.snapToChildren||(t>-1*h[g]||t<-1*u[g])&&!l.infiniteSlider){(t>-1*h[g]||t<-1*u[g])&&!l.infiniteSlider?s.splice(0,s.length):(s.splice(0.1*s.length,s.length),t=0<s.length?s[s.length-1]:t);for(;t< m[d]-0.5||t>m[d]+0.5;)t=(t-m[d])*snapFrictionCoefficient+m[d],c&&!l.infiniteSlider&&(t=t>-1*h[g]?-1*h[g]:t,t=t<-1*u[g]?-1*u[g]:t),s[s.length]=t;s[s.length]=m[d]}t=1;0!=s.length%2&&(t=0);for(c=0;c<n.length;c++)clearTimeout(n[c]);D=(d+q+k)%k;q=0;for(c=t;c<s.length;c+=2)if(c==t||1<Math.abs(s[c]-q)||c>=s.length-2)q=s[c],n[n.length]=e.slowScrollHorizontalIntervalTimer(10*c,a,f,s[c],T,S,I,K,v,w,d,x,r,G,k,C,g,A,D,l);p=(d+z[g]+k)%k;""!=l.onSlideComplete&&1<s.length&&(n[n.length]=e.onSlideCompleteTimer(10* (c+1),l,a,b(a).children(":eq("+p+")"),D,g));V[g]=n;e.hideScrollbar(l,n,c,s,T,S,I,v,w,g)},onSlideComplete:function(a,f,c,n,h){c=new e.args("complete",a,b(f),c,n,n);b(f).parent().data("args",c);if(""!=a.onSlideComplete)a.onSlideComplete(c)},getSliderOffset:function(a,f){var c=0;f=5;if(!fa||da||$)c=parseInt(b(a).css("top"),10);else{for(var c=["-webkit-transform","-moz-transform","transform"],e=0;e<c.length;e++)if(void 0!=b(a).css(c[e])&&0<b(a).css(c[e]).length){var h=b(a).css(c[e]).split(",");break}c= parseInt(h[f],10)}return c},setSliderOffset:function(a,f){!fa||da||$?b(a).css({top:f+"px"}):b(a).css({webkitTransform:"matrix(1,0,0,1,0,"+f+")",MozTransform:"matrix(1,0,0,1,0,"+f+")",transform:"matrix(1,0,0,1,0,"+f+")"})},setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(ia="-webkit-grab",va="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(ia="move",va="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?pa=da=!0:null!=navigator.userAgent.match("MSIE 8")?pa=$= !0:null!=navigator.userAgent.match("MSIE 9")&&(pa=!0)},has3DTransform:function(){var a=!1,f=b("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)",MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==f.attr("style")?a=!1:void 0!=f.attr("style")&&(a=!0);return a},getSlideNumber:function(b,f,c){return(b-z[f]+c)%c},calcActiveOffset:function(b,f,c,e,h,d,s,u){h=!1;b=[];var y;f>c[0]&&(y=0);f<c[c.length-1]&&(y=d-1);for(d=0;d<c.length;d++)c[d]<=f&&c[d]>f-e&&(h||c[d]==f||(b[b.length]= c[d-1]),b[b.length]=c[d],h=!0);0==b.length&&(b[0]=c[c.length-1]);for(d=h=0;d<b.length;d++)s=Math.abs(f-b[d]),s<e&&(h=b[d],e=s);for(d=0;d<c.length;d++)h==c[d]&&(y=d);return y},changeSlide:function(a,f,c,n,h,d,s,u,I,K,v,w,x,r,C,g,G,k){e.autoSlidePause(r);for(var q=0;q<n.length;q++)clearTimeout(n[q]);var m=Math.ceil(k.autoSlideTransTimer/10)+1,A=e.getSliderOffset(f,"y"),l=w[a],l=l-A,t=a-(y[r]+z[r]+g)%g;if(k.infiniteSlider){a=(a-z[r]+2*g)%g;q=!1;0==a&&2==g&&(a=g,w[a]=w[a-1]-b(c).eq(0).outerHeight(!0), q=!0);var l=w[a],l=l-A,D=[w[a]-b(f).height(),w[a]+b(f).height()];q&&w.splice(w.length-1,1);for(q=0;q<D.length;q++)Math.abs(D[q]-A)<Math.abs(l)&&(l=D[q]-A);0>l&&-1==t?l+=b(f).height():0<l&&1==t&&(l-=b(f).height())}t=[];e.showScrollbar(k,h);for(q=0;q<=m;q++)D=q,D/=m,D--,D=A+l*(Math.pow(D,5)+1),t[t.length]=D;m=(a+z[r]+g)%g;for(q=A=0;q<t.length;q++){if(0==q||1<Math.abs(t[q]-A)||q>=t.length-2)A=t[q],n[q]=e.slowScrollHorizontalIntervalTimer(10*(q+1),f,c,t[q],h,d,s,u,I,K,a,v,w,C,g,x,r,G,m,k);0==q&&""!=k.onSlideStart&& (m=(y[r]+z[r]+g)%g,k.onSlideStart(new e.args("start",k,f,b(f).children(":eq("+m+")"),m,a)))}A=!1;k.infiniteSlider?m!=ca[r]&&(A=!0):a!=y[r]&&(A=!0);A&&""!=k.onSlideComplete&&(n[n.length]=e.onSlideCompleteTimer(10*(q+1),k,f,b(f).children(":eq("+m+")"),m,r));V[r]=n;e.hideScrollbar(k,n,q,t,h,d,s,I,K,r);e.autoSlide(f,c,n,h,d,s,u,I,K,v,w,x,r,C,g,G,k)},changeOffset:function(a,f,c,n,T,d,s,S,I,K,v,w,x,r,C,g,G,k){e.autoSlidePause(r);for(var q=0;q<n.length;q++)clearTimeout(n[q]);k.infiniteSlider||(a=a>-1*h[r]+ G?-1*h[r]+G:a,a=a<-1*u[r]?-1*u[r]:a);var m=Math.ceil(k.autoSlideTransTimer/10)+1,A=e.getSliderOffset(f,"y"),q=(e.calcActiveOffset(k,a,w,s,z,g,y[r],r)+z[r]+g)%g,l=w.slice();if(k.snapToChildren&&!k.infiniteSlider)a=w[q];else if(k.infiniteSlider&&k.snapToChildren){for(;a>=l[0];)l.splice(0,0,l[g-1]+b(f).height()),l.splice(g,1);for(;a<=l[g-1];)l.splice(g,0,l[0]-b(f).height()),l.splice(0,1);q=e.calcActiveOffset(k,a,l,s,z,g,y[r],r);a=l[q]}var t=a-A;a=[];var D;e.showScrollbar(k,T);for(l=0;l<=m;l++)D=l,D/= m,D--,D=A+t*(Math.pow(D,5)+1),a[a.length]=D;m=(q+z[r]+g)%g;for(l=A=0;l<a.length;l++){if(0==l||1<Math.abs(a[l]-A)||l>=a.length-2)A=a[l],n[l]=e.slowScrollHorizontalIntervalTimer(10*(l+1),f,c,a[l],T,d,s,S,I,K,q,v,w,C,g,x,r,G,m,k);0==l&&""!=k.onSlideStart&&(m=(y[r]+z[r]+g)%g,k.onSlideStart(new e.args("start",k,f,b(f).children(":eq("+m+")"),m,q)))}A=!1;k.infiniteSlider?m!=ca[r]&&(A=!0):q!=y[r]&&(A=!0);A&&""!=k.onSlideComplete&&(n[n.length]=e.onSlideCompleteTimer(10*(l+1),k,f,b(f).children(":eq("+m+")"), m,r));V[r]=n;e.hideScrollbar(k,n,l,a,T,d,s,I,K,r);e.autoSlide(f,c,n,T,d,s,S,I,K,v,w,x,r,C,g,G,k)},autoSlide:function(b,f,c,n,h,d,s,u,I,K,v,w,x,r,C,g,G){if(!O[x].autoSlide)return!1;e.autoSlidePause(x);ja[x]=setTimeout(function(){!G.infiniteSlider&&y[x]>v.length-1&&(y[x]-=C);e.changeSlide((y[x]+z[x]+v.length+1)%v.length,b,f,c,n,h,d,s,u,I,K,v,w,x,r,C,g,G);e.autoSlide(b,f,c,n,h,d,s,u,I,K,v,w,x,r,C,g,G)},G.autoSlideTimer+G.autoSlideTransTimer)},autoSlidePause:function(b){clearTimeout(ja[b])},isUnselectable:function(a, f){return""!=f.unselectableSelector&&1==b(a).closest(f.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(b,f,c,n,h,d,s,u,y,z,v,w,x,r,C,g,G,k,q,m){return setTimeout(function(){e.slowScrollHorizontalInterval(f,c,n,h,d,s,u,y,z,v,w,x,r,C,g,G,k,q,m)},b)},onSlideCompleteTimer:function(b,f,c,n,h,d){return setTimeout(function(){e.onSlideComplete(f,c,n,h,d)},b)},hideScrollbarIntervalTimer:function(b,f,c,n,h,d,s,u,y,z){return setTimeout(function(){e.hideScrollbarInterval(f,c,n, h,d,s,u,y,z)},b)},args:function(a,f,c,n,h,d){this.prevSlideNumber=void 0==b(c).parent().data("args")?void 0:b(c).parent().data("args").prevSlideNumber;this.prevSlideObject=void 0==b(c).parent().data("args")?void 0:b(c).parent().data("args").prevSlideObject;this.targetSlideNumber=d+1;this.targetSlideObject=b(c).children(":eq("+this.targetSlideOffset+")");this.slideChanged=!1;"load"==a?this.targetSlideObject=this.targetSlideNumber=void 0:"start"==a?this.targetSlideObject=this.targetSlideNumber=void 0: "change"==a?(this.slideChanged=!0,this.prevSlideNumber=void 0==b(c).parent().data("args")?f.startAtSlide:b(c).parent().data("args").currentSlideNumber,this.prevSlideObject=b(c).children(":eq("+this.prevSlideNumber+")")):"complete"==a&&(this.slideChanged=b(c).parent().data("args").slideChanged);this.settings=f;this.data=b(c).parent().data("iosSliderVertical");this.sliderObject=c;this.sliderContainerObject=b(c).parent();this.currentSlideObject=n;this.currentSlideNumber=h+1;this.currentSliderOffset= -1*e.getSliderOffset(c,"y")},preventDrag:function(b){b.preventDefault()},preventClick:function(b){b.stopImmediatePropagation();return!1},enableClick:function(){return!0}};e.setBrowserInfo();var aa={init:function(a,f){fa=e.has3DTransform();var c=b.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1,mousewheelScroll:!0,mousewheelScrollSensitivity:1,mousewheelScrollOverflow:!1,scrollbar:!1, scrollbarDrag:!0,scrollbarHide:!1,scrollbarLocation:"right",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarWidth:"8px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:!1,keyboardControls:!1,tabToAdvance:!1,responsiveSlideContainer:!0,responsiveSlides:!1,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3, autoSlideTransTimer:750,autoSlideHoverPause:!0,infiniteSlider:!1,snapVelocityThreshold:5,slideStartVelocityThreshold:0,verticalSlideLockThreshold:0,horizontalSlideLockThreshold:3,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSliderResize:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},a);void 0==f&&(f=this);return b(f).each(function(a){function f(){e.autoSlidePause(d);ya=b(E).find("a");Ca=b(E).find("[onclick]"); qa=b(E).find("*");b(q).css("width","");b(q).css("height","");b(E).css("height","");B=b(E).children().not("script").get();ka=[];M=[];b(B).css("height","");u[d]=0;p=[];g=b(q).parent().height();m=b(q).outerHeight(!0);c.responsiveSlideContainer&&(m=b(q).outerHeight(!0)>g?g:b(q).outerHeight(!0));b(q).css({position:c.stageCSS.position,top:c.stageCSS.top,left:c.stageCSS.left,overflow:c.stageCSS.overflow,zIndex:c.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",msTouchAction:"pan-x", height:m});b(c.unselectableSelector).css({cursor:"default"});for(var a=0;a<B.length;a++){b(B[a]).css({webkitBackfaceVisibility:"hidden",position:"absolute",left:0});ka[a]=b(B[a]).height();M[a]=b(B[a]).outerHeight(!0);var n=M[a];c.responsiveSlides?(n=M[a]>m?m+-1*(M[a]-ka[a]):ka[a],b(B[a]).css({height:n})):b(B[a]).css({height:ka[a]});p[a]=-1*u[d];u[d]+=n}c.snapSlideCenter&&(k=0.5*(m-M[0]),c.responsiveSlides&&M[0]>m&&(k=0));xa[d]=2*u[d];for(a=0;a<B.length;a++)e.setSliderOffset(b(B[a]),-1*p[a]+u[d]+k), p[a]-=u[d];if(!c.infiniteSlider&&!c.snapSlideCenter){for(a=0;a<p.length&&!(p[a]<=-1*(2*u[d]-m));a++)ja=a;p.splice(ja+1,p.length);p[p.length]=-1*(2*u[d]-m)}for(a=0;a<p.length;a++)L[a]=p[a];F&&(c.startAtSlide=O[d].startAtSlide>p.length?p.length:O[d].startAtSlide,c.infiniteSlider?(c.startAtSlide=(O[d].startAtSlide-1+J)%J,y[d]=O[d].startAtSlide):(c.startAtSlide=0>O[d].startAtSlide-1?p.length-1:O[d].startAtSlide,y[d]=O[d].startAtSlide-1),ca[d]=y[d]);h[d]=u[d]+k;b(E).css({position:"relative",cursor:ia, webkitPerspective:"0",webkitBackfaceVisibility:"hidden",height:u[d]+"px"});W=u[d];u[d]=2*u[d]-m+2*k;(X=W<m?!0:!1)&&b(E).css({cursor:"default"});G=b(q).parent().outerWidth(!0);A=b(q).width();c.responsiveSlideContainer&&(A=A>G?G:A);b(q).css({width:A});e.setSliderOffset(E,p[y[d]]);if(c.infiniteSlider&&!X){a=e.getSliderOffset(b(E),"y");for(n=-1*((z[d]+J)%J);0>n;){var D=0,la=e.getSliderOffset(b(B[0]),"y");b(B).each(function(b){e.getSliderOffset(this,"y")<la&&(la=e.getSliderOffset(this,"y"),D=b)});var I= h[d]+W;e.setSliderOffset(b(B)[D],I);h[d]=-1*p[1]+k;u[d]=h[d]+W-m;p.splice(0,1);p.splice(p.length,0,-1*I+k);n++}for(;0<-1*p[0]-W+k&&c.snapSlideCenter&&F;){var N=0,Da=e.getSliderOffset(b(B[0]),"y");b(B).each(function(b){e.getSliderOffset(this,"y")>Da&&(Da=e.getSliderOffset(this,"y"),N=b)});I=h[d]-M[N];e.setSliderOffset(b(B)[N],I);p.splice(0,0,-1*I+k);p.splice(p.length-1,1);h[d]=-1*p[0]+k;u[d]=h[d]+W-m;z[d]--;y[d]++}for(;a<=-1*u[d];)D=0,la=e.getSliderOffset(b(B[0]),"y"),b(B).each(function(b){e.getSliderOffset(this, "y")<la&&(la=e.getSliderOffset(this,"y"),D=b)}),I=h[d]+W,e.setSliderOffset(b(B)[D],I),h[d]=-1*p[1]+k,u[d]=h[d]+W-m,p.splice(0,1),p.splice(p.length,0,-1*I+k),z[d]++,y[d]--}e.setSliderOffset(E,p[y[d]]);c.desktopClickDrag||b(E).css({cursor:"default"});c.scrollbar&&(b("."+K).css({margin:c.scrollbarMargin,overflow:"hidden",display:"none"}),b("."+K+" ."+v).css({border:c.scrollbarBorder}),l=parseInt(b("."+K).css("marginLeft"))+parseInt(b("."+K).css("marginRight")),t=parseInt(b("."+K+" ."+v).css("borderLeftWidth"), 10)+parseInt(b("."+K+" ."+v).css("borderRightWidth"),10),r=""!=c.scrollbarContainer?b(c.scrollbarContainer).height():m,C=m/W*(r-l),c.scrollbarHide||(H=c.scrollbarOpacity),b("."+K).css({position:"absolute",top:0,height:r-l+"px",margin:c.scrollbarMargin}),"left"==c.scrollbarLocation?b("."+K).css("left","0"):b("."+K).css("right","0"),b("."+K+" ."+v).css({borderRadius:c.scrollbarBorderRadius,background:c.scrollbarBackground,width:c.scrollbarWidth,height:C-t+"px",minHeight:c.scrollbarWidth,border:c.scrollbarBorder, webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:H,filter:"alpha(opacity:"+100*H+")",boxShadow:c.scrollbarShadow}),e.setSliderOffset(b("."+K+" ."+v),Math.floor((-1*p[y[d]]-h[d]+k)/(u[d]-h[d]+k)*(r-l-C))),b("."+K).css({display:"block"}),w=b("."+K+" ."+v),x=b("."+K));c.scrollbarDrag&&!X&&b("."+K+" ."+v).css({cursor:ia});c.infiniteSlider&&(Q=(u[d]+m)/3);""!=c.navSlideSelector&&b(c.navSlideSelector).each(function(a){b(this).css({cursor:"pointer"});b(this).unbind(R).bind(R, function(f){"touchstart"==f.type?b(this).unbind("click.iosSliderVerticalEvent"):b(this).unbind("touchstart.iosSliderVerticalEvent");R=f.type+".iosSliderVerticalEvent";e.changeSlide(a,E,B,s,v,C,m,r,l,t,L,p,M,d,Q,J,k,c)})});""!=c.navPrevSelector&&(b(c.navPrevSelector).css({cursor:"pointer"}),b(c.navPrevSelector).unbind(R).bind(R,function(a){"touchstart"==a.type?b(this).unbind("click.iosSliderVerticalEvent"):b(this).unbind("touchstart.iosSliderVerticalEvent");R=a.type+".iosSliderVerticalEvent";a=(y[d]+ z[d]+J)%J;(0<a||c.infiniteSlider)&&e.changeSlide(a-1,E,B,s,v,C,m,r,l,t,L,p,M,d,Q,J,k,c)}));""!=c.navNextSelector&&(b(c.navNextSelector).css({cursor:"pointer"}),b(c.navNextSelector).unbind(R).bind(R,function(a){"touchstart"==a.type?b(this).unbind("click.iosSliderVerticalEvent"):b(this).unbind("touchstart.iosSliderVerticalEvent");R=a.type+".iosSliderVerticalEvent";a=(y[d]+z[d]+J)%J;(a<p.length-1||c.infiniteSlider)&&e.changeSlide(a+1,E,B,s,v,C,m,r,l,t,L,p,M,d,Q,J,k,c)}));c.autoSlide&&!X&&""!=c.autoSlideToggleSelector&& (b(c.autoSlideToggleSelector).css({cursor:"pointer"}),b(c.autoSlideToggleSelector).unbind(R).bind(R,function(a){"touchstart"==a.type?b(this).unbind("click.iosSliderVerticalEvent"):b(this).unbind("touchstart.iosSliderVerticalEvent");R=a.type+".iosSliderVerticalEvent";za?(e.autoSlide(E,B,s,v,C,m,r,l,t,L,p,M,d,Q,J,k,c),za=!1,b(c.autoSlideToggleSelector).removeClass("on")):(e.autoSlidePause(d),za=!0,b(c.autoSlideToggleSelector).addClass("on"))}));e.autoSlide(E,B,s,v,C,m,r,l,t,L,p,M,d,Q,J,k,c);b(q).bind("mouseleave.iosSliderVerticalEvent", function(){e.autoSlide(E,B,s,v,C,m,r,l,t,L,p,M,d,Q,J,k,c)});b(q).bind("touchend.iosSliderVerticalEvent",function(){e.autoSlide(E,B,s,v,C,m,r,l,t,L,p,M,d,Q,J,k,c)});c.autoSlideHoverPause&&b(q).bind("mouseenter.iosSliderVerticalEvent",function(){e.autoSlidePause(d)});b(q).data("iosSliderVertical",{obj:Ea,settings:c,scrollerNode:E,slideNodes:B,numberOfSlides:J,centeredSlideOffset:k,sliderNumber:d,originalOffsets:L,childrenOffsets:p,sliderMax:u[d],scrollbarClass:v,scrollbarHeight:C,scrollbarStageHeight:r, stageHeight:m,scrollMargin:l,scrollBorder:t,infiniteSliderOffset:z[d],infiniteSliderWidth:Q,slideNodeOuterHeights:M});F=!1;return!0}oa++;var d=oa,s=[];O[d]=c;h[d]=0;u[d]=0;var S=[0,0],I=[0,0],K="vScrollbarBlock"+oa,v="vScrollbar"+oa,w,x,r,C,g,G,k=0,q=b(this),m,A,l,t,D,F=!0;a=-1;var p,L=[],H=0,N=0,fa=0,E=b(this).children(":first-child"),B,ka,M,J=b(E).children().not("script").size(),Y=!1,ja=0,Aa=!1,ra=void 0,Q;z[d]=0;var X=!1,za=!1;wa[d]=!1;var Z,sa=!1,ha=!1,R="touchstart.iosSliderVerticalEvent click.iosSliderVerticalEvent", W,ya,Ca,qa,Fa=0,ta=!1,Ga,ua=!1;ga[d]=!1;V[d]=[];var Ea=b(this);if(void 0!=Ea.data("iosSliderVertical"))return!0;b(this).find("img").bind("dragstart.iosSliderVerticalEvent",function(b){b.preventDefault()});c.infiniteSlider&&(c.scrollbar=!1);c.infiniteSlider&&1==J&&(c.infiniteSlider=!1);c.scrollbar&&(""!=c.scrollbarContainer?b(c.scrollbarContainer).append("<div class = '"+K+"'><div class = '"+v+"'></div></div>"):b(E).parent().append("<div class = '"+K+"'><div class = '"+v+"'></div></div>"));if(!f())return!0; b(this).find("a").bind("mousedown",e.preventDrag);b(this).find("[onclick]").bind("click",e.preventDrag).each(function(){b(this).data("onclick",this.onclick)});a=e.calcActiveOffset(c,e.getSliderOffset(b(E),"y"),p,m,z[d],J,void 0,d);a=(a+z[d]+J)%J;a=new e.args("load",c,E,b(E).children(":eq("+a+")"),a,a);b(q).data("args",a);if(""!=c.onSliderLoaded)c.onSliderLoaded(a);c.scrollbar&&!X&&b(x).bind("click.iosSliderVerticalEvent",function(c){this==c.target&&(c.pageY>b(w).offset().top?aa.nextPage(q):aa.prevPage(q))}); if(O[d].responsiveSlides||O[d].responsiveSlideContainer)a=Ia?"orientationchange":"resize",b(window).bind(a+".iosSliderVerticalEvent-"+d,function(){if(!f())return!0;var a=b(q).data("args");if(""!=c.onSliderResize)c.onSliderResize(a)});!c.keyboardControls&&!c.tabToAdvance||X||b(document).bind("keydown.iosSliderVerticalEvent-"+d,function(b){da||$||(b=b.originalEvent);if(38==b.keyCode&&c.keyboardControls)b.preventDefault(),b=(y[d]+z[d]+J)%J,(0<b||c.infiniteSlider)&&e.changeSlide(b-1,E,B,s,v,C,m,r,l,t, L,p,M,d,Q,J,k,c);else if(40==b.keyCode&&c.keyboardControls||9==b.keyCode&&c.tabToAdvance)b.preventDefault(),b=(y[d]+z[d]+J)%J,(b<p.length-1||c.infiniteSlider)&&e.changeSlide(b+1,E,B,s,v,C,m,r,l,t,L,p,M,d,Q,J,k,c)});c.mousewheelScroll&&!X&&b(E).bind("mousewheel.iosSliderVerticalEvent",function(a,f,g,h){for(g=0;g<s.length;g++)clearTimeout(s[g]);ta=!0;Fa=-0.1*f*c.mousewheelScrollSensitivity;Ga=a;ua=!1;Z=void 0;b(E).trigger("mousemove.iosSliderVerticalEvent");e.slowScrollHorizontal(E,B,!0,s,v,P,ba,C, m,r,l,t,L,p,M,d,Q,J,Z,ha,k,c);return ua&&c.mousewheelScrollOverflow});if(Ha||c.desktopClickDrag||c.mousewheelScroll){var ea=!1,ma=b(E),na=b(E),Ba=!1;c.scrollbarDrag&&(ma=ma.add(w),na=na.add(x));b(ma).bind("mousedown.iosSliderVerticalEvent touchstart.iosSliderVerticalEvent",function(a){if(ea)return!0;ea=!0;"touchstart"==a.type?b(na).unbind("mousedown.iosSliderVerticalEvent"):b(na).unbind("touchstart.iosSliderVerticalEvent");if(ga[d]||X||(Ba=e.isUnselectable(a.target,c)))return Y=ea=!1,!0;Z=b(this)[0]=== b(w)[0]?w:E;da||$||(a=a.originalEvent);e.autoSlidePause(d);qa.unbind(".disableClick");if("touchstart"==a.type)eventY=a.touches[0].pageY,eventX=a.touches[0].pageX;else{if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else if(document.selection)if($)try{document.selection.empty()}catch(f){}else document.selection.empty();eventY=a.pageY;eventX=a.pageX;Aa=!0;ra=E;b(this).css({cursor:va})}S=[0, 0];I=[0,0];P=0;Y=!1;for(a=0;a<s.length;a++)clearTimeout(s[a]);a=e.getSliderOffset(E,"y");a>-1*h[d]+k+W?(a=-1*h[d]+k+W,e.setSliderOffset(b("."+v),a),b("."+v).css({height:C-t+"px"})):a<-1*u[d]&&(e.setSliderOffset(b("."+v),r-l-C),b("."+v).css({height:C-t+"px"}));a=b(this)[0]===b(w)[0]?h[d]:0;N=-1*(e.getSliderOffset(this,"y")-eventY-a);e.getSliderOffset(this,"y");S[1]=eventY;I[1]=eventX;ha=!1});b(na).bind("touchmove.iosSliderVerticalEvent mousemove.iosSliderVerticalEvent",function(a){if(ga[d]||X||Ba)return!0; var f=0;if(ta)a=Ga,ba=0,P=Fa,eventY=-1*P,N=-1*(e.getSliderOffset(this,"y")-P);else{da||$||(a=a.originalEvent);if("touchmove"==a.type)eventY=a.touches[0].pageY,eventX=a.touches[0].pageX;else{if(window.getSelection)window.getSelection().empty||window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else if(document.selection)if($)try{document.selection.empty()}catch(g){}else document.selection.empty();eventY=a.pageY;eventX=a.pageX;if(!Aa||!pa&&("undefined"!=typeof a.webkitMovementX|| "undefined"!=typeof a.webkitMovementY)&&0===a.webkitMovementY&&0===a.webkitMovementX)return!0}S[0]=S[1];S[1]=eventY;P=(S[1]-S[0])/2;I[0]=I[1];I[1]=eventX;ba=(I[1]-I[0])/2}if(!Y){var n=(y[d]+z[d]+J)%J,n=new e.args("start",c,E,b(E).children(":eq("+n+")"),n,void 0);b(q).data("args",n);if(""!=c.onSlideStart)c.onSlideStart(n)}(ba>c.horizontalSlideLockThreshold||ba<-1*c.horizontalSlideLockThreshold)&&("touchmove"==a.type&&!Y)&&(sa=!0);(P>c.verticalSlideLockThreshold||P<-1*c.verticalSlideLockThreshold)&& "touchmove"==a.type&&a.preventDefault();if(P>c.slideStartVelocityThreshold||P<-1*c.slideStartVelocityThreshold)Y=!0;if(Y&&!sa){var n=e.getSliderOffset(E,"y"),s=b(Z)[0]===b(w)[0]?h[d]:k,A=b(Z)[0]===b(w)[0]?(h[d]-u[d]-k)/(r-l-C):1,x=b(Z)[0]===b(w)[0]?c.scrollbarElasticPullResistance:c.elasticPullResistance,G=c.snapSlideCenter&&b(Z)[0]===b(w)[0]?0:k,K=c.snapSlideCenter&&b(Z)[0]===b(w)[0]?k:0;"touchmove"==a.type&&(fa!=a.touches.length&&(N=-1*n+eventY),fa=a.touches.length);if(c.infiniteSlider){if(n<=-1* u[d]){var F=b(E).height();if(n<=-1*xa[d]){var H=-1*L[0];b(B).each(function(a){e.setSliderOffset(b(B)[a],H+k);a<p.length&&(p[a]=-1*H);H+=M[a]});N-=-1*p[0];h[d]=-1*p[0]+k;u[d]=h[d]+F-m;z[d]=0}else{var T=0,Q=e.getSliderOffset(b(B[0]),"y");b(B).each(function(a){e.getSliderOffset(this,"y")<Q&&(Q=e.getSliderOffset(this,"y"),T=a)});x=h[d]+F;e.setSliderOffset(b(B)[T],x);h[d]=-1*p[1]+k;u[d]=h[d]+F-m;p.splice(0,1);p.splice(p.length,0,-1*x+k);z[d]++}}if(n>=-1*h[d]||0<=n)if(F=b(E).height(),0<=n)for(H=-1*L[0], b(B).each(function(a){e.setSliderOffset(b(B)[a],H+k);a<p.length&&(p[a]=-1*H);H+=M[a]}),N+=-1*p[0],h[d]=-1*p[0]+k,u[d]=h[d]+F-m,z[d]=J;0<-1*p[0]-F+k;){var O=0,R=e.getSliderOffset(b(B[0]),"y");b(B).each(function(a){e.getSliderOffset(this,"y")>R&&(R=e.getSliderOffset(this,"y"),O=a)});x=h[d]-M[O];e.setSliderOffset(b(B)[O],x);p.splice(0,0,-1*x+k);p.splice(p.length-1,1);h[d]=-1*p[0]+k;u[d]=h[d]+F-m;z[d]--;y[d]++}else O=0,R=e.getSliderOffset(b(B[0]),"y"),b(B).each(function(a){e.getSliderOffset(this,"y")> R&&(R=e.getSliderOffset(this,"y"),O=a)}),x=h[d]-M[O],e.setSliderOffset(b(B)[O],x),p.splice(0,0,-1*x+k),p.splice(p.length-1,1),h[d]=-1*p[0]+k,u[d]=h[d]+F-m,z[d]--}else F=b(E).height(),n>-1*h[d]+k&&(f=-1*(h[d]+-1*(N-s-eventY+G)*A-s)*x/A),n<-1*u[d]&&(f=-1*(u[d]+K+-1*(N-s-eventY)*A-s)*x/A);x=-1*(N-s-eventY-f)*A-s+K;ta&&(x>-1*h[d]+k&&(x=-1*h[d]+k,N=-1*e.getSliderOffset(this,"y"),eventY=0,ua=!0),x<-1*u[d]&&(x=-1*u[d],N=-1*e.getSliderOffset(this,"y"),eventY=0,ua=!0));e.setSliderOffset(E,x);c.scrollbar&& (e.showScrollbar(c,v),U=Math.floor((N-eventY-f-h[d]+G)/(u[d]-h[d]+k)*(r-l-C)*A),n=C,0>=U?(n=C-t- -1*U,e.setSliderOffset(b("."+v),0),b("."+v).css({height:n+"px"})):U>=r-l-t-C?(n=r-l-t-U,e.setSliderOffset(b("."+v),U),b("."+v).css({height:n+"px"})):e.setSliderOffset(b("."+v),U));"touchmove"==a.type&&(D=a.touches[0].pageX);a=!1;f=e.calcActiveOffset(c,-1*(N-eventY-f),p,m,z[d],J,void 0,d);n=(f+z[d]+J)%J;c.infiniteSlider?n!=ca[d]&&(a=!0):f!=y[d]&&(a=!0);if(a&&(y[d]=f,ca[d]=n,ha=!0,n=new e.args("change", c,E,b(E).children(":eq("+n+")"),n,n),b(q).data("args",n),""!=c.onSlideChange))c.onSlideChange(n)}ta=ea=!1});a=b(window);if($||da)a=b(document);b(ma).bind("touchend.iosSliderVerticalEvent",function(a){a=a.originalEvent;if(ga[d]||X||Ba)return!0;if(0!=a.touches.length)for(var b=0;b<a.touches.length;b++)a.touches[b].pageX==D&&e.slowScrollHorizontal(E,B,!1,s,v,P,ba,C,m,r,l,t,L,p,M,d,Q,J,Z,ha,k,c);else e.slowScrollHorizontal(E,B,!1,s,v,P,ba,C,m,r,l,t,L,p,M,d,Q,J,Z,ha,k,c);ea=sa=!1});b(a).bind("mouseup.iosSliderVerticalEvent-"+ d,function(a){Y?ya.unbind("click.disableClick").bind("click.disableClick",e.preventClick):ya.unbind("click.disableClick").bind("click.disableClick",e.enableClick);Ca.each(function(){this.onclick=function(a){if(Y)return!1;b(this).data("onclick").call(this,a||window.event)}});1.8<=parseFloat(b().jquery)?qa.each(function(){var a=b._data(this,"events");if(void 0!=a&&void 0!=a.click&&"iosSliderEvent"!=a.click[0].namespace){if(!Y)return!1;b(this).one("click.disableClick",e.preventClick);var a=b._data(this, "events").click,c=a.pop();a.splice(0,0,c)}}):1.6<=parseFloat(b().jquery)&&qa.each(function(){var a=b(this).data("events");if(void 0!=a&&void 0!=a.click&&"iosSliderEvent"!=a.click[0].namespace){if(!Y)return!1;b(this).one("click.disableClick",e.preventClick);var a=b(this).data("events").click,c=a.pop();a.splice(0,0,c)}});if(!wa[d]){if(X)return!0;b(ma).css({cursor:ia});Aa=!1;if(void 0==ra)return!0;e.slowScrollHorizontal(ra,B,!1,s,v,P,ba,C,m,r,l,t,L,p,M,d,Q,J,Z,ha,k,c);ra=void 0}ea=sa=!1})}})},destroy:function(a, f){void 0==f&&(f=this);return b(f).each(function(){var c=b(this),f=c.data("iosSliderVertical");if(void 0==f)return!1;void 0==a&&(a=!0);e.autoSlidePause(f.sliderNumber);wa[f.sliderNumber]=!0;b(window).unbind(".iosSliderVerticalEvent-"+f.sliderNumber);b(document).unbind(".iosSliderVerticalEvent-"+f.sliderNumber);b(document).unbind("keydown.iosSliderVerticalEvent");b(this).unbind(".iosSliderVerticalEvent");b(this).children(":first-child").unbind(".iosSliderVerticalEvent");b(this).children(":first-child").children().unbind(".iosSliderVerticalEvent"); a&&(b(this).attr("style",""),b(this).children(":first-child").attr("style",""),b(this).children(":first-child").children().attr("style",""),b(f.settings.navSlideSelector).attr("style",""),b(f.settings.navPrevSelector).attr("style",""),b(f.settings.navNextSelector).attr("style",""),b(f.settings.autoSlideToggleSelector).attr("style",""),b(f.settings.unselectableSelector).attr("style",""));f.settings.scrollbar&&b(".vScrollbarBlock"+f.sliderNumber).remove();for(var f=V[f.sliderNumber],h=0;h<f.length;h++)clearTimeout(f[h]); c.removeData("iosSliderVertical");c.removeData("args")})},update:function(a){void 0==a&&(a=this);return b(a).each(function(){var a=b(this),c=a.data("iosSliderVertical");if(void 0==c)return!1;c.settings.startAtSlide=a.data("args").currentSlideNumber;aa.destroy(!1,this);1!=c.numberOfSlides&&c.settings.infiniteSlider&&(c.settings.startAtSlide=(y[c.sliderNumber]+1+z[c.sliderNumber]+c.numberOfSlides)%c.numberOfSlides);aa.init(c.settings,this);a=new e.args("update",c.settings,c.scrollerNode,b(c.scrollerNode).children(":eq("+ (c.settings.startAtSlide-1)+")"),c.settings.startAtSlide-1,c.settings.startAtSlide-1);b(c.stageNode).data("args",a);if(""!=c.settings.onSliderUpdate)c.settings.onSliderUpdate(a)})},addSlide:function(a,f){return this.each(function(){var c=b(this),e=c.data("iosSliderVertical");if(void 0==e)return!1;0==b(e.scrollerNode).children().size()?(b(e.scrollerNode).append(a),c.data("args").currentSlideNumber=1):e.settings.infiniteSlider?(1==f?b(e.scrollerNode).children(":eq(0)").before(a):b(e.scrollerNode).children(":eq("+ (f-2)+")").after(a),-1>z[e.sliderNumber]&&y[e.sliderNumber]--,c.data("args").currentSlideNumber>=f&&y[e.sliderNumber]++):(f<=e.numberOfSlides?b(e.scrollerNode).children(":eq("+(f-1)+")").before(a):b(e.scrollerNode).children(":eq("+(f-2)+")").after(a),c.data("args").currentSlideNumber>=f&&c.data("args").currentSlideNumber++);c.data("iosSliderVertical").numberOfSlides++;aa.update(this)})},removeSlide:function(a){return this.each(function(){var f=b(this).data("iosSliderVertical");if(void 0==f)return!1; b(f.scrollerNode).children(":eq("+(a-1)+")").remove();y[f.sliderNumber]>a-1&&y[f.sliderNumber]--;aa.update(this)})},goToSlide:function(a,f){void 0==f&&(f=this);return b(f).each(function(){var c=b(this).data("iosSliderVertical");if(void 0==c)return!1;a=a>c.childrenOffsets.length?c.childrenOffsets.length-1:a-1;e.changeSlide(a,b(c.scrollerNode),b(c.slideNodes),V[c.sliderNumber],c.scrollbarClass,c.scrollbarHeight,c.stageHeight,c.scrollbarStageHeight,c.scrollMargin,c.scrollBorder,c.originalOffsets,c.childrenOffsets, c.slideNodeOuterHeights,c.sliderNumber,c.infiniteSliderWidth,c.numberOfSlides,c.centeredSlideOffset,c.settings);y[c.sliderNumber]=a})},prevSlide:function(){return this.each(function(){var a=b(this).data("iosSliderVertical");if(void 0==a)return!1;var f=(y[a.sliderNumber]+z[a.sliderNumber]+a.numberOfSlides)%a.numberOfSlides;(0<f||a.settings.infiniteSlider)&&e.changeSlide(f-1,b(a.scrollerNode),b(a.slideNodes),V[a.sliderNumber],a.scrollbarClass,a.scrollbarHeight,a.stageHeight,a.scrollbarStageHeight,a.scrollMargin, a.scrollBorder,a.originalOffsets,a.childrenOffsets,a.slideNodeOuterHeights,a.sliderNumber,a.infiniteSliderWidth,a.numberOfSlides,a.centeredSlideOffset,a.settings);y[a.sliderNumber]=f})},nextSlide:function(){return this.each(function(){var a=b(this).data("iosSliderVertical");if(void 0==a)return!1;var f=(y[a.sliderNumber]+z[a.sliderNumber]+a.numberOfSlides)%a.numberOfSlides;(f<a.childrenOffsets.length-1||a.settings.infiniteSlider)&&e.changeSlide(f+1,b(a.scrollerNode),b(a.slideNodes),V[a.sliderNumber], a.scrollbarClass,a.scrollbarHeight,a.stageHeight,a.scrollbarStageHeight,a.scrollMargin,a.scrollBorder,a.originalOffsets,a.childrenOffsets,a.slideNodeOuterHeights,a.sliderNumber,a.infiniteSliderWidth,a.numberOfSlides,a.centeredSlideOffset,a.settings);y[a.sliderNumber]=f})},prevPage:function(a){void 0==a&&(a=this);return b(a).each(function(){var a=b(this).data("iosSliderVertical");if(void 0==a)return!1;var c=e.getSliderOffset(a.scrollerNode,"y")+a.stageHeight;e.changeOffset(c,b(a.scrollerNode),b(a.slideNodes), V[a.sliderNumber],a.scrollbarClass,a.scrollbarHeight,a.stageHeight,a.scrollbarStageHeight,a.scrollMargin,a.scrollBorder,a.originalOffsets,a.childrenOffsets,a.slideNodeOuterHeights,a.sliderNumber,a.infiniteSliderWidth,a.numberOfSlides,a.centeredSlideOffset,a.settings)})},nextPage:function(a){void 0==a&&(a=this);return b(a).each(function(){var a=b(this).data("iosSliderVertical");if(void 0==a)return!1;var c=e.getSliderOffset(a.scrollerNode,"y")-a.stageHeight;e.changeOffset(c,b(a.scrollerNode),b(a.slideNodes), V[a.sliderNumber],a.scrollbarClass,a.scrollbarHeight,a.stageHeight,a.scrollbarStageHeight,a.scrollMargin,a.scrollBorder,a.originalOffsets,a.childrenOffsets,a.slideNodeOuterHeights,a.sliderNumber,a.infiniteSliderWidth,a.numberOfSlides,a.centeredSlideOffset,a.settings)})},lock:function(){return this.each(function(){var a=b(this).data("iosSliderVertical");if(void 0==a)return!1;ga[a.sliderNumber]=!0})},unlock:function(){return this.each(function(){var a=b(this).data("iosSliderVertical");if(void 0==a)return!1; ga[a.sliderNumber]=!1})},getData:function(){return this.each(function(){var a=b(this).data("iosSliderVertical");return void 0==a?!1:a})},autoSlidePause:function(){return this.each(function(){var a=b(this).data("iosSliderVertical");if(void 0==a)return!1;O[a.sliderNumber].autoSlide=!1;e.autoSlidePause(a.sliderNumber);return a})},autoSlidePlay:function(){return this.each(function(){var a=b(this).data("iosSliderVertical");if(void 0==a)return!1;O[a.sliderNumber].autoSlide=!0;e.autoSlide(b(a.scrollerNode), b(a.slideNodes),V[a.sliderNumber],a.scrollbarClass,a.scrollbarHeight,a.stageHeight,a.scrollbarStageHeight,a.scrollMargin,a.scrollBorder,a.originalOffsets,a.childrenOffsets,a.slideNodeOuterHeights,a.sliderNumber,a.infiniteSliderWidth,a.numberOfSlides,a.centeredSlideOffset,a.settings);return a})}};b.fn.iosSliderVertical=function(a){if(aa[a])return aa[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("invalid method call!");else return aa.init.apply(this,arguments)}})(jQuery);
/*** jquery.iosslider.min.js ***/
/*
* iosSlider - http://iosscripts.com/iosslider/
*
* Touch Enabled, Responsive jQuery Horizontal Content Slider/Carousel/Image Gallery Plugin
*
* A jQuery plugin which allows you to integrate a customizable, cross-browser
* content slider into your web presence. Designed for use as a content slider, carousel,
* scrolling website banner, or image gallery.
*
* Copyright (c) 2013 Marc Whitbread
*
* Version: v1.2.12 (04/23/2013)
* Minimum requirements: jQuery v1.4+
*
* Advanced requirements:
* 1) jQuery bind() click event override on slide requires jQuery v1.6+
*
* Terms of use:
*
* 1) iosSlider is licensed under the Creative Commons – Attribution-NonCommercial 3.0 License.
* 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
*	 Attribution is not required but always appreciated. For commercial projects, you
*	 must purchase a license. You may download and play with the script before deciding to
*	 fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
*	 is the right script for your project is paramount.
* 3) You are not permitted to make the resources found on iosscripts.com available for
* distribution elsewhere "as is" without prior consent. If you would like to feature
* iosSlider on your site, please do not link directly to the resource zip files. Please
* link to the appropriate page on iosscripts.com where users can find the download.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
* EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
* COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
* EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
* GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
* AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
* OF THE POSSIBILITY OF SUCH DAMAGE.
*/

(function(a){var na=0,X=0,ca=0,U=0,Ca="ontouchstart"in window,Da="onorientationchange"in window,da=!1,$=!1,Y=!1,oa=!1,ga="pointer",ta="pointer",ha=[],N=[],ua=[],ea=[],J=[],aa=[],A=[],j=[],r=[],va=[],fa=[],f={showScrollbar:function(d,f){d.scrollbarHide&&a("."+f).css({opacity:d.scrollbarOpacity,filter:"alpha(opacity:"+100*d.scrollbarOpacity+")"})},hideScrollbar:function(a,g,b,w,c,k,j,r,G,v){if(a.scrollbar&&a.scrollbarHide)for(var A=b;A<b+25;A++)g[g.length]=f.hideScrollbarIntervalTimer(10*A,w[b],(b+ 24-A)/24,c,k,j,r,G,v,a)},hideScrollbarInterval:function(d,g,b,w,c,k,j,A,G){U=-1*d/r[A]*(c-k-j-w);f.setSliderOffset("."+b,U);a("."+b).css({opacity:G.scrollbarOpacity*g,filter:"alpha(opacity:"+100*G.scrollbarOpacity*g+")"})},slowScrollHorizontalInterval:function(d,g,b,w,c,k,T,O,G,v,K,z,s,u,F,n,l,B,h){if(h.infiniteSlider){if(b<=-1*r[n]){var x=a(d).width();if(b<=-1*va[n]){var q=-1*K[0];a(g).each(function(b){f.setSliderOffset(a(g)[b],q+l);b<z.length&&(z[b]=-1*q);q+=F[b]});b+=-1*z[0];j[n]=-1*z[0]+l;r[n]= j[n]+x-k;A[n]=0}else{var p=0,L=f.getSliderOffset(a(g[0]),"x");a(g).each(function(b){f.getSliderOffset(this,"x")<L&&(L=f.getSliderOffset(this,"x"),p=b)});s=j[n]+x;f.setSliderOffset(a(g)[p],s);j[n]=-1*z[1]+l;r[n]=j[n]+x-k;z.splice(0,1);z.splice(z.length,0,-1*s+l);A[n]++}}if(b>=-1*j[n]||0<=b){x=a(d).width();if(0<=b){q=-1*K[0];a(g).each(function(b){f.setSliderOffset(a(g)[b],q+l);b<z.length&&(z[b]=-1*q);q+=F[b]});b-=-1*z[0];j[n]=-1*z[0]+l;r[n]=j[n]+x-k;for(A[n]=u;0<-1*z[0]-x+l;){var t=0,y=f.getSliderOffset(a(g[0]), "x");a(g).each(function(b){f.getSliderOffset(this,"x")>y&&(y=f.getSliderOffset(this,"x"),t=b)});s=j[n]-F[t];f.setSliderOffset(a(g)[t],s);z.splice(0,0,-1*s+l);z.splice(z.length-1,1);j[n]=-1*z[0]+l;r[n]=j[n]+x-k;A[n]--;J[n]++}}0>b&&(t=0,y=f.getSliderOffset(a(g[0]),"x"),a(g).each(function(b){f.getSliderOffset(this,"x")>y&&(y=f.getSliderOffset(this,"x"),t=b)}),s=j[n]-F[t],f.setSliderOffset(a(g)[t],s),z.splice(0,0,-1*s+l),z.splice(z.length-1,1),j[n]=-1*z[0]+l,r[n]=j[n]+x-k,A[n]--)}}K=!1;k=f.calcActiveOffset(h, b,z,k,A[n],u,v,n);s=(k+A[n]+u)%u;h.infiniteSlider?s!=aa[n]&&(K=!0):k!=J[n]&&(K=!0);if(K&&(u=new f.args("change",h,d,a(d).children(":eq("+s+")"),s,B),a(d).parent().data("args",u),""!=h.onSlideChange))h.onSlideChange(u);J[n]=k;aa[n]=s;b=Math.floor(b);f.setSliderOffset(d,b);h.scrollbar&&(U=Math.floor((-1*b-j[n]+l)/(r[n]-j[n]+l)*(T-O-c)),d=c-G,b>=-1*j[n]+l?(d=c-G- -1*U,f.setSliderOffset(a("."+w),0)):(b<=-1*r[n]+1&&(d=T-O-G-U),f.setSliderOffset(a("."+w),U)),a("."+w).css({width:d+"px"}))},slowScrollHorizontal:function(d, g,b,w,c,k,T,O,G,v,K,z,s,u,F,n,l,B,h,x,q){k=[];var p=f.getSliderOffset(d,"x"),L=0,t=25/1024*O;frictionCoefficient=q.frictionCoefficient;elasticFrictionCoefficient=q.elasticFrictionCoefficient;snapFrictionCoefficient=q.snapFrictionCoefficient;c>q.snapVelocityThreshold&&q.snapToChildren&&!h?L=1:c<-1*q.snapVelocityThreshold&&(q.snapToChildren&&!h)&&(L=-1);c<-1*t?c=-1*t:c>t&&(c=t);a(d)[0]!==a(B)[0]&&(L*=-1,c*=-2);B=A[F];if(q.infiniteSlider)var y=j[F],m=r[F];h=[];for(var t=[],D=0;D<s.length;D++)h[D]=s[D], D<g.length&&(t[D]=f.getSliderOffset(a(g[D]),"x"));for(;1<c||-1>c;){c*=frictionCoefficient;p+=c;if((p>-1*j[F]||p<-1*r[F])&&!q.infiniteSlider)c*=elasticFrictionCoefficient,p+=c;if(q.infiniteSlider){if(p<=-1*m){for(var m=a(d).width(),N=0,P=t[0],D=0;D<t.length;D++)t[D]<P&&(P=t[D],N=D);D=y+m;t[N]=D;y=-1*h[1]+x;m=y+m-O;h.splice(0,1);h.splice(h.length,0,-1*D+x);B++}if(p>=-1*y){m=a(d).width();N=0;P=t[0];for(D=0;D<t.length;D++)t[D]>P&&(P=t[D],N=D);D=y-u[N];t[N]=D;h.splice(0,0,-1*D+x);h.splice(h.length-1,1); y=-1*h[0]+x;m=y+m-O;B--}}k[k.length]=p}t=!1;c=f.calcActiveOffset(q,p,h,O,B,l,J[F],F);y=(c+B+l)%l;q.snapToChildren&&(q.infiniteSlider?y!=aa[F]&&(t=!0):c!=J[F]&&(t=!0),0>L&&!t?(c++,c>=s.length&&!q.infinteSlider&&(c=s.length-1)):0<L&&!t&&(c--,0>c&&!q.infinteSlider&&(c=0)));if(q.snapToChildren||(p>-1*j[F]||p<-1*r[F])&&!q.infiniteSlider){for(k.splice(0,k.length);p<h[c]-0.5||p>h[c]+0.5;)p=(p-h[c])*snapFrictionCoefficient+h[c],k[k.length]=p;k[k.length]=h[c]}L=1;0!=k.length%2&&(L=0);for(p=0;p<b.length;p++)clearTimeout(b[p]); B=(c+B+l)%l;y=0;for(p=L;p<k.length;p+=2)if(p==L||1<Math.abs(k[p]-y)||p>=k.length-2)y=k[p],b[b.length]=f.slowScrollHorizontalIntervalTimer(10*p,d,g,k[p],w,T,O,G,v,K,c,z,s,n,l,u,F,x,B,q);y=(c+A[F]+l)%l;""!=q.onSlideComplete&&(b[b.length]=f.onSlideCompleteTimer(10*(p+1),q,d,a(d).children(":eq("+y+")"),y,F));ea[F]=b;f.hideScrollbar(q,b,p,k,w,T,O,v,K,F)},onSlideComplete:function(d,g,b,w){b=new f.args("complete",d,a(g),b,w,w);a(g).parent().data("args",b);if(""!=d.onSlideComplete)d.onSlideComplete(b)},getSliderOffset:function(d, f){var b=0;f="x"==f?4:5;if(da&&!$&&!Y){for(var b=["-webkit-transform","-moz-transform","transform"],w=0;w<b.length;w++)if(void 0!=a(d).css(b[w])&&0<a(d).css(b[w]).length){var c=a(d).css(b[w]).split(",");break}b=parseInt(c[f],10)}else b=parseInt(a(d).css("left"),10);return b},setSliderOffset:function(d,f){da&&!$&&!Y?a(d).css({webkitTransform:"matrix(1,0,0,1,"+f+",0)",MozTransform:"matrix(1,0,0,1,"+f+",0)",transform:"matrix(1,0,0,1,"+f+",0)"}):a(d).css({left:f+"px"})},setBrowserInfo:function(){null!= navigator.userAgent.match("WebKit")?(ga="-webkit-grab",ta="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(ga="move",ta="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?oa=$=!0:null!=navigator.userAgent.match("MSIE 8")?oa=Y=!0:null!=navigator.userAgent.match("MSIE 9")&&(oa=!0)},has3DTransform:function(){var d=!1,f=a("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)",MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==f.attr("style")?d=!1:void 0!=f.attr("style")&& (d=!0);return d},getSlideNumber:function(a,f,b){return(a-A[f]+b)%b},calcActiveOffset:function(a,f,b,w,c,k){c=!1;a=[];var j;f>b[0]&&(j=0);f<b[b.length-1]&&(j=k-1);for(k=0;k<b.length;k++)b[k]<=f&&b[k]>f-w&&(!c&&b[k]!=f&&(a[a.length]=b[k-1]),a[a.length]=b[k],c=!0);0==a.length&&(a[0]=b[b.length-1]);for(k=c=0;k<a.length;k++){var r=Math.abs(f-a[k]);r<w&&(c=a[k],w=r)}for(k=0;k<b.length;k++)c==b[k]&&(j=k);return j},changeSlide:function(d,g,b,w,c,k,j,r,G,v,K,z,s,u,F,n,l,B){f.autoSlidePause(u);for(var h=0;h< w.length;h++)clearTimeout(w[h]);var x=Math.ceil(B.autoSlideTransTimer/10)+1,q=f.getSliderOffset(g,"x"),p=z[d],L=p-q;if(B.infiniteSlider){d=(d-A[u]+2*n)%n;h=!1;0==d&&2==n&&(d=n,z[d]=z[d-1]-a(b).eq(0).outerWidth(!0),h=!0);p=z[d];L=p-q;p=[z[d]-a(g).width(),z[d]+a(g).width()];h&&z.splice(z.length-1,1);for(h=0;h<p.length;h++)Math.abs(p[h]-q)<Math.abs(L)&&(L=p[h]-q)}var p=[],t;f.showScrollbar(B,c);for(h=0;h<=x;h++)t=h,t/=x,t--,t=q+L*(Math.pow(t,5)+1),p[p.length]=t;for(h=q=0;h<p.length;h++){if(0==h||1<Math.abs(p[h]- q)||h>=p.length-2)q=p[h],w[h]=f.slowScrollHorizontalIntervalTimer(10*(h+1),g,b,p[h],c,k,j,r,G,v,d,K,z,F,n,s,u,l,d,B);0==h&&""!=B.onSlideStart&&(x=(J[u]+A[u]+n)%n,B.onSlideStart(new f.args("start",B,g,a(g).children(":eq("+x+")"),x,d)))}q=!1;x=(d+A[u]+n)%n;B.infiniteSlider?x!=aa[u]&&(q=!0):d!=J[u]&&(q=!0);q&&""!=B.onSlideComplete&&(w[w.length]=f.onSlideCompleteTimer(10*(h+1),B,g,a(g).children(":eq("+x+")"),x,u));ea[u]=w;f.hideScrollbar(B,w,h,p,c,k,j,G,v,u);f.autoSlide(g,b,w,c,k,j,r,G,v,K,z,s,u,F,n, l,B)},autoSlide:function(a,g,b,w,c,k,j,r,G,v,K,z,s,u,F,n,l){if(!N[s].autoSlide)return!1;f.autoSlidePause(s);ha[s]=setTimeout(function(){!l.infiniteSlider&&J[s]>K.length-1&&(J[s]-=F);f.changeSlide((J[s]+A[s]+F+1)%F,a,g,b,w,c,k,j,r,G,v,K,z,s,u,F,n,l);f.autoSlide(a,g,b,w,c,k,j,r,G,v,K,z,s,u,F,n,l)},l.autoSlideTimer+l.autoSlideTransTimer)},autoSlidePause:function(a){clearTimeout(ha[a])},isUnselectable:function(f,g){return""!=g.unselectableSelector&&1==a(f).closest(g.unselectableSelector).size()?!0:!1}, slowScrollHorizontalIntervalTimer:function(a,g,b,w,c,k,j,r,A,v,J,z,s,u,F,n,l,B,h,x){return setTimeout(function(){f.slowScrollHorizontalInterval(g,b,w,c,k,j,r,A,v,J,z,s,u,F,n,l,B,h,x)},a)},onSlideCompleteTimer:function(a,g,b,w,c,k){return setTimeout(function(){f.onSlideComplete(g,b,w,c,k)},a)},hideScrollbarIntervalTimer:function(a,g,b,w,c,k,j,r,A,v){return setTimeout(function(){f.hideScrollbarInterval(g,b,w,c,k,j,r,A,v)},a)},args:function(d,g,b,j,c){this.prevSlideNumber=void 0==a(b).parent().data("args")? void 0:a(b).parent().data("args").prevSlideNumber;this.prevSlideObject=void 0==a(b).parent().data("args")?void 0:a(b).parent().data("args").prevSlideObject;this.targetSlideObject=this.targetSlideNumber=void 0;this.slideChanged=!1;"load"!=d&&"start"!=d&&("change"==d?(this.slideChanged=!0,this.prevSlideNumber=void 0==a(b).parent().data("args")?g.startAtSlide:a(b).parent().data("args").currentSlideNumber,this.prevSlideObject=a(b).children(":eq("+this.prevSlideNumber+")")):"complete"==d&&(this.slideChanged= a(b).parent().data("args").slideChanged));this.settings=g;this.data=a(b).parent().data("iosslider");this.sliderObject=b;this.sliderContainerObject=a(b).parent();this.currentSlideObject=j;this.currentSlideNumber=c+1;this.currentSliderOffset=-1*f.getSliderOffset(b,"x")},preventDrag:function(a){a.preventDefault()},preventClick:function(a){a.stopImmediatePropagation();return!1},enableClick:function(){return!0}};f.setBrowserInfo();var S={init:function(d,g){da=f.has3DTransform();var b=a.extend(!0,{elasticPullResistance:0.6, frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1,scrollbar:!1,scrollbarDrag:!1,scrollbarHide:!0,scrollbarLocation:"top",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:!1,keyboardControls:!1,tabToAdvance:!1,responsiveSlideContainer:!0, responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3,autoSlideTransTimer:750,infiniteSlider:!1,snapVelocityThreshold:5,slideStartVelocityThreshold:0,horizontalSlideLockThreshold:5,verticalSlideLockThreshold:3,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSliderResize:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},d); void 0==g&&(g=this);return a(g).each(function(){function d(){f.autoSlidePause(c);wa=a(E).find("a");Aa=a(E).find("[onclick]");pa=a(E).find("*");a(B).css("width","");a(B).css("height","");a(E).css("width","");C=a(E).children().not("script").get();ia=[];M=[];a(C).css("width","");r[c]=0;m=[];F=a(B).parent().width();h=a(B).outerWidth(!0);b.responsiveSlideContainer&&(h=a(B).outerWidth(!0)>F?F:a(B).outerWidth(!0));a(B).css({position:b.stageCSS.position,top:b.stageCSS.top,left:b.stageCSS.left,overflow:b.stageCSS.overflow, zIndex:b.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",msTouchAction:"pan-y",width:h});a(b.unselectableSelector).css({cursor:"default"});for(var H=0;H<C.length;H++){ia[H]=a(C[H]).width();M[H]=a(C[H]).outerWidth(!0);var w=M[H];b.responsiveSlides&&(w=M[H]>h?h+-1*(M[H]-ia[H]):ia[H],a(C[H]).css({width:w}));a(C[H]).css({webkitBackfaceVisibility:"hidden",position:"absolute",top:0});m[H]=-1*r[c];r[c]=r[c]+w+(M[H]-ia[H])}b.snapSlideCenter&&(l=0.5*(h-M[0]),b.responsiveSlides&&M[0]> h&&(l=0));va[c]=2*r[c];for(H=0;H<C.length;H++)f.setSliderOffset(a(C[H]),-1*m[H]+r[c]+l),m[H]-=r[c];if(!b.infiniteSlider&&!b.snapSlideCenter){for(H=0;H<m.length&&!(m[H]<=-1*(2*r[c]-h));H++)ha=H;m.splice(ha+1,m.length);m[m.length]=-1*(2*r[c]-h)}for(H=0;H<m.length;H++)D[H]=m[H];t&&(b.startAtSlide=N[c].startAtSlide>m.length?m.length:N[c].startAtSlide,b.infiniteSlider?(b.startAtSlide=(N[c].startAtSlide-1+I)%I,J[c]=N[c].startAtSlide):(b.startAtSlide=0>N[c].startAtSlide-1?m.length-1:N[c].startAtSlide,J[c]= N[c].startAtSlide-1),aa[c]=J[c]);j[c]=r[c]+l;a(E).css({position:"relative",cursor:ga,webkitPerspective:"0",webkitBackfaceVisibility:"hidden",width:r[c]+"px"});W=r[c];r[c]=2*r[c]-h+2*l;(Z=W<h?!0:!1)&&a(E).css({cursor:"default"});n=a(B).parent().outerHeight(!0);x=a(B).height();b.responsiveSlideContainer&&(x=x>n?n:x);a(B).css({height:x});f.setSliderOffset(E,m[J[c]]);if(b.infiniteSlider&&!Z){H=f.getSliderOffset(a(E),"x");for(w=-1*((A[c]+I)%I);0>w;){var y=0,ja=f.getSliderOffset(a(C[0]),"x");a(C).each(function(a){f.getSliderOffset(this, "x")<ja&&(ja=f.getSliderOffset(this,"x"),y=a)});var L=j[c]+W;f.setSliderOffset(a(C)[y],L);j[c]=-1*m[1]+l;r[c]=j[c]+W-h;m.splice(0,1);m.splice(m.length,0,-1*L+l);w++}for(;0<-1*m[0]-W+l&&b.snapSlideCenter&&t;){var O=0,P=f.getSliderOffset(a(C[0]),"x");a(C).each(function(a){f.getSliderOffset(this,"x")>P&&(P=f.getSliderOffset(this,"x"),O=a)});L=j[c]-M[O];f.setSliderOffset(a(C)[O],L);m.splice(0,0,-1*L+l);m.splice(m.length-1,1);j[c]=-1*m[0]+l;r[c]=j[c]+W-h;A[c]--;J[c]++}for(;H<=-1*r[c];)y=0,ja=f.getSliderOffset(a(C[0]), "x"),a(C).each(function(a){f.getSliderOffset(this,"x")<ja&&(ja=f.getSliderOffset(this,"x"),y=a)}),L=j[c]+W,f.setSliderOffset(a(C)[y],L),j[c]=-1*m[1]+l,r[c]=j[c]+W-h,m.splice(0,1),m.splice(m.length,0,-1*L+l),A[c]++,J[c]--}f.setSliderOffset(E,m[J[c]]);b.desktopClickDrag||a(E).css({cursor:"default"});b.scrollbar&&(a("."+G).css({margin:b.scrollbarMargin,overflow:"hidden",display:"none"}),a("."+G+" ."+v).css({border:b.scrollbarBorder}),q=parseInt(a("."+G).css("marginLeft"))+parseInt(a("."+G).css("marginRight")), p=parseInt(a("."+G+" ."+v).css("borderLeftWidth"),10)+parseInt(a("."+G+" ."+v).css("borderRightWidth"),10),s=""!=b.scrollbarContainer?a(b.scrollbarContainer).width():h,u=(s-q)/I,b.scrollbarHide||(S=b.scrollbarOpacity),a("."+G).css({position:"absolute",left:0,width:s-q+"px",margin:b.scrollbarMargin}),"top"==b.scrollbarLocation?a("."+G).css("top","0"):a("."+G).css("bottom","0"),a("."+G+" ."+v).css({borderRadius:b.scrollbarBorderRadius,background:b.scrollbarBackground,height:b.scrollbarHeight,width:u- p+"px",minWidth:b.scrollbarHeight,border:b.scrollbarBorder,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:S,filter:"alpha(opacity:"+100*S+")",boxShadow:b.scrollbarShadow}),f.setSliderOffset(a("."+G+" ."+v),Math.floor((-1*m[J[c]]-j[c]+l)/(r[c]-j[c]+l)*(s-q-u))),a("."+G).css({display:"block"}),K=a("."+G+" ."+v),z=a("."+G));b.scrollbarDrag&&!Z&&a("."+G+" ."+v).css({cursor:ga});b.infiniteSlider&&(R=(r[c]+h)/3);""!=b.navSlideSelector&&a(b.navSlideSelector).each(function(d){a(this).css({cursor:"pointer"}); a(this).unbind(Q).bind(Q,function(H){"touchstart"==H.type?a(this).unbind("click.iosSliderEvent"):a(this).unbind("touchstart.iosSliderEvent");Q=H.type+".iosSliderEvent";f.changeSlide(d,E,C,g,v,u,h,s,q,p,D,m,M,c,R,I,l,b)})});""!=b.navPrevSelector&&(a(b.navPrevSelector).css({cursor:"pointer"}),a(b.navPrevSelector).unbind(Q).bind(Q,function(d){"touchstart"==d.type?a(this).unbind("click.iosSliderEvent"):a(this).unbind("touchstart.iosSliderEvent");Q=d.type+".iosSliderEvent";d=(J[c]+A[c]+I)%I;(0<d||b.infiniteSlider)&& f.changeSlide(d-1,E,C,g,v,u,h,s,q,p,D,m,M,c,R,I,l,b)}));""!=b.navNextSelector&&(a(b.navNextSelector).css({cursor:"pointer"}),a(b.navNextSelector).unbind(Q).bind(Q,function(d){"touchstart"==d.type?a(this).unbind("click.iosSliderEvent"):a(this).unbind("touchstart.iosSliderEvent");Q=d.type+".iosSliderEvent";d=(J[c]+A[c]+I)%I;(d<m.length-1||b.infiniteSlider)&&f.changeSlide(d+1,E,C,g,v,u,h,s,q,p,D,m,M,c,R,I,l,b)}));b.autoSlide&&!Z&&""!=b.autoSlideToggleSelector&&(a(b.autoSlideToggleSelector).css({cursor:"pointer"}), a(b.autoSlideToggleSelector).unbind(Q).bind(Q,function(){"touchstart"==e.type?a(this).unbind("click.iosSliderEvent"):a(this).unbind("touchstart.iosSliderEvent");Q=e.type+".iosSliderEvent";xa?(f.autoSlide(E,C,g,v,u,h,s,q,p,D,m,M,c,R,I,l,b),xa=!1,a(b.autoSlideToggleSelector).removeClass("on")):(f.autoSlidePause(c),xa=!0,a(b.autoSlideToggleSelector).addClass("on"))}));f.autoSlide(E,C,g,v,u,h,s,q,p,D,m,M,c,R,I,l,b);a(B).bind("mouseleave.iosSliderEvent",function(){f.autoSlide(E,C,g,v,u,h,s,q,p,D,m,M,c, R,I,l,b)});a(B).bind("touchend.iosSliderEvent",function(){f.autoSlide(E,C,g,v,u,h,s,q,p,D,m,M,c,R,I,l,b)});a(B).bind("mouseenter.iosSliderEvent",function(){f.autoSlidePause(c)});a(B).data("iosslider",{obj:Ba,settings:b,scrollerNode:E,slideNodes:C,numberOfSlides:I,centeredSlideOffset:l,sliderNumber:c,originalOffsets:D,childrenOffsets:m,sliderMax:r[c],scrollbarClass:v,scrollbarWidth:u,scrollbarStageWidth:s,stageWidth:h,scrollMargin:q,scrollBorder:p,infiniteSliderOffset:A[c],infiniteSliderWidth:R,slideNodeOuterWidths:M}); t=!1;return!0}na++;var c=na,g=[];N[c]=b;j[c]=0;r[c]=0;var T=[0,0],O=[0,0],G="scrollbarBlock"+na,v="scrollbar"+na,K,z,s,u,F,n,l=0,B=a(this),h,x,q,p,L,t=!0,y=-1,m,D=[],S=0,P=0,da=0,E=a(this).children(":first-child"),C,ia,M,I=a(E).children().not("script").size(),V=!1,ha=0,ya=!1,qa=void 0,R;A[c]=0;var Z=!1,xa=!1;ua[c]=!1;var ra,sa=!1,ka=!1,Q="touchstart.iosSliderEvent click.iosSliderEvent",W,wa,Aa,pa;fa[c]=!1;ea[c]=[];b.scrollbarDrag&&(b.scrollbar=!0,b.scrollbarHide=!1);var Ba=a(this);if(void 0!=Ba.data("iosslider"))return!0; a(this).find("img").bind("dragstart.iosSliderEvent",function(a){a.preventDefault()});b.infiniteSlider&&(b.scrollbar=!1);b.infiniteSlider&&1==I&&(b.infiniteSlider=!1);b.scrollbar&&(""!=b.scrollbarContainer?a(b.scrollbarContainer).append("<div class = '"+G+"'><div class = '"+v+"'></div></div>"):a(E).parent().append("<div class = '"+G+"'><div class = '"+v+"'></div></div>"));if(!d())return!0;a(this).find("a").bind("mousedown",f.preventDrag);a(this).find("[onclick]").bind("click",f.preventDrag).each(function(){a(this).data("onclick", this.onclick)});y=f.calcActiveOffset(b,f.getSliderOffset(a(E),"x"),m,h,A[c],I,void 0,c);y=(y+A[c]+I)%I;y=new f.args("load",b,E,a(E).children(":eq("+y+")"),y,y);a(B).data("args",y);if(""!=b.onSliderLoaded)b.onSliderLoaded(y);if(N[c].responsiveSlides||N[c].responsiveSlideContainer)y=Da?"orientationchange":"resize",a(window).bind(y+".iosSliderEvent-"+c,function(){if(!d())return!0;var c=a(B).data("args");if(""!=b.onSliderResize)b.onSliderResize(c)});(b.keyboardControls||b.tabToAdvance)&&!Z&&a(document).bind("keydown.iosSliderEvent", function(a){!$&&!Y&&(a=a.originalEvent);if(37==a.keyCode&&b.keyboardControls)a.preventDefault(),a=(J[c]+A[c]+I)%I,(0<a||b.infiniteSlider)&&f.changeSlide(a-1,E,C,g,v,u,h,s,q,p,D,m,M,c,R,I,l,b);else if(39==a.keyCode&&b.keyboardControls||9==a.keyCode&&b.tabToAdvance)a.preventDefault(),a=(J[c]+A[c]+I)%I,(a<m.length-1||b.infiniteSlider)&&f.changeSlide(a+1,E,C,g,v,u,h,s,q,p,D,m,M,c,R,I,l,b)});if(Ca||b.desktopClickDrag){var ba=!1,la=a(E),ma=a(E),za=!1;b.scrollbarDrag&&(la=la.add(K),ma=ma.add(z));a(la).bind("mousedown.iosSliderEvent touchstart.iosSliderEvent", function(d){if(ba)return!0;ba=!0;"touchstart"==d.type?a(ma).unbind("mousedown.iosSliderEvent"):a(ma).unbind("touchstart.iosSliderEvent");if(fa[c]||Z||(za=f.isUnselectable(d.target,b)))return V=ba=!1,!0;ra=a(this)[0]===a(K)[0]?K:E;!$&&!Y&&(d=d.originalEvent);f.autoSlidePause(c);pa.unbind(".disableClick");if("touchstart"==d.type)eventX=d.touches[0].pageX,eventY=d.touches[0].pageY;else{if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&& window.getSelection().removeAllRanges();else if(document.selection)if(Y)try{document.selection.empty()}catch(h){}else document.selection.empty();eventX=d.pageX;eventY=d.pageY;ya=!0;qa=E;a(this).css({cursor:ta})}T=[0,0];O=[0,0];X=0;V=!1;for(d=0;d<g.length;d++)clearTimeout(g[d]);d=f.getSliderOffset(E,"x");d>-1*j[c]+l+W?(d=-1*j[c]+l+W,f.setSliderOffset(a("."+v),d),a("."+v).css({width:u-p+"px"})):d<-1*r[c]&&(f.setSliderOffset(a("."+v),s-q-u),a("."+v).css({width:u-p+"px"}));d=a(this)[0]===a(K)[0]?j[c]: 0;P=-1*(f.getSliderOffset(this,"x")-eventX-d);f.getSliderOffset(this,"y");T[1]=eventX;O[1]=eventY;ka=!1});a(ma).bind("touchmove.iosSliderEvent mousemove.iosSliderEvent",function(d){!$&&!Y&&(d=d.originalEvent);if(fa[c]||Z||za)return!0;var g=0;if("touchmove"==d.type)eventX=d.touches[0].pageX,eventY=d.touches[0].pageY;else{if(window.getSelection)window.getSelection().empty||window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else if(document.selection)if(Y)try{document.selection.empty()}catch(w){}else document.selection.empty(); eventX=d.pageX;eventY=d.pageY;if(!ya||!oa&&("undefined"!=typeof d.webkitMovementX||"undefined"!=typeof d.webkitMovementY)&&0===d.webkitMovementY&&0===d.webkitMovementX)return!0}T[0]=T[1];T[1]=eventX;X=(T[1]-T[0])/2;O[0]=O[1];O[1]=eventY;ca=(O[1]-O[0])/2;if(!V){var k=(J[c]+A[c]+I)%I,k=new f.args("start",b,E,a(E).children(":eq("+k+")"),k,k);a(B).data("args",k);if(""!=b.onSlideStart)b.onSlideStart(k)}if((ca>b.verticalSlideLockThreshold||ca<-1*b.verticalSlideLockThreshold)&&"touchmove"==d.type&&!V)sa= !0;(X>b.horizontalSlideLockThreshold||X<-1*b.horizontalSlideLockThreshold)&&"touchmove"==d.type&&d.preventDefault();if(X>b.slideStartVelocityThreshold||X<-1*b.slideStartVelocityThreshold)V=!0;if(V&&!sa){var k=f.getSliderOffset(E,"x"),n=a(this)[0]===a(z)[0]?j[c]:l,y=a(this)[0]===a(z)[0]?(j[c]-r[c]-l)/(s-q-u):1,t=a(this)[0]===a(z)[0]?b.scrollbarElasticPullResistance:b.elasticPullResistance,F=b.snapSlideCenter&&a(this)[0]===a(z)[0]?0:l,G=b.snapSlideCenter&&a(this)[0]===a(z)[0]?l:0;"touchmove"==d.type&& (da!=d.touches.length&&(P=-1*k+eventX),da=d.touches.length);if(b.infiniteSlider){if(k<=-1*r[c]){var x=a(E).width();if(k<=-1*va[c]){var K=-1*D[0];a(C).each(function(b){f.setSliderOffset(a(C)[b],K+l);b<m.length&&(m[b]=-1*K);K+=M[b]});P-=-1*m[0];j[c]=-1*m[0]+l;r[c]=j[c]+x-h;A[c]=0}else{var N=0,R=f.getSliderOffset(a(C[0]),"x");a(C).each(function(a){f.getSliderOffset(this,"x")<R&&(R=f.getSliderOffset(this,"x"),N=a)});t=j[c]+x;f.setSliderOffset(a(C)[N],t);j[c]=-1*m[1]+l;r[c]=j[c]+x-h;m.splice(0,1);m.splice(m.length, 0,-1*t+l);A[c]++}}if(k>=-1*j[c]||0<=k)if(x=a(E).width(),0<=k){K=-1*D[0];a(C).each(function(b){f.setSliderOffset(a(C)[b],K+l);b<m.length&&(m[b]=-1*K);K+=M[b]});P+=-1*m[0];j[c]=-1*m[0]+l;r[c]=j[c]+x-h;for(A[c]=I;0<-1*m[0]-x+l;){var Q=0,S=f.getSliderOffset(a(C[0]),"x");a(C).each(function(a){f.getSliderOffset(this,"x")>S&&(S=f.getSliderOffset(this,"x"),Q=a)});t=j[c]-M[Q];f.setSliderOffset(a(C)[Q],t);m.splice(0,0,-1*t+l);m.splice(m.length-1,1);j[c]=-1*m[0]+l;r[c]=j[c]+x-h;A[c]--;J[c]++}}else Q=0,S=f.getSliderOffset(a(C[0]), "x"),a(C).each(function(a){f.getSliderOffset(this,"x")>S&&(S=f.getSliderOffset(this,"x"),Q=a)}),t=j[c]-M[Q],f.setSliderOffset(a(C)[Q],t),m.splice(0,0,-1*t+l),m.splice(m.length-1,1),j[c]=-1*m[0]+l,r[c]=j[c]+x-h,A[c]--}else x=a(E).width(),k>-1*j[c]+l&&(g=-1*(j[c]+-1*(P-n-eventX+F)*y-n)*t/y),k<-1*r[c]&&(g=-1*(r[c]+G+-1*(P-n-eventX)*y-n)*t/y);f.setSliderOffset(E,-1*(P-n-eventX-g)*y-n+G);b.scrollbar&&(f.showScrollbar(b,v),U=Math.floor((P-eventX-g-j[c]+F)/(r[c]-j[c]+l)*(s-q-u)*y),n=u,k>=-1*j[c]+F+x?(n= u-p- -1*U,f.setSliderOffset(a("."+v),0),a("."+v).css({width:n+"px"})):k<=-1*r[c]+1?(n=s-q-p-U,f.setSliderOffset(a("."+v),U),a("."+v).css({width:n+"px"})):f.setSliderOffset(a("."+v),U));"touchmove"==d.type&&(L=d.touches[0].pageX);d=!1;g=f.calcActiveOffset(b,-1*(P-eventX-g),m,h,A[c],I,void 0,c);x=(g+A[c]+I)%I;b.infiniteSlider?x!=aa[c]&&(d=!0):g!=J[c]&&(d=!0);if(d&&(J[c]=g,aa[c]=x,ka=!0,k=new f.args("change",b,E,a(E).children(":eq("+x+")"),x,x),a(B).data("args",k),""!=b.onSlideChange))b.onSlideChange(k)}ba= !1});y=a(window);if(Y||$)y=a(document);a(la).bind("touchend.iosSliderEvent",function(a){a=a.originalEvent;if(fa[c]||Z||za)return!0;if(0!=a.touches.length)for(var d=0;d<a.touches.length;d++)a.touches[d].pageX==L&&f.slowScrollHorizontal(E,C,g,v,X,ca,u,h,s,q,p,D,m,M,c,R,I,ra,ka,l,b);else f.slowScrollHorizontal(E,C,g,v,X,ca,u,h,s,q,p,D,m,M,c,R,I,ra,ka,l,b);ba=sa=!1});a(y).bind("mouseup.iosSliderEvent"+c,function(){V?wa.unbind("click.disableClick").bind("click.disableClick",f.preventClick):wa.unbind("click.disableClick").bind("click.disableClick", f.enableClick);Aa.each(function(){this.onclick=function(b){if(V)return!1;a(this).data("onclick").call(this,b||window.event)}});1.8<=parseFloat(a().jquery)?pa.each(function(){var b=a._data(this,"events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!V)return!1;a(this).one("click.disableClick",f.preventClick);var b=a._data(this,"events").click,c=b.pop();b.splice(0,0,c)}}):1.6<=parseFloat(a().jquery)&&pa.each(function(){var b=a(this).data("events");if(void 0!=b&&void 0!= b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!V)return!1;a(this).one("click.disableClick",f.preventClick);var b=a(this).data("events").click,c=b.pop();b.splice(0,0,c)}});if(!ua[c]){if(Z)return!0;a(la).css({cursor:ga});ya=!1;if(void 0==qa)return!0;f.slowScrollHorizontal(qa,C,g,v,X,ca,u,h,s,q,p,D,m,M,c,R,I,ra,ka,l,b);qa=void 0}ba=sa=!1})}})},destroy:function(d,g){void 0==g&&(g=this);return a(g).each(function(){var b=a(this),g=b.data("iosslider");if(void 0==g)return!1;void 0==d&&(d=!0);f.autoSlidePause(g.sliderNumber); ua[g.sliderNumber]=!0;a(window).unbind(".iosSliderEvent-"+g.sliderNumber);a(document).unbind(".iosSliderEvent-"+g.sliderNumber);a(document).unbind("keydown.iosSliderEvent");a(this).unbind(".iosSliderEvent");a(this).children(":first-child").unbind(".iosSliderEvent");a(this).children(":first-child").children().unbind(".iosSliderEvent");d&&(a(this).attr("style",""),a(this).children(":first-child").attr("style",""),a(this).children(":first-child").children().attr("style",""),a(g.settings.navSlideSelector).attr("style", ""),a(g.settings.navPrevSelector).attr("style",""),a(g.settings.navNextSelector).attr("style",""),a(g.settings.autoSlideToggleSelector).attr("style",""),a(g.settings.unselectableSelector).attr("style",""));g.settings.scrollbar&&a(".scrollbarBlock"+g.sliderNumber).remove();for(var g=ea[g.sliderNumber],c=0;c<g.length;c++)clearTimeout(g[c]);b.removeData("iosslider");b.removeData("args")})},update:function(d){void 0==d&&(d=this);return a(d).each(function(){var d=a(this),b=d.data("iosslider");if(void 0== b)return!1;b.settings.startAtSlide=d.data("args").currentSlideNumber;S.destroy(!1,this);1!=b.numberOfSlides&&b.settings.infiniteSlider&&(b.settings.startAtSlide=(J[b.sliderNumber]+1+A[b.sliderNumber]+b.numberOfSlides)%b.numberOfSlides);S.init(b.settings,this);d=new f.args("update",b.settings,b.scrollerNode,a(b.scrollerNode).children(":eq("+(b.settings.startAtSlide-1)+")"),b.settings.startAtSlide-1,b.settings.startAtSlide-1);a(b.stageNode).data("args",d);if(""!=b.settings.onSliderUpdate)b.settings.onSliderUpdate(d)})}, addSlide:function(d,f){return this.each(function(){var b=a(this),j=b.data("iosslider");if(void 0==j)return!1;0==a(j.scrollerNode).children().size()?(a(j.scrollerNode).append(d),b.data("args").currentSlideNumber=1):j.settings.infiniteSlider?(1==f?a(j.scrollerNode).children(":eq(0)").before(d):a(j.scrollerNode).children(":eq("+(f-2)+")").after(d),-1>A[j.sliderNumber]&&J[j.sliderNumber]--,b.data("args").currentSlideNumber>=f&&J[j.sliderNumber]++):(f<=j.numberOfSlides?a(j.scrollerNode).children(":eq("+ (f-1)+")").before(d):a(j.scrollerNode).children(":eq("+(f-2)+")").after(d),b.data("args").currentSlideNumber>=f&&b.data("args").currentSlideNumber++);b.data("iosslider").numberOfSlides++;S.update(this)})},removeSlide:function(d){return this.each(function(){var f=a(this).data("iosslider");if(void 0==f)return!1;a(f.scrollerNode).children(":eq("+(d-1)+")").remove();J[f.sliderNumber]>d-1&&J[f.sliderNumber]--;S.update(this)})},goToSlide:function(d,g){void 0==g&&(g=this);return a(g).each(function(){var b= a(this).data("iosslider");if(void 0==b)return!1;d=d>b.childrenOffsets.length?b.childrenOffsets.length-1:d-1;f.changeSlide(d,a(b.scrollerNode),a(b.slideNodes),ea[b.sliderNumber],b.scrollbarClass,b.scrollbarWidth,b.stageWidth,b.scrollbarStageWidth,b.scrollMargin,b.scrollBorder,b.originalOffsets,b.childrenOffsets,b.slideNodeOuterWidths,b.sliderNumber,b.infiniteSliderWidth,b.numberOfSlides,b.centeredSlideOffset,b.settings);J[b.sliderNumber]=d})},lock:function(){return this.each(function(){var d=a(this).data("iosslider"); if(void 0==d)return!1;fa[d.sliderNumber]=!0})},unlock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;fa[d.sliderNumber]=!1})},getData:function(){return this.each(function(){var d=a(this).data("iosslider");return void 0==d?!1:d})},autoSlidePause:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;N[d.sliderNumber].autoSlide=!1;f.autoSlidePause(d.sliderNumber);return d})},autoSlidePlay:function(){return this.each(function(){var d= a(this).data("iosslider");if(void 0==d)return!1;N[d.sliderNumber].autoSlide=!0;f.autoSlide(a(d.scrollerNode),a(d.slideNodes),ea[d.sliderNumber],d.scrollbarClass,d.scrollbarWidth,d.stageWidth,d.scrollbarStageWidth,d.scrollMargin,d.scrollBorder,d.originalOffsets,d.childrenOffsets,d.slideNodeOuterWidths,d.sliderNumber,d.infiniteSliderWidth,d.numberOfSlides,d.centeredSlideOffset,d.settings);return d})}};a.fn.iosSlider=function(d){if(S[d])return S[d].apply(this,Array.prototype.slice.call(arguments,1)); if("object"===typeof d||!d)return S.init.apply(this,arguments);a.error("invalid method call!")}})(jQuery);
/*** jquery.tablesort.js ***/
(function(){function e(e,t){if(e.tagName!=="TABLE"){throw new Error("Element must be a table");}this.init(e,t||{});}e.prototype={init:function(e,t){var n=this,r;this.thead=!1,this.options=t,this.options.d=t.descending||!1,e.rows&&e.rows.length>0&&(e.tHead&&e.tHead.rows.length>0?(r=e.tHead.rows[e.tHead.rows.length-1],n.thead=!0):r=e.rows[0]);if(!r){return;}var i=function(e){var t=o(u,"tr").getElementsByTagName("th");for(var r=0;r<t.length;r++){(c(t[r],"sort-up")||c(t[r],"sort-down"))&&t[r]!==this&&(t[r].className=t[r].className.replace(" sort-down","").replace(" sort-up",""));}n.current=this,n.sortTable(this);};for(var s=0;s<r.cells.length;s++){var u=r.cells[s];c(u,"no-sort")||(u.className+=" sort-header",h(u,"click",i));}},getFirstDataRowIndex:function(){return this.thead?0:1;},sortTable:function(e,t){var n=this,r=e.cellIndex,h,p=o(e,"table"),d="",v=n.getFirstDataRowIndex();if(p.rows.length<=1){return;}while(d===""&&v<p.tBodies[0].rows.length){d=u(p.tBodies[0].rows[v].cells[r]),d=f(d);if(d.substr(0,4)==="<!--"||d.length===0){d="";}v++;}if(d===""){return;}var m=function(e,t){var r=u(e.cells[n.col]).toLowerCase(),i=u(t.cells[n.col]).toLowerCase();return r===i?0:r<i?1:-1;},g=function(e,t){var r=u(e.cells[n.col]),i=u(t.cells[n.col]);return r=l(r),i=l(i),a(i,r);},y=function(e,t){var r=u(e.cells[n.col]).toLowerCase(),i=u(t.cells[n.col]).toLowerCase();return s(i)-s(r);};d.match(/^-?[£\x24Û¢´€] ?\d/)||d.match(/^-?\d+\s*[€]/)||d.match(/^-?(\d+[,\.]?)+(E[\-+][\d]+)?%?$/)?h=g:i(d)?h=y:h=m,this.col=r;var b=[],w={},E,S=0;for(v=0;v<p.tBodies.length;v++){for(E=0;E<p.tBodies[v].rows.length;E++){var x=p.tBodies[v].rows[E];c(x,"no-sort")?w[S]=x:b.push({tr:x,index:S}),S++;}}t||(n.options.d?c(e,"sort-up")?(e.className=e.className.replace(/ sort-up/,""),e.className+=" sort-down"):(e.className=e.className.replace(/ sort-down/,""),e.className+=" sort-up"):c(e,"sort-down")?(e.className=e.className.replace(/ sort-down/,""),e.className+=" sort-up"):(e.className=e.className.replace(/ sort-up/,""),e.className+=" sort-down"));var T=function(e){return function(t,n){var r=e(t.tr,n.tr);return r===0?t.index-n.index:r;};},N=function(e){return function(t,n){var r=e(t.tr,n.tr);return r===0?n.index-t.index:r;};};c(e,"sort-down")?(b.sort(N(h)),b.reverse()):b.sort(T(h));var C=0;for(v=0;v<S;v++){var k;w[v]?(k=w[v],C++):k=b[v-C].tr,p.tBodies[0].appendChild(k);}},refresh:function(){this.current!==undefined&&this.sortTable(this.current,!0);}};var t=/(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\.?\,?\s*/i,n=/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/,r=/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i,i=function(e){return(e.search(t)!==-1||e.search(n)!==-1||e.search(r!==-1))!==-1&&!isNaN(s(e));},s=function(e){return e=e.replace(/\-/g,"/"),e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3"),(new Date(e)).getTime();},o=function(e,t){return e===null?null:e.nodeType===1&&e.tagName.toLowerCase()===t.toLowerCase()?e:o(e.parentNode,t);},u=function(e){var t=this;if(typeof e=="string"||typeof e=="undefined"){return e;}var n=e.getAttribute("data-sort")||"";if(n){return n;}if(e.textContent){return e.textContent;}if(e.innerText){return e.innerText;}var r=e.childNodes,i=r.length;for(var s=0;s<i;s++){switch(r[s].nodeType){case 1:n+=t.getInnerText(r[s]);break;case 3:n+=r[s].nodeValue;}}return n;},a=function(e,t){var n=parseFloat(e),r=parseFloat(t);return e=isNaN(n)?0:n,t=isNaN(r)?0:r,e-t;},f=function(e){return e.replace(/^\s+|\s+$/g,"");},l=function(e){return e.replace(/[^\-?0-9.]/g,"");},c=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1;},h=function(e,t,n){e.attachEvent?(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event);},e.attachEvent("on"+t,e[t+n])):e.addEventListener(t,n,!1);};typeof module!="undefined"&&module.exports?module.exports=e:window.Tablesort=e;})();
/*** jquery.arrayunique.js ***/
(function(window,document,$,undefined){$.extend({arrayUnique:function(array){var unique=[];$.each(array,function(index,element){if($.inArray(element,unique)===-1){unique.push(element);}});return unique;}});})(this,this.document,this.jQuery);
/*** jquery.attachOmnitureTracking.js ***/
(function(window,document,$,undefined){$.fn.extend({attachOmnitureTracking:function(){this.each(function(index,value){var $element=$(this);var moduleTitle=$element.attr("data-omnituresection");$element.on("click","a[href=#], [data-omnitureevent]",function(){if(typeof s!==undefined){var omnitureEvent=$(this).attr("data-omnitureevent");var linkName=(omnitureEvent!==undefined&&omnitureEvent!=="")?moduleTitle+" : "+$.trim(omnitureEvent):moduleTitle+" : "+$.trim($(this).text());}});});return this;}});})(this,this.document,this.jQuery);
/*** jquery.center.js ***/
(function(window,document,$,undefined){$.fn.extend({center:function(){return this.each(function(index,element){$(element).css({"position":"fixed","top":Math.max(0,(($(window).height()-$(element).outerHeight())/2)+$(window).scrollTop())+"px","left":Math.max(0,(($(window).width()-$(element).outerWidth())/2)+$(window).scrollLeft())+"px"});});}});})(this,this.document,this.jQuery);
/*** jquery.customDropdown.js ***/
(function(window,document,$){$.fn.extend({customDropdown:function(customParams){var defaults={callback:function(){return $(this).text();}};var options=$.extend({},defaults,customParams);return this.each(function(){var $select=$(this).addClass("hidden");var $label=$();var $list=$();var $selectedElement=$();var $wrapper=$select.wrap('<div class="custom-dropdown">').parent();var listHtml=[];$label=$('<div class="label-wrapper"><span class="selector"></span><div class="label"><span class="text">'+$select.find(":selected").text()+"</span></div></div>").appendTo($wrapper);$list=$('<ul class="hidden"></ul>').appendTo($wrapper);$select.find("option").each(function(){var listClass=$(this).attr("class")||"";listHtml.push('<li data-value="'+$(this).val()+'" class="'+listClass+'">'+options.callback.call(this)+"</li>");});$list.html(listHtml.join(""));$selectedElement=$list.find('[data-value="'+$select.find(":selected").val()+'"]');$label.find(".label").html($selectedElement.html());$("html").on("click",function(event){var target=$(event.target);if(!target.parents().andSelf().is($label)){$list.addClass("hidden");}});$label.on("click",function(event){if(!$select.attr("disabled")){$list.toggleClass("hidden");}});$select.on("change",function(){var value=$(this).val();$label.find(".label").html($('[data-value="'+value+'"]',$list).html());});$wrapper.on("click","li",function(){$select.val($(this).data("value")).change();$list.addClass("hidden");});});}});}(window,document,jQuery));
/*** jquery.events.js ***/
(function(window,document,$,undefined){namespace("Goal.settings.events");$.fn.extend({bindNamespacedEvent:function(){var args=Array.prototype.slice.call(arguments);args[0]=$.namespaceEvents(args[0],Goal.settings.events.namespace);return this.on.apply(this,args);},unbindNamespacedEvent:function(){var args=Array.prototype.slice.call(arguments);args[0]=$.namespaceEvents(args[0],Goal.settings.events.namespace);return this.off.apply(this,args);},triggerNamespacedEvent:function(){var args=Array.prototype.slice.call(arguments);args[0]=$.namespaceEvents(args[0],Goal.settings.events.namespace);return this.trigger.apply(this,args);}});$.extend({namespaceEvents:function(events,namespace){namespace=namespace||"namespace";events=_.trim(events);events=_.words(events);events=_.map(events,function(eventName){return eventName+"."+namespace;});events=events.join(" ");return events;},bindEvents:function(groupedEvents){var jQuerySelectors;var currentElement;var eventNameAndFunctionPairs;jQuerySelectors=_.keys(groupedEvents);_.each(jQuerySelectors,function(selector){currentElement=$(selector);eventNameAndFunctionPairs=_.pairs(groupedEvents[selector]);_.each(eventNameAndFunctionPairs,function(eventNameAndFunction){currentElement.bindNamespacedEvent(eventNameAndFunction[0],eventNameAndFunction[1]);});});},bindEventsFor:function(deviceType,groupedEvents){Goal.when(deviceType,function(){$.bindEvents(groupedEvents);});}});})(this,this.document,this.jQuery);
/*** jquery.geturlparam.js ***/
(function(window,document,$,undefined){$.getUrlParam=function(name){var results=new RegExp("[?&]"+name+"=([^&#]*)").exec(window.location.href);if(results==null){return null;}else{return results[1]||null;}};})(this,this.document,this.jQuery);
/*** jquery.htmlComments.js ***/
(function(window,document,$,undefined){$.fn.htmlComments=function(){var comments="";this.each(function(intI,objNode){var objChildNode=objNode.firstChild;while(objChildNode){if(objChildNode.nodeType===8){comments+=$.trim(objChildNode.nodeValue);}objChildNode=objChildNode.nextSibling;}});return comments;};})(this,this.document,this.jQuery);
/*** jquery.modal.js ***/
(function(window,document,$,undefined){$.extend({modal:function(config){var overlay=$('<div class="overlay"></div>').css({"position":"fixed","width":"100%","height":"100%","top":"0px","left":"0px","zIndex":"9999999"});var modal=$('<div class="modal"><a href="#" data-button="close" class="close">&nbsp;</a></div>');var esc=function(event){if(event.keyCode===27){modal.remove();overlay.fadeOut(function(){$(this).remove();});$(document).unbind("keydown",esc);}};$('[data-button="close"]',modal).click(function(event){event.preventDefault();modal.remove();overlay.fadeOut(function(){$(this).remove();});});config=$.extend(config,{});config.id&&modal.attr("id",config.id);config.html&&modal.append(config.html);$(document).bind("keydown",esc);$(document.body).append(overlay).append(modal);overlay.show();modal.css({"z-index":parseInt(overlay.css("z-index"),10)+1}).show();return modal;}});})(this,this.document,this.jQuery);
/*** jquery.random.js ***/
(function(window,document,$,undefined){$.fn.extend({random:function(){var index=Math.floor(Math.random()*this.length);return $([this[index]]);}});})(this,this.document,this.jQuery);
/*** jquery.safe.js ***/
(function(window,document,$,undefined){$.extend({safe:function(traceInfo,callback){return function(){try{callback.apply(this,Array.prototype.slice.call(arguments));}catch(error){if(Goal.settings.environment.isProduction){Goal.error(Goal.fmt("%@ (caught using $.safe wrapper): `%@`",traceInfo,error));}else{throw error;}}};}});})(this,this.document,this.jQuery);
/*** jquery.tabs.js ***/
(function(window,document,$,undefined){$.fn.extend({tabs:function(customParams){var defaults={activeClass:"active",randomTab:false,autoRotate:false,rotateSpeed:5000};return this.each(function(){var context=$(this);var dataOptions=$.parseJSON((context.data("tabsOptions")||"{}").replace(/'/g,'"'));var options=$.extend({},defaults,dataOptions,customParams);var tabs=context.find("[data-tab]");var tabsContent=context.find("[data-tabcontent]");var activeTab;var interval;var setActiveTab=function(tab){tabs.removeClass(options.activeClass);tabsContent.removeClass(options.activeClass);tab.addClass(options.activeClass);context.find(Goal.fmt('[data-tabcontent="%@"]',tab.data("tab"))).addClass(options.activeClass);};activeTab=options.randomTab?tabs.eq(Math.floor(Math.random()*(tabs.length))):tabs.first();setActiveTab(activeTab);tabs.find("a").on("click",function(event){event.preventDefault();});tabs.on("click",function(){setActiveTab($(this));$(this).trigger("tabchanged");});if(options.autoRotate){interval=setInterval(function(){var currentTab=tabs.filter("."+options.activeClass);var nextTab=currentTab.index()<tabs.length-1?currentTab.next():tabs.first();setActiveTab(nextTab);},options.rotateSpeed);if(!Goal.intervals.tabsIntervals){Goal.intervals.tabsIntervals=[];}Goal.log("Goal:plugin:tabs setInterval for",this);Goal.intervals.tabsIntervals.push(interval);context.on("click",function(){clearInterval(interval);});}});}});})(this,this.document,this.jQuery);
/*** jquery.template.js ***/
(function(window,document,$,undefined){$.extend({template:function(selector){var selector=selector||false;return $('script[type="text/template"]').filter(selector).html();}});})(this,this.document,this.jQuery);
/*** jquery.tooltip.js ***/
(function(window,document,$,undefined){$.fn.extend({tooltip:function(customParams){var defaults={tooltipClass:"tooltip",hiddenClass:"hidden",tooltipTemplate:null,tooltipText:null};var options=$.extend({},defaults,customParams);var classSelector="."+options.tooltipClass;options.tooltipTemplate=options.tooltipTemplate||$("<div>",{"class":options.tooltipClass});return $.each(this,function(index,element){var $element=$(element);var tmpl=options.tooltipTemplate.text(options.tooltipText||$element.data("tip"));var elementWidth;var tooltipElementWidth;var positionLeft;var tooltipElement;$element.on({mouseenter:function(){var $this=$(this);if(!elementWidth){tmpl.toggleClass(options.hiddenClass);$this.append(tmpl);tooltipElement=$this.find(classSelector);tooltipElementWidth=tooltipElement.outerWidth();elementWidth=$this.outerWidth();positionLeft=(-tooltipElementWidth/2)+(elementWidth/2)+"px";tooltipElement.css({left:positionLeft}).toggleClass(options.hiddenClass);}else{tmpl.css({left:positionLeft});$this.append(tmpl);}},mouseleave:function(){tooltipElement.remove();}});});}});})(this,this.document,this.jQuery);
/*** jquery.truncate.js ***/
(function(window,document,$,undefined){$.fn.extend({truncate:function(options){options=$.extend({lines:4,moreIndicator:"&hellip;",showRest:false,addTitle:false,truncAtSpace:true},options);return this.each(function(){var $element=$(this);var originalText=$element.text();var index;var html;var maxHeight;html=$element.html();$element.html("&nbsp;");maxHeight=$element.height()*options.lines;$element.html(html);if(($element.height()>maxHeight)&&(originalText.length>3)){var textContent=originalText;while(($element.height()>maxHeight)||(options.truncAtSpace&&(textContent.charAt(textContent.length-3)!==" "))){index=textContent.length-1;textContent=textContent.substring(0,index);$element.html(textContent+'<span class="more-indicator">'+options.moreIndicator+"</span>");}$element.html(originalText.substring(0,index-3)+'<span class="more-indicator">'+options.moreIndicator+"</span>");if(options.showRest){$element.append('<span class="more-content">'+originalText.substring(index-3)+"</span>");}if(options.addTitle){$element.attr("title",originalText);}}});}});})(this,this.document,this.jQuery);
/*** jquery.smartbanner.js ***/
/*!
* jQuery Smart Banner
* Copyright (c) 2012 Arnold Daniels <arnold@jasny.net>
* Based on 'jQuery Smart Web App Banner' by Kurt Zenisek @ kzeni.com
*/
;!function($){var SmartBanner=function(options){this.origHtmlMargin=parseFloat($("html").css("margin-top"));this.options=$.extend({},$.smartbanner.defaults,options);var standalone=navigator.standalone,UA=navigator.userAgent;if(this.options.force){this.type=this.options.force;}else{if(UA.match(/iPhone|iPod/i)!=null||(UA.match(/iPad/)&&this.options.iOSUniversalApp)){if(UA.match(/Safari/i)!=null&&(UA.match(/CriOS/i)!=null||window.Number(UA.substr(UA.indexOf("OS ")+3,3).replace("_","."))<6)){this.type="ios";}}else{if(UA.match(/\bSilk\/(.*\bMobile Safari\b)?/)||UA.match(/\bKF\w/)||UA.match("Kindle Fire")){this.type="kindle";}else{if(UA.match(/Android/i)!=null){this.type="android";}else{if(UA.match(/Windows NT 6.2/i)!=null&&UA.match(/Touch/i)!==null){this.type="windows";}}}}}if(!this.type||standalone||this.getCookie("sb-closed")||this.getCookie("sb-installed")){return;}this.scale=this.options.scale=="auto"?$(window).width()/window.screen.width:this.options.scale;if(this.scale<1){this.scale=1;}var meta=$(this.type=="android"?'meta[name="google-play-app"]':this.type=="ios"?'meta[name="apple-itunes-app-smart"]':this.type=="kindle"?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(meta.length==0){return;}if(this.type=="windows"){this.pfn=$('meta[name="msApplication-PackageFamilyName"]').attr("content");this.appId=meta.attr("content")[1];}else{this.appId=/app-id=([^\s,]+)/.exec(meta.attr("content"))[1];}this.title=this.options.title?this.options.title:meta.data("title")||$("title").text().replace(/\s*[|\-·].*$/,"");this.author=this.options.author?this.options.author:meta.data("author")||($('meta[name="author"]').length?$('meta[name="author"]').attr("content"):window.location.hostname);this.iconUrl=meta.data("icon-url");this.price=meta.data("price");this.create();this.show(this.options.onShow);this.listen();};SmartBanner.prototype={constructor:SmartBanner,create:function(){var iconURL,link=(this.options.url?this.options.url:(this.type=="windows"?"ms-windows-store:PDP?PFN="+this.pfn:(this.type=="android"?"market://details?id=":(this.type=="kindle"?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")))+this.appId),price=this.price||this.options.price,inStore=price?price+" - "+(this.type=="android"?this.options.inGooglePlay:this.type=="kindle"?this.options.inAmazonAppStore:this.type=="ios"?this.options.inAppStore:this.options.inWindowsStore):"",gloss=this.options.iconGloss===null?(this.type=="ios"):this.options.iconGloss;if(this.options.url){link=this.options.url;}else{if(this.type=="android"){link="market://details?id="+this.appId;if(this.options.GooglePlayParams){link=link+"&referrer="+this.options.GooglePlayParams;}}else{link="https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId;}}var banner='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+inStore+'</span></div><a href="'+link+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";(this.options.layer)?$(this.options.appendToSelector).append(banner):$(this.options.appendToSelector).prepend(banner);if(this.options.icon){iconURL=this.options.icon;}else{if(this.iconUrl){iconURL=this.iconUrl;}else{if($('link[rel="apple-touch-icon-precomposed"]').length>0){iconURL=$('link[rel="apple-touch-icon-precomposed"]').attr("href");if(this.options.iconGloss===null){gloss=false;}}else{if($('link[rel="apple-touch-icon"]').length>0){iconURL=$('link[rel="apple-touch-icon"]').attr("href");}else{if($('meta[name="msApplication-TileImage"]').length>0){iconURL=$('meta[name="msApplication-TileImage"]').attr("content");}else{if($('meta[name="msapplication-TileImage"]').length>0){iconURL=$('meta[name="msapplication-TileImage"]').attr("content");}}}}}}if(iconURL){$("#smartbanner .sb-icon").css("background-image","url("+iconURL+")");if(gloss){$("#smartbanner .sb-icon").addClass("gloss");}}else{$("#smartbanner").addClass("no-icon");}this.bannerHeight=$("#smartbanner").outerHeight()+2;if(this.scale>1){$("#smartbanner").css("top",parseFloat($("#smartbanner").css("top"))*this.scale).css("height",parseFloat($("#smartbanner").css("height"))*this.scale).hide();$("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",$(window).width()/this.scale);}$("#smartbanner").css("position",(this.options.layer)?"absolute":"static");},listen:function(){$("#smartbanner .sb-close").on("click",$.proxy(this.close,this));$("#smartbanner .sb-button").on("click",$.proxy(this.install,this));},show:function(callback){var banner=$("#smartbanner");banner.stop();if(this.options.layer){banner.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show();$("html").animate({marginTop:this.origHtmlMargin+(this.bannerHeight*this.scale)},this.options.speedIn,"swing",callback);}else{if($.support.transition){banner.animate({top:0},this.options.speedIn).addClass("shown");var transitionCallback=function(){$("html").removeClass("sb-animation");if(callback){callback();}};$("html").addClass("sb-animation").one($.support.transition.end,transitionCallback).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+(this.bannerHeight*this.scale));}else{banner.slideDown(this.options.speedIn).addClass("shown");}}},hide:function(callback){var banner=$("#smartbanner");banner.stop();if(this.options.layer){banner.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown");$("html").animate({marginTop:this.origHtmlMargin},this.options.speedIn,"swing",callback);}else{if($.support.transition){banner.css("top",-1*this.bannerHeight*this.scale).removeClass("shown");var transitionCallback=function(){$("html").removeClass("sb-animation");if(callback){callback();}};$("html").addClass("sb-animation").one($.support.transition.end,transitionCallback).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin);}else{banner.slideUp(this.options.speedOut).removeClass("shown");}}},close:function(e){e.preventDefault();this.hide(this.options.onHide);this.setCookie("sb-closed","true",this.options.daysHidden);},install:function(e){if(this.options.hideOnInstall){this.hide();}this.setCookie("sb-installed","true",this.options.daysReminder);},setCookie:function(name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);value=encodeURI(value)+((exdays==null)?"":"; expires="+exdate.toUTCString());document.cookie=name+"="+value+"; path=/;";},getCookie:function(name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==name){return decodeURI(y);}}return null;},switchType:function(){var that=this;this.hide(function(){that.type=that.type=="android"?"ios":"android";var meta=$(that.type=="android"?'meta[name="google-play-app"]':'meta[name="apple-itunes-app-smart"]').attr("content");that.appId=/app-id=([^\s,]+)/.exec(meta)[1];$("#smartbanner").detach();that.create();that.show();});}};$.smartbanner=function(option){var $window=$(window),data=$window.data("smartbanner"),options=typeof option=="object"&&option;if(!data){$window.data("smartbanner",(data=new SmartBanner(options)));}if(typeof option=="string"){data[option]();}};$.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:true,layer:false,iOSUniversalApp:true,appendToSelector:"body",onShow:function(){},onHide:function(){}};$.smartbanner.Constructor=SmartBanner;function transitionEnd(){var el=document.createElement("smartbanner");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]};}}return false;}if($.support.transition!==undefined){return;}$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this;$(this).one($.support.transition.end,function(){called=true;});var callback=function(){if(!called){$($el).trigger($.support.transition.end);}};setTimeout(callback,duration);return this;};$(function(){$.support.transition=transitionEnd();});}(window.jQuery);
/*** adtag.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="adtag";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={tags:[".mpu-620x50",".floatingbar"]};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var tags=Goal.settings[pluginNamespace].tags;for(var i=0,length=tags.length;i<length;i++){var $tag=$(tags[i]);var adWidth=$tag.find("img").width();if(adWidth!==null&&adWidth!==1){$tag.show();}}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** author.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="author";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={toggleAuthorDescription:function(event){Goal.log(Goal.fmt("Goal:events:%@:toggleAuthorDescription Toggling author description",pluginNamespace));event.preventDefault();$(this).parent().toggleClass("expanded");}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** betCombo.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="betCombo";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var context=$(this);var heightArray=[];var activeTab;var allTabs=$(".tab-content",context);allTabs.each(function(i,obj){var el=$(obj);if(i===0){activeTab=el.data("tabcontent");}el.addClass("active");heightArray.push(el.outerHeight());});var tabHeight=Math.max.apply(null,heightArray);context.tabs({autoRotate:true,rotateSpeed:8000,randomTab:false});allTabs.each(function(i,obj){$(obj).outerHeight(tabHeight);});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** betting.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="betting";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(event){var bookmaker=Goal.events.betting.internalAPI.pickBookmaker();Goal.events.betting.signup.init();Goal.events.betting.windrawwin.init();Goal.events.betting.predictscore.init();Goal.events.betting.correctscore.init();Goal.events.betting.combo.init();Goal.events.betting.popularpredictions.init();},internalAPI:{pickBookmaker:function(element){var bookmakers=[];var pickedBookmaker=Goal.settings.environment.bookmaker;if(element!==undefined){$.each($($(element).find('[data-role="bookmaker"]')),function(index,el){bookmakers.push($(el).data().bookmaker);});pickedBookmaker=$($.arrayUnique(bookmakers)).random().get(0);}else{if(!pickedBookmaker){$.each($('[data-role="bookmaker"]'),function(index,element){bookmakers.push($(element).data().bookmaker);});pickedBookmaker=Goal.settings.environment.bookmaker=$($.arrayUnique(bookmakers)).random().get(0);}}return pickedBookmaker;}},signup:{init:function(){Goal.log(Goal.fmt("Goal:events:%@:init:signup",pluginNamespace));$(".module-bet-signup").each(function(){var $bookmaker=$(this).find(Goal.fmt('[data-role="bookmaker"][data-bookmaker="%@"]',Goal.events.betting.internalAPI.pickBookmaker()));if($bookmaker.length){$bookmaker.find("a.bet-title").click(Goal.events.betting.signup.signup);$bookmaker.find("a.bet-logo").click(Goal.events.betting.signup.signup);$bookmaker.removeClass("hidden").show();}else{$bookmaker.parents(".module-bet-signup").hide();}});},signup:function(event){var $bookmaker=$(this).parents('[data-role="bookmaker"]');event.preventDefault();window.open($bookmaker.data().bookmakerUrl,"Betting");}},predictscore:{init:function(){Goal.log(Goal.fmt("Goal:events:%@:init:predictscore",pluginNamespace));$(".module-bet-predictscore").each(function(){var $bookmaker=$(this).find(Goal.fmt('[data-role="bookmaker"][data-bookmaker="%@"]',$(this).parents("[data-force-bookmaker]").attr("data-force-bookmaker")||Goal.events.betting.internalAPI.pickBookmaker()));if($bookmaker.length){$bookmaker.find('[data-role="betnow"]').click(Goal.events.betting.predictscore.placeBet);$bookmaker.find("img").click(Goal.events.betting.predictscore.placeBet);$bookmaker.find("select").change(function(){Goal.events.betting.predictscore.selectBetAmount.call($bookmaker);}).trigger("change");$bookmaker.removeClass("hidden").show();}else{$bookmaker.parents(".module-bet-signup").hide();}});},selectBetAmount:function(){var $bookmaker=$(this);var $selected=$bookmaker.find("select > option:selected");$bookmaker.find('[data-role="prize"]').html($selected.data().value);},placeBet:function(event){var $bookmaker=$(this).parents('[data-role="bookmaker"]');var $selected=$bookmaker.find("select > option:selected");var bookmakerUrl=$bookmaker.data().bookmakerUrl;event.preventDefault();if($bookmaker.data().bookmaker=="Unibet"){bookmakerUrl=bookmakerUrl.replace(/\[\d+\]$/,"["+(parseInt($selected.val(),10)*1000)+"]");}if($bookmaker.data().bookmaker=="Betway"){bookmakerUrl=bookmakerUrl.replace(/\[STAKE\]/,parseInt($selected.val(),10)*100);}else{bookmakerUrl=bookmakerUrl.replace(/\[STAKE\]/,parseInt($selected.val(),10));}window.open(bookmakerUrl,"Betting");}},correctscore:{init:function(){Goal.log(Goal.fmt("Goal:events:%@:init:correctscore",pluginNamespace));$(".module-bet-correctscore").each(function(){var $bookmaker=$(this).find(Goal.fmt('[data-role="bookmaker"][data-bookmaker="%@"]',Goal.events.betting.internalAPI.pickBookmaker()));if($bookmaker.length){$bookmaker.find('[data-role="bet"]').click(Goal.events.betting.correctscore.placeBet);$bookmaker.removeClass("hidden").show();}else{$bookmaker.parents(".module-bet-signup").hide();}});},placeBet:function(event){var $bookmaker=$(this).parents('[data-role="bookmaker"]');event.preventDefault();var stake=($bookmaker.data().bookmaker=="Betway")?500:5;window.open($bookmaker.data().bookmakerUrl.replace(/\[STAKE\]/,stake),"Betting");}},windrawwin:{init:function(){Goal.log(Goal.fmt("Goal:events:%@:init:windrawwin",pluginNamespace));$(".module-bet-windrawwin").each(function(){var $bookmaker=$(this).find(Goal.fmt('[data-role="bookmaker"][data-bookmaker="%@"]',Goal.events.betting.internalAPI.pickBookmaker()));if($bookmaker.length){$bookmaker.find("a.bet").click(Goal.events.betting.windrawwin.placeBet);$bookmaker.find("a.bet-logo").click(Goal.events.betting.windrawwin.placeBet);$bookmaker.find("select").change(function(){Goal.events.betting.windrawwin.selectBetAmount.call($bookmaker);}).trigger("change");$bookmaker.removeClass("hidden").show();}else{$bookmaker.parents(".module-bet-signup").hide();}});},selectBetAmount:function(){var $bookmaker=$(this);var $selected=$bookmaker.find("select > option:selected");$bookmaker.find(".bet.home > .amount").html($selected.data().valueHome);$bookmaker.find(".bet.draw > .amount").html($selected.data().valueDraw);$bookmaker.find(".bet.away > .amount").html($selected.data().valueAway);},placeBet:function(event){var $bookmaker=$(this).parents('[data-role="bookmaker"]');var $selected=$bookmaker.find("select > option:selected");var bookmakerUrl=$(this).attr("href");var betValue=parseInt($selected.val(),10);var stake=betValue;event.preventDefault();if($bookmaker.data().bookmaker=="Unibet"){stake="["+(betValue*1000)+"]";}else{if($bookmaker.data().bookmaker=="Betway"){stake=betValue*100;}}window.open(bookmakerUrl.replace(/\[STAKE\]/,stake),"Betting");}},combo:{init:function(){Goal.log(Goal.fmt("Goal:events:%@:init:combo",pluginNamespace));$(".module-bet-combo").each(function(){var $bookmaker=$(this).find(Goal.fmt('[data-role="bookmaker"][data-bookmaker="%@"]',Goal.events.betting.internalAPI.pickBookmaker(this)));if($bookmaker.length){$bookmaker.find('[data-role="bet"]').click(Goal.events.betting.combo.placeBet);$bookmaker.removeClass("hidden").show();}});},placeBet:function(event){var $bookmaker=$(this).parents('[data-role="bookmaker"]');event.preventDefault();window.open($bookmaker.data().bookmakerUrl,"Betting");}},popularpredictions:{init:function(){Goal.log(Goal.fmt("Goal:events:%@:init:popularPredictions",pluginNamespace));$(".module-predict .predict-top").each(function(){var $bookmaker=$(this).find(Goal.fmt('[data-role="bookmaker"][data-bookmaker="%@"]',Goal.events.betting.internalAPI.pickBookmaker()));if($bookmaker.length){$bookmaker.removeClass("hidden").show();}});}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** branding.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="branding";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));Goal.events.branding.internalAPI.competition.init();},internalAPI:{competition:{init:function(){$("#clubs-league-list").on("change",Goal.events.branding.internalAPI.competition.onChange).trigger("change");},onChange:function(event){var $header=$(this).parents(".module.module-competitions").find("header.widget-header");var $selected=$(this).find("option:selected");var competition=$selected.val();var branding=$.template(Goal.fmt('[data-competition="%@"]',competition));$header.find(".module-branding-logo").remove();$header.prepend(branding);}}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** calendar-match-day.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="calendarMatchDay";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));var $context;var $container;pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));$context=this;Goal.settings[pluginNamespace].eventsCache={};$container=$(".clndr-container",$context);var currentDay=$context.data("current-day");var time=currentDay?window.moment(currentDay):window.moment();var currentMonth=time.month()+1;var currentYear=time.year();var monthsLocal=$container.data("months");var daysOfWeekLocal=$container.data("days").split(",");window.moment.lang("en",{months:monthsLocal.split(",")});Goal.settings[pluginNamespace].calInstance=$container.clndr({template:$(".template",$context).html(),weekOffset:1,daysOfTheWeek:daysOfWeekLocal,startWithMonth:currentDay,clickEvents:{onMonthChange:function(mth){currentMonth=mth.month()+1;currentYear=mth.year();Goal.events[pluginNamespace].getMatches(currentMonth,currentYear,$context.data("competitionId"));}},doneRendering:function(){$(".days",$context).find(".day.today").removeClass("selected");$(".calendar-day-"+currentDay,$context).addClass("selected");var competitionUri=$context.data("competitionUri");$(".clndr-footer",$container).attr("href",competitionUri);}});$context.on("calendar.open",function(){$container.toggleClass("shadow hidden");if(!$container.hasClass("hidden")){Goal.events[pluginNamespace].getMatches(currentMonth,currentYear,$context.data("competitionId"));}});$("html").on("click",function(e){var target=$(e.target);if(!target.parents().andSelf().is(".clndr")&&!target.parents().andSelf().is(".clndr-next-button")&&!target.parents().andSelf().is(".clndr-previous-button")){$container.addClass("hidden");}});},getMatches:function(month,year,competitionId){var cacheEvents=Goal.events[pluginNamespace].checkCache(year,month,competitionId);if(cacheEvents){Goal.settings[pluginNamespace].calInstance.setEvents(cacheEvents);}else{var loader=$('<div class="loader-layer" />');$container.append(loader);$.ajax({url:Goal.settings.environment.route.feed.match.matchDays,data:{edition:Goal.settings.environment.edition,year:year,month:month,competitionId:competitionId||undefined},success:function(events){Goal.settings[pluginNamespace].calInstance.setEvents(events);Goal.settings[pluginNamespace].eventsCache[year+"_"+month+"_"+competitionId]=events;loader.remove();}});}},checkCache:function(year,month,competitionId){return Goal.settings[pluginNamespace].eventsCache[year+"_"+month+"_"+competitionId];}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** carousel.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="carousel";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(customParams){var $element=$(this);if($element.children(".slider").children().length>1){Goal.log("carousel started");return $element.iosSlider(_.extend({snapToChildren:true,infiniteSlider:true,autoSlide:false,desktopClickDrag:true},customParams));}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** closeEdition.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="closeEdition";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={editionTime:{"cn":new Date(2014,1,21,17,0,0,0),"vn":new Date(2014,1,21,17,0,0,0),"es-pe":new Date(2014,1,21,4,0,0,0),"iran":new Date(2014,1,21,17,0,0,0)},editionContent:{"cn":'<span>Goal China closed on Friday 21 February. We sincerely thank you for your readership. We hope that you will join us on Goal International for all the latest football news and views</span><a href="%@/en" class="btn">Click here</a>',"vn":'<span>Goal Vietnam closed on Friday 21 February. We sincerely thank you for your readership. We hope that you will join us on Goal International for all the latest football news and views</span><a href="%@/en" class="btn">Click here</a>',"iran":'<span>Goal Iran closed on Friday 21 February. We sincerely thank you for your readership. We hope that you will join us on Goal International for all the latest football news and views</span><a href="%@/en" class="btn">Click here</a>',"es-pe":'<span>Goal Perú cierra sus puertas el viernes 21 de febrero. Les agradecemos por habernos acompañado durante este tiempo y pedimos disculpas por las molestias ocasionadas. Los invitamos a seguir con nosotros en Goal Argentina</span><a href="%@/es-ar" class="btn">Click aquí</a>'}};pluginEvents={init:function(){var content="";Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));if(Goal.events[pluginNamespace].internalApi.checkDisplayNotice()){content=Goal.events[pluginNamespace].internalApi.getContent();Goal.events[pluginNamespace].internalApi.displayNotice(content);}},internalApi:{getContent:function(){var template='<div class="close-edition">%@</div>';var edition=Goal.settings.environment.edition;var content;var intUrl="http://"+window.location.host;content=Goal.fmt(Goal.settings[pluginNamespace].editionContent[edition],intUrl);return Goal.fmt(template,content);},displayNotice:function(content){if(!Goal.events[pluginNamespace].internalApi.modalIsOpen()&&content){$.modal({html:content}).center().css({"position":"absolute"});}},checkDisplayNotice:function(){var today=new Date();var edition=Goal.settings.environment.edition;var time;if(typeof Goal.settings[pluginNamespace].editionTime[edition]==="undefined"){return false;}time=Goal.settings[pluginNamespace].editionTime[edition];if(today<time){return false;}if(Goal.store.get("modalOpened")){return false;}Goal.store.set("modalOpened",true);return true;},modalIsOpen:function(){return $(".modal").is(":visible");}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** comments.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="comments";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));if(window.gigya===undefined||window.gigya.comments===undefined){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Gigya is undefined",pluginNamespace));return;}$('[data-role="comments"]').each(function(){var $element=$(this);var data=$element.data();if($element.hasClass("gig-comments-container")){return;}window.gigya.comments.showCommentsUI({containerID:$element.attr("id"),categoryID:data.categoryId,streamID:data.streamId,streamTags:data.streamTags,streamTitle:data.streamTitle,streamURL:data.streamUrl,width:data.width,version:2,onCommentSubmitted:Goal.events.comments.updateShareBarValue,onLoad:function(){if($element.parent().find(".gig-module-title").length===0){$element.before('<h3 class="gig-module-title">'+data.translationsTitle+"</h3>");}if(!$element.find(".gig-comment").length){$element.find(".gig-comments-header").addClass("hidden");}else{$element.find(".gig-comments-header").removeClass("hidden");}Goal.events.comments.updateShareBarValue();}});});},updateShareBarValue:function(){$(".module-social-share-comments .comment-count").html(parseInt($(".gig-comments-count").text().match(/[0-9]+/),10));}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** commentsCount.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="commentsCount";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(event){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));event.preventDefault();if(window.gigya===undefined||window.gigya.comments===undefined){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Gigya is undefined",pluginNamespace));return;}var $commentsCountPlaceholders=$('[data-role="comments-count"]');var streamIds=[];$.each($commentsCountPlaceholders,function(){streamIds.push($(this).data("stream-id"));});if(streamIds.length>0){window.gigya.comments.getStreamInfo({categoryID:Goal.settings.environment.edition.replace("-","_"),streamID:"article",cacheTimeout:300000,streamIDs:streamIds,callback:function(response){if(response.errorCode===0){$.each(response.streamInfo,function(index,info){var $commentContainer=$('[data-role="comments-count"][data-stream-id='+info.streamID+"]");if(info.commentCount>0){$commentContainer.text(parseInt(info.commentCount,10)).closest(".comments").removeClass("hidden");}else{$commentContainer.closest(".comments").addClass("hidden");}});}}});}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** competition-list.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="competitionList";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));var $content;pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));$content=$(".main-content > section");$content.attachOmnitureTracking();Goal.events[pluginNamespace].bindShowCompetitions();},bindShowCompetitions:function(){$(".tab-content",$content).on("click",".group-name",function(event){event.preventDefault();$(this).toggleClass("expanded").next("ul").toggleClass("hidden");});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** competition.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="competition";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));Goal.settings[pluginNamespace].context=$(this);Goal.events[pluginNamespace].internalAPI.attachEvents();Goal.events[pluginNamespace].internalAPI.toogleViewAllButton();Goal.events[pluginNamespace].internalAPI.initCustomSelect();},internalAPI:{attachEvents:function(){var context=Goal.settings[pluginNamespace].context;$("#clubs-league-list",context).on("change",Goal.events[pluginNamespace].internalAPI.reloadContentByCompetition);$("li.tab",context).on("tabchanged",Goal.events[pluginNamespace].internalAPI.reloadContentByTab);$("section.schedule",context).on("click",'div.arrow:not(".inactive")',Goal.events[pluginNamespace].internalAPI.reloadContentByGameweek);$("section.table",context).on("click",'div.arrow:not(".inactive")',Goal.events[pluginNamespace].internalAPI.reloadContentByRound);},reloadContentByCompetition:function(){var activeTab=Goal.events[pluginNamespace].internalAPI.getActiveTab();var activeSection=$("section[data-tabcontent="+activeTab+"]",Goal.settings[pluginNamespace].context);var competitionId=Goal.events[pluginNamespace].internalAPI.getCompetitionId();var sectionCompetitionId=Number(activeSection.attr("data-competitionid"));if(sectionCompetitionId===competitionId){return false;}Goal.events[pluginNamespace].internalAPI.updateCompetitionIdOnTab();Goal.events[pluginNamespace].internalAPI.reloadContent({});},reloadContentByTab:function(){Goal.events.competition.internalAPI.toogleViewAllButton();Goal.events[pluginNamespace].internalAPI.reloadContentByCompetition();},reloadContentByGameweek:function(){var gameweek=$(this).attr("data-gameweek");var roundId=$(this).attr("data-roundid");Goal.events[pluginNamespace].internalAPI.reloadContent({"gameweek":gameweek,"roundId":roundId});},reloadContentByRound:function(){var roundId=$(this).attr("data-round");Goal.events[pluginNamespace].internalAPI.reloadContent({"roundId":roundId});},reloadContent:function(params,callback){var competitionId=Goal.events[pluginNamespace].internalAPI.getCompetitionId();var options=$.extend({"competitionId":competitionId},params);var activeTab=Goal.events[pluginNamespace].internalAPI.getActiveTab();var section=$("section."+activeTab,Goal.settings[pluginNamespace].context);var height=section.css("height");section.html("").css("height",height).addClass("ajax-loading");$.ajax({url:Goal.events[pluginNamespace].internalAPI.getUrl(activeTab),data:options,success:function(response){section.html(response).css("height","");if($.isFunction(callback)){callback();}section.removeClass("ajax-loading");}});},toogleViewAllButton:function(){var context=Goal.settings[pluginNamespace].context;var activeTab=Goal.events[pluginNamespace].internalAPI.getActiveTab();if(activeTab){$("footer.active",context).removeClass("active");$("footer[data-role=view-all-"+activeTab+"]",context).addClass("active");}},getUrl:function(action){var urlParams=[Goal.settings.environment.edition,"module","competition"];if(typeof action!=="undefined"){urlParams.push(action);}return"/"+urlParams.join("/");},getActiveTab:function(){return $("> ul.tabs > li.active",Goal.settings[pluginNamespace].context).attr("data-tab");},getCompetitionId:function(){return Number($("#clubs-league-list",Goal.settings[pluginNamespace].context).val());},updateCompetitionIdOnTab:function(){var activeTab=Goal.events[pluginNamespace].internalAPI.getActiveTab();$("section."+activeTab,Goal.settings[pluginNamespace].context).attr("data-competitionid",Goal.events[pluginNamespace].internalAPI.getCompetitionId());},initCustomSelect:function(){var context=Goal.settings[pluginNamespace].context;$('[data-plugin="customDropdown"]',context).customDropdown({callback:function(){return'<span class="competitions area-flag-18-'+$(this).data("area-id")+'"></span><span class="text">'+$(this).text()+"</span>";}});}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** context.js ***/
(function(window,document,undefined){namespace("Goal");var context=(function(){var name=$('meta[name="context"]').attr("content");var $params=$('meta[name^="context:"]');var params={};$.each($params,function(index){var $param=$(this);var key=$param.attr("name").split(":")[1];params[key]=$param.attr("content");});return{name:name,params:params};})();window.Goal.context=context;})(this,this.document);
/*** cookieInfo.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="cookieInfo";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var $pluginContainer=$(".module-cookie-info",this);var countryCode=$pluginContainer.data("country-code").split(",");var allowedEdition=$pluginContainer.data("allowed-edition").split(",");var expire=new Date();var content=$pluginContainer.find(".cookie-content").htmlComments();expire.setMonth(expire.getMonth()+1);if(!$.cookie("cookie-info")&&(-1!==$.inArray($.cookie("cc"),countryCode)&&(-1!==$.inArray(Goal.settings.environment.edition,allowedEdition)))){$.cookie("cookie-info",1,{expires:expire});$pluginContainer.find(".message").html(content);$pluginContainer.removeClass("hidden");}$pluginContainer.find(".close").bindNamespacedEvent("click",function(){$pluginContainer.addClass("hidden");});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** doneDeals.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var $context;pluginNamespace="doneDeals";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));$context=$(".module-done-deals");pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));Goal.events[pluginNamespace].initCustomSelect();Goal.events[pluginNamespace].initContentSwitch();},initCustomSelect:function(){$('[data-plugin="customDropdown"]',$context).customDropdown({callback:function(){return'<span class="competitions area-flag-18-'+$(this).data("area-id")+'"></span><span class="text">'+$(this).text()+"</span>";}});},initContentSwitch:function(){var $select=$("select",$context);var $wrapper=$(".content-wrapper",$context);$select.on("change",function(){var selectedValue=$select.val();var $content=$(".module-done-deals-content",$context);if($content.data("competitionId")===selectedValue){return;}var height=$wrapper.css("height");$wrapper.html("").css("height",height).addClass("ajax-loading");$.ajax({url:$select.data("url"),data:{"competitionId":selectedValue},success:function(response){$wrapper.css("height","auto").html(response);}});});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** featuredArticle.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="featuredArticle";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={maxTabHeight:628,staticTabHeight:420,arrExcluded:[]};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var context=this;var $contents=$(".contents",context);var heightArray=[];var allTabs=$("article",context);var paginationDots=context.find(".pagination > div");allTabs.each(function(){heightArray.push($(".content",this).outerHeight());});var tabHeight=Math.max.apply(null,heightArray);if(tabHeight>Goal.settings[pluginNamespace].maxTabHeight){tabHeight=Goal.events[pluginNamespace].getNextHeight(heightArray,tabHeight);$contents.addClass("static");}Goal.events.carousel.init.call($contents,{desktopClickDrag:false,autoSlide:true,infiniteSlider:false,autoSlideTimer:6000,navSlideSelector:paginationDots,onSliderLoaded:function(){$contents.find(".content").height(tabHeight);$contents.height($contents.find("article").outerHeight());context.css("visibility","visible");},onSliderResize:function(){$contents.height($contents.find("article").outerHeight());},onSlideChange:function(sliderChangeArguments){paginationDots.removeClass("selected");context.find(Goal.fmt(".pagination > div:eq(%@)",sliderChangeArguments.currentSlideNumber-1)).addClass("selected");}});},getNextHeight:function(heightArray,exclude){Goal.settings[pluginNamespace].arrExcluded.push(exclude);var arrWithout=_.without(heightArray,Goal.settings[pluginNamespace].arrExcluded);var tabHeight=Math.max.apply(null,arrWithout);if(arrWithout.length===3){return Goal.settings[pluginNamespace].staticTabHeight;}if(tabHeight>Goal.settings[pluginNamespace].maxTabHeight){tabHeight=Goal.events[pluginNamespace].getNextHeight(heightArray,tabHeight);}return tabHeight;}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** featuredMatches.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="featuredMatches";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));namespace(Goal.fmt("Goal.intervals.%@",pluginNamespace));pluginSettings={$featuredMatches:$(),rotateSpeed:2000};pluginEvents={init:function(){Goal.log("Goal:events:featuredMatches:init");Goal.settings.featuredMatches.$featuredMatches=$(this);Goal.events.featuredMatches.flick();},flick:function(){if(Goal.settings.featuredMatches.$featuredMatches.hasClass("alternate")){Goal.intervals.featuredMatches.flick=window.setInterval(Goal.events.featuredMatches._toggle,Goal.settings.featuredMatches.rotateSpeed);}},_toggle:function(){$(".module-featured-matches").toggleClass("toggled");}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** featuredStrip.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var isRTL=$("body").hasClass("dir-rtl");pluginNamespace="featuredStrip";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={visibleSlides:4};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var $carousel=$(this);var isVertical=$carousel.data("orientation")==="vertical";if(isVertical){Goal.events[pluginNamespace].vertical.call(this,{isRTL:isRTL});}else{if(isRTL){$carousel.children(".slider").append($(this).find(".story").get().reverse());}Goal.events[pluginNamespace].horizontal.call(this,{isRTL:isRTL});}},horizontal:function(){var $carousel=$(this);var navPrevious=$carousel.parent().find(".arrow.left");var navNext=$carousel.parent().find(".arrow.right");navNext.on("click",function(){var slides=$carousel.find("article").length;var nextSlide=($carousel.iosSlider().data("args").currentSlideNumber+Goal.settings.featuredStrip.visibleSlides);if((slides-3)<nextSlide){nextSlide=slides-3;}$carousel.iosSlider("goToSlide",nextSlide);});navPrevious.on("click",function(){var nextSlide=$carousel.iosSlider().data("args").currentSlideNumber-Goal.settings.featuredStrip.visibleSlides;if(nextSlide<1){nextSlide=1;}$carousel.iosSlider("goToSlide",nextSlide);});return Goal.events.carousel.init.call(this,{autoSlide:false,infiniteSlider:false,onSlideChange:function(args){if(args.data.numberOfSlides>pluginSettings.visibleSlides){navPrevious.removeClass("hidden");navNext.removeClass("hidden");if(args.currentSlideNumber>=(args.data.numberOfSlides-pluginSettings.visibleSlides+1)){navNext.addClass("hidden");}else{if(args.currentSlideNumber===1){navPrevious.addClass("hidden");}}}},onSliderLoaded:function(args){if(isRTL){$carousel.iosSlider("goToSlide",args.data.numberOfSlides-3);}navPrevious.addClass("hidden");if(args.data.numberOfSlides<=pluginSettings.visibleSlides){navNext.addClass("hidden");}}});},vertical:function(){var $carousel=$(this);var moduleList=$(".module-featured-list");var navPrevious=moduleList.find(".btn-up");var navNext=moduleList.find(".btn-down");var slides=$carousel.find("article").length;navNext.on("click",function(e){e.preventDefault();var nextSlide=($carousel.data("args").currentSlideNumber+3);if((slides-3)<nextSlide){nextSlide=slides-3;}$carousel.iosSliderVertical("goToSlide",nextSlide);});navPrevious.on("click",function(e){e.preventDefault();var nextSlide=($carousel.data("args").currentSlideNumber-3);if(nextSlide<1){nextSlide=1;}$carousel.iosSliderVertical("goToSlide",nextSlide);});moduleList.find('[data-widget="carousel"]').iosSliderVertical({desktopClickDrag:true,autoSlide:false,infiniteSlider:false,onSlideChange:function(args){if(args.data.numberOfSlides>pluginSettings.visibleSlides){navPrevious.removeClass("no-active");navNext.removeClass("no-active");if(args.currentSlideNumber>(args.data.numberOfSlides-pluginSettings.visibleSlides)){navNext.addClass("no-active");}else{if(args.currentSlideNumber===1){navPrevious.addClass("no-active");}}}}});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** floatingbar.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="floatingbar";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var cookieName="goal_no_ad_floating_bar";$('[data-adtech="adtech-floating"] .close').click(function(){$(this).parent().remove();$.cookie(cookieName,1,{expires:1,path:"/"});});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** ftaMessage.js ***/
(function(window){var pluginEvents;var pluginNamespace;pluginNamespace="ftaMessage";namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init",pluginNamespace));var $contents=$(".module-article");if((window.navigator.userAgent.indexOf("Firefox")!==-1)&&($(".article-header",$contents).attr("data-video-type")==="fta")){$(".module-article-fta-player-help",$contents).removeClass("hidden");}}};Goal.events[pluginNamespace]=pluginEvents;})(this);
/*** ftaOverlay.js ***/
(function(){var pluginEvents;var pluginNamespace="FTAOverlay";var pluginSettings;var privateAPI;var $context;namespace(Goal.fmt("Goal.events.%@",pluginNamespace));namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.intervals.%@",pluginNamespace));pluginSettings={"ftaArticleSelector":'.article-header.video[data-video-type="fta"]',"messageBoxSelector":".module-article-fta-overlay","ftaStorageKey":"FTA_OVERLAY","enabledEditions":["de","jp"],"removeVideoTimeout":2*60*1000};privateAPI={waitForIframe:function(){var defer=$.Deferred();if($context.find("iframe")){defer.resolve();}else{Goal.intervals[pluginNamespace]=window.setInterval(function(){if($context.find("iframe")){window.clearInterval(Goal.intervals[pluginNamespace]);defer.resolve();}},200);}return defer;},setRedirectOnLogin:function(){Goal.events.login.internalApi.addEventHandler("onLogin",function(){window.location.reload();});},checkIfUserLogged:function(){var defer=$.Deferred();window.gigya.socialize.getUserInfo({callback:function(resp){defer.resolve(!!resp.user.isLoggedIn);}});return defer;},setTimeoutFinished:function(){return $.jStorage.set(pluginSettings.ftaStorageKey,"yes");},clearTimeoutFinished:function(){return $.jStorage.deleteKey(pluginSettings.ftaStorageKey);},isTimeoutFinished:function(){return $.jStorage.get(pluginSettings.ftaStorageKey)==="yes";},removeVideoAndDisplayInfo:function(){Goal.log("FTA Overlay: removing video");var $message=$(pluginSettings.messageBoxSelector);var $iframe=$("iframe",$context);var frameWidth=$iframe.width();var frameHeight=$iframe.height();$iframe.replaceWith($message);$(pluginSettings.messageBoxSelector,$context).css({"width":frameWidth,"height":frameHeight}).removeClass("hidden");}};pluginEvents={"init":function(){var destroyVideoCallback=function(){privateAPI.setRedirectOnLogin();privateAPI.setTimeoutFinished();privateAPI.removeVideoAndDisplayInfo();};$context=$(pluginSettings.ftaArticleSelector);if(pluginSettings.enabledEditions.indexOf(Goal.settings.environment.edition)===-1||$context.length===0||!window.gigya||!window.gigya.socialize){return false;}privateAPI.checkIfUserLogged().done(function(logged){if(logged){privateAPI.clearTimeoutFinished();}else{if(privateAPI.isTimeoutFinished()){destroyVideoCallback();}else{privateAPI.waitForIframe().done(function(){Goal.log("FTA Overlay: video will be removed in approximately "+(pluginSettings.removeVideoTimeout/1000)+" seconds");window.setTimeout(function(){privateAPI.checkIfUserLogged().done(function(logged){if(!logged){destroyVideoCallback();}else{privateAPI.clearTimeoutFinished();}});},pluginSettings.removeVideoTimeout);});}}});}};Goal.settings[pluginNamespace]=pluginSettings;Goal.events[pluginNamespace]=pluginEvents;}());
/*** gallery.js ***/
(function(window,document){var pluginEvents;var pluginSettings;var pluginNamespace;var pageReset=false;var $mainContent;var $context;pluginNamespace="gallery";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={latestGalleriesCount:6};pluginEvents={init:function(){$mainContent=$(".main-content");$context=$(".section-gallery",$mainContent);if($context.length>0){Goal.events[pluginNamespace].opening();Goal.events[pluginNamespace].getPage();Goal.events[pluginNamespace].scrolling();Goal.events[pluginNamespace].preload();Goal.events[pluginNamespace].ajax();if(Modernizr.touch){Goal.events[pluginNamespace].catchSwipe($(".photo",$context).get(0));Goal.events[pluginNamespace].catchSwipe($(".latest-galleries",$context).get(0));$(".photo > a",$context).on("click",function(event){event.preventDefault();event.stopImmediatePropagation();});}}},cache:{push:function(str,value){Goal.events[pluginNamespace].cache[str]=value||true;}},preload:function(){var $img=$("<img>");var imagesSrc=[$mainContent.data("prev-picture-src"),$mainContent.data("next-picture-src")];_.forEach(imagesSrc,function(src){if(!Goal.events[pluginNamespace].cache[src]){$img.clone().attr("src",src);Goal.events[pluginNamespace].cache.push(src);}});},catchSwipe:function(element){element=element||$context.get(0);var startX;var startY;var distX;var distY;var sensitive=(window.screen.width/6)||200;function removeTouchListeners(){element.removeEventListener("touchmove");element.removeEventListener("touchend");}function touchMoveHandler(e){e.stopPropagation();var touchobj=e.changedTouches[0];distX=parseInt(touchobj.clientX,10)-startX;distY=parseInt(touchobj.clientY,10)-startY;if(e.changedTouches.length!==1||$(e.target).closest(element).length!==1||"touchcancel"===e.type){removeTouchListeners(e);return false;}if("touchmove"===e.type){e.stopPropagation();if(Math.abs(distX)>Math.abs(distY)){e.preventDefault();}else{removeTouchListeners(e);return false;}}if("touchend"===e.type){if(Math.abs(distX)>Math.abs(distY)){if(distX>sensitive){$(element).trigger(Goal.settings.environment.isRTL?"swipeLeft":"swipeRight",element);}else{if(distX<(-1*sensitive)){$(element).trigger(Goal.settings.environment.isRTL?"swipeRight":"swipeLeft",element);}}}else{if(Math.abs(distX)-Math.abs(distY)<100){removeTouchListeners(e);return true;}}removeTouchListeners(e);distX=0;distY=0;startX=0;startY=0;e.preventDefault();}}document.addEventListener("touchstart",function(e){e.stopPropagation();var $photo=$(e.target).closest(element);if($photo.length===1){var touchobj=e.changedTouches[0];startX=parseInt(touchobj.clientX,10);startY=parseInt(touchobj.clientY,10);element.addEventListener("touchend",touchMoveHandler,false);element.addEventListener("touchmove",touchMoveHandler,false);}},false);},opening:function(){$context.find(".gallery-photos-opener").bind("click",function(ev){ev.preventDefault();$(this).toggleClass("active");$context.find("button.share-icons").removeClass("active");$context.find(".gallery-photos").toggleClass("visible");$context.find(".module-social-share-icons").removeClass("visible");});$context.find("button.share-icons").bind("click",function(ev){ev.preventDefault();$(this).toggleClass("active");$context.find(".gallery-photos-opener").removeClass("active");$context.find(".module-social-share-icons").toggleClass("visible");$context.find(".gallery-photos").removeClass("visible");});var iconsButtonWidth=$context.find("button.share-icons").innerWidth();var socialShareWidth=$context.find(".module-social-share-icons").innerWidth();var socialBoxOffset=Math.floor((iconsButtonWidth-socialShareWidth)/2);if(Goal.settings.environment.isRTL){$context.find(".module-social-share-icons").css("margin-right",socialBoxOffset);}else{$context.find(".module-social-share-icons").css("margin-left",socialBoxOffset);}},scrolling:function(){var page;var width;var moveBy;var arrowsVisibility;var handleArrowsClick;var amountOfImages;var $galleryPhotos;var $imagesContainer;var $scrollContainer;var $prev;var $next;var $firstItem;$galleryPhotos=$(".gallery-photos");$imagesContainer=$(".images-container",$galleryPhotos);$scrollContainer=$(".scroll-container",$galleryPhotos);$prev=$(".prev",$galleryPhotos);$next=$(".next",$galleryPhotos);$firstItem=$(".item",$galleryPhotos).first();amountOfImages=$(".gallery-photos .item").length;page=Goal.events[pluginNamespace].getPage();moveBy=$firstItem.outerWidth(true);width=0;$("li",$imagesContainer).each(function(){width+=$(this).outerWidth(true);});$imagesContainer.css("width",width);$scrollContainer.scrollLeft(moveBy*page);arrowsVisibility=function(){if(amountOfImages<=3){$prev.css("visibility","hidden");$next.css("visibility","hidden");return;}var prevVisibility=$scrollContainer.scrollLeft()===0?"hidden":"visible";var nextVisibility=$scrollContainer.scrollLeft()>=((amountOfImages-3)*92)?"hidden":"visible";$prev.css("visibility",prevVisibility);$next.css("visibility",nextVisibility);};handleArrowsClick=function(event){var button=event.target?$(event.target):$(event.srcElement);var operator=button.hasClass("next")?"+=":"-=";var change=button.hasClass("next")?1:-1;if(pageReset===true){page=Goal.events[pluginNamespace].getPage();}page=page+change;$scrollContainer.stop(true,true).animate({scrollLeft:operator+moveBy},250,function(){arrowsVisibility();});pageReset=false;};arrowsVisibility();$prev.on("click",handleArrowsClick);$next.on("click",handleArrowsClick);$(document).on("galleryImageChanged",arrowsVisibility);},getPage:function(){var $elements=$(".images-container li");var index=-1;$elements.each(function(i){if($(this).hasClass("active")){index=i;}});return index;},aspectRatio:function(image){var $image=image.$;if(($image[0].naturalWidth/$image[0].naturalHeight>1.74)){if(!$image.data("oldHeight")){$image.data("oldHeight",$image.css("height"));}$image.css("height","auto");}else{$image.css("height",$image.data("oldHeight"));}},ajax:function(){var data=[];var prevImage={};var nextImage={};var currentImage={};var $photo;var $arrowsContainer;var $preview;var $clickableElements;var $gigyaComments=$(".module-gigya-comments");var lastPageLoaded=false;var hasLastPage=false;var isFirstLoad=true;if(!Modernizr.history){return;}$photo=$context.find(".photo");$arrowsContainer=$context.find(".module-page-navigation");$preview=$context.find(".gallery-photos");$clickableElements=$context.find(".images-container a").add($arrowsContainer.find(".arrow")).add($photo.find("a"));currentImage={$:$photo.children("img"),$caption:$context.find(".photo-caption > h2"),$credit:$context.find(".photo-credit > span"),$number:$context.find(".photo-number")};function changePageMeta(title){document.title=title||currentImage.title||"gallery";$("meta[name=description]").attr("content",currentImage.caption+" - Goal.com");$('meta[property="og:title"]').attr("content",document.title);$('meta[property="og:description"]').attr("content",currentImage.caption+" - Goal.com");$('meta[property="og:image"]').attr("content",currentImage.src);$('meta[name="twitter:title"]').attr("content",document.title);$('meta[name="twitter:description"]').attr("content",currentImage.caption+" - Goal.com");$('meta[name="twitter:image"]').attr("content",currentImage.src);}function cleanText(dirty){var cleaned=Goal.helpers.string.htmlSpecialCharsDecode(dirty);cleaned=Goal.helpers.string.stripSlashes(cleaned);return cleaned;}function getData(){$context.find("[data-images] > [data-image-src]").each(function(){var $this=$(this);data.push({src:$this.data("image-src"),caption:cleanText($this.data("image-caption")),credit:cleanText($this.data("image-credit")),url:$this.find("a").attr("href"),title:cleanText($this.find("img").attr("alt")+" - Goal.com")});});}function getCurrentImage(){var image=_.find(data,function(image){if(image.src===currentImage.$.attr("src")){return image;}})||{};var index=_.indexOf(data,image);image.index=(index<0)?data.length:index;prevImage=data[image.index-1];nextImage=data[image.index+1];$.extend(currentImage,image);}function getImageByUrl(url){var image=_.find(data,function(image){url=cutParameters(url);if(-1<image.url.indexOf(url)){return image;}else{if(-1<url.indexOf(image.url)){return image;}else{return null;}}});if(image){image.index=_.indexOf(data,image);return image;}}function updatePhotoNumber(){var text=currentImage.$number.text();var direction="";var index=0;function setPhotoNumberByDirection(){if("prev"===direction&&!isFirstImage()){text=text.replace(currentImage.index+1,currentImage.index);}else{if("next"===direction&&!isLastImage()){text=text.replace(currentImage.index+1,currentImage.index+2);}}}function setPhotoNumberByIndex(){text=(index+1)+text.match(/\D/ig).join("")+data.length;}if(arguments[0]!=="undefined"){if(_.isString(arguments[0])){direction=arguments[0];setPhotoNumberByDirection();}else{if(_.isNumber(arguments[0])){index=arguments[0];setPhotoNumberByIndex();}}}currentImage.$number.text(text);}function updateImage(data){if(data){currentImage.$.attr("src",data.src);currentImage.$caption.html(data.caption);if(data.credit){currentImage.$credit.html(data.credit);currentImage.$credit.parent().removeClass("hidden");}else{currentImage.$credit.parent().addClass("hidden");}}}function updateUI(){var url="";if(arguments[0]){url=_.isString(arguments[0])?arguments[0]:window.location.href;updateUIImageData(url);}updateUIArrowsAndLinks();updateUICurrentImageInPreviewModule();}function updateUIArrowsAndLinks(){var $elements;var $containers;$containers=$arrowsContainer.add($photo);$containers.find("a").removeClass("disabled hidden");if(isFirstImage()){$elements=$containers.find(".prev");}else{if((isLastImage()&&!hasLastPage)||(isLastImage()&&hasLastPage&&$context.find(".photo").hasClass("hidden"))){$elements=$containers.find(".next");}}if($elements&&$elements.length){$elements.each(function(){if($(this).hasClass("arrow")){$(this).addClass("disabled");}else{$(this).addClass("hidden");}});}}function updateUICurrentImageInPreviewModule(){$preview.find("a").each(function(){var $this=$(this);var url=$this.attr("href");$this.parents(".item").removeClass("active");if(!currentImage.hasOwnProperty("url")){return;}if(url===currentImage.url||(-1<currentImage.url.indexOf(cutParameters(url)))){$this.parents(".item").addClass("active");}});}function updateHistory(url,title){title=title||document.title||"";url=url||currentImage.url;window.history.pushState({},title,url);}function preload(images){var $img=$("<img>");_.forEach(images,function(image){if(image&&!Goal.events[pluginNamespace].cache[image.src]){$img.clone().attr("src",image.src);Goal.events[pluginNamespace].cache.push(image.src);}});}function trackPageView(){if(typeof Google_Analytics!=="undefined"&&typeof Google_Analytics.pageviewExecute==="function"){Google_Analytics.pageviewExecute();}s.t();_gaq.push(["_trackPageview",window.location.href]);}function goPrev(){if(isLastImage()&&hasLastPage&&$("figure.gallery-main",$context).find(".photo").hasClass("hidden")){hideLastPage();if($("ul.latest-galleries",$context).length&&isFirstLoad){updateImage(prevImage);updatePhotoNumber("prev");}}else{updateImage(prevImage);updatePhotoNumber("prev");}isFirstLoad=false;}function goNext(){if(isLastImage()&&hasLastPage){showLastPage();}else{updateImage(nextImage);updatePhotoNumber("next");}isFirstLoad=false;}function isFirstImage(){return 0===currentImage.index;}function isLastImage(){return data.length<=currentImage.index+1;}function cutParameters(url){var index=url.indexOf("?");if(0<index){url=url.slice(0,index);}return url;}function shareImage(){var $gigyaShare=$(".module-social-share-icons");$gigyaShare.data("url",document.location.origin+currentImage.url).data("description",currentImage.$caption.text()).data("image",currentImage.src);}function reloadAds(){$("iframe.adtag-async").each(function(){this.contentWindow.location.reload();});}function blockChangeOnInputFocus(){$('[data-role="comments"]',$gigyaComments).on("keydown","textarea",function(event){event.stopPropagation();});}function showLastPage(){var newTitle;if(lastPageLoaded){var $mainGalleryContainer=$(".gallery-main",$context);$mainGalleryContainer.find(".photo").addClass("hidden");$mainGalleryContainer.find(".latest-galleries").removeClass("hidden");$context.find(".latest-galleries").removeClass("hidden");$context.find(".arrow.next").addClass("disabled");$("body").addClass("page-latest-galleries");$context.find("figcaption.photo-caption").addClass("hidden");newTitle=$context.find("figure.gallery-main").attr("data-latest-galleries-gallerytitle");$context.find("h1.gallery-title").text(newTitle);$context.find("header").children(".buttons").addClass("hidden");$context.find(".gallery-photos").removeClass("visible");$context.find(".gallery-photos-opener").removeClass("active");}else{loadLastPageData(showLastPage);}}function hideLastPage(){var $mainGalleryContainer=$(".gallery-main",$context);$mainGalleryContainer.removeClass("hidden");$mainGalleryContainer.find(".photo").removeClass("hidden");$mainGalleryContainer.find(".latest-galleries").addClass("hidden");$context.find(".latest-galleries").addClass("hidden");$context.find(".arrow.next").removeClass("disabled");$("body").removeClass("page-latest-galleries");$context.find("figcaption.photo-caption").removeClass("hidden");var previousTitle=$context.find("figure.gallery-main").attr("data-gallery-fallback-title");$context.find("h1.gallery-title").text(previousTitle);$context.find("header .buttons").removeClass("hidden");}function loadLastPageData(callback){callback=callback||function(){};if(lastPageLoaded){callback();return;}if($context.find("ul.latest-galleries").length){hasLastPage=true;lastPageLoaded=true;callback();return;}var minNumberOfGalleries=Goal.settings[pluginNamespace].latestGalleriesCount;var currentArticleId=$mainContent.data("article-id");var afterLoad=function(data){if(data.galleries.length>=(minNumberOfGalleries+1)){var template=_.template($("script.latest-gallery").html());var $container=$('<ul class="images latest-galleries hidden" data-omniture-icid="LG" />');data.galleries.filter(function(gallery){return gallery.newsId!==currentArticleId;}).slice(0,minNumberOfGalleries).forEach(function(gallery){var renderedLatestGallery=template({titleShort:gallery.titleShort,uri:gallery.uri,imageUrl:gallery.imageUrl.hp2,itemCount:Object.keys(gallery.photos).length});$container.filter(".latest-galleries").append(renderedLatestGallery);});$(".gallery-main",$context).find(".photo").after($container);hasLastPage=true;}lastPageLoaded=true;callback();};$.ajax({url:Goal.settings.environment.route.feed.news.galleries,data:{edition:Goal.settings.environment.edition},dataType:"json"}).done(afterLoad).fail(function(){lastPageLoaded=true;hasLastPage=false;callback();});}function onClickArrowHandler(e){var $this=$(this);var url="";e.preventDefault();if(!$(this).hasClass("disabled")||e.type!=="click"){reloadAds();if($(this).hasClass("prev")||("swipeRight"===e.type)){goPrev($this);}else{if($(this).hasClass("next")||("swipeLeft"===e.type)){goNext($this);}else{url=$this.attr("href");}}getCurrentImage();preload([prevImage,nextImage]);updateUI(url);if(isLastImage()&&$("figure.gallery-main",$context).find(".photo").hasClass("hidden")){var galleryUri=$("figure.gallery-main",$context).attr("data-latest-galleries-uri");var galleryTitle=$("figure.gallery-main",$context).attr("data-latest-galleries-title");updateHistory(galleryUri,galleryTitle);changePageMeta(galleryTitle);}else{updateHistory();changePageMeta();}trackPageView();blockChangeOnInputFocus();shareImage();pageReset=true;$(document).trigger("galleryImageChanged");}}function updateUIImageData(url){var image=getImageByUrl(url);if(!image){return;}updateImage(image);updatePhotoNumber(image.index);getCurrentImage();$(document).trigger("galleryImageChanged");}function updateUIPreviewModule(){var $scrollContainer=$context.find(".scroll-container");var imageWidth=$(".gallery-photos .item").first().outerWidth(true);var page=Goal.events[pluginNamespace].getPage();pageReset=true;$scrollContainer.stop(true,true).animate({scrollLeft:imageWidth*page},250,function(){$(document).trigger("galleryImageChanged");});}loadLastPageData(function(){getData();getCurrentImage();blockChangeOnInputFocus();shareImage();Goal.events[pluginNamespace].aspectRatio(currentImage);$clickableElements.on("click",function(e){onClickArrowHandler.call(this,e);updateUIPreviewModule.call(this);});$context.on("swipeLeft",onClickArrowHandler);$context.on("swipeRight",onClickArrowHandler);$(window).on("popstate",updateUI);$(document).on("galleryImageChanged",function(){Goal.events[pluginNamespace].aspectRatio(currentImage);});});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** header.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="header";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={toggleLanguagePicker:function(event){event.preventDefault();$("body").toggleClass("edition-picker-opened");}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** headerStrip.js ***/
(function(){var pluginEvents;var pluginNamespace;pluginNamespace="headerStrip";namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginEvents={init:function(){var headerStripDefault=$('.header-strip img[width="1"][height="1"]');if(headerStripDefault.length){headerStripDefault.parents(".module.header-strip").remove();}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})();
/*** heronews.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="heronews";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){var $carousel=$(this);Goal.events.carousel.init.call(this,{desktopClickDrag:false,autoSlide:true,infiniteSlider:false,autoSlideTimer:$carousel.data("slideInterval")*1000,navSlideSelector:$carousel.find(".pagination > div"),onSlideChange:function(sliderChangeArguments){$carousel.find(".pagination > div").removeClass("selected");$carousel.find(Goal.fmt(".pagination > div:eq(%@)",sliderChangeArguments.currentSlideNumber-1)).addClass("selected");},onSliderLoaded:function(){if($carousel.parents(".slider").children().index($carousel.parents(".slide"))>0){$carousel.iosSlider("autoSlidePause");}}});return $carousel.find(".slider").off(".iosSliderEvent");}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** kalooga.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="kalooga";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){var kaloogaScriptId;Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));if($('[data-module*="kalooga"]').length){kaloogaScriptId=("nl"===Goal.settings.environment.edition)?4191:3422;$.getScript(Goal.fmt("http://publishing.kalooga.com/acct/%@.js",kaloogaScriptId),function(){Goal.log(Goal.fmt("Goal:events:%@:Kalooga external script loaded",pluginNamespace));Goal.events[pluginNamespace].setTracking();});}else{Goal.log(Goal.fmt("Goal:events:%@:Skipped",pluginNamespace));}},setTracking:function(){$(".module-kalooga-grid").on("mousedown touchstart","li",function(){s.linkTrackVars="prop49,prop50";s.prop49=$(this).attr("class");s.prop50="kalooga_"+$(this).closest(".module-kalooga-grid").data("kalooga-widget-id");});$("body").on("mousedown touchstart",".kalooga_hover .kalooga_item",function(){s.linkTrackVars="prop49,prop50";s.prop49=$(this).attr("class");s.prop50="Kalooga Article Image Hover";});$(".module-ad-kalooga.button").on("mousedown touchstart",function(){s.linkTrackVars="prop50";s.prop50="Kalooga Article Image Button";});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** last-matches.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="lastMatches";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.events[pluginNamespace].bindRowOnClick.call(this);},bindRowOnClick:function(){$(this).on("click",".clickable",function(){var url=$(this).find("[href]").attr("href");if(url){window.location.href=url;}});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** layout.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="layout";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:{forDevice:function(deviceType){var $sidebar;var $leftColumn;var $rightColumn;var $sidebarLeftColumn;var $sidebarRightColumn;var bettingWidget;$sidebar=$('[data-role="sidebar"]');$leftColumn=$('[data-column="left"]');$rightColumn=$('[data-column="right"]');$sidebarLeftColumn=$sidebar.find('[data-target="left"]');$sidebarRightColumn=$sidebar.find('[data-target="right"]');bettingWidget=$(".module-bet-combo");if(deviceType==="tablet"){if($sidebarLeftColumn.length||$sidebarRightColumn.length){Goal.log(Goal.fmt("Goal:events:%@ Changing layout to tablet",pluginNamespace));$leftColumn.append($sidebarLeftColumn);$rightColumn.append($sidebarRightColumn);bettingWidget.addClass("add-margin");$rightColumn.append(bettingWidget);}}else{if(!($sidebarLeftColumn.length||$sidebarRightColumn.length)){Goal.log(Goal.fmt("Goal:events:%@ Changing layout to desktop",pluginNamespace));$sidebar.append($leftColumn.find('[data-target="left"]'));$sidebar.append($rightColumn.find('[data-target="right"]'));bettingWidget.removeClass("add-margin");$(".module-competitions",$sidebar).before(bettingWidget);}}},tablet:function(){Goal.log(Goal.fmt("Goal:events:%@:tablet",pluginNamespace));Goal.events.layout.init.forDevice("tablet");},desktop:function(){Goal.log(Goal.fmt("Goal:events:%@:desktop",pluginNamespace));Goal.events.layout.init.forDevice("desktop");}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** liveVisualization.js ***/
(function(){var $context;var pluginEvents;var pluginSettings;var pluginNamespace;var token=null;var collapsed=false;var semaphoreCollapse=false;var iframeLoaded=false;var options={};pluginNamespace="liveVisualization";namespace(Goal.fmt("Goal.events.%@",pluginNamespace));namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));pluginSettings={customerId:"goal",customerKey:"fqtm39dkwipsn",userId:"goal",multiMatchMode:false,tokenUrl:"http://visualisation.performgroup.com/getToken",multiMatchUrl:"http://visualisation.performgroup.com/multimatch",collapsed:false,frameUrl:"http://visualisation.performgroup.com/animation/v2/index.html",multiMatchFrameUrl:"http://visualisation.performgroup.com/csb/index.html",lang:"en",multiMatchSizes:{full:{width:600,height:440},collapsed:{width:600,height:440}},sizes:{full:{width:600,height:338},collapsed:{width:600,height:44}},matchFinishCode:103};$context=$(".module-live-visualization");var privateAPI={getToken:function(callback){if(token){callback(token);return;}var params={customerId:options.customerId,customerKey:options.customerKey,userId:options.userId,gsmid:$context.data("matchId")};if(options.multiMatchMode){params.multiMatchId=$context.data("multiMatchId");}var tokenUrl=Goal.fmt("%@?%@",options.tokenUrl,$.param(params));$.get(tokenUrl,function(token){callback(token);});},destroy:function(){$context.remove();},setIframe:function(callback){privateAPI.getToken(function(token){var prerollIDs={};var enablePreroll=false,prerollID=null;if(parseInt(token,10)===options.matchFinishCode){privateAPI.destroy();return;}if(typeof prerollIDs[options.lang]!=="undefined"){enablePreroll=true;prerollID=prerollIDs[options.lang];}var params={token:token,clientsidelogging:"debug",ts:true,cssdiff:$context.data("custom-css"),lang:options.lang,pr:enablePreroll,lrpid:prerollID};if(collapsed){params.collapsed=true;}var frameUrl=Goal.fmt("%@?%@",options.frameUrl,$.param(params));var frame=$("iframe",$context);var hasFrame=!!frame.length;if(!hasFrame){frame=$("<iframe>");}frame.css("overflow","hidden");frame.attr({scrolling:"no",width:options.sizes[collapsed?"collapsed":"full"].width,height:options.sizes[collapsed?"collapsed":"full"].height,frameborder:0,src:frameUrl});if(!hasFrame){$context.append(frame);}frame.on("load.semaphore",function(){frame.off(".semaphore");$context.removeClass("hidden");callback();});});},setLiveMatchCast:function(callback){if(iframeLoaded){return;}privateAPI.getToken(function(token){var params={token:token,ts:true,cssdiff:$context.data("custom-css"),lang:options.lang,multimatchid:$context.data("multiMatchId")};var frameUrl=Goal.fmt("%@?%@",options.multiMatchFrameUrl,$.param(params));var frame=$("iframe",$context);frame.attr({scrolling:"no",width:options.multiMatchSizes[collapsed?"collapsed":"full"].width,height:options.multiMatchSizes[collapsed?"collapsed":"full"].height,frameborder:0,src:frameUrl});frame.on("load.semaphore",function(){frame.off(".semaphore");callback();iframeLoaded=true;});});},getDataAttrOptions:function(){var opt={};var keys=Object.keys(Goal.settings[pluginNamespace]);keys.forEach(function(key){var dataKey="options-"+key;if($context.data(dataKey)){opt[key]=$context.data(dataKey);}});return opt;},addCollapseButton:function(){var button;if(options.multiMatchMode){button=$("button",$context);$context.addClass(collapsed?"collapsed":"expanded");}else{button=$('<span data-role="collapse"><span></span></span>');button.addClass(collapsed?"collapsed":"expanded");$context.append(button);}button.off().on("click",function(ev){ev.preventDefault();pluginEvents.toggleCollapse();});},runWhenLive:function(callback){var matchStart=parseInt($context.data("match-start"),10);var now=Math.ceil(new Date().getTime()/1000);if((matchStart+14400)>now){if(matchStart>now){setTimeout(function(){privateAPI.runWhenLive(callback);},(matchStart-now)*1000);}else{callback();}}else{privateAPI.destroy();}},runMultiMatchWhenLive:function(callback){var params={multiMatchId:$context.data("multiMatchId")};var multiMatchUrl=Goal.fmt("%@?%@",options.multiMatchUrl,$.param(params));$.get(multiMatchUrl,function(matches){var currentDate=new Date().getTime()/1000;var items;var dateTime;var matchStart;matches=JSON.parse(matches);for(var match in matches){items=matches[match].matches;if(items.length>0){for(var item in items){dateTime=items[item].startTime.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/);matchStart=new Date(Date.UTC(dateTime[1],parseInt(dateTime[2],10)-1,dateTime[3],dateTime[4],dateTime[5],dateTime[6])).getTime()/1000;matchStart=matchStart-currentDate;if(matchStart<=3600&&matchStart>=(3600*-4)){callback();return;}}}}privateAPI.addCollapseButton();});}};pluginEvents={init:function(pluginOptions){Goal.log("Goal:events:liveVisualization:init called");pluginOptions=pluginOptions||{};var dataAttrOptions=privateAPI.getDataAttrOptions();options=_.assign({},Goal.settings[pluginNamespace],dataAttrOptions,pluginOptions);collapsed=options.collapsed;options.multiMatchMode=false;privateAPI.runWhenLive(function(){if(semaphoreCollapse){return;}semaphoreCollapse=true;privateAPI.setIframe(function(){privateAPI.addCollapseButton();semaphoreCollapse=false;});});},initMultiMatch:function(pluginOptions){if($context.length==0){return;}Goal.log("Goal:events:liveVisualization:initMultiMatch called");pluginOptions=pluginOptions||{};var dataAttrOptions=privateAPI.getDataAttrOptions();options=_.assign({},Goal.settings[pluginNamespace],dataAttrOptions,pluginOptions);collapsed=true;options.multiMatchMode=true;semaphoreCollapse=false;if($context.hasClass("expanded")){collapsed=false;}privateAPI.runMultiMatchWhenLive(function(){if(semaphoreCollapse){return;}semaphoreCollapse=true;collapsed=!collapsed;Goal.events[pluginNamespace].toggleCollapse();privateAPI.setLiveMatchCast(function(){privateAPI.addCollapseButton();semaphoreCollapse=false;});});},toggleCollapse:function(){var button;if(semaphoreCollapse){semaphoreCollapse=false;return;}if(!options.multiMatchMode){semaphoreCollapse=true;}collapsed=!collapsed;if(options.multiMatchMode){button=$context;}else{button=$('[data-role="collapse"]',$context);}if(button.length){button.removeClass("collapsed expanded");button.addClass(collapsed?"collapsed":"expanded");}if(options.multiMatchMode){privateAPI.setLiveMatchCast(function(){semaphoreCollapse=false;});}else{privateAPI.setIframe(function(){semaphoreCollapse=false;});}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending settings",pluginNamespace));_.assign(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending events",pluginNamespace));Goal.events[pluginNamespace]=pluginEvents;})();
/*** livenow.js ***/
(function(){var tabSched="schedule";var tabTable="table";var pluginEvents;var pluginNamespace;var pluginSettings;var $context;var currentlyLoading={tabSched:false,tabTable:false};var scrollPosition={tabSched:0,tabTable:0};var lastLoadedData=null;var privateAPI;pluginNamespace="liveNow";pluginSettings={refreshInterval:10000,matchEndBiasSeconds:10800};namespace(Goal.fmt("Goal.events.%@",pluginNamespace));namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));privateAPI={transformHtmlToData:function(html){var data={};if(typeof html==="string"){html=html.trim();}$(html).find("tbody[data-match-id]").each(function(){var matchId=$(this).attr("data-match-id");var matchScores=$(this).find(".vs").text().match(/(\d+)[ \-]+(\d+)/);var scores;if(matchScores!==null&&matchScores.length===3){scores=[parseInt(matchScores[1],10),parseInt(matchScores[2],10)];if(!isNaN(scores[0])&&!isNaN(scores[1])){data[matchId]=scores;}}});return data;},getMatchesThatScored:function(newData,oldData){return Object.keys(newData).filter(function(matchId){var oldMatch=oldData[matchId];var newMatch=newData[matchId];return oldMatch&&newMatch&&(oldMatch[0]<newMatch[0]||oldMatch[1]<newMatch[1]);});},blinkUpdatedScores:function(){var newData;var matchesThatScored;var newHtml=$('[data-tabcontent="schedule"]',$context);if(lastLoadedData!==null){newData=privateAPI.transformHtmlToData(newHtml.html());matchesThatScored=privateAPI.getMatchesThatScored(newData,lastLoadedData);lastLoadedData=newData;_.forEach(matchesThatScored,function(matchId){var selector=$('[data-match-id="'+matchId+'"]');selector.addClass("goal-scored");setTimeout(function(){selector.removeClass("goal-scored");},4000);});}else{lastLoadedData=privateAPI.transformHtmlToData(newHtml.html());}},bindRowClick:function($container){$container.find("tr a:first-of-type").each(function(){var uri=$(this).attr("href");if(""!==uri){$(this).closest("tr").off("click");$(this).closest("tr").on("click",function(){window.location.href=uri;}).addClass("clickable");}});},getScrollPosition:function(tab){scrollPosition[tab]=$(Goal.fmt(".module-livenow .%@.active .wrapper",tab)).scrollTop();},setScrollPosition:function(tab){$(Goal.fmt(".module-livenow .%@.active .wrapper",tab)).scrollTop(scrollPosition[tab]);},attachEvents:function(){$("#clubs-league-list",$context).on("change",privateAPI.reloadContentByCompetition);$("li.tab.active",$context).siblings().on("tabchanged",function(event){$(event.target).off(event.type);privateAPI.reloadContentByTab(event);});$("section.schedule",$context).on("click",'div.arrow:not(".inactive")',privateAPI.reloadContentByGameweek);$("section.table",$context).on("click",'div.arrow:not(".inactive")',privateAPI.reloadContentByRound);privateAPI.bindRowClick($(".schedule > div > table, .table > div > table",$context));},getLiveMatchesList:function(){var matchList=[];$(".schedule [data-match-id]",$context).each(function(){var matchTime=$(this).data("match-begindate");var now=new Date().getTime()/1000;if(matchTime<now&&matchTime>=(now-Goal.settings[pluginNamespace].matchEndBiasSeconds)){matchList.push($(this).data("match-id"));}});return matchList;},checkLiveMatches:function(){var matchList=privateAPI.getLiveMatchesList();if(matchList.length){privateAPI.reloadContent({},function(){privateAPI.blinkUpdatedScores();privateAPI.bindRowClick($(".schedule > div > table, .table > div > table",$context));privateAPI.setScrollPosition(tabSched);},true,tabSched);}},checkLiveMatchesInTables:function(){var matchList=privateAPI.getLiveMatchesList();if(matchList.length){privateAPI.reloadContent({},function(){privateAPI.setScrollPosition(tabTable);},true,tabTable);}},reloadContentByCompetition:function(event,active){var activeTab=active||privateAPI.getActiveTab();var activeSection=$(Goal.fmt('section[data-tabcontent="%@"]',activeTab),$context);var competitionId=privateAPI.getCompetitionId();var sectionCompetitionId=Number(activeSection.attr("data-competitionid"));if(sectionCompetitionId===competitionId&&event.type==="change"){return false;}$(Goal.fmt("section.%@",activeTab),$context).attr("data-competitionid",competitionId);privateAPI.reloadContent({},function(){privateAPI.bindRowClick($(".schedule > div > table, .table > div > table",$context));});},reloadContentByTab:function(event){privateAPI.switchFooterByTab();privateAPI.reloadContentByCompetition(event);},reloadContentByGameweek:function(){var gameweek=$(this).attr("data-gameweek");var roundId=$(this).attr("data-roundid");privateAPI.reloadContent({"gameweek":gameweek,"roundId":roundId},function(){privateAPI.bindRowClick($(".schedule > div > table",$context));});},reloadContentByRound:function(){var roundId=$(this).attr("data-round");privateAPI.reloadContent({"roundId":roundId},function(){privateAPI.bindRowClick($(".schedule > div > table",$context));});},reloadContent:function(params,callback,doNotClearContent,tab){console.info("reloading");if(currentlyLoading[tab]){return;}currentlyLoading[tab]=true;doNotClearContent=doNotClearContent||false;var competitionId=privateAPI.getCompetitionId();var options=$.extend({"competitionId":competitionId,_:new Date().getTime()},params);var activeTab=tab||privateAPI.getActiveTab();var section=$(Goal.fmt("section.%@",activeTab),$context);var height=section.css("height");var urlParams=[Goal.settings.environment.edition,"module","live-now"];if(!doNotClearContent){section.html("").css("height",height).addClass("ajax-loading");}if(typeof activeTab!=="undefined"){urlParams.push(activeTab);}$.ajax({url:Goal.fmt("/%@",urlParams.join("/")),data:options,success:function(response){section.html(response).css("height","");currentlyLoading[tab]=false;if($.isFunction(callback)){callback(response);}section.removeClass("ajax-loading");}});},switchFooterByTab:function(){var activeTab=privateAPI.getActiveTab();if(activeTab){$("footer.active",$context).removeClass("active");$(Goal.fmt('footer[data-role="view-all-%@"]',activeTab),$context).addClass("active");}},getActiveTab:function(){return $("> ul.tabs > li.active",$context).attr("data-tab");},getCompetitionId:function(){return Number($("#clubs-league-list",$context).val());}};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));$context=$(this);privateAPI.attachEvents();privateAPI.switchFooterByTab();$('[data-plugin="customDropdown"]',$context).customDropdown({callback:function(){return Goal.fmt('<span class="competitions area-flag-18-%@"></span><span class="text">%@</span>',$(this).data("area-id"),$(this).text());}});setInterval(function(){privateAPI.getScrollPosition(tabTable);privateAPI.getScrollPosition(tabSched);privateAPI.checkLiveMatches();privateAPI.checkLiveMatchesInTables();},Goal.settings[pluginNamespace].refreshInterval);}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));Goal.events[pluginNamespace]=pluginEvents;Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);})();
/*** livescores.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="livescores";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));var $content;var $matchList={};var sortOrder="asc";pluginSettings={liveRefreshIntervalTime:5000,reloadAnimationDuration:2000};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init",pluginNamespace));$content=$(".main-content > section");Goal.events[pluginNamespace].initMatchList();Goal.events[pluginNamespace].initToolTip();Goal.events[pluginNamespace].initResultsAutoRefresh();Goal.events[pluginNamespace].initResultsManualRefresh();Goal.events[pluginNamespace].initFilters();Goal.events[pluginNamespace].initBetting();Goal.events[pluginNamespace].initMyScores();Goal.events[pluginNamespace].initRowClick();Goal.events[pluginNamespace].initOmnitureTracking();},initMatchList:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initMatchList",pluginNamespace));var $matches=$(".matchdays-wrapper .match",$content);$matches.each(function(){var $match=$(this);$matchList[$match.data("matchId")]={"main":$match};});},initToolTip:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initToolTip",pluginNamespace));$(".match-btn",$content).tooltip({tooltipText:$content.data("tip")});},initOmnitureTracking:function(){$content.attachOmnitureTracking();},initMyScores:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initMyScores",pluginNamespace));var $myScores=$content.find(".my-scores");var $myScoresMatchDays=$myScores.find(".matchday");var $matchDayContainer=$content.find(".matchdays-wrapper");var storage="MyScores";var data=$.jStorage.get(storage,{});$myScores.on("addItem",function(event,inputData){var $match=$matchDayContainer.find('.match[data-match-id="'+inputData.matchId+'"]').clone(true,true);$myScores.find('.matchday[data-day="'+inputData.day+'"] .matches').append($match);data[inputData.matchId]=inputData;$.jStorage.set(storage,data);$matchList[inputData.matchId].myscores=$myScores.find('.match[data-match-id="'+inputData.matchId+'"]');$myScores.trigger("cleanup");});$myScores.on("removeItem",function(event,inputData){$myScores.find('.match[data-match-id="'+inputData.matchId+'"]').remove();delete data[inputData.matchId];$.jStorage.set(storage,data);delete $matchList[inputData.matchId].myscores;$myScores.trigger("cleanup");});$myScores.on("clearItems",function(){$myScores.find(".match").remove();data={};$.jStorage.set(storage,data);_.forEach($matchList,function(group){delete group.myscores;});$myScores.trigger("cleanup");});$myScores.on("cleanup",function(){$myScoresMatchDays.removeClass("hidden");$myScoresMatchDays.filter(function(){return !$(this).has(".match").length;}).addClass("hidden");});$.each(data,function(matchId,inputData){var $match=$matchDayContainer.find('.match[data-match-id="'+inputData.matchId+'"]');if($match.length){$match=$match.clone(true,true);$myScores.find('.matchday[data-day="'+inputData.day+'"] .matches').append($match);$content.find('.match[data-match-id="'+matchId+'"] .btn-star').toggleClass("active");$matchList[inputData.matchId].myscores=$myScores.find('.match[data-match-id="'+inputData.matchId+'"]');}else{delete data[inputData.matchId];$.jStorage.set(storage,data);}});$myScores.trigger("cleanup");$content.on("click",".btn-myscores",function(){var $btn=$(this);var $match=$btn.parents(".match");var matchId=$match.data("matchId");var isActive=$btn.hasClass("active");var inputData={matchId:matchId,day:$match.parents(".matchday").data("day")};if(isActive){$myScores.trigger("removeItem",inputData);}else{$myScores.trigger("addItem",inputData);}$content.find('.match[data-match-id="'+matchId+'"] .btn-star').toggleClass("active");});$myScores.find(".clear-all").on("click",function(event){event.preventDefault();$myScores.trigger("clearItems");$matchDayContainer.find(".btn-star.active").removeClass("active");});},initBetting:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initBetting",pluginNamespace));var bookmakerId=$($content.data("bookmakers-ids")).random()[0];if(!bookmakerId){return;}var matchesIds=[];var oddsType="1X2";_.forEach($matchList,function(group,matchId){if("played"!==group.main.data("matchStatus")){matchesIds.push(matchId);}});if(matchesIds.length){$.ajax({url:Goal.settings.environment.route.feed.odds.match,data:{type:oddsType,matchId:matchesIds.sort().join(","),bookmakerIds:bookmakerId,context:"live-scores"},dataType:"json"}).then(function(response){var inlineTemplate=_.template($content.find(".inline-odds-tmpl").html());var rowTemplate=_.template($content.find(".bet-row-tmpl").html());var betBtnTemplate=_.template($content.find(".bet-button-tmpl").html());var isImageSet=false;if(response[oddsType].length!==0){$content.addClass("with-odds");$.each(response[oddsType],function(matchIndex,odds){var $fragment=$(document.createDocumentFragment());var $matchRow=$content.find('[data-match-id="'+matchIndex+'"]');var $betButton=betBtnTemplate({text:$content.data("translationOdds")});var bookmakerName=_.keys(odds)[0];var stake=bookmakerName==="Betway"?500:5;var matchStatus=$matchRow.data("match-status");odds=odds[bookmakerName];$fragment.append($betButton).append(inlineTemplate({typeHome:odds.home.subtype,typeDraw:odds.draw.subtype,typeAway:odds.away.subtype,betLinkHome:odds.home.affiliateLink.replace(/\[STAKE\]/,stake),betLinkDraw:odds.draw.affiliateLink.replace(/\[STAKE\]/,stake),betLinkAway:odds.away.affiliateLink.replace(/\[STAKE\]/,stake),home:odds.home.price,draw:odds.draw.price,away:odds.away.price}));if(matchStatus!=="playing"&&matchStatus!=="played"){$matchRow.toggleClass("has-odds").find(".match-centre").append($fragment);$matchRow.append(rowTemplate({matchId:matchIndex,betLinkHome:odds.home.affiliateLink.replace(/\[STAKE\]/,stake),betLinkDraw:odds.draw.affiliateLink.replace(/\[STAKE\]/,stake),betLinkAway:odds.away.affiliateLink.replace(/\[STAKE\]/,stake),home:odds.home.price,draw:odds.draw.price,away:odds.away.price,logo:{url:odds.logo["64x22"],alt:bookmakerName}}));}if(!isImageSet){var bookmakerImage=$content.find(".bookmaker-logo");bookmakerImage.find("img").prop({"src":odds.logo["64x22"],"alt":bookmakerName});isImageSet=true;}});}},function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@ Failed to fetch betting data",pluginNamespace));}).then(function(){$content.on("click",".btn-show-odds",function(event){event.preventDefault();var $element=$(this);var textReplacement=$element.data("hidden");$element.data("hidden",$element.text()).text(textReplacement);$content.find(".bet-row").addClass("hidden");$content.find(".has-odds").removeClass("expanded");$content.toggleClass("odds-shown");if($(".matches .odds-header",$content).length===0){_.each($(".matches",$content),function(table){var $table=$(table);if($table.find("[data-match-id].has-odds").length>0){var oddsHeader='<div class="odds-header"><span>1</span><span>x</span><span>2</span></div>';$table.find(".subheader th").append(oddsHeader);}});}});$content.on("click",".btn-bet",function(event){event.preventDefault();var $matchRow=$(this).parents(".match");$matchRow.toggleClass("expanded");$matchRow.find('.bet-row[data-match-id="'+$matchRow.data("matchId")+'"]').toggleClass("hidden");});});}},initRowClick:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initRowClick",pluginNamespace));$content.on("click",".match.clickable tr:not(.bet-row) td:not(.match-centre)",function(event){event.stopPropagation();var $row=$(this).closest("tbody");var $link=$row.find(".match-btn");if($link.length){$link.trigger("focus");window.location.href=$link.attr("href");}});$content.on("click",".inline-odds a",function(event){event.stopPropagation();});},initResultsAutoRefresh:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initResultsAutoRefresh",pluginNamespace));var successCallback;var onInterval;var sortRows;var $matchDayContainer=$content.find(".matchdays-wrapper .matchdays");var fakeStatusOverlap=$content.data("fakeStatusOverlap");var brokenSuspendedStatusOverlap=$content.data("brokenSuspendedStatusOverlap");var todayOverlap=$content.data("todayOverlap");successCallback=function(response){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Succesfully retrieved data",pluginNamespace));var now=Date.now()/1000;_.forEach(response.matches,function(match){_.forEach($matchList[match.id],function($gameRow,placement){var statusChanged;var fakeStatus=match.status;var isToday=false;if(match.ft_date_time){if("played"===match.status){if((now-match.ft_date_time)<fakeStatusOverlap){fakeStatus="playing";}if((now-match.ft_date_time)<todayOverlap){isToday=true;}}else{if("playing"===match.status){isToday=true;}else{if("suspended"===match.status){if($gameRow.attr("data-match-time")+brokenSuspendedStatusOverlap<now){fakeStatus="cancelled";}}}}}if($gameRow.attr("data-match-status")&&$gameRow.attr("data-match-status")!==match.status){statusChanged=true;}if(-1!==$.inArray(match.status,["played","playing","suspended"])){var $scoreContainer=$gameRow.find(".vs div");var oldText=$scoreContainer.text();oldText=oldText.replace("\n","").split(" ");if(parseInt(oldText[0],10)<match.score.home||parseInt(oldText[2],10)<match.score.away){$gameRow.addClass("goal");window.setTimeout(function(){$gameRow.removeClass("goal");},4000);}$scoreContainer.text(match.score.home+" - "+match.score.away);$gameRow.find(".status span").text(match.period);}$gameRow.attr({"data-match-status":match.status,"data-match-fake-status":fakeStatus});if(isToday){$gameRow.attr("data-today","");}if(match.details){$gameRow.addClass("with-details");$gameRow.find(".score-details td").text(match.details);}else{$gameRow.removeClass("with-details");$gameRow.find(".score-details td").empty();}if(statusChanged&&"main"===placement){sortRows($gameRow,match);}});});$(".score-details td",$content).removeClass("hidden").filter(":empty").addClass("hidden");$matchDayContainer.trigger("filter");};sortRows=function($gameRow,match){var $matchesContainer=$gameRow.closest(".matches");var $affectedMatches=$matchesContainer.find('.match[data-match-status="'+match.status+'"]');if(1===$affectedMatches.length){$affectedMatches=$matchesContainer.find(".match");if($affectedMatches.length===1){return false;}}var rowsArray=[];var importance={"playing":1,"suspended":1,"fixture":2,"postponed":2,"played":3,"cancelled":3};_.forEach($affectedMatches,function(el){var $el=$(el);rowsArray.push({"id":$el.attr("data-match-id"),"time":$el.attr("data-match-time"),"teamAName":$el.find(".home span").text(),"updated":$el.attr("data-match-id")==match.id,"importance":importance[$el.attr("data-match-status")]});});rowsArray.sort(function(a,b){if(a.importance<b.importance){return -1;}if(a.importance>b.importance){return 1;}if(a.time>b.time){return 1;}if(a.time<b.time){return -1;}if(a.teamAName<b.teamAName){return -1;}if(a.teamAName>b.teamAName){return 1;}return 0;});var updatedIndex=rowsArray.map(function(el){return el.updated;}).indexOf(true);if(updatedIndex===0){$matchList[rowsArray[1].id].main.before($gameRow);}else{$matchList[rowsArray[updatedIndex-1].id].main.after($gameRow);}};onInterval=function(){var now=Date.now()/1000;var matchesIds=[];_.forEach($matchList,function(group){var $match=group.main;var matchTime=$match.data("matchTime");if(matchTime<now&&matchTime>=(now-14400)){matchesIds.push($match.data("matchId"));}});if(matchesIds.length){$.ajax({url:Goal.settings.environment.route.feed.match.scores,data:{matchId:matchesIds.sort().join(","),edition:Goal.settings.environment.edition,context:"live-scores"},dataType:"json",success:successCallback,error:function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@ Failed to refresh data",pluginNamespace));}});}};$content.on("livescores.getMatches",function(){onInterval();});$content.trigger("livescores.getMatches");setInterval(function(){$content.trigger("livescores.getMatches");},Goal.settings[pluginNamespace].liveRefreshIntervalTime);},initResultsManualRefresh:function(){$(".btn-reload",$content).on("click",function(){if(!$(this).hasClass("animate-reload")){$content.trigger("livescores.getMatches");$(this).addClass("animate-reload");_.delay(function(){$(".btn-reload").removeClass("animate-reload");},Goal.settings[pluginNamespace].reloadAnimationDuration);}});},initFilters:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initFilters",pluginNamespace));var $countryFilter=$content.find(".countries-filter");var $tabs=$content.find(".tabs");var $matchDayContainer=$content.find(".matchdays-wrapper .matchdays");var $select=$countryFilter.find("select");var $matchDays=$matchDayContainer.find(".matchday");var $matchContainer=$matchDayContainer.find(".matches");var $noMatches=$matchDayContainer.find(".no-matches");$matchDayContainer.on("filter",function(){$matchDays.removeClass("hidden");$matchContainer.removeClass("hidden").not($matchContainer.has(".match:visible")).addClass("hidden");$matchDays.filter(function(){return !$(this).find(".matches:visible").length;}).addClass("hidden");if($matchDays.is(":visible")){$noMatches.addClass("hidden");}else{var area=$select.val();var tab=$matchDayContainer.attr("data-filter-tab");var text;if(area){text=$(":selected",$select).data("text-no-"+tab);}else{text=$matchDayContainer.data("text-no-"+tab);}if(text){$noMatches.removeClass("hidden").find(".message").text(text);}}}).trigger("filter");$select.on("change",function(){var value=$select.val();$matchContainer.removeAttr("data-filter-country");if(!value){$matchDayContainer.removeAttr("data-filter-country");}else{$matchDayContainer.attr("data-filter-country","");$matchContainer.filter('[data-area-id="'+value+'"]').attr("data-filter-country","");}$matchDayContainer.trigger("filter");});$tabs.on("click",".tab",function(event){Goal.events[pluginNamespace].sortMatchdays(this);event.preventDefault();var $tab=$(this);$(".tab",$tabs).removeClass("active");$tab.addClass("active");$matchDayContainer.attr("data-filter-tab",$tab.data("tab"));$matchDayContainer.trigger("filter");});(function(){var flag;var flagTag;$select.customDropdown({callback:function(){var opt=$(this);flag=opt.attr("value")?"area-flag-18-"+opt.attr("value"):"";flagTag='<span class="'+flag+'"></span>';return flagTag+'<span class="text" data-omnitureevent>'+opt.text()+"</span>";}});})();},sortMatchdays:function(selector){var tab=$(selector).attr("data-tab");if((tab==="finished"&&sortOrder==="asc")||(tab!=="finished"&&sortOrder==="desc")){var $parent=$("[data-filter-tab]");var $el=$(".matchday",$parent);for(var i=$el.length;i>=0;i--){$parent.append($el[i]);}sortOrder=(sortOrder==="desc")?"asc":"desc";}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** login.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var CURRENT_CONTEXT=null;pluginNamespace="login";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));if(window.gigya===undefined||window.gigya.socialize===undefined){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Gigya is undefined",pluginNamespace));return;}window.gigya.socialize.addEventHandlers({onLogin:function(eventObj){var data={auth:"gigya",UID:eventObj.UID,timestamp:eventObj.timestamp,signature:eventObj.signature};if(CURRENT_CONTEXT){data["origin"]=CURRENT_CONTEXT;}$.ajax({url:Goal.settings.environment.route.login,data:data,dataType:"jsonp",crossDomain:true,jsonp:"callback",success:function(response){if(response.result===false){$("body").modalPanel({html:""});$("#modal_window").html(response.data);}else{$.modalPanel("close");Goal.events.login.internalApi.login();}}});}});var isRegistrationOpen=window.location.href.split("#");if(isRegistrationOpen[1]==="registration"){$("body").modalPanel({url:Goal.settings.environment.route.loginForm,format:"jsonp",crossDomain:true});}var isOpened=false;$('[data-role="sign-in"]').click(function(event){var dataAttr=$(this).data("params");if(dataAttr&&dataAttr["origin"]){CURRENT_CONTEXT=dataAttr["origin"];}else{CURRENT_CONTEXT=null;}var dataStr=dataAttr?$.param(dataAttr):"";event.preventDefault();if(isOpened){return;}$("body").modalPanel({url:Goal.fmt("%@?%@",Goal.settings.environment.route.loginForm,dataStr),format:"jsonp",crossDomain:true});});$('[data-role="sign-out"]').click(function(event){event.preventDefault();window.gigya.socialize.logout({callback:function(){$.each(Goal.events.login.onLogout,function(){this();});}});});if($.cookie("lklk")){Goal.log(Goal.fmt("Goal:internal:libraries:%@ cookie detected, trying to autologin",pluginNamespace));Goal.events.login.internalApi.login();}if($.getParam("verified")!==undefined){$("body").modalPanel({url:Goal.settings.environment.route.accountVerified,format:"jsonp",crossDomain:true});}if($.getParam("resetPassword")!==undefined){$("body").modalPanel({url:Goal.settings.environment.route.resetPasswordForm,data:{token:$.getParam("token")},format:"jsonp",crossDomain:true});}},onLogout:[function(){$.ajax({url:$('[data-role="sign-out"]').attr("href"),dataType:"jsonp",crossDomain:true,jsonp:"callback",success:function(response){if(response.result===true){Goal.events.login.internalApi.hideProfile();$.cookie("lklk",null);window.gigya.socialize.logout();if(window.G){window.G.env.isLoggedIn=false;}if(location.protocol==="https:"){location.href=Goal.settings.environment.route.editionHomepage;}}}});}],onLogin:[function(response){Goal.log(Goal.fmt("Goal:internal:libraries:%@ - login event triggered",pluginNamespace));Goal.events.login.internalApi.showProfile(response.user);if(window.G){window.G.env.isLoggedIn=true;}}],internalApi:{getUserInfo:function(callback){if(callback===undefined){callback=function(response){console.log(response);};}window.gigya.socialize.getUserInfo({callback:callback});},login:function(){Goal.events.login.internalApi.getUserInfo(function(response){if(response.errorCode===0&&response.user.isLoggedIn){$.each(Goal.events.login.onLogin,function(index,callback){callback(response);});}});},hideProfile:function(){$("body").find('[data-user="nickname"]').html("");$("body").find('[data-user="thumbnail"]').attr("src","");$('[data-user-state="logged-in"]').hide();$('[data-user-state="logged-out"]').show();},showProfile:function(user){var $thumbnail=$("body").find('[data-user="thumbnail"]');if(user.thumbnailURL){$thumbnail.attr("src",user.thumbnailURL).show();}else{$thumbnail.hide();}$("body").find('[data-user="nickname"]').html(user.nickname?user.nickname:user.email.replace("@","<span>@</span>"));$('[data-user-state="logged-in"]').show();$('[data-user-state="logged-out"]').hide();},addEventHandler:function(event,callback){switch(event){case"onLogin":Goal.events.login.onLogin.push(callback);break;default:Goal.log(Goal.fmt("Goal:internal:libraries:%@ Unknown callback name %@",pluginNamespace,event));}}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** match-list.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="matchList";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));var $content;pluginSettings={liveRefreshIntervalTime:120000};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));$content=$(".main-content > section");Goal.events[pluginNamespace].initFilters();Goal.events[pluginNamespace].initRowClick();Goal.events[pluginNamespace].initResultsAutoRefresh();Goal.events[pluginNamespace].initBetting();Goal.events[pluginNamespace].initToolTip();Goal.events[pluginNamespace].initOmnitureTracking();Goal.events[pluginNamespace].matchDetailsHover();},initToolTip:function(){$(".match-btn",$content).tooltip({tooltipText:$content.data("tip")});},initFilters:function(){var $filterContext=$(".filters",$content);var $competitions=$(".competitions",$filterContext);var $calendar=$(".calendar",$filterContext);if($calendar.length){Goal.events.calendarMatchDay.init.call($(".module-calendar",$calendar));$('[data-role="calendar-trigger"]',$calendar).on("click",function(event){event.stopPropagation();event.preventDefault();$(".module-calendar",$calendar).trigger("calendar.open");$("ul",$competitions).addClass("hidden");});}(function(){var flag;var flagTag;$("select",$competitions).customDropdown({callback:function(){var opt=$(this);flag=opt.data("area-id")?"area-flag-18-"+opt.data("area-id"):"";flagTag='<span class="'+flag+'"></span>';return flagTag+'<span class="text" data-omnitureevent>'+opt.text()+"</span>";}});})();(function(){var tmpl=_.template($(".no-matches-tmpl",$filterContext).html());var $prevButton=$("a[data-prev]",$calendar);var $nextButton=$("a[data-next]",$calendar);var $select=$("select",$competitions);var $competitionBlocks=$(".match-table[data-competition-id]",$content);var $dateHeader=$(".date-header",$content);var $kickoffNote=$(".kickoff-note",$content);$select.on("change",function(){var value=$(this).val();var data=$(":selected",this).data();var competitionDataId=$('[data-competition-id="'+value+'"]',$content);if(!value||data.href===window.location.pathname){return;}if(data.href){window.location.href=data.href;return;}if($calendar.length){$(".module-calendar",$calendar).data({competitionId:value,competitionUri:data.competitionUri||""});$prevButton.attr("href",data.prevMatchDayUri);$nextButton.attr("href",data.nextMatchDayUri);}$(".no-matches",$content).remove();$(".show-odds, .bookmaker-logo",$content).removeClass("hidden");$competitionBlocks.add($kickoffNote).removeClass("hidden");if(value.indexOf(",")===-1){$competitionBlocks.not(competitionDataId).addClass("hidden");Goal.events[pluginNamespace].toggleShowOddsButton(competitionDataId);}if(!$competitionBlocks.is(":visible")){$dateHeader.after(tmpl({noMatchesString:data.noMatchesString,competitionUri:data.competitionUri||""}));$(".show-odds, .bookmaker-logo",$content).addClass("hidden");$kickoffNote.addClass("hidden");}});if(!$(":selected",$select).is("[data-href]")){$select.trigger("change");}})();},initOmnitureTracking:function(){$content.attachOmnitureTracking();},initRowClick:function(){$content.on("click","tr.clickable td:not(td.match-centre), tr.clickable + tr.score-details td",function(event){event.stopPropagation();var $element=$(this);var $row=$element.parent("tr");var $link=$row.hasClass("score-details")?$row.prev("tr.clickable").find(".match-btn"):$element.siblings(".match-centre").find(".match-btn");if($link.length){$link.trigger("focus");window.location.href=$link.attr("href");}});},initResultsAutoRefresh:function(){var successCallback;var onInterval;var $matches=$("tr[data-match-id]",$content);successCallback=function(response){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Succesfully retrieved data",pluginNamespace));_.forEach(response.matches,function(match){var $gameRow=$matches.filter('[data-match-id="'+match.id+'"]');var $scoreDetails=$gameRow.next(".score-details");if(-1!==$.inArray(match.status,["played","playing","suspended"])){$(".vs",$gameRow).text(match.score.home+" - "+match.score.away);$gameRow.find(".status").text(match.period);}if($scoreDetails.length){if(match.details){$scoreDetails.find("td").text(match.details);}else{$scoreDetails.find("td").empty();}}$gameRow.attr("data-match-status",match.status);});};onInterval=function(){var now=Date.now()/1000;var matchesIds=[];$matches.each(function(){var $match=$(this);var matchTime=$match.data("matchTime");if(matchTime<now&&matchTime>=(now-14400)){matchesIds.push($match.data("matchId"));}});if(matchesIds.length){$.ajax({url:Goal.settings.environment.route.feed.match.scores,data:{matchId:matchesIds.join(","),edition:Goal.settings.environment.edition,context:"match-list"},dataType:"json",success:successCallback,error:function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@ Failed to refresh data",pluginNamespace));}});}};onInterval();setInterval(onInterval,Goal.settings[pluginNamespace].liveRefreshIntervalTime);},initBetting:function(){var bookmakerId=$($content.data("bookmakers-ids")).random()[0];if(!bookmakerId){return;}var $matches=$('tr[data-match-id]:not([data-match-status="played"])',$content);var matchesIds=[];var oddsType="1X2";$matches.each(function(){matchesIds.push($(this).data("matchId"));});if(matchesIds.length){$.ajax({url:Goal.settings.environment.route.feed.odds.match,data:{type:oddsType,matchId:matchesIds.sort().join(","),bookmakerIds:bookmakerId,context:"match-list"},dataType:"json"}).then(function(response){var inlineOddsTemplate=_.template($content.find(".inline-odds-tmpl").html());var rowTemplate=_.template($content.find(".bet-row-tmpl").html());var betBtnTemplate=_.template($content.find(".bet-button-tmpl").html());var isImageSet=false;var inlineOdds;if(_.size(response[oddsType])){$content.addClass("with-odds");$.each(response[oddsType],function(matchIndex,odds){var $matchRow=$content.find('[data-match-id="'+matchIndex+'"]');var $betButton=betBtnTemplate({text:$content.data("translationOdds")});var bookmakerName=_.keys(odds)[0];var stake=bookmakerName==="Betway"?500:5;var matchStatus=$matchRow.data("match-status");var $appendAfter;odds=odds[bookmakerName];inlineOdds=inlineOddsTemplate({typeHome:odds.home.subtype,typeDraw:odds.draw.subtype,typeAway:odds.away.subtype,betLinkHome:odds.home.affiliateLink.replace(/\[STAKE\]/,stake),betLinkDraw:odds.draw.affiliateLink.replace(/\[STAKE\]/,stake),betLinkAway:odds.away.affiliateLink.replace(/\[STAKE\]/,stake),home:odds.home.price,draw:odds.draw.price,away:odds.away.price});if((matchStatus!=="playing")&&(matchStatus!=="played")){$appendAfter=$matchRow.next(".score-details").length?$matchRow.next(".score-details"):$matchRow;$matchRow.toggleClass("has-odds").find(".match-centre").append(inlineOdds).end().find(".btn-placeholder").replaceWith($betButton);$appendAfter.after(rowTemplate({matchId:matchIndex,betLink:odds.home.affiliateLink,betLinkHome:odds.home.affiliateLink.replace(/\[STAKE\]/,stake),betLinkDraw:odds.draw.affiliateLink.replace(/\[STAKE\]/,stake),betLinkAway:odds.away.affiliateLink.replace(/\[STAKE\]/,stake),home:odds.home.price,draw:odds.draw.price,away:odds.away.price,logo:{url:odds.logo["64x22"],alt:bookmakerName}}));}if(!isImageSet){var bookmakerImage=$content.find(".bookmaker-logo");bookmakerImage.find("img").prop({"src":odds.logo["64x22"],"alt":bookmakerName});isImageSet=true;}});Goal.events[pluginNamespace].toggleShowOddsButton();}},function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@ Failed to fetch betting data",pluginNamespace));}).then(function(){$content.on("click.odds",".show-odds",function(event){event.preventDefault();var $element=$(this);var textReplacement=$element.data("hidden");$element.data("hidden",$element.text()).text(textReplacement);$content.find(".bet-row").addClass("hidden");$content.find(".has-odds").removeClass("expanded");$content.toggleClass("odds-shown");if($(".match-table .odds-header",$content).length===0){_.each($(".match-table",$content),function(table){var $table=$(table);if($table.find("[data-match-id].has-odds").length>0){var oddsHeader='<div class="odds-header"><span>1</span><span>x</span><span>2</span></div>';$table.find(".subheader th:last-child").append(oddsHeader);}});}});$content.find(".has-odds").on("click.odd",".btn-bet",function(event){event.preventDefault();$(event.delegateTarget).toggleClass("expanded");$content.find('.bet-row[data-match-id="'+$(event.delegateTarget).data("matchId")+'"]').toggleClass("hidden");});});}},matchDetailsHover:function(){$content.on("mouseenter",".score-details",function(){$(this).prevAll(".has-score-details:first").addClass("hovered");}).on("mouseleave",".score-details",function(){$(this).prevAll(".has-score-details:first").removeClass("hovered");});},toggleShowOddsButton:function(competitionDataId){if(!competitionDataId){competitionDataId=$(".match-table:not(.hidden)",$content);}if($(".has-odds",competitionDataId).length>0){$(".show-odds, .bookmaker-logo",$content).removeClass("hidden");}else{$(".show-odds, .bookmaker-logo",$content).addClass("hidden");}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** match.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="match";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={liveRefreshIntervalTime:5000,tabsLiveRefreshIntervalTime:30000};var $header=$(".top-section");var matchTime=$header.data("match-time");var slider=$(".matchStats",".main-section");var now;pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init",pluginNamespace));Goal.events[pluginNamespace].initResultsAutoRefresh();Goal.events[pluginNamespace].initTabsAutoRefresh();Goal.events[pluginNamespace].initToolTip();Goal.events.comments.init();var activeTab=$(".main-content").data("content-tab");if(activeTab==="live-commentary"){Goal.events[pluginNamespace].liveCommentary.init();Goal.events.liveVisualization.init();Goal.events[pluginNamespace].initializeStatsBar();}if(activeTab==="preview"||activeTab==="report"){Goal.events.shareBar.init();}if(activeTab==="ratings"){Goal.events[pluginNamespace].ratings.init();}if(activeTab==="preview"){Goal.events[pluginNamespace].preview.init();}if(activeTab==="stats"){Goal.events[pluginNamespace].stats.init();}if(activeTab==="lineups"){Goal.events[pluginNamespace].lineups.init();Goal.events[pluginNamespace].initializeStatsBar();}},initToolTip:function(){var $content=$(".main-content");_.forEach($("[data-tip]",$content),function(el){$(el).tooltip({tooltipText:$(el).attr("data-tip")});});},initResultsAutoRefresh:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initResultsAutoRefresh",pluginNamespace));var successCallback;var onInterval;var detailsContainer=$(".score p",$header);var matchTime=$header.data("match-time");var matchId=$header.data("match-id");var home=$(".home-score",$header);var away=$(".away-score",$header);var minute=$(".vs",$header);var matchStatus;var now;var scorerTemplate=_.template($header.find(".scorer-tmpl").html());successCallback=function(response){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Succesfully retrieved data",pluginNamespace));matchStatus=$header.attr("data-match-status");if(matchStatus&&matchStatus!==response.status){$header.attr("data-match-status",response.status);}if($.inArray(response.status,["played","playing","suspended"])!==-1){minute.text(response.period);if(response.status==="playing"){home.text(response.score.home);away.text(response.score.away);_.forEach(response.scorers,function(scorersArray,team){var scorerContainer=(team==="home")?$(".home ul",$header):$(".away ul",$header);var scoresArray=[];scorerContainer.html("");_.forEach(scorersArray,function(scorer){var player=scorerTemplate({"scorerHref":scorer.player_profile,"scorer":scorer.scores});scoresArray.push($.trim(player));});scorerContainer.append(scoresArray.join(", "));});}if(response.details){detailsContainer.text(response.details);}}};onInterval=function(){now=Date.now()/1000;if(matchTime<now&&matchTime>=(now-14400)){$.ajax({url:Goal.settings.environment.route.feed.match.matchDetails,data:{matchId:matchId,edition:Goal.settings.environment.edition,variant:"match-header"},dataType:"json",success:successCallback,error:function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@ Failed to refresh data",pluginNamespace));}});}};onInterval();setInterval(onInterval,Goal.settings[pluginNamespace].liveRefreshIntervalTime);},initTabsAutoRefresh:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:initResultsAutoRefresh",pluginNamespace));var $content=$(".main-section");var $menu=$(".match-menu",$content);var successCallback;var onInterval;var matchId=$header.data("match-id");var now;successCallback=function(response){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Succesfully retrieved data",pluginNamespace));var tabsLength=response.activeTabs.length;if($menu.attr("data-tabs-quantity")!==tabsLength){$menu.attr("data-tabs-quantity",tabsLength);$("li",$menu).addClass("hidden");_.forEach(response.activeTabs,function(tab){if(tabsLength>1){$("li."+tab,$menu).removeClass("hidden");}});}};onInterval=function(){now=Date.now()/1000;if(matchTime<now&&matchTime>=(now-14400)){$.ajax({url:Goal.settings.environment.route.feed.page.match,data:{matchId:matchId,edition:Goal.settings.environment.edition},dataType:"json",success:successCallback,error:function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@ Failed to refresh data",pluginNamespace));}});}};onInterval();setInterval(onInterval,Goal.settings[pluginNamespace].tabsLiveRefreshIntervalTime);},initializeStatsBar:function(){var checkMatchStart;var executeStatsBar;executeStatsBar=function(){now=Date.now()/1000;if(now>matchTime){clearInterval(checkMatchStart);var $slides=$("div[data-chart-name]",slider);var stats=[];if($slides.length>0){_.forEach($slides,function(el){stats.push($(el).data("chart-name"));});}Goal.events.match.feedFetch.fetchData(stats,matchTime);}};checkMatchStart=setInterval(executeStatsBar,Goal.settings[pluginNamespace].tabsLiveRefreshIntervalTime);executeStatsBar();},initSlider:function(){var prev=$(".arrow.prev",slider);var next=$(".arrow.next",slider);slider.removeClass("hidden");Goal.events.carousel.init.call(slider,{desktopClickDrag:false,autoSlide:true,autoSlideTimer:6000,navPrevSelector:prev,navNextSelector:next});},updateSlider:function(){slider.iosSlider("update");}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** navigation.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var $innerModule=$(".module-navigation .submenu-inner-module");pluginNamespace="navigation";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:{forDevice:function(){Goal.log(Goal.fmt("Goal:events:%@:init.%@ ",pluginNamespace));Goal.events.navigation.internalAPI.detectDropdowns();Goal.events.navigation.internalAPI.detectBigMenus();Goal.events.navigation.internalAPI.scaleSubmenu();Goal.events.navigation.internalAPI.plugSubmenuDropdownEvents();Goal.events.navigation.internalAPI.plugSubmenuSliderEvents();Goal.events.navigation.internalAPI.disableNonlinks();$(".module-navigation").bind("recalculateSubmenu",function(){Goal.events.navigation.internalAPI.scaleSubmenu();Goal.events.navigation.internalAPI.plugSubmenuSliderEvents();});},tablet:function(){Goal.events.navigation.internalAPI.addMenuDropdownArrows();Goal.events.navigation.internalAPI.scaleMenu();Goal.events.navigation.internalAPI.plugDropdownArrowEvent();Goal.events.navigation.init.forDevice.call(this,"tablet");},desktop:function(){Goal.events.navigation.init.forDevice.call(this,"desktop");$("[data-navigation] > li").removeClass("hidden");$("[data-navigation] > .more").addClass("hidden");}},internalAPI:{scaleMenu:function(){var totalWidth;var elements;var moreItem;var moreItemWidth;var href;totalWidth=0;elements=[];moreItem=$("[data-navigation] > .more");if(moreItem.hasClass("hidden")){moreItem.removeClass("hidden");moreItemWidth=moreItem.outerWidth()+70;moreItem.addClass("hidden");}else{moreItemWidth=moreItem.outerWidth()+70;}$("[data-navigation] > li").not(".more").hide().each(function(){totalWidth+=$(this).outerWidth();if(totalWidth>$("[data-navigation]").width()-moreItemWidth){href=$(this).children("a:first").attr("href");if(href==="#"){href=$(this).find(".sub a:first").attr("href")||"#";}elements.push($("<li>").append($(this).clone().children("a:first").attr("href",href)));$(this).addClass("hidden");}}).show();if(!$("[data-navigation] > .more").children(".arrow").length&&elements.length>0){$("[data-navigation] > .more").append('<span class="arrow">');$("[data-navigation] > .more").append('<ul class="sub">');$("[data-navigation] > .more ul").append(elements);$("[data-navigation] > .more").show();}$("[data-navigation] > .more").removeClass("hidden");},scaleSubmenu:function(){var totalWidth;var sideElementWidth;var arrowsWidth;var maxWidth;var slides;var marginSide;totalWidth=0;sideElementWidth=$innerModule.outerWidth();arrowsWidth=60;maxWidth=$("[data-navigation]").width()-sideElementWidth-arrowsWidth;slides=1;marginSide=$("body").hasClass("dir-rtl")?"right":"left";$("[data-subnavigation] > li").each(function(){$(this).removeAttr("style").removeClass("with-offset");var currentWidth=$(this).outerWidth(true);if((totalWidth+currentWidth)>slides*maxWidth){$(this).css("margin-"+marginSide,(slides*maxWidth)-totalWidth+"px").addClass("with-offset");slides++;}totalWidth+=Math.round($(this).outerWidth(true));});if(maxWidth>0&&totalWidth>maxWidth){$('[data-role="submenu-slider"]').removeClass("hidden");$("[data-subnavigation]").css("width",slides*maxWidth+sideElementWidth+arrowsWidth);}else{$('[data-role="submenu-slider"]').addClass("hidden");$("[data-subnavigation] > li").removeClass("hidden");$("[data-subnavigation]").css("width","auto");}},addMenuDropdownArrows:function(){$("[data-navigation] > li > ul.sub").each(function(){if(!$(this).parent("li").children(".arrow").length){$(this).parent("li").append($('<span class="arrow">'));}});},plugDropdownArrowEvent:function(){$("[data-navigation] > li .arrow").bindNamespacedEvent("click",function(event){event.preventDefault();var $listElement=$(this).parent("li");if($listElement.children("ul.sub").length){$("[data-navigation] > li").not($listElement).removeClass("hover");$listElement.toggleClass("hover");}});},plugSubmenuDropdownEvents:function(){$("[data-subnavigation] .arrow").bindNamespacedEvent("click tap",function(event){event.preventDefault();var className="opened";$(this).parent("li").toggleClass(function(){if($(this).hasClass(className)===false){event.stopImmediatePropagation();$(Goal.fmt("[data-subnavigation] .%@",className)).removeClass(className);Goal.events.navigation.internalAPI.detachDropdownCloseEvents();Goal.events.navigation.internalAPI.attachDropdownCloseEvents(className);return className;}else{Goal.events.navigation.internalAPI.detachDropdownCloseEvents();return className;}});});},disableNonlinks:function(){$('.module-navigation [data-navigation] a[href="#"], .module-navigation [data-subnavigation] a[href="#"]').bindNamespacedEvent("click",function(event){event.preventDefault();});},plugSubmenuSliderEvents:function(){var arrowsPosition;var secondArrow;var sideElementWidth;var arrowsWidth;var subnavWidth;arrowsWidth=$('[data-role="submenu-slider"]').width();sideElementWidth=$innerModule.width();if(sideElementWidth>0){sideElementWidth-=1;}subnavWidth=$("[data-subnavigation]").width();if($("body").hasClass("dir-rtl")){arrowsPosition="left";secondArrow=".slide-right";}else{arrowsPosition="right";secondArrow=".slide-left";}$('[data-role="submenu-slider"]').show().css(arrowsPosition,sideElementWidth).filter(secondArrow).css(arrowsPosition,sideElementWidth+30);$("[data-subnavigation]").parent("div").animate({scrollLeft:$("body").hasClass("dir-rtl")?subnavWidth:0},100);$('[data-role="submenu-slider"]').unbindNamespacedEvent();$('[data-role="submenu-slider"]').bindNamespacedEvent("click tap",function(event){event.preventDefault();var scrollValue=$("[data-subnavigation]").parent().outerWidth()-sideElementWidth-arrowsWidth*2;if($(this).hasClass("slide-right")){scrollValue=Goal.fmt("+=%@",scrollValue);}else{scrollValue=Goal.fmt("-=%@",scrollValue);}$("[data-subnavigation]").parent("div").animate({scrollLeft:scrollValue},500);});},detectDropdowns:function(){$("[data-navigation] > li").each(function(){if($(this).children(".sub").length>0){$(this).addClass("parent");}});},detectBigMenus:function(){$("[data-navigation] > li").not(".more").each(function(){if($(this).children(".sub").children("li").children("ul").length>0){$(this).children(".sub").addClass("big");}});},attachDropdownCloseEvents:function(className){$("*").bindNamespacedEvent("click.canceler tap.canceler",function(){$(Goal.fmt("[data-subnavigation] .%@",className)).removeClass(className);Goal.events.navigation.internalAPI.detachDropdownCloseEvents();});},detachDropdownCloseEvents:function(){$("*").unbindNamespacedEvent("click.canceler tap.canceler");}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** next-match.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="nextMatch";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.events[pluginNamespace].bindRowOnClick.call(this);Goal.events[pluginNamespace].renderMatchOdds.call(this);Goal.events[pluginNamespace].bindTracking.call(this);},bindRowOnClick:function(){$(this).on("click",".clickable",function(){var url=$(this).find("[href]").attr("href");if(url){window.location.href=url;}});},renderMatchOdds:function(){var $this=$(this);var oddsType="1X2";var matchId=$this.data("match-id");var status=$this.data("match-status");if(!matchId){return;}if("playing"===status||"suspended"===status){return;}if(!Goal.settings.environment.bookmakersIds.length){return;}$.ajax({url:Goal.settings.environment.route.feed.odds.match,data:{type:oddsType,matchId:matchId,bookmakerIds:Goal.settings.environment.bookmakersIds.sort().join(",")},dataType:"json"}).then(function(response){var template=_.template($this.find('[data-template="odds"]').html());var $fragment=$(document.createDocumentFragment());var bookmakerName;var odds;if(response[oddsType][matchId]){bookmakerName=_.keys(response[oddsType][matchId])[0];var stake=bookmakerName==="Betway"?500:5;odds=response[oddsType][matchId][bookmakerName];if(odds){$fragment.append(template({betLinkHome:odds.home.affiliateLink.replace(/\[STAKE\]/,stake),betLinkDraw:odds.draw.affiliateLink.replace(/\[STAKE\]/,stake),betLinkAway:odds.away.affiliateLink.replace(/\[STAKE\]/,stake),home:odds.home.price,draw:odds.draw.price,away:odds.away.price}));$this.find('[data-role="odds-container"]').append($fragment);$this.find(".match-odds").addClass("match-odds-loaded");}}}).fail(function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Error: %@",pluginNamespace,"getting odds failed"));});},bindTracking:function(){this.attachOmnitureTracking();}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** outdatedBrowsers.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="outdatedBrowsers";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var shouldDisplay=true;var container;var storageKeyName="outdatedBrowserInfoCancelled";var storageTTL=7*24*60*60;if($.jStorage.storageAvailable()&&$.jStorage.get(storageKeyName,false)){shouldDisplay=false;}if(shouldDisplay&&/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ieversion=parseInt(RegExp.$1,10);var cName=(ieversion>=6)?("ob-msie-"+ieversion):"ob-msie-other";container=$(".module-outdated-browsers");container.html(container.htmlComments());var toShow=container.find("."+cName);if(toShow.length>0){toShow.removeClass("hidden");container.removeClass("hidden");container.on("click",".close-button",function(){container.addClass("hidden");if($.jStorage.storageAvailable()){$.jStorage.set(storageKeyName,true,{"TTL":storageTTL});}});}}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);}(this,this.document));
/*** page-navigation.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="pageNavigation";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={specialKeys:[16,18],specialPressed:false};pluginEvents={init:function(){Goal.events[pluginNamespace].bindKeys.call(this);},bindKeys:function(){var keyCodeToElementMapping=Goal.events[pluginNamespace].getKeyCodeToElementMapping(this);var $formElements=$("button, input, keygen, select, textarea");$(window).on("keydown",function(event){if($formElements.is(":focus")){return;}Goal.events[pluginNamespace].setSpecialKeyPressedState(event);Goal.events[pluginNamespace].triggerClick(keyCodeToElementMapping[event.keyCode],event.keyCode);}).on("keyup",Goal.events[pluginNamespace].setSpecialKeyPressedState);},getKeyCodeToElementMapping:function($context){var prevArrowKeyCode=Goal.settings.environment.isRTL?39:37;var nextArrowKeyCode=Goal.settings.environment.isRTL?37:39;var keyCodeToElementMapping={};keyCodeToElementMapping[prevArrowKeyCode]=$context.find(".prev");keyCodeToElementMapping[nextArrowKeyCode]=$context.find(".next");return keyCodeToElementMapping;},setSpecialKeyPressedState:function(event){if(_.contains(Goal.settings[pluginNamespace].specialKeys,event.keyCode)){Goal.settings[pluginNamespace].specialPressed=("keydown"===event.type);}},triggerClick:function($element,keyCode){if(!Goal.settings[pluginNamespace].specialPressed&&$element){$element.trigger("focus").get(0).click();}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** poll.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="poll";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={colors:["#081f2c","#00ac77","#00a9ce","#e87722","#a2aaad","#1f324a","#00e19b","#008254","#a0356f","#87ae20"],backgroundFill:"#ffffff",middleCirleFill:"#e3e5e6",canvasSize:{width:260,height:260},graphSelector:'[data-role="graph"]',widgetSelector:'[data-widget="poll"]',dataValueAttr:"data-value"};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));$(Goal.settings.poll.graphSelector).each(function(){if(!$(this).children("canvas").length){Goal.events.poll.internalAPI.chart.render.call($(this));}});$(Goal.settings.poll.widgetSelector).each(function(){Goal.events.poll.internalAPI.options.render.call(this);Goal.events.poll.internalAPI.options.plugEvents.call(this);Goal.events.poll.internalAPI.results.render.call(this);Goal.events.poll.internalAPI.view.init.call(this);Goal.events.poll.internalAPI.view.plugEvents.call(this);});},internalAPI:{poll:{share:function(){Goal.log(Goal.fmt("Goal:events:%@:internalAPI:share ",pluginNamespace));var action=new gigya.socialize.UserAction();action.setLinkBack(document.location.href);action.setTitle(this.data("strings-answered")+this.find("form").find("input[type=radio]:checked").parents("label:first").find("[data-role=answer-text]").text());action.setDescription(this.data("strings-voted-on-poll")+this.data("question"));action.addMediaItem({src:this.data("image"),previewImageURL:this.data("image"),type:"image"});gigya.socialize.showShareUI({userAction:action});},vote:function(){Goal.log(Goal.fmt("Goal:events:%@:internalAPI:vote ",pluginNamespace));var pollId=$(this).data("pollid");var pollAnswerId=$(this).find("form").find("input[type=radio]:checked").val();var $widget=$(this);if(!pollAnswerId){return;}$(this).find('[data-role="vote-now"]').attr("disabled",true);$(this).find('[data-role="view-results"]').attr("disabled",true);$.ajax({url:Goal.fmt("/%@/module/poll/vote",Goal.settings.environment.edition),method:"POST",data:{pollId:pollId,pollAnswerId:pollAnswerId},success:function(){var voteData={"answerId":pollAnswerId};$.jStorage.set(Goal.fmt("poll%@",pollId),voteData);Goal.events.poll.internalAPI.view.switchStatus.call($widget,"after-vote");Goal.events.poll.internalAPI.view.pollRedraw.call($widget,pollAnswerId);Goal.events.poll.internalAPI.poll.share.call($widget);}});}},view:{plugEvents:function(){var API=Goal.events.poll.internalAPI.view;var storage=$.jStorage.get(Goal.fmt("poll%@",$(this).data("pollid")));API.attachVoteNow.call(this);API.attachViewResults.call(this);API.attachBack.call(this);if(storage||$(this).data("force-results")){Goal.events.poll.internalAPI.view.switchStatus.call(this,"after-vote");}},attachVoteNow:function(){var $element=$(this);$(this).find('[data-role="vote-now"]').bindNamespacedEvent("click",function(event){event.preventDefault();Goal.events.poll.internalAPI.poll.vote.call($element);});},attachViewResults:function(){var $element=$(this);$(this).find('[data-role="view-results"]').bindNamespacedEvent("click",function(event){event.preventDefault();Goal.events.poll.internalAPI.view.switchStatus.call($element,"results");});},attachBack:function(){var $element=$(this);$(this).find('[data-role="back"]').bindNamespacedEvent("click",function(event){event.preventDefault();Goal.events.poll.internalAPI.view.switchStatus.call($element,"vote");});},init:function(){var API=Goal.events.poll.internalAPI.view;API.switchStatus.call(this,"vote");},switchStatus:function(status){Goal.log(Goal.fmt("Goal:events:%@:internalAPI:view:switchStatus ",pluginNamespace));var API=Goal.events.poll.internalAPI.view;$(this).find("[data-status]").addClass("hidden");if(status=="vote"){API.showElements.call(this,["vote","vote-now","view-results"]);}else{if(status=="after-vote"){API.showElements.call(this,["graph","results"]);$(this).addClass("poll-results");}else{if(status=="results"){API.showElements.call(this,["graph","results","back"]);$(this).addClass("poll-results");}}}},showElements:function(status){var $element=$(this);$(status).each(function(){$element.find(Goal.fmt('[data-status="%@"]',this)).removeClass("hidden");});},pollRedraw:function(pollAnswerId){var $canvas;var allData;var votedData;var chartSlices;var indexes;var yourVote;indexes={};allData=this.find('[data-role="graph"] [data-answer-id]');votedData=this.find(Goal.fmt('[data-role="graph"] [data-answer-id="%@"]',pollAnswerId));votedData.attr("data-value",parseInt(votedData.data("value"),10)+1);this.find(Goal.settings.poll.graphSelector).children("canvas").remove();Goal.events.poll.internalAPI.chart.render.call(this.find(Goal.settings.poll.graphSelector));$canvas=this.find("canvas");chartSlices=$canvas.data("ws").chartSlices;allData.each(function(index){indexes[$(this).data("answerId")]=index;});yourVote=(chartSlices[indexes[pollAnswerId]].percentageValue*100).toFixed(1)+"%";$canvas.siblings(".center").empty().html(Goal.fmt("<span>%@</span> %@",$canvas.siblings(".center").data("votedText"),yourVote));$canvas.data("centerText",this.find(".center").html());var answers=this.find(".vote-results");allData.each(function(index){var percentageValue=(chartSlices[index].percentageValue*100).toFixed(1)+"%";var $element=answers.find(Goal.fmt('[data-answer-id="%@"]',$(this).data("answerId")));if($element.find(".percentage").length){$element.find(".percentage").html(percentageValue);}else{$element.prepend(Goal.fmt('<div class="percentage">%@</div>',percentageValue));}});this.find("[data-answer-id]").removeClass("selected").removeAttr("style");this.find(Goal.fmt('[data-answer-id="%@"]',pollAnswerId)).addClass("selected");Goal.events.poll.internalAPI.results.render.call(this);}},chart:{render:function(){var API=Goal.events.poll.internalAPI.chart;var $canvas=API.buildCanvas.call(this);API.gatherData.call(this,$canvas);API.drawChart($canvas);API.bindCanvasEvents($canvas);},_widgetStorage:function(){this.pixelRatio=(window.devicePixelRatio)?window.devicePixelRatio:1;this.context=null;this.fullValue=0;this.dataValues=[];this.chartSlices=[];},_getNewWidgetStorage:function(){return new Goal.events.poll.internalAPI.chart._widgetStorage();},setWidgetStorage:function($element,widgetStorage){return $element.data("ws",widgetStorage);},getWidgetStorage:function($element){var widgetStorage=$element.data("ws");if(!widgetStorage){widgetStorage=Goal.events.poll.internalAPI.chart._getNewWidgetStorage();Goal.events.poll.internalAPI.chart.setWidgetStorage($element,widgetStorage);}return widgetStorage;},buildCanvas:function(){var $canvas=$('<canvas class="canvas-graph-element" />');var storage=Goal.events.poll.internalAPI.chart.getWidgetStorage($canvas);$canvas.attr({"height":Goal.settings.poll.canvasSize.height*storage.pixelRatio,"width":Goal.settings.poll.canvasSize.width*storage.pixelRatio});$canvas.css({"height":Goal.settings.poll.canvasSize.height,"width":Goal.settings.poll.canvasSize.width});if(!!window.G_vmlCanvasManager){window.G_vmlCanvasManager.initElement($canvas[0]);}$(this).prepend($canvas);storage.context=$canvas[0].getContext("2d");Goal.events.poll.internalAPI.chart.setWidgetStorage($canvas,storage);return $canvas;},gatherData:function($canvas){var storage;var $chartData;storage=Goal.events.poll.internalAPI.chart.getWidgetStorage($canvas);$chartData=$(this).children(Goal.fmt("[%@]",Goal.settings.poll.dataValueAttr));storage.fullValue=_.reduce($chartData,function(sum,element){return sum+parseInt($(element).attr(Goal.settings.poll.dataValueAttr),10);},0);$chartData.each(function(index){var percentageValue=(parseInt($(this).attr(Goal.settings.poll.dataValueAttr),10)/storage.fullValue)*360;storage.dataValues.push(percentageValue);$(this).attr("data-color",Goal.settings.poll.colors[index]);});Goal.events.poll.internalAPI.chart.setWidgetStorage($canvas,storage);},drawChart:function($canvas){var API=Goal.events.poll.internalAPI.chart;var storage=API.getWidgetStorage($canvas);API.drawArc($canvas,0,360,Goal.settings.poll.backgroundFill);for(var index=0;index<storage.dataValues.length;index++){var startingAngle;var arcSize;startingAngle=API.sumTo(storage.dataValues,index);arcSize=storage.dataValues[index];storage.chartSlices.push(API.drawArc($canvas,startingAngle,arcSize,Goal.settings.poll.colors[index]));}API.drawArc($canvas,0,360,Goal.settings.poll.middleCirleFill,90);API.setWidgetStorage($canvas,storage);},bindCanvasEvents:function($canvas){var API=Goal.events.poll.internalAPI.chart;var storage=API.getWidgetStorage($canvas);if(storage.chartSlices.length>0){$canvas.data("centerText",$canvas.siblings(".center").html());$canvas.on("mousemove",API.hoverEventsHandler);$canvas.on("mouseout",API.restoreDefaultValue);}},sumTo:function(numbers,limit){var numbersToSum=_.first(numbers,limit);return _.reduce(numbersToSum,function(sum,element){return sum+element;},0);},degreesToRadians:function(degrees){return(degrees*Math.PI/180);},restoreDefaultValue:function(){var $element=$(this).siblings(".center");$element.css("color",$(this).data("centerColor"));$element.html($(this).data("centerText"));},drawArc:function($canvas,startingAngle,arcSize,fillColor,radius){var storage;var centerX;var centerY;var endingAngle;var percentageValue;var API;API=Goal.events.poll.internalAPI.chart;storage=API.getWidgetStorage($canvas);storage.context.save();percentageValue=arcSize/360;startingAngle=API.degreesToRadians(startingAngle);arcSize=API.degreesToRadians(arcSize);radius=(radius)?(radius*storage.pixelRatio):(Math.floor($canvas.attr("width")/2));centerX=Math.floor($canvas.attr("width")/2);centerY=Math.floor($canvas.attr("height")/2);endingAngle=startingAngle+arcSize;if(arcSize>0){storage.context.beginPath();storage.context.moveTo(centerX,centerY);storage.context.arc(centerX,centerY,radius,startingAngle,endingAngle,false);storage.context.closePath();storage.context.fillStyle=fillColor;storage.context.fill();storage.context.restore();API.setWidgetStorage($canvas,storage);}return{centerX:centerX,centerY:centerY,radius:radius,startingAngle:startingAngle,endingAngle:endingAngle,arcSize:arcSize,percentageValue:percentageValue};},hoverEventsHandler:function(event){var storage;var mouseX;var mouseY;var radius;var innerRadius;var xFromCenter;var yFromCenter;var distanceFromCenter;var API;API=Goal.events.poll.internalAPI.chart;storage=API.getWidgetStorage($(this));mouseX=event.pageX-$(this).offset().left;mouseY=event.pageY-$(this).offset().top;radius=$(this).width()/2;innerRadius=90;xFromCenter=mouseX-Math.floor($(this).width()/2);yFromCenter=mouseY-Math.floor($(this).height()/2);distanceFromCenter=Math.sqrt(Math.pow(Math.abs(xFromCenter),2)+Math.pow(Math.abs(yFromCenter),2));if(distanceFromCenter<=radius&&distanceFromCenter>=innerRadius){var clickAngle=Math.atan2(yFromCenter,xFromCenter);if(clickAngle<0){clickAngle=2*Math.PI+clickAngle;}for(var index in storage.chartSlices){if(clickAngle>=storage.chartSlices[index].startingAngle&&clickAngle<=storage.chartSlices[index].endingAngle){$(this).siblings(".center").html("<span>&nbsp;</span>"+((storage.dataValues[index]/360)*100).toFixed(1)+"%");$(this).siblings(".center").css("color",Goal.settings.poll.colors[index]);return;}}}else{if(distanceFromCenter>=radius||distanceFromCenter<=innerRadius){API.restoreDefaultValue.call(this);}}API.setWidgetStorage($(this),storage);}},options:{render:function(){$(this).find(".vote-options label").each(function(index){$(this).data("color",Goal.settings.poll.colors[index]);});},plugEvents:function(){$(this).find(".vote-options input").bindNamespacedEvent("change",function(){var $labelHolder=$(this).parents("label");$(this).parents(".vote-options").find("label").removeClass("checked");$(this).parents(".vote-options").find(".input-holder").attr("style",null);$labelHolder.addClass("checked");$labelHolder.children(".input-holder").css("background",$(this).parents("label").data("color"));});}},results:{render:function(){var self=this;$(this).find(".vote-results ul li").each(function(index){$(this).data("color",Goal.settings.poll.colors[index]);$(this).children(".percentage").css("color",Goal.settings.poll.colors[index]);if($(this).hasClass("selected")){$(this).css("background",$(this).data("color"));$(self).find("canvas").data("centerColor",$(this).data("color"));$(self).find(".center").css("color",$(this).data("color"));$(this).children(".percentage").css("color",$(this).data("color"));}});}}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** popularNow.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="popularNow";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var $pluginContainer=$(this);Goal.events.popularNow.internalApi.hideEmptyTabs($pluginContainer);Goal.events.popularNow.internalApi.initGigyaMostDiscussed($pluginContainer);},internalApi:{initGigyaMostDiscussed:function($pluginContainer){Goal.log(Goal.fmt("Goal:events:%@:internalApi:initGigyaMostDiscussed ",pluginNamespace));if(window.gigya===undefined||window.gigya.socialize===undefined){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Gigya is undefined",pluginNamespace));return;}$('[data-plugin="most-discussed"]',$pluginContainer).each(function(){var $element=$(this);var data=$element.data();var template=_.template($element.htmlComments());if($("*",$element).length){return;}window.gigya.comments.getTopStreams({categoryID:data.categoryId,streamTag:data.streamTag,maxStreamAge:data.maxStreamAge,cacheTimeout:300000,limit:data.limit,callback:function(result){var list=[];if(result.status==="OK"&&result.streams.length){$.each(result.streams,function(index,stream){if(stream.streamURL){list.push(template({title:stream.streamTitle,url:stream.streamURL,counts:stream.commentCount}));}});}if(list.length){$element.append(list.join(""));$(Goal.fmt('[data-tab="%@"]',$element.parent().data("tabcontent"))).show();}else{$element.remove();}}});});},hideEmptyTabs:function($pluginContainer){$("[data-tab]",$pluginContainer).each(function(){var tabName=$(this).data("tab");var $content=$('[data-tabcontent="'+tabName+'"]');if(!$("> *",$content).length||!$("> ol > *",$content).length){$(this).hide();}});}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** predictor.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var storageNamespace;var storage;pluginNamespace="predictor";storageNamespace=Goal.fmt("module:%@",pluginNamespace);namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));storage=$.jStorage.get(storageNamespace)||{};pluginSettings={};pluginEvents={init:function(event){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));event.preventDefault();var $module=$(this);(function(){var $current;$('li[data-role="predict-matches-switcher"]',$module).each(function(index,element){var data=$(element).data();if(!storage[data.matchId]){$current=$(element);return false;}});if(!$current){$current=$module.find('.matches-list li[data-role="predict-matches-switcher"]').first();}$current.trigger("click");})();$(".home-score, .away-score",$module).change(function(){var homeScore=$(".home-score",$module).val();var awayScore=$(".away-score",$module).val();$('[data-role="predict"]',$module).attr("disabled",!(homeScore&&awayScore));});},togglePredictListMatches:function(event){Goal.log(Goal.fmt("Goal:events:%@:togglePredictListMatches Toggling Predict List of Matches",pluginNamespace));event.preventDefault();var $list=$(this).parent();$list.toggleClass("expanded");},predictMatch:function(event){Goal.log(Goal.fmt("Goal:events:%@:predictMatch Predict match",pluginNamespace));event.preventDefault();var $button=$(this);var $module=$button.parents(".module-predict");$button.attr("disabled",true);$.ajax({url:Goal.settings.environment.route.predictMatch,method:"POST",dataType:"json",data:{matchId:$(".matches-list li.selected",$module).data().matchId,home:$(".home-score",$module).val(),away:$(".away-score",$module).val()},success:function(response){storage[response.data.matchId]=response.data;$.jStorage.set(storageNamespace,storage);$.ajax({url:Goal.settings.environment.route.betPredictScore,method:"POST",data:{matchId:response.data.matchId,score:response.data.score,bookmaker:$module.attr("data-force-bookmaker"),context:Goal.context.name},success:function(response){if(response){$button.hide();$("footer.widget-footer",$module).prepend($(response));Goal.events.betting.predictscore.init();}}});}});},switchPredictMatch:function(event){Goal.log(Goal.fmt("Goal:events:%@:switchPredictMatch Switch predict match",pluginNamespace));event.preventDefault();var $selected=$(this);var $module=$selected.parents(".module-predict");var $teams=$(".predict-team",$module);var $toggler=$(".toggler",$module);var data=$selected.data();var setTeam=function($team,teamLogo,teamName){$("img",$team).attr({"src":teamLogo,"title":teamName});$("span",$team).html(teamName);};$(".predict-content",$module).removeClass("hidden").show();$("footer.widget-footer",$module).show();if(storage[data.matchId]){$(".home-score",$module).val(storage[data.matchId].homeScore);$(".away-score",$module).val(storage[data.matchId].awayScore);}else{$("select",$module).prop("selectedIndex",0);}$('[data-role="predict"]',$module).show().attr("disabled",true);$(".module-bet-predictscore",$module).remove();$(".predict-top",$module).addClass("hidden");$(Goal.fmt('.predict-top[data-match="%@"]',data.matchId),$module).removeClass("hidden");setTeam($teams[0],data.teamHomeLogo,data.teamHomeName);setTeam($teams[1],data.teamAwayLogo,data.teamAwayName);$selected.siblings(".selected").removeClass("selected");$selected.addClass("selected");if($toggler.parent().hasClass("expanded")){$toggler.triggerNamespacedEvent("click");}$(".matches-list li",$module).removeClass("odd even").not(".selected").each(function(index){$(this).addClass(index%2?"even":"odd");});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** promoMpu.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="promoMpu";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init",pluginNamespace));var promo=$(".module.module-promo-mpu").find("a").random().get(0);var img=$(promo).find("img");img.attr("src",img.data("src"));$(promo).show();}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** ranking-table.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var context;var competitionId;var $buttonShowAll;pluginNamespace="rankingTable";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginEvents={init:function(){context=$(".module-ranking-table");$buttonShowAll=$(".show-all",context);Goal.events[pluginNamespace].showAll();Goal.events[pluginNamespace].initCustomSelect();Goal.events[pluginNamespace].filterByStatistics();Goal.events[pluginNamespace].filterByCompetitions();Goal.events[pluginNamespace].initSorter();Goal.events[pluginNamespace].sortByStats();Goal.events[pluginNamespace].hoverOnColumns();Goal.events[pluginNamespace].initDefaultFilters();},initSorter:function(){new Tablesort(document.getElementById("huawei-table"),{descending:true});},initDefaultFilters:function(){var competitionId=$.getUrlParam("competitionId")||0;var statName=$.getUrlParam("stat")||"goalsScoredPerGame";var $column=$('th[data-stat-name="'+statName+'"]',context);var columnIndex=$column.index()+1;var $rows=$("tbody tr",context);$rows.css("display","none");if(statName){$.each($('.statistics [data-plugin="customDropdown"] > option',context),function(index){if($(this).data().statistics.split(",").indexOf(String(columnIndex))!=-1){$(this).parent().val($(this).html()).change();return;}});}$('.sort-header[data-stat-name="'+statName+'"]',context).click();if(competitionId){$('.competitions [data-plugin="customDropdown"]',context).val(String(competitionId)).change();}if($column.data().sortRevert){$("table",context).attr("data-sort-order","descending");}else{$("table",context).attr("data-sort-order","");}Goal.events[pluginNamespace].renumerate();},renumerate:function(){var $rows=(competitionId?$("tbody tr:visible",context):$("tbody tr",context));var direction=($("table",context).attr("data-sort-order")=="descending"?-1:1);var current=direction<0?$rows.length+1:0;$rows.each(function(index){var $element=$(this);$element.find("td:first-child").html(current+=direction);});$rows.length;},sortByStats:function(){var $table=$("table",context);$(".sort-header",context).on("click",function(){var revert=$(this).attr("data-sort-revert");var $rows=$("tbody tr",context);$rows.css("display","none");if(!competitionId){$buttonShowAll.removeClass("hidden");$("tbody tr:nth-child(-n+20)",context).css("display","table-row");$rows=$("tbody tr",context);}else{$('tbody tr[data-competition-id="'+competitionId+'"]',context).css("display","table-row");$rows=$rows.filter('[data-competition-id="'+competitionId+'"]');}if($(this).hasClass("sort-up")){$table.attr("data-sort-order","");Goal.events[pluginNamespace].setIndex($rows);}else{$table.attr("data-sort-order","descending");Goal.events[pluginNamespace].setIndex($rows,"descending");}if(revert==="true"){if($(this).hasClass("sort-up")){$table.attr("data-sort-order","descending");Goal.events[pluginNamespace].setIndex($rows,"descending");}else{$table.attr("data-sort-order","");Goal.events[pluginNamespace].setIndex($rows);}}Goal.events[pluginNamespace].hoverSortedColumn(this);});},initCustomSelect:function(){var flag;var flagTag;$('[data-plugin="customDropdown"]',context).customDropdown({callback:function(){var opt=$(this);flag=opt.val()?"area-flag-18-"+opt.data("area-id"):"";flagTag='<span class="'+flag+'"></span>';return flagTag+'<span class="text" data-omnitureevent>'+opt.text()+"</span>";}});},filterByStatistics:function(){var filterColumns;filterColumns=function(colsToShow){if(!Array.isArray(colsToShow)){return;}$("th:nth-child(n+5), td:nth-child(n+5)",context).css("display","none");colsToShow.forEach(function(element){$("th:nth-child("+element+"), td:nth-child("+element+")",context).css("display","table-cell");});};$('.statistics [data-plugin="customDropdown"]',context).on("change",function(){var columns=$(":selected",this).data("statistics").split(",");filterColumns(columns);});},filterByCompetitions:function(){var filterContent;var changeCaption;filterContent=function(){competitionId=$(":selected",this).val();var direction=$("table",context).attr("data-sort-order");var rows=$("tbody tr",context);rows.css("display","table-row");$("tbody",context).removeClass("crest");if(competitionId){rows=rows.filter('[data-competition-id="'+competitionId+'"]');$("tbody",context).addClass("crest");$('tbody tr[data-competition-id!="'+competitionId+'"]',context).css("display","none");$buttonShowAll.addClass("hidden");}else{$("tbody tr:nth-child(n+21)",context).css("display","none");$buttonShowAll.removeClass("hidden");}Goal.events[pluginNamespace].renumerate();};changeCaption=function(){var competition=$(":selected",this).text();$("caption h2",context).text(competition);};filterContent();$('.competitions [data-plugin="customDropdown"]',context).on("change",filterContent).on("change",changeCaption);},showAll:function(){competitionId=$(":selected",this).val();if(competitionId){$buttonShowAll.addClass("hidden");}else{$buttonShowAll.removeClass("hidden");}$buttonShowAll.on("click",function(){$("tbody tr",context).css("display","table-row");$buttonShowAll.addClass("hidden");});},setIndex:function(rows,direction){_.forEach(rows,function(el,index){var number=++index;if(direction==="descending"){number=rows.length+1-index;}$(el).find("td:first-child").html(number);});},hoverOnColumns:function(){var $cells=$("th:nth-child(n+5)",context);var position;$cells.on("mouseover",function(){position=$(this).index()+1;$cells.filter(":nth-child("+position+")").addClass("hover-bg");}).on("mouseout",function(){$cells.removeClass("hover-bg");});},hoverSortedColumn:function(clickedElement){$("th.active-column, td.active-column",context).removeClass("active-column");var position=$(clickedElement).index()+1;$("th:nth-child("+position+"), td:nth-child("+position+")",context).addClass("active-column");}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** rankingModule.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var $context;var ajaxUrl;var viewAllUrl;var $filters;var $competitionFlag;pluginNamespace="rankingModule";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));$context=this;ajaxUrl=$(".filters",this).data("url");viewAllUrl=$(".view-all",this).attr("href");$filters=$("select",$context);$competitionFlag=$(".competitions-flag",$($filters.get(0)).siblings(".dropdown-label-wrapper"));Goal.events[pluginNamespace].initCustomSelects();Goal.events[pluginNamespace].loadContent();Goal.events[pluginNamespace].bindEventContentSwitch();},loadContent:function(){var $contentTable=$("table",$context);var $label=$contentTable.find("thead th:last-child");var $filter=$($filters.get(1));var $competitionFilter=$($filters.get(0));var competitionId=$competitionFilter.val();var areaId=$competitionFilter.find(":selected").data("area-id");var statName=$($filters[1]).val();var height=$contentTable.css("height");function onSuccess(response){var content="";var pos=0;var rowTemplate=(competitionId==="0")?$context.find(".ranking-flag-row-tmpl").html():$context.find(".ranking-crest-row-tmpl").html();var label=$filter.find(":selected").text();rowTemplate=_.template(rowTemplate);if(label){$label.text(label);}_.each(response.rows,function(row){pos++;content+=rowTemplate({"pos":pos,"teamLink":row.team.uri,"teamName":row.team.displayName,"areaId":row.team.competitionAreaId,"teamShortName":row.team.shortName,"teamId":row.team.id,"stat":row.stat});});$contentTable.removeClass("ajax-loading").css("height","auto");$("tbody",$context).html(content);$(".view-all",$context).attr("href",viewAllUrl+(viewAllUrl.indexOf("?")==-1?"?":"&")+"competitionId="+competitionId+"&stat="+statName);}$contentTable.addClass("ajax-loading").css("height",height);$("tbody",$contentTable).html("");if(areaId){$competitionFlag.get(0).className="";$competitionFlag.addClass("competitions area-flag-18-"+areaId);}$.ajax({url:ajaxUrl,data:{"competitionId":competitionId,"statName":statName},dataType:"json",success:onSuccess});},initCustomSelects:function(){$('[data-plugin="customDropdown"]',$context).customDropdown({callback:function(){var opt=$(this);var flagTag=opt.data("area-id")?'<span class="competitions area-flag-18-'+opt.data("area-id")+'"></span>':"";return flagTag+'<span class="text">'+opt.text()+"</span>";}});},bindEventContentSwitch:function(){$filters.change(function(){var $self=$(this);var option=$self.find("option[value="+$self.val()+"]").text();$self.next().find(".text").text(option);Goal.events[pluginNamespace].loadContent();});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** refresh.js ***/
(function(window){var pluginEvents;var pluginNamespace;pluginNamespace="refresh";namespace(Goal.fmt("Goal.events.%@",pluginNamespace));namespace(Goal.fmt("Goal.intervals.%@",pluginNamespace));pluginEvents={init:function(event){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var hashes={};event.preventDefault();$("[data-ttl][data-refresh-url][data-module]:visible").each(function(){var $element=$(this);var ttl=parseInt($element.data("ttl"),10);var refreshUrl=$element.data("refresh-url");var module=$element.data("module");Goal.log(Goal.fmt("Goal:internal:libraries:%@ Init refresh for %@, ttl: %@, url: %@",pluginNamespace,module,ttl,refreshUrl));if(ttl&&refreshUrl&&module){var refreshFunction=function(){var params={"_":new Date().getTime()};var $element=$('[data-refresh-url="'+refreshUrl+'"][data-module="'+module+'"]');if($element.data("refresh-params")){var refreshParams=$element.data("refresh-params");if(typeof(refreshParams)==="string"){refreshParams=$.parseJSON(refreshParams);}params=_.assign(params,refreshParams);}$.ajax({url:refreshUrl,data:params,success:function(data,status,xhr){if(!hashes[refreshUrl]||!xhr.getResponseHeader("X-Hash")||(hashes[refreshUrl]&&hashes[refreshUrl]!==xhr.getResponseHeader("X-Hash"))){$('[data-refresh-url="'+refreshUrl+'"][data-module="'+module+'"]').replaceWith(data);$('[data-refresh-url="'+refreshUrl+'"][data-module="'+module+'"]').on("forceRefresh",function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Successful FORCED refresh for %@, ttl: %@, url: %@",pluginNamespace,module,ttl,refreshUrl));refreshFunction();});hashes[refreshUrl]=xhr.getResponseHeader("X-Hash");}Goal.log(Goal.fmt("Goal:internal:libraries:%@ Successful refresh for %@, ttl: %@, url: %@",pluginNamespace,module,ttl,refreshUrl));},error:function(jqXHR,textStatus,errorThrown){Goal.error(Goal.fmt("Goal:internal:libraries:%@ %@: `%@`",pluginNamespace,errorThrown,jqXHR.responseText));}});};Goal.intervals.refresh[module]=window.setInterval(refreshFunction,ttl*1000);}});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));Goal.events[pluginNamespace]=pluginEvents;})(this);
/*** related-modules.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="relatedModules";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){var relatedModuleName=$(this).data("related-to");if($('[data-related-from="'+relatedModuleName+'"]').is(":visible")){$(this).css("display","block");}else{$(this).css("display","none");}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** sectionDescription.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="sectionDescription";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));$(".description .text",this).truncate({showRest:true,truncAtSpace:Goal.settings.environment.isRTL});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** shareBar.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="shareBar";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));if(window.gigya===undefined||window.gigya.socialize===undefined){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Gigya is undefined",pluginNamespace));return;}$('[data-plugin="gigya-share"]').each(function(){var $element=$(this);var data=$element.data();if($element.children("div").length){return;}var userAction=new window.gigya.socialize.UserAction();userAction.setLinkBack(data.url);userAction.setTitle(data.title);userAction.setDescription(data.description);userAction.addMediaItem({type:"image",src:data.image,href:data.image});var shareButtons=[];$.each(data.providers.split(","),function(i,item){var shareButtonOptions={iconImgUp:data.shareIcons[item]||data.blankImgUrl};if(Goal.events.shareBar.mapTable[item]!==undefined){if("twitter"===item){if(data.twitterHashTag){shareButtonOptions.provider=Goal.events.shareBar.mapTable[item]["hashtag"];shareButtonOptions.hashtag=data.twitterHashTag;}else{if(data.twitterMention){shareButtonOptions.provider=Goal.events.shareBar.mapTable[item]["mention"];shareButtonOptions.mention=data.twitterMention;}else{shareButtonOptions.provider=Goal.events.shareBar.mapTable[item]["default"];}}}else{shareButtonOptions.provider=Goal.events.shareBar.mapTable[item];}shareButtons.push(shareButtonOptions);}});var params={userAction:userAction,shareButtons:shareButtons,containerID:$element.attr("id"),showCounts:"right",shortURLs:"never"};window.gigya.socialize.showShareBarUI(params);$element.bindNamespacedEvent("click",function(event){event.preventDefault();});});},mapTable:{"sina":"sina","qq":"qq","kaixin":"kaixin","renren":"renren","twitter":{"default":"twitter-tweet","hashtag":"twitter-hashtag","mention":"twitter-mention"},"facebook":"facebook-like","google":"googleplus-share","orkut":"orkut"}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** shareIcons.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="shareIcons";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));if(window.gigya===undefined||window.gigya.socialize===undefined){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Gigya is undefined",pluginNamespace));return;}$("body").append('<div id="shareiconcontainer" style="display: none"></div>');$("body").on("click",'[data-role="share-icons"] [data-provider]',function(){var $button=$(this);var $element=$button.parent();var data=$element.data();var userAction=new window.gigya.socialize.UserAction();userAction.setTitle(data.title);userAction.setDescription(data.description);userAction.setLinkBack($button.data("urlSuffix")?(data.url+$button.data("urlSuffix")):data.url);userAction.addMediaItem({type:"image",src:data.image,href:data.image});window.gigya.socialize.postBookmark({provider:$button.data("provider"),userAction:userAction});});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** slidingPanel.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="slidingPanel";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){function sliderCallback(args){var $arrows=$(this).parent().find(".arrow");if($(this).parent().find(".slide").length>1){$arrows.removeClass("hidden disabled");if(args.currentSlideNumber===1){$arrows.filter(".prev").addClass("disabled");}if(args.currentSlideNumber===$(this).find(".slide").length){$arrows.filter(".next").addClass("disabled");}}$(this).attr("data-current-panel",$(args.currentSlideObject).attr("data-panel"));}function controlAutoSlide(args){$(this).find('[data-widget="carousel"]').each(function(slideNumber){if((args.currentSlideNumber-1)===slideNumber){$(this).iosSlider("autoSlidePlay");}else{$(this).iosSlider("goToSlide",1);$(this).iosSlider("autoSlidePause");}});}return Goal.events.carousel.init.call(this,{infiniteSlider:false,navPrevSelector:$(this).parent().find(".arrow.prev"),navNextSelector:$(this).parent().find(".arrow.next"),onSlideChange:_.bind(sliderCallback,this),onSliderLoaded:_.bind(sliderCallback,this),onSlideComplete:_.bind(controlAutoSlide,this)});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** smartbanner.js ***/
(function(window,document,$,_,undefined){var pluginNamespace="smartbanner";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));Goal.settings[pluginNamespace]={GoalLiveScores:{author:"Goal.com",title:"Goal Live Scores",id:{iOS:"687276446",Android:"com.kokteyl.goal"},url:"http://smarturl.it/livescoressmrtbnrs",price:"FREE",appStoreLanguage:"us",layer:"absolute",icon:"/images/module/live-scores/icon57x57.png",daysHidden:7,daysReminder:10,button:"View",iconGloss:false},Goal:{author:"Goal.com",title:"Goal.com",id:{iOS:"518026818",Android:"com.freerange360.mpp.GOAL"},url:"http://smarturl.it/goalsmartbanrs",price:"FREE",appStoreLanguage:"us",layer:"absolute",icon:"/apple-touch-icon-114x114.png",daysHidden:7,daysReminder:10,button:"View",iconGloss:false},GoalFantasyFootball:{author:"Goal.com",title:"Goal Fantasy Football",id:{iOS:"873273187",Android:"com.fantasyiteam.goalus"},url:"https://162070.measurementapi.com/serve?action=click&publisher_id=162070&site_id=56724&site_id_android=102050&site_id_web=102198&sub_campaign=g1",price:"FREE",appStoreLanguage:"us",layer:"absolute",icon:"/images/rumour/icon114x114.png",daysHidden:2,daysReminder:2,button:"View",iconGloss:false}};Goal.events[pluginNamespace]={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var $head=$("head");var $meta=$("<meta>");var appCookies={closed:$.cookie("sb-closed-apps")?$.cookie("sb-closed-apps").split(","):[],installed:$.cookie("sb-installed-apps")?$.cookie("sb-installed-apps").split(","):[]};var config=Goal.settings.smartbanner;var args=Object.keys(config).map(function(key){return config[key];});var UA=window.navigator.userAgent;if(!$.fn.on){$.fn.on=$.fn.bind;}args=args.filter(function(arg){return((-1===appCookies.closed.indexOf(arg.id.Android))||(-1===appCookies.closed.indexOf(arg.id.iOS)))&&((-1===appCookies.installed.indexOf(arg.id.Android))||(-1===appCookies.installed.indexOf(arg.id.iOS)));});config=args[Math.floor(Math.random()*args.length)];if(config&&$.smartbanner){if(config.id.iOS){$head.append($meta.clone().attr("name","apple-itunes-app-smart").attr("content","app-id="+config.id.iOS));}if(config.id.Android&&!($head.find('[name="google-play-app"]').length)){$head.append($meta.clone().attr("name","google-play-app").attr("content","app-id="+config.id.Android));}$.cookie("sb-closed",null,{path:"/"});$.cookie("sb-installed",null,{path:"/"});if(UA.match(/iPhone|iPod|iPad/i)){config.force="ios";}$.smartbanner(config);$(".sb-close","#smartbanner").on("click",function(){appCookies.closed.push(config.id.Android);appCookies.closed.push(config.id.iOS);$.cookie("sb-closed-apps",appCookies.closed.join(","),{expires:config.daysHidden,path:"/"});});$(".sb-button","#smartbanner").on("click",function(){appCookies.installed.push(config.id.Android);appCookies.installed.push(config.id.iOS);$.cookie("sb-installed-apps",appCookies.installed.join(","),{expires:config.daysReminder,path:"/"});});}}};}(window,document,jQuery,_));
/*** survey.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="survey";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={editionSurvey:{"en":{code:"1509344/75e8963af5ff"},"ar":{code:"1515474/f0e99deba418"},"ar-sa":{code:"1515474/f0e99deba418"},"ar-eg":{code:"1515474/f0e99deba418"},"iran":{code:"1515474/f0e99deba418"}},timeout:5,startDate:new Date(2013,11,5,0,0,0,0),endDate:new Date(2999,11,31,0,0,0,0),cookieName:"surveyDisplayed",cookieTime:91,everyRequest:100,omnitureEvent:"event3"};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));if(Goal.events[pluginNamespace].internalApi.checkDisplaySurvey()){Goal.events[pluginNamespace].internalApi.setTimeoutOfSurvey();}},internalApi:{getSurveyContent:function(){var template='<iframe src="http://www.surveygizmo.com/s3/popup/%@" frameborder="0" width="700" height="600"></iframe>';var templateId;templateId=Goal.events[pluginNamespace].internalApi.getEditionSurveyParam("code");Goal.log(Goal.fmt("Goal:events:survey:getSurveyContent:%@",templateId));return Goal.fmt(template,templateId);},displaySurvey:function(content){if(!Goal.events[pluginNamespace].internalApi.modalIsOpen()&&content){$.modal({html:content}).center().css({"position":"absolute","width":"auto"});Goal.events[pluginNamespace].internalApi.omnitureSend();Goal.events[pluginNamespace].internalApi.saveCookie();}},setTimeoutOfSurvey:function(){Goal.intervals[pluginNamespace]=window.setTimeout(function(){var content=Goal.events[pluginNamespace].internalApi.getSurveyContent();Goal.events[pluginNamespace].internalApi.displaySurvey(content);},Goal.settings[pluginNamespace].timeout*1000);},checkDisplaySurvey:function(){var today=new Date();var outsideTimeRange=today<Goal.settings[pluginNamespace].startDate||today>Goal.settings[pluginNamespace].endDate;var countryCode=Goal.events[pluginNamespace].internalApi.getEditionSurveyParam("countryCode");Goal.log(Goal.fmt("Goal:events:survey:checkDisplaySurvey:outsideTimeRange=%@",outsideTimeRange));if(outsideTimeRange){return false;}if(parseInt($.cookie(Goal.settings[pluginNamespace].cookieName),10)===1){return false;}if(Goal.store.get("modalOpened")){Goal.store.unset("modalOpened");return false;}if(!Goal.events[pluginNamespace].internalApi.randomDisplaySurvey()){return false;}if(countryCode){return $("body").data("user-country-code")==countryCode;}return true;},omnitureSend:function(){var s=s_gi(s_account);var initialEvents=s.events;var sCode;s.events=Goal.settings[pluginNamespace].omnitureEvent;sCode=s.t();if(sCode){document.write(sCode);}s.events=initialEvents;},saveCookie:function(){$.cookie(Goal.settings[pluginNamespace].cookieName,1,{expires:Goal.settings[pluginNamespace].cookieTime,path:"/"});},modalIsOpen:function(){return $(".modal").is(":visible");},randomDisplaySurvey:function(){var rand=Math.floor(Math.random()*Goal.settings[pluginNamespace].everyRequest)+1;Goal.log(Goal.fmt("Goal:events:survey:randomDisplaySurvey:%@",rand));return(rand===1);},getEditionSurveyParam:function(paramName){var edition=Goal.settings.environment.edition;var surveyConfig;var value="";if(typeof Goal.settings[pluginNamespace].editionSurvey[edition]==="undefined"){edition="en";}surveyConfig=Goal.settings[pluginNamespace].editionSurvey[edition];if($.type(surveyConfig[paramName])!="undefined"){value=surveyConfig[paramName];}return value;}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** surveyPremiereLeaugue.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="surveyPremiereLeauge";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginEvents={$form:$("#survey"),error:false,cookieName:"survey_premiereleague_finished",init:function(){Goal.events[pluginNamespace].$form.on("submit",function(e){if(Goal.events[pluginNamespace].validate()){$.ajax({url:Goal.fmt("/%@/module/survey/vote",Goal.settings.environment.edition),method:"POST",data:{carrier:Goal.events[pluginNamespace].$form.find("#select-carrier").val(),club:Goal.events[pluginNamespace].$form.find("#select-football-club").val(),email:Goal.events[pluginNamespace].$form.find("#input-email").val(),msisdn:Goal.events[pluginNamespace].$form.find("#input-phone").val()}});Goal.events[pluginNamespace].finishState();}e.preventDefault();});var surveyModule=$(".module-survey");if(!Goal.events[pluginNamespace].checkCookie()){surveyModule.show();}else{surveyModule.remove();return;}},validate:function(){Goal.events[pluginNamespace].error=false;Goal.events[pluginNamespace].validatePhonenumber(Goal.events[pluginNamespace].$form.find("#input-phone"));Goal.events[pluginNamespace].validateSelect(Goal.events[pluginNamespace].$form.find("#select-carrier"));Goal.events[pluginNamespace].validateSelect(Goal.events[pluginNamespace].$form.find("#select-football-club"));Goal.events[pluginNamespace].validateEmail(Goal.events[pluginNamespace].$form.find("#input-email"));Goal.events[pluginNamespace].validateTerms();return !Goal.events[pluginNamespace].error;},validatePhonenumber:function(input){var phoneRegexp=/^\+?0{0,2}(233\)?[-. ]?\d{2}[-. ]?\d{7})$/;if(input.val().match(phoneRegexp)){Goal.events[pluginNamespace].hideError(input);return true;}else{Goal.events[pluginNamespace].showError(input,"Invalid number",(input.val()==="")?true:false);return false;}},validateEmail:function(input){var mailRegexp=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(input.val().match(mailRegexp)){Goal.events[pluginNamespace].hideError(input);return true;}else{Goal.events[pluginNamespace].showError(input,"Invalid e-mail address",(input.val()==="")?true:false);return false;}},validateSelect:function(input){if(input.val()){Goal.events[pluginNamespace].hideError(input);return true;}else{Goal.events[pluginNamespace].showError(input,"This question is required",(input.val()==="")?true:false);return false;}},validateTerms:function(){var $inputTerms=$("#input-terms");var $inputTermsLink=$("#input-terms-link");if($inputTerms.prop("checked")){Goal.events[pluginNamespace].hideError($inputTermsLink);return true;}else{Goal.events[pluginNamespace].showError($inputTermsLink);return false;}},showError:function($element,text,empty){var $elParent=$element.parent();var $submitButton=Goal.events[pluginNamespace].$form.find("input.submit");$elParent.addClass("error");if(text&&!empty&&!$elParent.next(".survey-error").length){$elParent.after('<div class="survey-error">'+text+"</div>");}if(!$(".submit-error").length){$submitButton.after('<div class="submit-error">Please review marked sections</div>');}Goal.events[pluginNamespace].error=true;},hideError:function($element){var $elParent=$element.parent();var $submitError=Goal.events[pluginNamespace].$form.find(".submit-error");$elParent.removeClass("error");if($elParent.next(".survey-error").length){$elParent.next(".survey-error").fadeOut(function(){$(this).remove();});}if($submitError.length&&!Goal.events[pluginNamespace].error){$submitError.remove();}},finishState:function(){$.cookie(Goal.events[pluginNamespace].cookieName,"true",{path:"/"});$("#survey .content").addClass("finish-state").html(" Thank you for <br>completing the survey");},checkCookie:function(){if($.cookie(Goal.events[pluginNamespace].cookieName)){Goal.events[pluginNamespace].finishState();return true;}else{return false;}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));Goal.events[pluginNamespace]=pluginEvents;})(this,this.document);
/*** tables.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var $context=$(".page-tables");pluginNamespace="tables";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.events[pluginNamespace].initCustomDropdown();Goal.events[pluginNamespace].changeTableView();Goal.events[pluginNamespace].filterCompetitions();},initCustomDropdown:function(){var flag;var flagTag;$('[data-plugin="customDropdown"]',$context).customDropdown({callback:function(){var opt=$(this);flag=opt.val()?"area-flag-18-"+opt.data("area-id"):"";flagTag='<span class="'+flag+'"></span>';return flagTag+'<span class="text" data-omnitureevent>'+opt.text()+"</span>";}});},changeTableView:function(){$(".table-view",$context).on("change",function(){var tableType=$(":selected",this).data("view");var table=$("table",$context);if(tableType==="full"){table.removeClass("short").addClass("full");}else{table.removeClass("full").addClass("short");}});},filterCompetitions:function(){$(".competitions",$context).on("change",function(){var selectedCompetitionUrl=$(":selected",this).data("href");if(selectedCompetitionUrl!==window.location.pathname){window.location.href=selectedCompetitionUrl;}});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** timer.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;var $context=$(".module-timer");var type1,value1,type2,value2;var countDownTimeout;var targetDate=new Date($context.attr("data-end-time"));var textContainer=$(".description",$context);pluginNamespace="timer";namespace(Goal.fmt("Goal.intervals.%@",pluginNamespace));namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){if($context.length>0){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));type1=$('[data-time-container="1"]',$context).find(".type");value1=$('[data-time-container="1"]',$context).find(".value");type2=$('[data-time-container="2"]',$context).find(".type");value2=$('[data-time-container="2"]',$context).find(".value");Goal.events[pluginNamespace].countDown(true);}},countDown:function(start){var nowTime;var diff;var timeout;var dDays,dHours,dMinutes,dSeconds;var unit1Type,unit1Value,unit2Type,unit2Value;nowTime=new Date();diff=Math.floor((targetDate-nowTime));if(diff<=0){$("[data-time-container]",$context).hide();var hoursReverse=Math.floor((diff*-1)/1000/60/60);if(hoursReverse>=24){$context.width(0).hide();}else{$context.css("visibility","visible");var closedText=textContainer.attr("data-window-closed");textContainer.text(closedText);$context.addClass("closed");}if(!start){$(".module-navigation").trigger("recalculateSubmenu");}return;}var checkHours=Math.floor(diff/1000/60/60);if(checkHours>=24){timeout=30000;}else{timeout=1000;}dDays=Math.floor(diff/1000/60/60/24);diff-=dDays*1000*60*60*24;dHours=Math.floor(diff/1000/60/60);diff-=dHours*1000*60*60;dMinutes=Math.floor(diff/1000/60);diff-=dMinutes*1000*60;dSeconds=Math.floor(diff/1000);diff-=dSeconds*1000;dHours=(dHours>0)?dHours:0;if(dDays>0){unit1Type=$context.attr("data-days");unit2Type=$context.attr("data-hours");unit1Value=dDays;unit2Value=dHours;}else{if(dHours>0){unit1Type=$context.attr("data-hours");unit2Type=$context.attr("data-minutes");unit1Value=dHours;unit2Value=dMinutes;}else{unit1Type=$context.attr("data-minutes");unit2Type=$context.attr("data-seconds");unit1Value=dMinutes;unit2Value=dSeconds;}}value1.text(("0"+unit1Value).slice(-2));type1.text(unit1Type);value2.text(("0"+unit2Value).slice(-2));type2.text(unit2Type);$context.css("visibility","visible");countDownTimeout=window.setTimeout(Goal.events[pluginNamespace].countDown,timeout);}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** transfer-talk.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="transferTalk";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={maxTabHeight:628,staticTabHeight:420,arrExcluded:[]};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));var context=this;var $contents=$(".contents",context);var heightArray=[];var allTabs=$("article",context);var paginationDots=context.find(".pagination > div");allTabs.each(function(i,obj){heightArray.push($(obj).outerHeight());});var tabHeight=Math.max.apply(null,heightArray);if(tabHeight>Goal.settings[pluginNamespace].maxTabHeight){tabHeight=Goal.events[pluginNamespace].getNextHeight(heightArray,tabHeight);$contents.addClass("static");}Goal.events.carousel.init.call($contents,{desktopClickDrag:false,autoSlide:true,infiniteSlider:false,autoSlideTimer:6000,navSlideSelector:paginationDots,onSliderLoaded:function(){$contents.height(tabHeight);$contents.find(".text-wrapper").height(tabHeight-210);context.css("visibility","visible");},onSliderResize:function(){$contents.height(tabHeight);},onSlideChange:function(sliderChangeArguments){paginationDots.removeClass("selected");context.find(Goal.fmt(".pagination > div:eq(%@)",sliderChangeArguments.currentSlideNumber-1)).addClass("selected");}});},getNextHeight:function(heightArray,exclude){Goal.settings[pluginNamespace].arrExcluded.push(exclude);var arrWithout=_.without(heightArray,Goal.settings[pluginNamespace].arrExcluded);var tabHeight=Math.max.apply(null,arrWithout);if(arrWithout.length===3){return Goal.settings[pluginNamespace].staticTabHeight;}if(tabHeight>Goal.settings[pluginNamespace].maxTabHeight){tabHeight=Goal.events[pluginNamespace].getNextHeight(heightArray,tabHeight);}return tabHeight;}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** viewCount.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginNamespace="viewCount";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:init ",pluginNamespace));$('[data-role="view-count"]').each(function(){var $element=$(this);var gid=$element.data("gid");if(gid){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Init view count for GID: %@",pluginNamespace,gid));$.ajax({url:Goal.settings.environment.route.incrementViewCount,type:"post",data:{gid:gid},success:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@ Successful view count increment for GID: %@",pluginNamespace,gid));},error:function(jqXHR,textStatus,errorThrown){Goal.error(Goal.fmt("Goal:internal:libraries:%@ %@: `%@`",pluginNamespace,errorThrown,jqXHR.responseText));}});}});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** latest-galleries.js ***/
(function(window,document,undefined){var pluginEvents;var pluginSettings;var pluginNamespace;pluginSettings={};pluginNamespace="latestGalleries";namespace(Goal.fmt("Goal.settings.%@",pluginNamespace));namespace(Goal.fmt("Goal.events.%@",pluginNamespace));pluginEvents={init:function(){var self=this;var startAtSlide=1;var slider=this.find(".slider");if(Goal.settings.environment.isRTL){self.find(".slide").css("direction","rtl");self.css("direction","ltr");slider.children().each(function(i,slide){slider.prepend(slide);});startAtSlide=slider.find(".slide").length;}Goal.events.carousel.init.call($(this).find(".content"),{"navPrevSelector":$(this).find("button.prev"),"navNextSelector":$(this).find("button.next"),"infiniteSlider":true,"desktopClickDrag":false,"autoSlide":false,"startAtSlide":startAtSlide});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending settings",pluginNamespace));_.extend(Goal.settings[pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@ Extending events",pluginNamespace));_.extend(Goal.events[pluginNamespace],pluginEvents);})(this,this.document);
/*** feed-fetch.js ***/
(function(window,document,undefined){var $context;var pluginEvents;var pluginSettings;var parentNamespace;var pluginNamespace;var feedsData;var optaFeedsUrls;var optaMatchId;var matchingFeedData;var flag="first";parentNamespace="match";pluginNamespace="feedFetch";namespace(Goal.fmt("Goal.intervals.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.settings.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.events.%@.%@",parentNamespace,pluginNamespace));pluginSettings={refreshIntervalTime:6000};pluginEvents={init:function(){optaFeedsUrls={"f9":""+Goal.settings.environment.route.feed.match.statistics};matchingFeedData={"f9":{"total_scoring_att":"total_scoring_att","ontarget_scoring_att":"ontarget_scoring_att","possession_percentage":"possession_percentage","total_pass":"total_pass"}};},fetchData:function(dataInFeedNames,matchTime){optaMatchId=$(".optaStats",$context).data("optaMatchId");var feedNumbers=[];_.forEach(dataInFeedNames,function(feedName){for(var feedNumber in matchingFeedData){if(typeof(matchingFeedData[feedNumber][feedName])!=="undefined"){if(feedNumbers.indexOf(feedNumber)<0){feedNumbers.push(feedNumber);}}}});_.forEach(feedNumbers,function(feedNumber){Goal.events[parentNamespace][pluginNamespace].fetchFeedData(optaFeedsUrls[feedNumber],dataInFeedNames);Goal.events[parentNamespace][pluginNamespace].fetchFeedDataOnInterval(optaFeedsUrls[feedNumber],dataInFeedNames,matchTime);});},fetchFeedData:function(feedUrl,dataToFetch){var feedData={};$.when($.ajax({url:feedUrl,data:{optaMatchId:optaMatchId},dataType:"json",success:function(data){feedData=data;},error:function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@ Failed to fetch statistics",pluginNamespace));}})).then(function(result){if(!("response" in result)){$.extend(feedsData,feedData);Goal.events[parentNamespace][pluginNamespace].fillStatisticsBag(feedData,dataToFetch);}}).fail(function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@ Failed to connect to feed",pluginNamespace));});},fillStatisticsBag:function(feedData,neededAttributes){var team;var statisticsBag={};feedData=feedData.SoccerFeed.SoccerDocument;if(feedData.length>1){team=feedData[0].MatchData.TeamData;}else{team=feedData.MatchData.TeamData;}_.forEach(team,function(team){_.filter(team.Stat,function(stats){if($.inArray(stats["@attributes"].Type,neededAttributes)>-1){statisticsBag[stats["@attributes"].Type]=statisticsBag[stats["@attributes"].Type]||{};statisticsBag[stats["@attributes"].Type][team["@attributes"].Side]=parseFloat(stats["@value"]);}});});for(var statKey in statisticsBag){Goal.events[parentNamespace][pluginNamespace].fillBarChart(statKey,statisticsBag[statKey]);}},fetchFeedDataOnInterval:function(feedUrl,dataToFetch,matchTime){var now;var getOPTAFeed=function(){now=Date.now()/1000;if(matchTime+14400<now){clearInterval(interval);return;}Goal.events[parentNamespace][pluginNamespace].fetchFeedData(feedUrl,dataToFetch);};var interval=setInterval(getOPTAFeed,Goal.settings[parentNamespace][pluginNamespace].refreshIntervalTime);},fillBarChart:function(name,data){var keys=_.keys(data);var total=data[keys[0]]+data[keys[1]];var chart=$('[data-chart-name="'+name+'"]');var matchStatus=$(".top-section").attr("data-match-status");var countPercent=function(part,total){return Math.round(part/total*100);};if(typeof(data[keys[0]])!=="undefined"&&typeof(data[keys[1]])!=="undefined"){var isPercentage=parseFloat($(chart).data("percentage"));$(chart).find(".home-team > span").text(isPercentage?countPercent(data[keys[0]],total)+"%":data[keys[0]]).width((data[keys[0]]/total*100)+"%");$(chart).find(".away-team > span").text(isPercentage?countPercent(data[keys[1]],total)+"%":data[keys[1]]).width((data[keys[1]]/total*100)+"%");}else{if(matchStatus==="played"){$(chart).parents(".slide").first().remove();Goal.events.match.updateSlider();}}if(flag==="first"){Goal.events.match.initSlider();flag="second";}}};Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending settings",parentNamespace,pluginNamespace));_.extend(Goal.settings[parentNamespace][pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending events",parentNamespace,pluginNamespace));_.extend(Goal.events[parentNamespace][pluginNamespace],pluginEvents);})(this,this.document);
/*** lineups.js ***/
(function(){var $context;var pluginEvents;var pluginSettings;var parentNamespace;var pluginNamespace;parentNamespace="match";pluginNamespace="lineups";namespace(Goal.fmt("Goal.intervals.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.settings.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.events.%@.%@",parentNamespace,pluginNamespace));pluginSettings={refreshIntervalTime:60000};$context=$(".main-content");pluginEvents={init:function(){Goal.events.match.feedFetch.init();Goal.events[parentNamespace][pluginNamespace].initSocialTracking();Goal.events[parentNamespace][pluginNamespace].initTogglePreviousInfo();Goal.events[parentNamespace][pluginNamespace].showSelectedPlayer();},togglePitchView:function(){$(".football-pitch",$context).toggleClass("hidden");$('[data-role="pitch-toggler"]',$context).toggleClass("collapsed");},initSocialTracking:function(){var $matchStats=$(".matchStats",$context);$(".arrow",$matchStats).on("click",function(){s.linkTrackVars="prop22";});},initTogglePreviousInfo:function(){$("h2.home, h2.away",$context).on("click",function(){$(".pitch-wrapper > div.home, .pitch-wrapper > div.away",$context).toggleClass("hidden");});},showSelectedPlayer:function(){var playerNumbers=$context.find("[data-number]");playerNumbers.on("mouseenter",function(event){var target=(!!$(event.target).data("number"))?$(event.target):$(event.target).closest("[data-number]");var number=parseInt(target.data("number"),10);var side=target.data("side");_.forEach(playerNumbers,function(element){if($(element).data("number")===number&&$(element).data("side")===side){$(element).addClass("active");}});}).on("mouseleave",function(){_.forEach(playerNumbers,function(element){$(element).removeClass("active");});});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending settings",parentNamespace,pluginNamespace));_.extend(Goal.settings[parentNamespace][pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending events",parentNamespace,pluginNamespace));_.extend(Goal.events[parentNamespace][pluginNamespace],pluginEvents);})();
/*** live-commentary.js ***/
(function(window,document,undefined){var $context;var pluginEvents;var pluginSettings;var parentNamespace;var pluginNamespace;parentNamespace="match";pluginNamespace="liveCommentary";namespace(Goal.fmt("Goal.intervals.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.settings.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.events.%@.%@",parentNamespace,pluginNamespace));pluginSettings={liveRefreshIntervalTime:5000,commentariesAdsCount:0,refreshIntervalTime:60000};$context=$(".main-content");var matchTime;var now;var $matchStats;pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:%@:init",parentNamespace,pluginNamespace));Goal.events.match.feedFetch.init();Goal.events[parentNamespace][pluginNamespace].initCommentaryAutoRefresh();Goal.events[parentNamespace][pluginNamespace].initSocialTracking();},initCommentaryAutoRefresh:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@:initResultsAutoRefresh",parentNamespace,pluginNamespace));var $commentary=$(".commentaries",$context);matchTime=$commentary.data("matchTime");now=Date.now()/1000;var matchId=$commentary.data("matchId");var onInterval;var successCallback;var addAnAdToCommentary;var actionTemplate=_.template($context.find(".action-tmpl").html());var eventTemplate=_.template($context.find(".event-tmpl").html());var substitutionTemplate=_.template($context.find(".substitution-tmpl").html());var eventSocialTemplate=_.template($context.find(".event-social-tmpl").html());var lastResponseHash="";addAnAdToCommentary=function(item){if(Goal.settings[parentNamespace][pluginNamespace].commentariesAdsCount>0){if($(".live-commentary-ad a").length>0){item.ad=$(".live-commentary-ad a")[0].outerHTML;Goal.settings[parentNamespace][pluginNamespace].commentariesAdsCount--;}}};onInterval=function(){var now=Date.now()/1000;if(matchTime<now&&matchTime>=(now-14400)){$.ajax({url:Goal.settings.environment.route.feed.match.matchEvents,data:{matchId:matchId,edition:Goal.settings.environment.edition},dataType:"json",success:successCallback,error:function(){Goal.error(Goal.fmt("Goal:internal:libraries:%@:%@ Failed to refresh data",parentNamespace,pluginNamespace));}});}};successCallback=function(response,textStatus,jqXHR){var currentResponseHash=jqXHR.getResponseHeader("X-Hash");if(currentResponseHash===lastResponseHash){return;}lastResponseHash=currentResponseHash;if(response.length){var $fragment=$(document.createDocumentFragment());response.reverse();Goal.settings[parentNamespace][pluginNamespace].commentariesAdsCount=2;_.forEach(response,function(item){item.ad=null;if("action"===item.eventType){$fragment.append(actionTemplate(item));}else{if("substitution"===item.eventType){addAnAdToCommentary(item);$fragment.append(substitutionTemplate(item));}else{if(-1!==$.inArray(item.eventType,["goal","own-goal","penalty-goal","pen-so-goal","red-card"])){if(-1!==$.inArray(item.eventType,["goal","own-goal","penalty-goal","pen-so-goal"])){addAnAdToCommentary(item);}$fragment.append(eventSocialTemplate(item));}else{$fragment.append(eventTemplate(item));}}}});$commentary.empty().append($fragment);}};onInterval();setInterval(onInterval,Goal.settings[parentNamespace][pluginNamespace].liveRefreshIntervalTime);},initSocialTracking:function(){$matchStats=$(".matchStats",$context);$(".commentaries",$context).on("click",'[data-role="share-icons"] [data-provider]',function(){s.linkTrackVars="prop21";s.prop21=$(this).attr("class")+" "+moment().format("YYMMDD");return this;});$(".arrow",$matchStats).on("click",function(){s.linkTrackVars="prop22";return this;});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending settings",parentNamespace,pluginNamespace));_.extend(Goal.settings[parentNamespace][pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending events",parentNamespace,pluginNamespace));_.extend(Goal.events[parentNamespace][pluginNamespace],pluginEvents);})(this,this.document);
/*** preview.js ***/
(function(window,document,undefined){var $context;var pluginEvents;var pluginSettings;var parentNamespace;var pluginNamespace;var scoreBookmakerName;var specificScoresOdds;var stake;var matchId=$(".top-section").data("match-id");parentNamespace="match";pluginNamespace="preview";namespace(Goal.fmt("Goal.intervals.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.settings.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.events.%@.%@",parentNamespace,pluginNamespace));pluginSettings={goalOptaFacts:"#opta-widget-idx-goal-facts",optaError:["no-events","opta-widget-error"],optafactsShown:3,optafactsExpandedLimit:8,bettingPartnerLogoSize:"174x33",predictorAnimationTime:3000};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:%@:init",parentNamespace,pluginNamespace));$context=$(".main-content");Goal.events[parentNamespace][pluginNamespace].initBettingSwitcher();Goal.events[parentNamespace][pluginNamespace].triggerOptaFacts();Goal.events[parentNamespace][pluginNamespace].expandOptaFacts();Goal.events[parentNamespace][pluginNamespace].expandBettingPrediction();Goal.events[parentNamespace][pluginNamespace].initBetting();Goal.events[parentNamespace][pluginNamespace].trackBets();Goal.events[parentNamespace][pluginNamespace].calculatePredictedOutcome();$('[data-plugin="customDropdown"]',$context).customDropdown();},initBettingSwitcher:function(){var $switcher=$(".betting-switcher",$context);var $widget=$(".betting-widget-bestoffer-all",$context);if($widget.length){$switcher.removeClass("hidden");$("a",$switcher).on("click",function(event){event.preventDefault();var $element=$(this);$("a",$switcher).removeClass("active");$element.addClass("active");if($element.hasClass("on")){$widget.addClass("show");}else{$widget.removeClass("show");}});}},triggerOptaFacts:function(){var triggerWidgetLoad=function(widget){Goal.events[parentNamespace][pluginNamespace].customizeOptaFacts(widget);};var optaFactsParams=_optaParams;optaFactsParams.callbacks=[triggerWidgetLoad];$jqOpta.widgetStart(optaFactsParams);},customizeOptaFacts:function(widget){var optaFacts=$(".opta-facts",$context);var button=optaFacts.find(".button");var selector=widget.selector;var optaResponse=widget.find(".optafacts").children().attr("class");optaFacts.removeClass("hidden");if(selector===Goal.settings[parentNamespace][pluginNamespace].goalOptaFacts){var optaFact=widget.find("li");var widgetHeight;if(Goal.settings[parentNamespace][pluginNamespace].optaError.indexOf(optaResponse)>=0){$(optaFacts).remove();return;}widgetHeight=widget.find("h2").height();for(var i=0;i<Goal.settings[parentNamespace][pluginNamespace].optafactsShown;i++){if(optaFact&&optaFact[i]){widgetHeight+=optaFact[i].offsetHeight;}}optaFacts.find(".facts-shortened").css("height",widgetHeight);for(var j=optaFact.length-1;j>=Goal.settings[parentNamespace][pluginNamespace].optafactsExpandedLimit;j--){$(optaFact[j]).remove();}if(optaFact.length<Goal.settings[parentNamespace][pluginNamespace].optafactsShown){button.remove();}}},expandOptaFacts:function(){var optaFacts=$(".opta-facts",$context);var button=optaFacts.find(".button");var factsContainer=optaFacts.find(".facts-shortened");var clickTracking=function(){s.linkTrackVars="prop52";s.prop52="chevron clicked";};button.on("click",function(){clickTracking();$(this).toggleClass("expanded");factsContainer.toggleClass("expanded");});},expandBettingPrediction:function(){var betting=$(".betting-prediction",$context);var button=betting.find(".button");var bettingContainer=betting.find(".betting-container");var widgetHeight=betting.find("h2").height();betting.find(".betting-container").css("height",widgetHeight);button.on("click",function(){$(this).toggleClass("expanded");bettingContainer.toggleClass("expanded");});},initPredictor:function(){var predictButton=$(".predict-button",$context);var predictionSection=$(".predict-submitted",$context);var clickTracking=function(){s.linkTrackVars="prop53";s.prop53="predict button clicked";};var hidePredictionInfo=function(){predictionSection.addClass("hidden-info");predictionSection.find("p").addClass("hidden");};predictButton.find("a").on("click",_.throttle(function(){clickTracking();predictionSection.removeClass("hidden-info");predictionSection.find("p").removeClass("hidden");Goal.events[parentNamespace][pluginNamespace].predict();setTimeout(hidePredictionInfo,Goal.settings[parentNamespace][pluginNamespace].predictorAnimationTime);},Goal.settings[parentNamespace][pluginNamespace].predictorAnimationTime));},predict:function(){var postPredict;var storage=$.jStorage.get("module:predictor",{});var predictButton=$(".predict-button",$context);var bettingSection=$(".betting-prediction",$context);var predictionSection=$(".predictor-betting",$context);var homeScore=$(".home-score",bettingSection).find(":selected").text();var awayScore=$(".away-score",bettingSection).find(":selected").text();if(_.isEmpty(storage[matchId])){$.ajax({url:Goal.settings.environment.route.predictMatch,method:"POST",dataType:"json",data:{matchId:matchId,home:homeScore,away:awayScore},success:function(response){postPredict(response);}});}else{if(specificScoresOdds){var response=homeScore+"-"+awayScore;predictionSection.removeClass("hidden");predictButton.addClass("predicted");Goal.events[parentNamespace][pluginNamespace].fillPredictedScoreOdds(response);}}postPredict=function(response){var scorePredicted=response.data.score;storage[response.data.matchId]=response.data;$.jStorage.set("module:predictor",storage);if(specificScoresOdds){predictionSection.removeClass("hidden");predictButton.addClass("predicted");Goal.events[parentNamespace][pluginNamespace].fillPredictedScoreOdds(scorePredicted);}};},initBetting:function(){var bookmaker=Goal.settings.environment.bookmaker;var bookmakers=Goal.settings.environment.bookmakers;var matchStatus=$(".top-section").data("match-status");var bookmakerId;if(!bookmaker){Goal.events[parentNamespace][pluginNamespace].initPredictor();return;}_.forEach(bookmakers,function(el,index){if(el===bookmaker){bookmakerId=index;}});var oddsType="1X2,CS";if(matchStatus!=="played"){$.ajax({url:Goal.settings.environment.route.feed.odds.match,data:{type:oddsType,matchId:matchId,bookmakerIds:bookmakerId,placement:"predictor"},dataType:"json"}).then(function(response){if(!_.isEmpty(response["1X2"])){scoreBookmakerName=_.keys(response["1X2"][matchId])[0];Goal.events[parentNamespace][pluginNamespace].fillBettingInfo(response["1X2"]);}if(!_.isEmpty(response["CS"])){specificScoresOdds=response["CS"];scoreBookmakerName=_.keys(response["CS"][matchId])[0];Goal.events[parentNamespace][pluginNamespace].fillScoresOdds(response["CS"]);}Goal.events[parentNamespace][pluginNamespace].initPredictor();});}},fillBettingInfo:function(ajaxResponse){var matchOdds=$(".match-odds",$context);var odds=ajaxResponse[matchId];var oddsLogo=odds[scoreBookmakerName].logo[Goal.settings[parentNamespace][pluginNamespace].bettingPartnerLogoSize];var betValue=matchOdds.find("[data-bet]").attr("data-bet");matchOdds.removeClass("hidden");_.forEach($(".betting-logo",$context),function(el){$(el).children().attr("src",oddsLogo);});_.forEach($(".prediction",matchOdds),function(el){var bet=odds[scoreBookmakerName][$(el).attr("data-result")];var betLink=bet.affiliateLink;$(el).find(".odds").text(bet.price);$(el).find("[data-odds]").attr("data-odds",bet.price);$(el).find("a").removeClass("hidden").attr("data-betslip-href",betLink).attr("href",betLink);});Goal.events[parentNamespace][pluginNamespace].calculateReturnValue();},fillScoresOdds:function(ajaxResponse){var topPredictions=$(".top-predictions",$context);var scoreOdds=ajaxResponse[matchId];var betValue=$context.find("[data-bet]").attr("data-bet");topPredictions.removeClass("hidden");_.forEach($(".prediction",topPredictions),function(el){var score=$(el).data("score");var bet=scoreOdds[scoreBookmakerName][score];var betLink=bet.affiliateLink;var stake=5;if(scoreBookmakerName=="Betway"){stake=betValue*100;}$(el).find(".odds").text(bet.price);$(el).find("a").attr("data-betslip-href",betLink).attr("href",betLink.replace(/\[STAKE\]/,stake));$(el).find(".bet").removeClass("hidden");});},fillPredictedScoreOdds:function(score){var oddsObject=specificScoresOdds[matchId][scoreBookmakerName][score];var content=$(".predictor-betting",$context);if(!oddsObject){$(".predictor-betting",$context).addClass("hidden");return;}var odds=oddsObject.price;var bet=content.find("[data-bet]:selected").attr("data-bet");content.find("[data-odds]").attr("data-odds",odds);content.find("a").attr("data-betslip-href",oddsObject.affiliateLink).attr("href",oddsObject.affiliateLink).removeClass("hidden");Goal.events[parentNamespace][pluginNamespace].calculateOutcome(content,bet);},calculatePredictedOutcome:function(){var content=$(".predictor-betting",$context);var bet=$(".bet-value",$context).children().attr("data-bet");$(".bet-value",content).on("change",function(event){bet=$(event.target[event.target.selectedIndex]).attr("data-bet");Goal.events[parentNamespace][pluginNamespace].calculateOutcome(content,bet);});Goal.events[parentNamespace][pluginNamespace].calculateOutcome(content,bet);},calculateReturnValue:function(){var oddsList=$(".odds",$context);var content=$(".prediction",".match-odds");var bet=oddsList.find("li").attr("data-bet");oddsList.on("click","li",function(){bet=$(this).attr("data-bet");_.forEach(oddsList.children(),function(el){$(el).removeClass("selected");});$(this).addClass("selected");Goal.events[parentNamespace][pluginNamespace].calculateOutcome(content,bet);});Goal.events[parentNamespace][pluginNamespace].calculateOutcome(content,bet);},calculateOutcome:function(content,bet){_.forEach(content,function(el){var offerValue=$(el).find("[data-odds]").attr("data-odds");var returnValue=parseFloat(Math.floor(bet*offerValue*100)/100).toFixed(2);var stake=bet;var betValue=bet;$(el).find(".offer").children().text(returnValue);if($(el).find("a[data-betslip-href]").length){if(scoreBookmakerName=="Unibet"){stake="["+(betValue*1000)+"]";}else{if(scoreBookmakerName=="Betway"){stake=betValue*100;}}$(el).find("a").attr("href",$(el).find("a[data-betslip-href]").attr("data-betslip-href").replace(/\[STAKE\]/,stake));}});},trackBets:function(){$(".btn-bet",$context).on("click",function(){var context=$(this).attr("data-context");s.linkTrackVars="prop54";s.prop54=context;});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending settings",parentNamespace,pluginNamespace));_.extend(Goal.settings[parentNamespace][pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending events",parentNamespace,pluginNamespace));_.extend(Goal.events[parentNamespace][pluginNamespace],pluginEvents);})(this,this.document);
/*** ratings.js ***/
(function(window,document,undefined){var $context;var pluginEvents;var pluginSettings;var parentNamespace;var pluginNamespace;parentNamespace="match";pluginNamespace="ratings";namespace(Goal.fmt("Goal.intervals.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.settings.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.events.%@.%@",parentNamespace,pluginNamespace));pluginSettings={};pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:%@:init",parentNamespace,pluginNamespace));$context=$(".main-content");if($context.find("form").length>0){Goal.events[parentNamespace][pluginNamespace].initVoting();}Goal.events[parentNamespace][pluginNamespace].initCustomSelect();},initVoting:function(){Goal.log(Goal.fmt("Goal:internal:libraries:%@:blockRevoting",pluginNamespace));var storage="matchRatings";var data=$.jStorage.get(storage,{});var $form=$context.find("form");var imgPlaceholder=$("img.top").attr("src");var selectedGsmPlayerID;_.forEach($form,function($el){$el=$($el);var type=$el.find('input[name="type"]').val();var matchId=$el.find('input[name="matchId"]').val();var $select=$el.find("select");var $submit=$el.find('input[type="submit"]');if(!data[matchId]){data[matchId]={bestPlayer:null,worstPlayer:null};}var selectPlayerPhoto=function(){selectedGsmPlayerID=$select.find("option:selected").attr("data-gsmId");$("img."+type).attr("src",(selectedGsmPlayerID>0)?$select.attr("data-imgDefault").replace(/0(?=\.\w{3})/img,selectedGsmPlayerID):imgPlaceholder);};if(type==="flop"&&data[matchId].worstPlayer){$select.val(data[matchId].worstPlayer);selectPlayerPhoto();}else{if(type==="top"&&data[matchId].bestPlayer){$select.val(data[matchId].bestPlayer);selectPlayerPhoto();}else{$select.removeAttr("disabled");}}$select.on("change",function(){selectPlayerPhoto();var value=$select.val();if(value){$submit.removeAttr("disabled");}else{$submit.attr("disabled","disabled");}});});$form.on("submit",function(event){event.preventDefault();var $currentForm=$(this);var values={};_.forEach($(this).serializeArray(),function(item){values[item.name]=item.value;});$.ajax({url:Goal.settings.environment.route.topFlopVote,method:"POST",data:values,success:function(){if(values.type==="top"){data[values.matchId].bestPlayer=values.playerId;}else{data[values.matchId].worstPlayer=values.playerId;}$.jStorage.set(storage,data);$(":submit",$currentForm).attr("disabled","disabled");$("select",$currentForm).attr("disabled","disabled");}});});},initCustomSelect:function(){$('[data-plugin="customSelectPlayer"]',$context).customDropdown();}};Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending settings",parentNamespace,pluginNamespace));_.extend(Goal.settings[parentNamespace][pluginNamespace],pluginSettings);Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending events",parentNamespace,pluginNamespace));_.extend(Goal.events[parentNamespace][pluginNamespace],pluginEvents);})(this,this.document);
/*** stats.js ***/
(function(window,document,undefined){var $context;var pluginEvents;var parentNamespace;var pluginNamespace;parentNamespace="match";pluginNamespace="stats";namespace(Goal.fmt("Goal.intervals.%@.%@",parentNamespace,pluginNamespace));namespace(Goal.fmt("Goal.events.%@.%@",parentNamespace,pluginNamespace));pluginEvents={init:function(){Goal.log(Goal.fmt("Goal:events:%@:%@:init",parentNamespace,pluginNamespace));$context=$(".main-content.stats");var placeholder=$(".loader",$context);var loader=$('<div class="loader-layer" />');placeholder.append(loader);placeholder.removeClass("hidden");$(".overview",$context).removeClass("hidden");Goal.events[parentNamespace][pluginNamespace].setupTabs();$("body").on("updateStatsAll.statsjs",function(){placeholder.addClass("hidden");var matchTime=$(".top-section").data("matchTime");var now=new Date().getTime()/1000;if(matchTime>now||(matchTime+14400)<now){$("body").off("updateStatsAll.statsjs");Goal.events[parentNamespace][pluginNamespace].unregisterAll();Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ match finished, unregistering charts",parentNamespace,pluginNamespace));}});$('[data-chart-type="numeric"]',$context).numChart();$('[data-chart-type="donut"]',$context).pieChart();$('[data-chart-type="bar"]',$context).barChart();$('[data-chart-type="symetric-bar"]',$context).symetricBarChart();},unregisterAll:function(){$("[data-chart-type]",$context).each(function(){var api=$(this).data("chart");if(api){api.unregister();}});},setupTabs:function(){var liTabs=$("nav.team > ul > li",$context);liTabs.each(function(){var tabName=$(this).data("tabName");var charts=$("section.charts",$context);var actualTab;$(this).on("click",function(){if($(this).hasClass("active")){return;}liTabs.removeClass("active");$(this).addClass("active");actualTab=charts.filter("."+tabName);charts.not(actualTab.removeClass("hidden")).addClass("hidden");s.linkTrackVars="prop21";s.prop21=tabName;});});}};Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending events",parentNamespace,pluginNamespace));Goal.events[parentNamespace][pluginNamespace]=pluginEvents;})(this,this.document);
/*** baseChart.js ***/
(function($){var BaseChartPlugin=Object.create(null,{init:{value:function(selector,options){this.$selector=$(selector);this.options=options||{};this.register();return this;}},initStatsBaseChart:{value:function(){var uuid="-"+new Date().getTime()+"-"+Math.floor((1+Math.random())*65536).toString(16).substring(1);this.name=this.$selector.data("chart-name")||this.$selector.data("name");this.type=this.$selector.data("chart-type");this.name_chart=this.name+uuid;this.name_home=this.name+"_home";this.name_away=this.name+"_away";this.percent=this.$selector.data("percent")||false;this.initStatsChart();}},register:{value:function(){var self=this;this.initStatsBaseChart();this.$selector.trigger("registerStatPlugin",{name:this.name_chart,type:this.type,data:this.value});this.$selector.on("updateStats."+this.type,function(event,data){self.updateStats(data);});this.$selector.on("unregisterStatPlugin."+this.type,function(){self.$selector.off("unregisterStatPlugin."+self.type);self.unregister();});}},unregister:{value:function(){this.$selector.trigger("unregisterStatPlugin",{"name":this.name_chart});this.$selector.off("."+this.type);}}});$.fn.baseChart=BaseChartPlugin;})(jQuery);
/*** dataProvider.js ***/
(function(){var pluginNamespace="dataProvider";var baseNamespace="stats";var pluginEvents;var privateAPI;var registeredGetters={};var requiredFeeds=[];var pluginSettings;var debouncedFetch=null;var availableFeedNames=[];var feedRequestData;namespace(Goal.fmt("Goal.events.%@.%@",baseNamespace,pluginNamespace));namespace(Goal.fmt("Goal.intervals.%@.%@",baseNamespace,pluginNamespace));namespace(Goal.fmt("Goal.settings.%@.%@",baseNamespace,pluginNamespace));pluginSettings={availableFeeds:["matchStatistics","matchDetailedStatistics"],refreshInterval:5000};privateAPI={registerGetter:function(name,requiredEvents,targetElement){registeredGetters[name]={requiredEvents:requiredEvents,target:targetElement};if(debouncedFetch===null){debouncedFetch=_.debounce(function(){requiredFeeds=privateAPI.getRequiredFeedsList();privateAPI.fetchAllData();},1000);}debouncedFetch();Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ registered getter %@",baseNamespace,pluginNamespace,name));},unregisterGetter:function(name){delete registeredGetters[name];requiredFeeds=privateAPI.getRequiredFeedsList();Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ unregistered getter %@",baseNamespace,pluginNamespace,name));},getFeedByName:function(feedName){return Goal.events[baseNamespace].feeds[feedName];},findData:function(dataName){var ret=null;if(feedRequestData[dataName]){ret=feedRequestData[dataName];}else{switch(dataName){case"optaMatchId":if($("[data-opta-match-id]").length){ret=$("[data-opta-match-id]").data("opta-match-id");}break;}if(ret!==null){feedRequestData[dataName]=ret;}}return ret;},getDataForFeedRequest:function(feed){var ret={};feed.dataNeeded.forEach(function(dataName){ret[dataName]=privateAPI.findData(dataName);});return ret;},getRequiredFeedsList:function(){var feedsList=[];var allRequiredEvents=Object.keys(registeredGetters).map(function(key){return registeredGetters[key];}).reduce(function(prev,cur){return prev.concat(cur.requiredEvents);},[]);allRequiredEvents=allRequiredEvents.sort().filter(function(item,pos,arr){return !pos||item!==arr[pos-1];});var feedName;for(var i=0,l=availableFeedNames.length;i<l;i++){feedName=availableFeedNames[i];if(allRequiredEvents.some(function(current){return privateAPI.getFeedByName(feedName).prefixedDataProvided.indexOf(current)>0;})&&(feedsList.indexOf(feedName)===-1)){feedsList.push(feedName);}}return feedsList;},propagateDataToGetters:function(data){Object.keys(registeredGetters).map(function(key){return registeredGetters[key];}).forEach(function(getter){var dataToSend=_.pick(data,getter.requiredEvents);$(getter.target).trigger("updateStats",dataToSend);});$("body").trigger("updateStatsAll",data);},fetchAllData:function(){if(requiredFeeds.length===0){return;}var feedArr=requiredFeeds.map(function(fName){var feed=privateAPI.getFeedByName(fName);return feed.fetch(privateAPI.getDataForFeedRequest(feed));});$.when.apply($,feedArr).done(function(){var args=Array.prototype.slice.call(arguments);var allData={};args.forEach(function(ob){_.merge(allData,ob);});privateAPI.propagateDataToGetters(allData);}).always(function(){privateAPI.setOrResetTimeout();});},setOrResetTimeout:function(){clearTimeout(Goal.intervals[baseNamespace][pluginNamespace]);Goal.intervals[baseNamespace][pluginNamespace]=setTimeout(privateAPI.fetchAllData,Goal.settings[baseNamespace][pluginNamespace].refreshInterval);}};pluginEvents={init:function(requestData){requestData=requestData||{};feedRequestData=requestData;availableFeedNames=Goal.settings[baseNamespace][pluginNamespace].availableFeeds.filter(function(feedName){var feed=privateAPI.getFeedByName(feedName);var ret=true;for(var i=0,len=feed.dataNeeded.length;i<len;i++){if(privateAPI.findData(feed.dataNeeded[i])===null){ret=false;break;}}return ret;});$("body").on("registerStatPlugin",function(ev,evData){privateAPI.registerGetter(evData.name,evData.data,ev.target);});$("body").on("unregisterStatPlugin",function(ev,evData){privateAPI.unregisterGetter(evData.name);});Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ stats data provider initialized",baseNamespace,pluginNamespace));}};Goal.events[baseNamespace][pluginNamespace]=pluginEvents;Goal.log(Goal.fmt("Goal:internal:libraries:%@:%@ Extending settings",baseNamespace,pluginNamespace));_.extend(Goal.settings[baseNamespace][pluginNamespace],pluginSettings);})();
/*** bar.js ***/
(function($){var chartPlugin={init:{value:function(selector,options){options=options||{barMaxSafeArea:94,barMinSafeArea:6};$.fn.baseChart.init.call(this,selector,options);return this;}},initStatsChart:{value:function(){this.value=[this.name_home,this.name_away];this.$away=this.$selector.find(".away-data > p");this.$home=this.$selector.find(".home-data");}},updateStats:{value:function(data){var value_home=data[this.value[0]];var value_away=data[this.value[1]];var percent=Math.round(value_home/(value_home+value_away)*100);this.$away.text(value_away);this.$home.text(value_home).css("width",percent+"%");if(this.percent){this.$home.append("%");this.$away.append("%");}if(percent>=this.options.barMaxSafeArea){this.$away.text("");}else{if(percent<=this.options.barMinSafeArea){this.$home.text("");}}}}};$.fn.barChart=function(options){return this.each(function(){if(!$.data(this,"chart")){$.data(this,"chart",Object.create($.fn.baseChart,chartPlugin).init(this,options));}});};})(jQuery);
/*** barSymmetric.js ***/
(function($){var chartPlugin={initStatsChart:{value:function(){this.$away=this.$selector.find('[data-side="away"]');this.$home=this.$selector.find('[data-side="home"]');this.name_reference=this.$selector.data("reference-value");this.name_reference_home=this.name_reference+"_home";this.name_reference_away=this.name_reference+"_away";this.value=[this.name_home,this.name_away,this.name_reference_home,this.name_reference_away];}},updateStats:{value:function(data){var dataReferenceValue=(data[this.name_reference_home]>data[this.name_reference_away])?data[this.name_reference_home]:data[this.name_reference_away];var percentHome=Math.round(data[this.name_home]/dataReferenceValue*100)+"%";var percentAway=Math.round(data[this.name_away]/dataReferenceValue*100)+"%";$("span",this.$home).text(data[this.name_home]).css("width",percentHome);$("span",this.$away).text(data[this.name_away]).css("width",percentAway);}}};$.fn.symetricBarChart=function(options){return this.each(function(){if(!$.data(this,"chart")){$.data(this,"chart",Object.create($.fn.baseChart,chartPlugin).init(this,options));}});};})(jQuery);
/*** numeric.js ***/
(function($){var chartPlugin={initStatsChart:{value:function(){this.side=this.$selector.data("side");this.value=[this.name+"_"+this.side];}},updateStats:{value:function(data){this.$selector.text(data[this.value[0]]);if(this.percent){this.$selector.append("%");}}}};$.fn.numChart=function(options){return this.each(function(){if(!$.data(this,"chart")){$.data(this,"chart",Object.create($.fn.baseChart,chartPlugin).init(this,options));}});};})(jQuery);
/*** pie.js ***/
(function($){var chartPlugin={init:{value:function(selector,options){options=options||{percentageInnerCutout:60,animationEasing:"linear",animation:true,colors:{home:"#18AB75",away:"#07ABD0",total:"#A2ACAE"}};$.fn.baseChart.init.call(this,selector,options);return this;}},initStatsChart:{value:function(){var labels=this.$selector.find(".value");this.name_home=$(labels[0]).data("value")+"_"+$(labels[0]).data("side");this.name_away=$(labels[1]).data("value")+"_"+$(labels[1]).data("side");this.value=[this.name_home,this.name_away];this.$away=this.$selector.find(".away-data > p");this.$home=this.$selector.find(".home-data");this.teamDonutChart=$(labels[0]).data("side")===$(labels[1]).data("side");if(this.teamDonutChart){this.side=$(labels[0]).data("side");}this.name_value=this.name+"_"+(new Date()).getTime();this.chartContainer=$(this.$selector).find("canvas");this.chartWidth=this.chartContainer.parent().width();this.chartHeight=this.chartContainer.parent().height();}},updateStats:{value:function(data){var homeValue=data[this.name_home];var awayValue=data[this.name_away];var ctx;var side;var data_values;if(typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(this.chartContainer.get(0));}if(this.chartContainer.get(0).getContext("2d")){ctx=this.chartContainer.get(0).getContext("2d");}if(this.nthLoad||!Modernizr.canvas){this.options.animation=false;}var homeColor=this.options.colors.home;var awayColor=this.options.colors.away;if(this.teamDonutChart){side=this.$selector.data("side");if(side==="home"){awayColor=homeColor;}awayValue=data[this.name_home];homeValue=data[this.name_away]-data[this.name_home];homeColor=this.options.colors.total;}$(this.$selector.find(".value").get(0)).text(data[this.name_home]);$(this.$selector.find(".value").get(1)).text(data[this.name_away]);var homeData={value:homeValue,color:homeColor};var awayData={value:awayValue,color:awayColor};ctx.canvas.width=this.chartWidth;ctx.canvas.height=this.chartHeight;if(awayData.value===0&&homeData.value===0){awayData.value=1;homeData.value=1;}data_values=[awayData,homeData];if(Goal.settings.environment.isRTL){data_values.reverse();}new Chart(ctx).Doughnut(data_values,this.options);this.nthLoad=true;}}};$.fn.pieChart=function(options){return this.each(function(){if(!$.data(this,"chart")){$.data(this,"chart",Object.create($.fn.baseChart,chartPlugin).init(this,options));}});};})(jQuery);
/*** base.js ***/
(function(){var pluginNamespace="base";var baseNamespace="stats";var parentNamespace="feeds";var pluginEvents;namespace(Goal.fmt("Goal.events.%@.%@.%@",baseNamespace,parentNamespace,pluginNamespace));pluginEvents=Object.create(null,{url:{value:function(){}},dataProvided:{get:function(){if(this.__dataProvided){return this.__dataProvided;}this.__dataProvided=Object.keys(this.dataMap);return this.__dataProvided;}},prefixedDataProvided:{get:function(){if(this.__prefixedDataProvided){return this.__prefixedDataProvided;}var prefixed=[];this.dataProvided.forEach(function(key){prefixed.push(key+"_home");prefixed.push(key+"_away");});this.__prefixedDataProvided=prefixed;return this.__prefixedDataProvided;}},fetch:{value:function(data){var self=this;var $defer=$.Deferred();var request=$.ajax({url:self.url(),data:data,dataType:"json"});request.done(function(response){var cleanedData=self.clean(response);var processedData=self.processData(cleanedData);$defer.resolve(processedData);});request.fail(function(jqXHR,textStatus,errorThrown){$defer.reject(jqXHR,textStatus,errorThrown);});return $defer.promise();},enumerable:false,writable:false},clean:{value:function(dirtyData){return dirtyData;}},processData:{value:function(dirtyData){var self=this;var cleanedData={};self.dataProvided.forEach(function(key){cleanedData[key+"_"+"home"]=self.dataMap[key].call(self,dirtyData)["Home"];cleanedData[key+"_"+"away"]=self.dataMap[key].call(self,dirtyData)["Away"];});return cleanedData;},enumrable:false,writable:false},dataMap:{value:{},writable:true,enumerable:true}});Goal.events[baseNamespace][parentNamespace][pluginNamespace]=pluginEvents;})();
/*** matchDetailedStatistics.js ***/
(function(){var pluginNamespace="matchDetailedStatistics";var baseNamespace="stats";var parentNamespace="feeds";var pluginEvents;namespace(Goal.fmt("Goal.events.%@.%@.%@",baseNamespace,parentNamespace,pluginNamespace));pluginEvents=Object.create(Goal.events[baseNamespace][parentNamespace].base,{url:{value:function(){return Goal.settings.environment.route.feed.match.detailedStatistics;}},dataNeeded:{value:["optaMatchId"]},dataMap:{value:{"leftCrosses":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].crosses.left||0;});return ret;},"rightCrosses":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].crosses.right||0;});return ret;},"crossesInsideBox":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].crossesInsideBox||0;});return ret;},"crossesOutsideBox":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].crossesOutsideBox||0;});return ret;},"thirdTakeOns":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].successfulFinal3rdTakeOns||0;});return ret;},"centreTakeOns":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].takeOns.centre||0;});return ret;},"leftTakeOns":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].takeOns.left||0;});return ret;},"rightTakeOns":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].takeOns.right||0;});return ret;},"leftShots":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].shots.left||0;});return ret;},"rightShots":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].shots.right||0;});return ret;},"centreShots":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].shots.centre||0;});return ret;}}}});Goal.events[baseNamespace][parentNamespace][pluginNamespace]=pluginEvents;})();
/*** matchStatistics.js ***/
(function(){var pluginNamespace="matchStatistics";var baseNamespace="stats";var parentNamespace="feeds";var pluginEvents;namespace(Goal.fmt("Goal.events.%@.%@.%@",baseNamespace,parentNamespace,pluginNamespace));pluginEvents=Object.create(Goal.events[baseNamespace][parentNamespace].base,{url:{value:function(){return Goal.settings.environment.route.feed.match.statistics;}},dataNeeded:{value:["optaMatchId"]},clean:{value:function(dirtyData){var feedData=dirtyData.SoccerFeed.SoccerDocument;var team;if(feedData.length>1){team=feedData[0].MatchData.TeamData;}else{team=feedData.MatchData.TeamData;}var neededAttributes=["interception","total_clearance","ball_recovery","total_tackle","won_tackle","total_scoring_att","ontarget_scoring_att","total_pass","accurate_pass","possession_percentage","won_corners","total_offside","fk_foul_lost","accurate_long_balls","leftside_pass","rightside_pass","fwd_pass","backward_pass","accurate_cross","total_cross","blocked_scoring_att","att_bx_centre","att_obox_blocked","att_obox_goal","att_obox_target","att_obox_miss","att_obox_post","total_contest","won_contest","blocked_scoring_att","total_long_balls","att_obx_centre","att_bx_left","att_obx_left","att_bx_right","att_obx_right","att_bx_centre","att_obxd_centre","att_obxd_left","att_obxd_right"];var full={};team.forEach(function(team){var side=team["@attributes"].Side;full[side]={};team.Stat.forEach(function(stats){var type=stats["@attributes"].Type;if(neededAttributes.indexOf(type)!==-1){full[side][stats["@attributes"].Type]=parseFloat(stats["@value"]);}});});return full;}},dataMap:{value:{"totalShots":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].total_scoring_att||0;});return ret;},"shotsOnTarget":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].ontarget_scoring_att||0;});return ret;},"passingAccuracy":function(data){var ret={};var passing=this.dataMap.passing(data);var completedPasses=this.dataMap.completedPasses(data);["Home","Away"].forEach(function(type){ret[type]=Math.round(passing[type]/(completedPasses[type]>0?completedPasses[type]:1)*100);});return ret;},"completedPasses":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].total_pass||0;});return ret;},"passing":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].accurate_pass||0;});return ret;},"passing-team":function(data){return this.dataMap.passing(data)||0;},"inaccuratePasses":function(data){var ret={};var completedPasses=this.dataMap.completedPasses(data);var longPasses=this.dataMap.longPasses(data);["Home","Away"].forEach(function(type){ret[type]=completedPasses[type]-longPasses[type];});return ret;},"possession":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=Math.round(data[type].possession_percentage||0);});return ret;},"corners":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].won_corners||0;});return ret;},"offsides":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].total_offside||0;});return ret;},"foulsConceded":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].fk_foul_lost||0;});return ret;},"longPasses":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].total_long_balls||0;});return ret;},"shortPasses":function(data){var ret={};var longPasses=this.dataMap.longPasses(data);var completedPasses=this.dataMap.completedPasses(data);["Home","Away"].forEach(function(type){ret[type]=completedPasses[type]-longPasses[type];});return ret;},"passesLeft":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].leftside_pass||0;});return ret;},"passesRight":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].rightside_pass||0;});return ret;},"forwardPasses":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].fwd_pass||0;});return ret;},"backwardPasses":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].backward_pass||0;});return ret;},"blockedShots":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].blocked_scoring_att||0;});return ret;},"successfulBlocks":function(data){var ret={};var blocked=this.dataMap.blockedShots(data);["Home","Away"].forEach(function(type){var inv=(type==="Home")?"Away":"Home";ret[type]=blocked[inv]||0;});return ret;},"totalCross":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].total_cross||0;});return ret;},"accurateCross":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].accurate_cross||0;});return ret;},"inaccurateCross":function(data){var ret={};var totalCross=this.dataMap.totalCross(data);var accurateCross=this.dataMap.accurateCross(data);["Home","Away"].forEach(function(type){ret[type]=totalCross[type]-accurateCross[type];});return ret;},"interception":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].interception||0;});return ret;},"totalClearance":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].total_clearance||0;});return ret;},"ballRecovery":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].ball_recovery||0;});return ret;},"totalTackle":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].total_tackle||0;});return ret;},"wonTackle":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].won_tackle||0;});return ret;},"tackleDiff":function(data){var ret={};var totalTackle=this.dataMap.totalTackle(data);var wonTackle=this.dataMap.wonTackle(data);["Home","Away"].forEach(function(type){ret[type]=totalTackle[type]-wonTackle[type];});return ret;},"successfulTackle":function(data){var ret={};var totalTackle=this.dataMap.totalTackle(data);var wonTackle=this.dataMap.wonTackle(data);["Home","Away"].forEach(function(type){ret[type]=Math.round(wonTackle[type]/(totalTackle[type]>0?totalTackle[type]:1)*100);});return ret;},"totalContest":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].total_contest||0;});return ret;},"wonContest":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=data[type].won_contest||0;});return ret;},"successfulCrosses":function(data){var ret={};var accurateCross=this.dataMap.accurateCross(data);var totalCross=this.dataMap.totalCross(data);["Home","Away"].forEach(function(type){ret[type]=Math.round(accurateCross[type]/(totalCross[type]>0?totalCross[type]:1)*100);});return ret;},"percentOfForwardPasses":function(data){var ret={};var forwardPasses=this.dataMap.forwardPasses(data);var completedPasses=this.dataMap.completedPasses(data);["Home","Away"].forEach(function(type){ret[type]=Math.round(forwardPasses[type]/(completedPasses[type]>0?completedPasses[type]:1)*100);});return ret;},"shotsOutsideTheBox":function(data){var ret={};["Home","Away"].forEach(function(type){ret[type]=Math.round(((data[type].att_obox_blocked||0)+(data[type].att_obox_goal||0)+(data[type].att_obox_target||0)+(data[type].att_obox_miss||0)+(data[type].att_obox_post||0))/((data[type].total_scoring_att>0)?data[type].total_scoring_att:1)*100);});return ret;}}}});Goal.events[baseNamespace][parentNamespace][pluginNamespace]=pluginEvents;})();
/*** accordionTabs.js ***/
$.fn.extend({accordionTabs:function(options){var context=$(this);var defaults={"tabClass":".tab","animationSpeed":500,"direction":"left"};options=$.extend(defaults,options);var tabs=$(options.tabClass,context);context.attr("data-width",context.width());options.direction=context.closest("body").hasClass("dir-ltr")?"left":"right";if(typeof options.inactiveVisiblePart==="undefined"){options.inactiveVisiblePart=0.2*context.width();}tabs.each(function(){var position=$(this).position();var pos_value=Math.round(position.left);$(this).attr("data-default-start-position",pos_value).css("left",pos_value);});var tabChangeAction=function(tab){tabs.removeClass("active");tab.addClass("active");var prevTabs=tab.prevAll(options.tabClass);var nextTabs=tab.nextAll(options.tabClass);var prevPosition=parseInt(tabs.eq(0).css("left"),10);prevTabs.each(function(){var newPrevPosition=(options.direction==="left")?(prevPosition+$(this).index()*options.inactiveVisiblePart):(prevPosition-$(this).index()*options.inactiveVisiblePart);$(this).stop(true,true).animate({"left":newPrevPosition+"px"},options.animationSpeed);});nextTabs.each(function(){$(this).stop(true,true).animate({"left":$(this).attr("data-default-start-position")+"px"},options.animationSpeed);});var newPosition=(options.direction==="left")?(prevPosition+tab.index()*options.inactiveVisiblePart):(prevPosition-tab.index()*options.inactiveVisiblePart);tab.stop(true,true).animate({"left":newPosition+"px"},options.animationSpeed);};return this.each(function(){tabs.hammer({prevent_default:true}).bind("tap",function(e){tabChangeAction($(this));}).bind("swipe",function(e){tabChangeAction($(this));});});}});
/*** autoFocusNext.js ***/
$.fn.extend({autoFocusNext:function(options){options=$.extend({focusFields:"button, input:not([type=hidden]), select, textarea"},options);var pluginElement=$(this);$("body").delegate(pluginElement.selector,"keyup",function(){var delegatedElement=$(this),maxlength=delegatedElement.attr("maxlength");if(delegatedElement.val().length>=maxlength){delegatedElement.next(options.focusFields).select();}});return pluginElement;}});
/*** autocompeteX.js ***/
$.fn.extend({"autocompleteX":function(data,options){var container,defaults;container=this;defaults={"maxRows":10,"source":function(request,response){var result=[];var query=new RegExp(request.term,"i");var maxRowCounter=0;$.each(data,function(label,value){if(value.match(query)){result.push({"label":value,"value":value,"index":label});maxRowCounter+=1;if(maxRowCounter===options.maxRows){return false;}}});response(result);},"create":function(){$(this).after('<input type="hidden" value="" name="'+$(this).attr("name")+'"/>');$(this).change(function(){if($(this).val()===""){$(this).next("input").val("");}});},"select":function(event,ui){$(this).val(ui.item.label);$(this).next("input").val(ui.item.index);}};options=$.extend(defaults,options);$(container).autocomplete(options);}});
/*** continousScroll.js ***/
$.extend({continousScroll:function(config){var context=this;this.action=config.action||function(){};this.limiter=config.limiter;this.template=config.template;this.disabled=false;$(window).scroll(function(event){if(context.disabled){return;}if($(window).height()+$(document).scrollTop()>context.limiter.position().top){context.disabled=true;context.action.call(context);}});}});
/*** frameNav.js ***/
$.fn.extend({frameNav:function(options){options=$.extend({},options);var element=this;element.find("li.tab").click(function(e){var index=$(this).attr("index");if(!element.find(".tabs ul > li.tab-"+index).hasClass("selected")){element.find(".tabs ul > li.tab.selected").removeClass("selected");element.find(".content > .tab-content.selected").removeClass("selected").hide();element.find(".tabs ul > li.tab-"+index).addClass("selected");element.find(".content > div.tab-"+index).fadeIn(350).addClass("selected");}});return element;}});
/*** goalKnockoutScroller.js ***/
$.fn.extend({goalKnockoutScroller:function(options){var defaults={"slideDistance":192,"visibleAreaWidth":754,"phasesArea":$("#visiblePhases"),"phasesScroller":$("#phaseScroller"),"labelsArea":$("#visibleLabel"),"labelsScroller":$("#labelScroller"),"phaseItemContainers":$(".leaguePhase","#groups"),"leftArrow":$("#left_arrow"),"rightArrow":$("#right_arrow")};options=$.extend(defaults,options);var slideDistance=parseInt(options.slideDistance,10);var visibleAreaWidth=parseInt(options.visibleAreaWidth,10);var phaseItemsCount=options.phaseItemContainers.length;var maxLeftPosition=parseInt(visibleAreaWidth,10)-parseInt(phaseItemsCount*slideDistance+2,10);maxLeftPosition=(maxLeftPosition<0)?maxLeftPosition+16:0;options.phasesLeftPosition=parseInt(options.phasesScroller.css("left"));options.phasesVisibleAreaWidth=parseInt(options.phasesArea.innerWidth());options.labelsLeftPosition=parseInt(options.labelsScroller.css("left"));options.labelsVisibleAreaWidth=parseInt(options.labelsArea.innerWidth());function checkArrows(){var left=parseInt(options.phasesScroller.css("left"),10);if($("body").hasClass("dir-rtl")){if(left<=0){options.rightArrow.addClass("inactive");}else{options.rightArrow.removeClass("inactive");}if(left>=-maxLeftPosition){options.leftArrow.addClass("inactive");}else{options.leftArrow.removeClass("inactive");}}else{if(left<=maxLeftPosition){options.rightArrow.addClass("inactive");}else{options.rightArrow.removeClass("inactive");}if(left>=0){options.leftArrow.addClass("inactive");}else{options.leftArrow.removeClass("inactive");}}}function scrollToEnd(){if($("body").hasClass("dir-rtl")){options.labelsScroller.animate({left:-maxLeftPosition+"px"},0,function(){options.labelsScroller.css("left",-maxLeftPosition+"px");});options.phasesScroller.animate({left:-maxLeftPosition+"px"},0,function(){options.phasesScroller.css("left",-maxLeftPosition+"px");});}else{options.labelsScroller.animate({left:maxLeftPosition+"px"},0,function(){options.labelsScroller.css("left",maxLeftPosition+"px");});options.phasesScroller.animate({left:maxLeftPosition+"px"},0,function(){options.phasesScroller.css("left",maxLeftPosition+"px");});}}function divClassVariable(selectedDiv,variableName){var divClasses=selectedDiv.attr("class");var variablePos=divClasses.indexOf(variableName+"-");var substringLength=(variableName.length+1);var returnVal;if(variablePos!=-1){returnVal=divClasses.substring(variablePos+substringLength);}return returnVal;}function scrollRight(){var left=parseInt(options.phasesScroller.css("left"),10);var afterMove=0;if($("body").hasClass("dir-rtl")){if(left>0&&(left-slideDistance)>=0){afterMove=left-slideDistance;options.phasesScroller.stop(true,true).animate({left:afterMove+"px"},500,function(){options.phasesScroller.css("left",afterMove+"px");checkArrows();});options.labelsScroller.stop(true,true).animate({left:afterMove+"px"},500,function(){options.labelsScroller.css("left",afterMove+"px");checkArrows();});}}else{if(left>maxLeftPosition&&(left+slideDistance)>=maxLeftPosition){afterMove=left-slideDistance;options.phasesScroller.stop(true,true).animate({left:afterMove+"px"},500,function(){options.phasesScroller.css("left",afterMove+"px");checkArrows();});options.labelsScroller.stop(true,true).animate({left:afterMove+"px"},500,function(){options.labelsScroller.css("left",afterMove+"px");checkArrows();});}}}function scrollLeft(){var left=parseInt(options.phasesScroller.css("left"),10);var afterMove=0;if($("body").hasClass("dir-rtl")){if(left<-maxLeftPosition&&(left-slideDistance)<=-maxLeftPosition){afterMove=left+slideDistance;options.phasesScroller.stop(true,true).animate({left:afterMove+"px"},500,function(){options.phasesScroller.css("left",afterMove+"px");checkArrows();});options.labelsScroller.stop(true,true).animate({left:afterMove+"px"},500,function(){options.labelsScroller.css("left",afterMove+"px");checkArrows();});}}else{if(left<0&&(left+slideDistance)<=0){afterMove=left+slideDistance;options.phasesScroller.stop(true,true).animate({left:afterMove+"px"},500,function(){options.phasesScroller.css("left",afterMove+"px");checkArrows();});options.labelsScroller.stop(true,true).animate({left:afterMove+"px"},500,function(){options.labelsScroller.css("left",afterMove+"px");checkArrows();});}}checkArrows();}function setWrapperWidth(){options.labelsTotalWidth=0;$("div.matches_label","#labelScroller").each(function(){options.labelsTotalWidth+=$(this).outerWidth(true);});options.labelsScroller.width(options.labelsTotalWidth+2);options.phasesTotalWidth=0;$("div.leaguePhase","#phaseScroller").each(function(){options.phasesTotalWidth+=$(this).outerWidth(true);});options.phasesScroller.width(options.phasesTotalWidth+2);}setWrapperWidth();scrollToEnd();checkArrows();options.leftArrow.bind("click",function(){$(this).blur();scrollLeft();return false;});options.rightArrow.bind("click",function(){$(this).blur();scrollRight();return false;});}});
/*** goalTabs.js ***/
$.fn.extend({goalTabs:function(options){var tabs,tabContainers;tabs=[];tabContainers=[];return this.each(function(){tabs.push(this);tabContainers.push($(this.hash).get(0));$(this).click(function(e){e.preventDefault();$(tabContainers).hide().filter(this.hash).show();$(tabs).removeClass("current");$(this).addClass("current");});});}});
/*** jsonpForm.js ***/
$.extend({jsonpForm:function(formElement,options){var form,defaults;form=$(formElement);if(form.length===0){throw"Unknown selector "+formElement;}defaults={"overlay":null,"error":function(data){},"success":function(){},"preDispatch":function(){},"alertMessageDelay":3000};options=$.extend(defaults,options);function defaultErrorHandler(data,cleanErrors){var errorHolders=$(form).find("span.error");if(cleanErrors==="clean"){$(errorHolders).html("");}$.each(data,function(index,value){if(typeof value==="string"){if(index===0){index="form";}$(errorHolders).filter("."+index).html(value).addClass("show");}else{defaultErrorHandler(value);}});}function cleanErrors(){$.each($(form).find("span.error"),function(index,element){$(element).html("").removeClass("show");});}function showOverlay(){if(options.overlay){$(options.overlay).overlay("create",{className:"ajax_loader"});}}function hideOverlay(){if(options.overlay){$(options.overlay).overlay("destroy");}}function showProgressBar(){var message=$(form).find(".alert_message");message.data("content",message.html());message.fadeIn("slow").addClass("info");}function hideProgressBar(response){var message,messageText,className;if(response.result===true){messageText=response.data;className="success";}else{messageText=response.data.form;className="error";}message=$(form).find(".alert_message");message.html(messageText);message.removeClass("info").addClass(className);if(options.alertMessageDelay!=="disabled"){message.delay(3000).fadeOut("slow",function(){message.html(message.data("content"));message.removeClass(className).css("display","none");});}}form.submit(function(event){$("input[type=submit]",form).attr("disabled","disabled");showProgressBar();event.preventDefault();cleanErrors();options.preDispatch();showOverlay();$.ajax({url:form.attr("action"),data:form.serialize(),dataType:"jsonp",crossDomain:true,jsonp:"callback",success:function(response){$("input[type=submit]",form).removeAttr("disabled");if(response.result===false){if(!options.error(response.data)){defaultErrorHandler(response.data,"clean");}}else{if(response.result===true){options.success(response.data);}}hideProgressBar(response);hideOverlay();},error:function(xhr,textStatus,errorThrown){$.ajaxSettings.error(xhr,textStatus,errorThrown);}});});}});
/*** jsonpLoad.js ***/
$.fn.extend({jsonpLoad:function(options){var container,defaults;container=this;defaults={"url":null,"data":{format:"jsonp"},"dataType":"jsonp","crossDomain":true,"jsonp":"callback","success":function(response){$(container).html(response.data);}};options=$.extend(defaults,options);$(container).overlay("create",{className:"ajax_loader"});$.ajax(options);}});
/*** message.js ***/
$.fn.extend({message:function(message,options){var defaults={};options=$.extend(defaults,options);return this.each(function(){$(this).html(message).fadeIn("slow").delay(3000).fadeOut("slow");});}});
/*** modalWindow.js ***/
(function(){var overlay,modalWindow;overlay=$("<div id='modal_overlay'></div>");modalWindow=$("<div id='modal_window'></div>");function handleEscape(e){if(e.keyCode===27){modalHide();}}function modalHide(){var remove=function(){$(this).remove();};$(document).unbind("keydown",handleEscape);overlay.fadeOut(remove);modalWindow.attr("class","").html("").fadeOut(remove);}$.extend({modalPanel:function(options){function close(){modalHide();}if(options==="close"){close();}}});$.fn.extend({modalPanel:function(options){var defaults;defaults={"url":null,"html":null,"className":null,"data":{},"format":null,"crossDomain":false,"success":function(response){}};options=$.extend(defaults,options);options.url=options.url||this.attr("href")||this.attr("data-href");if(options.className){modalWindow.addClass(options.className);}function loadContent(el){if(options.url){if(options.format==="jsonp"){options.data.format="jsonp";$.ajax({url:options.url,data:options.data,dataType:"jsonp",crossDomain:options.crossDomain,jsonp:"callback",success:function(response){el.html(response.data);}});}else{el.load(options.url,options.data);}}else{if(options.html){el.html(options.html);}}}$("body").append(overlay);$("body").append("<div id='modal_load'></div>");overlay.css("opacity",0.8);overlay.show();$(document).keydown(handleEscape);$("#modal_load").remove();loadContent(modalWindow);$("body").append(modalWindow);modalWindow.fadeIn(50);modalWindow.css("top",$(document.body).scrollTop()+40);return this.each(function(){});}});}());
/*** overlay.js ***/
$.fn.extend({overlay:function(action,options){var container,defaults;container=this;defaults={"className":null};options=$.extend(defaults,options);function create(){var overlay=$('<div class="overlay"></div>');overlay.css({"top":0,"left":0,"opacity":0.7,"z-index":1000,"width":"100%","height":"100%","position":"absolute","background-color":"transparent","background-position":"50% 50%","background-repeat":"no-repeat","display":"block"});if(options.className){overlay.addClass(options.className);}$(container).append(overlay);}function destroy(){$(container).find((".overlay")).remove();}if(action==="create"){create();}else{if(action==="destroy"){destroy();}}}});
/*** paginator.js ***/
$.fn.paginator=function(options){var context;var pageCount;var wrapper;var itemWidth;var defaults={"itemsCountPerPage":5,"currentPage":1,"prevButton":null,"nextButton":null,"pageList":null,"type":"vertical","direction":"ltr","order":"ASC","animationSpeed":500,"groupItems":false,"otherObject":null,"offset":0};options=$.extend(defaults,options);var functions={gotoPage:function(pageNumber){var current;if("vertical"===options.type){context.animate({"top":(-1*(pageNumber-1+options.offset)*wrapper.height())+"px"},options.animationSpeed);}else{var newMargin=-1*(pageNumber-1+options.offset)*wrapper.width();if("ltr"===options.direction){context.animate({"left":newMargin+"px"},options.animationSpeed);}else{context.animate({"right":newMargin+"px"},options.animationSpeed);}}if(options.pageList){$("li",options.pageList).hide().removeClass("active");current=$("li:eq("+(pageNumber-1+options.offset)+")",options.pageList).show().addClass("active");current.prev().show();current.next().show();}context.attr("data-currentPage",pageNumber);options.prevButton.removeClass("inactive");options.nextButton.removeClass("inactive");if(isFirstPage()){options.prevButton.addClass("inactive");}else{if(isLastPage()){options.nextButton.addClass("inactive");}}}};options=$.extend(options,functions);this.options=options;function isLastPage(){return(options.itemsCountPerPage*context.attr("data-currentPage")>=$("li",context).length);}function isFirstPage(){return(parseInt(context.attr("data-currentPage"),10)===1);}function generatePages(){var items=$("li",context);var amountOfElements=items.length;var counter=amountOfElements;var startFrom=1;var endAt;var correction=-1;var step=options.itemsCountPerPage;if(options.order==="DESC"){startFrom=amountOfElements;correction=1;step*=-1;}while(counter>0){if(options.pageList){endAt=startFrom+step+correction;$(options.pageList).append('<li data-page="'+pageCount+'">'+startFrom+"&nbsp;&ndash;&nbsp;"+((endAt<1)?1:(endAt>amountOfElements)?amountOfElements:endAt)+"</li>");}counter-=options.itemsCountPerPage;startFrom+=step;pageCount++;}if(options.groupItems){items.each(function(index,item){var group=parseInt(index/options.itemsCountPerPage,10)+1;$(item).attr("data-group",group);});}if(options.pageList){options.pageList.delegate("li","click",function(e){e.preventDefault();options.gotoPage($(this).attr("data-page"));});}}return this.each(function(){context=$(this);pageCount=1;itemWidth=$("li",context).width();context.wrap($('<div class="wrapper" />').css({"overflow":"hidden","position":"relative"}));wrapper=context.parent(".wrapper");if("horizontal"===options.type){context.css({"width":wrapper.width()*Math.ceil($("li",context).css("width",itemWidth).length/options.itemsCountPerPage)});}options.prevButton.click(function(e){options.gotoPage((parseInt(context.attr("data-currentPage"),10)-1)||1);});options.nextButton.click(function(e){var currentPage=parseInt(context.attr("data-currentPage"),10)||1;if((pageCount-1)>currentPage){options.gotoPage(currentPage+1);}});if(options.groupItems){$("li",context).click(function(e){var groupPage=$(this).attr("data-group");options.gotoPage(groupPage);options.otherObject.options.gotoPage(groupPage);});}generatePages();options.gotoPage(options.currentPage);});};
/*** placeholder.js ***/
$.fn.extend({placeholder:function(options){var input_field=document.createElement("input");if(!("placeholder" in input_field)){$.each(this,function(index,element){var placeholder=$(element).attr("placeholder");if($(element).val()===""){$(element).val(placeholder);}$(element).focus(function(){if($(element).val()===placeholder){$(element).val("");}});$(element).blur(function(){if($(element).val()===""){$(element).val(placeholder);}});});}return $(this);}});
/*** recaptcha.js ***/
$.fn.extend({recaptcha:function(){$.getScript("https://www.google.com/recaptcha/api.js?hl="+Goal.settings.environment.edition);}});
/*** stickyElement.js ***/
$.fn.extend({stickyElement:function(options){return this.each(function(index,element){var sticked=false;var context=$(element);var contextBaseTop=context.offset().top;var contextBaseCss=context.attr("style");var placeholder=context.clone().css({display:"none"});var defaults={top:0,left:context.offset().left,zIndex:9999999,border:"none",boxShadow:"0 0px 30px #fff",position:"fixed"};context.before(placeholder);options=$.extend(defaults,options);$(window).scroll(function(){var windowTopPosition=$(document).scrollTop();if(!sticked&&windowTopPosition>=contextBaseTop){context.css(options);placeholder.show();sticked=true;}else{if(sticked&&windowTopPosition<contextBaseTop){context.attr("style",contextBaseCss||"position: relative;");placeholder.hide();sticked=false;}}});});},sticky:function(options){var context=$(window);options=options||{};return this.each(function(index,element){var self=$(element);var parent=self.parent();var config=$.extend({offset:0,begin:self.offset().top,end:false,onStick:function(){},onRelease:function(){},onBottom:function(){}},options);var base={top:self.css("top"),position:self.css("position"),left:self.css("left"),right:self.css("right"),leftOffset:self.offset().left,rightOffset:$(window).width()-self.offset().left-self.width()};var isAbove=true;var isBelow=false;context.scroll(function(event){var position=context.scrollTop();if(position>config.begin){if(isAbove){config.end=config.end||parent.offset().top+parent.height()-self.height()-config.offset;self.css("position","fixed");self.css("top",config.offset+"px");self.css("left",base.leftOffset+"px");self.css("right",base.rightOffset+"px");config.onStick.call(self);isAbove=false;}if(position<=config.end){if(isBelow){self.css("position","fixed");self.css("top",config.offset+"px");self.css("left",base.leftOffset+"px");self.css("right",base.rightOffset+"px");isBelow=false;}}else{if(!isBelow){self.css("position","absolute");self.css("top",config.end+config.offset-config.begin+"px");self.css("left",base.left);self.css("right",base.right);config.onBottom.call(self);isBelow=true;}}}else{if(!isAbove){self.css(base);config.onRelease.call(self);isAbove=true;}}if(position>config.end){isBelow=true;isAbove=false;}if(position<config.begin){isAbove=true;isBelow=false;}});});}});
/*** storage.js ***/
$.extend({storage:function(){return{fetchUrl:function(cacheKey,url,callback,storage){if(typeof storage==="undefined"&&typeof sessionStorage==="object"){storage=sessionStorage;}if(typeof callback!=="function"){callback=function(data){};}var supportsStorage=(typeof storage==="object"&&typeof storage.getItem==="function"&&typeof storage.setItem==="function"),hasDataInStorage=(supportsStorage&&(cacheKey in storage));if(hasDataInStorage){callback(storage.getItem(cacheKey));}else{$.get(url,function(data){if(supportsStorage){storage.setItem(cacheKey,data);}callback(data);});}}};}()});
/*** tooltip.js ***/
$.fn.extend({oldtooltip:function(options){return this.each(function(){$(this).addClass("tooltip");$(this).append("<span class='bubble'><em></em><span class='arrow_border'></span><span class='arrow'></span></span>");$(this).hover(function(){$(this).find(".bubble").filter(":not(:animated)").animate({opacity:"show",bottom:"25"},"slow");var hover_txt=$(this).attr("title");$(this).data("hover_txt",hover_txt);$(this).attr("title","");$(this).find("em").text(hover_txt);},function(){$(this).find(".bubble").filter(":not(:animated)").animate({opacity:"hide",bottom:"30"},"fast");$(this).attr("title",$(this).data("hover_txt"));});});}});
/*** moments.js ***/
(function(a){function b(a,b){return function(c){return i(a.call(this,c),b);};}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b);};}function d(){}function e(a){u(a),g(this,a);}function f(a){var b=o(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1000*i+60000*h+3600000*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble();}function g(a,b){for(var c in b){b.hasOwnProperty(c)&&(a[c]=b[c]);}return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a;}function h(a){return 0>a?Math.ceil(a):Math.floor(a);}function i(a,b,c){for(var d=Math.abs(a)+"",e=a>=0;d.length<b;){d="0"+d;}return(e?c?"+":"":"-")+d;}function j(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&cb.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f));}function k(a){return"[object Array]"===Object.prototype.toString.call(a);}function l(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date;}function m(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++){(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;}return g+f;}function n(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Qb[a]||Rb[b]||b;}return a;}function o(a){var b,c,d={};for(c in a){a.hasOwnProperty(c)&&(b=n(c),b&&(d[b]=a[c]));}return d;}function p(b){var c,d;if(0===b.indexOf("week")){c=7,d="day";}else{if(0!==b.indexOf("month")){return;}c=12,d="month";}cb[b]=function(e,f){var g,h,i=cb.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=cb().utc().set(d,a);return i.call(cb.fn._lang,b,e||"");},null!=f){return h(f);}for(g=0;c>g;g++){j.push(h(g));}return j;};}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c;}function r(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate();}function s(a){return t(a)?366:365;}function t(a){return a%4===0&&a%100!==0||a%400===0;}function u(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[ib]<0||a._a[ib]>11?ib:a._a[jb]<1||a._a[jb]>r(a._a[hb],a._a[ib])?jb:a._a[kb]<0||a._a[kb]>23?kb:a._a[lb]<0||a._a[lb]>59?lb:a._a[mb]<0||a._a[mb]>59?mb:a._a[nb]<0||a._a[nb]>999?nb:-1,a._pf._overflowDayOfYear&&(hb>b||b>jb)&&(b=jb),a._pf.overflow=b);}function v(a){a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1};}function w(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid;}function x(a){return a?a.toLowerCase().replace("_","-"):a;}function y(a,b){return b._isUTC?cb(a).zone(b._offset||0):cb(a).local();}function z(a,b){return b.abbr=a,ob[a]||(ob[a]=new d),ob[a].set(b),ob[a];}function A(a){delete ob[a];}function B(a){var b,c,d,e,f=0,g=function(a){if(!ob[a]&&pb){try{require("./lang/"+a);}catch(b){}}return ob[a];};if(!a){return cb.fn._lang;}if(!k(a)){if(c=g(a)){return c;}a=[a];}for(;f<a.length;){for(e=x(a[f]).split("-"),b=e.length,d=x(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-"))){return c;}if(d&&d.length>=b&&m(e,d,!0)>=b-1){break;}b--;}f++;}return cb.fn._lang;}function C(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"");}function D(a){var b,c,d=a.match(tb);for(b=0,c=d.length;c>b;b++){d[b]=Vb[d[b]]?Vb[d[b]]:C(d[b]);}return function(e){var f="";for(b=0;c>b;b++){f+=d[b] instanceof Function?d[b].call(e,a):d[b];}return f;};}function E(a,b){return a.isValid()?(b=F(b,a.lang()),Sb[b]||(Sb[b]=D(b)),Sb[b](a)):a.lang().invalidDate();}function F(a,b){function c(a){return b.longDateFormat(a)||a;}var d=5;for(ub.lastIndex=0;d>=0&&ub.test(a);){a=a.replace(ub,c),ub.lastIndex=0,d-=1;}return a;}function G(a,b){var c,d=b._strict;switch(a){case"DDDD":return Gb;case"YYYY":case"GGGG":case"gggg":return d?Hb:xb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Ib:yb;case"S":if(d){return Eb;}case"SS":if(d){return Fb;}case"SSS":case"DDD":return d?Gb:wb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ab;case"a":case"A":return B(b._l)._meridiemParse;case"X":return Db;case"Z":case"ZZ":return Bb;case"T":return Cb;case"SSSS":return zb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Fb:vb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return d?Eb:vb;default:return c=new RegExp(O(N(a.replace("\\","")),"i"));}}function H(a){a=a||"";var b=a.match(Bb)||[],c=b[b.length-1]||[],d=(c+"").match(Nb)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?-e:e;}function I(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[ib]=q(b)-1);break;case"MMM":case"MMMM":d=B(c._l).monthsParse(b),null!=d?e[ib]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[jb]=q(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=q(b));break;case"YY":e[hb]=q(b)+(q(b)>68?1900:2000);break;case"YYYY":case"YYYYY":case"YYYYYY":e[hb]=q(b);break;case"a":case"A":c._isPm=B(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[kb]=q(b);break;case"m":case"mm":e[lb]=q(b);break;case"s":case"ss":e[mb]=q(b);break;case"S":case"SS":case"SSS":case"SSSS":e[nb]=q(1000*("0."+b));break;case"X":c._d=new Date(1000*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=H(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b);}}function J(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=L(a),a._w&&null==a._a[jb]&&null==a._a[ib]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2000+c:c:null==a._a[hb]?cb().weekYear():a._a[hb];},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Y(f(g.GG),g.W||1,g.E,4,1):(i=B(a._l),j=null!=g.d?U(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Y(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[hb]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[hb]?d[hb]:a._a[hb],a._dayOfYear>s(e)&&(a._pf._overflowDayOfYear=!0),c=T(e,0,a._dayOfYear),a._a[ib]=c.getUTCMonth(),a._a[jb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b){a._a[b]=l[b]=d[b];}for(;7>b;b++){a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];}l[kb]+=q((a._tzm||0)/60),l[lb]+=q((a._tzm||0)%60),a._d=(a._useUTC?T:S).apply(null,l);}}function K(a){var b;a._d||(b=o(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],J(a));}function L(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()];}function M(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=B(a._l),h=""+a._i,i=h.length,j=0;for(d=F(a._f,g).match(tb)||[],b=0;b<d.length;b++){e=d[b],c=(h.match(G(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Vb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),I(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);}a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[kb]<12&&(a._a[kb]+=12),a._isPm===!1&&12===a._a[kb]&&(a._a[kb]=0),J(a),u(a);}function N(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e;});}function O(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");}function P(a){var b,c,d,e,f;if(0===a._f.length){return a._pf.invalidFormat=!0,a._d=new Date(0/0),void 0;}for(e=0;e<a._f.length;e++){f=0,b=g({},a),v(b),b._f=a._f[e],M(b),w(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));}g(a,c||b);}function Q(a){var b,c=a._i,d=Jb.exec(c);if(d){for(a._pf.iso=!0,b=4;b>0;b--){if(d[b]){a._f=Lb[b-1]+(d[6]||" ");break;}}for(b=0;4>b;b++){if(Mb[b][1].exec(c)){a._f+=Mb[b][0];break;}}c.match(Bb)&&(a._f+="Z"),M(a);}else{a._d=new Date(c);}}function R(b){var c=b._i,d=qb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?Q(b):k(c)?(b._a=c.slice(0),J(b)):l(c)?b._d=new Date(+c):"object"==typeof c?K(b):b._d=new Date(c);}function S(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h;}function T(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b;}function U(a,b){if("string"==typeof a){if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a){return null;}}else{a=parseInt(a,10);}}return a;}function V(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d);}function W(a,b,c){var d=gb(Math.abs(a)/1000),e=gb(d/60),f=gb(e/60),g=gb(f/24),h=gb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",gb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,V.apply({},i);}function X(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=cb(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()};}function Y(a,b,c,d,e){var f,g,h=new Date(i(a,6,!0)+"-01-01").getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:s(a-1)+g};}function Z(a){var b=a._i,c=a._f;return"undefined"==typeof a._pf&&v(a),null===b?cb.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=B().preparse(b)),cb.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?P(a):M(a):R(a),new e(a));}function $(a,b){cb.fn[a]=cb.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),cb.updateOffset(this),this):this._d["get"+c+b]();};}function _(a){cb.duration.fn[a]=function(){return this._data[a];};}function ab(a,b){cb.duration.fn["as"+a]=function(){return +this/b;};}function bb(a){var b=!1,c=cb;"undefined"==typeof ender&&(a?(fb.moment=function(){return !b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments);},g(fb.moment,c)):fb.moment=cb);}for(var cb,db,eb="2.5.0",fb=this,gb=Math.round,hb=0,ib=1,jb=2,kb=3,lb=4,mb=5,nb=6,ob={},pb="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,qb=/^\/?Date\((\-?\d+)/i,rb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,sb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,tb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ub=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,vb=/\d\d?/,wb=/\d{1,3}/,xb=/\d{1,4}/,yb=/[+\-]?\d{1,6}/,zb=/\d+/,Ab=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Bb=/Z|[\+\-]\d\d:?\d\d/gi,Cb=/T/i,Db=/[\+\-]?\d+(\.\d{1,3})?/,Eb=/\d/,Fb=/\d\d/,Gb=/\d{3}/,Hb=/\d{4}/,Ib=/[+\-]?\d{6}/,Jb=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kb="YYYY-MM-DDTHH:mm:ssZ",Lb=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Mb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Nb=/([\+\-]|\d\d)/gi,Ob="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Pb={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},Qb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Rb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Sb={},Tb="DDD w W M D d".split(" "),Ub="M D H h m s w W".split(" "),Vb={M:function(){return this.month()+1;},MMM:function(a){return this.lang().monthsShort(this,a);},MMMM:function(a){return this.lang().months(this,a);},D:function(){return this.date();},DDD:function(){return this.dayOfYear();},d:function(){return this.day();},dd:function(a){return this.lang().weekdaysMin(this,a);},ddd:function(a){return this.lang().weekdaysShort(this,a);},dddd:function(a){return this.lang().weekdays(this,a);},w:function(){return this.week();},W:function(){return this.isoWeek();},YY:function(){return i(this.year()%100,2);},YYYY:function(){return i(this.year(),4);},YYYYY:function(){return i(this.year(),5);},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+i(Math.abs(a),6);},gg:function(){return i(this.weekYear()%100,2);},gggg:function(){return this.weekYear();},ggggg:function(){return i(this.weekYear(),5);},GG:function(){return i(this.isoWeekYear()%100,2);},GGGG:function(){return this.isoWeekYear();},GGGGG:function(){return i(this.isoWeekYear(),5);},e:function(){return this.weekday();},E:function(){return this.isoWeekday();},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0);},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1);},H:function(){return this.hours();},h:function(){return this.hours()%12||12;},m:function(){return this.minutes();},s:function(){return this.seconds();},S:function(){return q(this.milliseconds()/100);},SS:function(){return i(q(this.milliseconds()/10),2);},SSS:function(){return i(this.milliseconds(),3);},SSSS:function(){return i(this.milliseconds(),3);},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(q(a/60),2)+":"+i(q(a)%60,2);},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(q(a/60),2)+i(q(a)%60,2);},z:function(){return this.zoneAbbr();},zz:function(){return this.zoneName();},X:function(){return this.unix();},Q:function(){return this.quarter();}},Wb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Tb.length;){db=Tb.pop(),Vb[db+"o"]=c(Vb[db],db);}for(;Ub.length;){db=Ub.pop(),Vb[db+db]=b(Vb[db],2);}for(Vb.DDDD=b(Vb.DDD,3),g(d.prototype,{set:function(a){var b,c;for(c in a){b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()];},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()];},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++){if(this._monthsParse[b]||(c=cb.utc([2000,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a)){return b;}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()];},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()];},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()];},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++){if(this._weekdaysParse[b]||(c=cb([2000,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a)){return b;}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return !b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1);}),this._longDateFormat[a]=b),b;},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0);},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM";},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c;},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a);},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b);},ordinal:function(a){return this._ordinal.replace("%d",a);},_ordinal:"%d",preparse:function(a){return a;},postformat:function(a){return a;},week:function(a){return X(a,this._week.dow,this._week.doy).week;},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate;}}),cb=function(b,c,d,e){return"boolean"==typeof d&&(e=d,d=a),Z({_i:b,_f:c,_l:d,_strict:e,_isUTC:!1});},cb.utc=function(b,c,d,e){var f;return"boolean"==typeof d&&(e=d,d=a),f=Z({_useUTC:!0,_isUTC:!0,_l:d,_i:b,_f:c,_strict:e}).utc();},cb.unix=function(a){return cb(1000*a);},cb.duration=function(a,b){var c,d,e,g=a,h=null;return cb.isDuration(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=rb.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[jb])*c,h:q(h[kb])*c,m:q(h[lb])*c,s:q(h[mb])*c,ms:q(h[nb])*c}):(h=sb.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c;},g={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new f(g),cb.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d;},cb.version=eb,cb.defaultFormat=Kb,cb.updateOffset=function(){},cb.lang=function(a,b){var c;return a?(b?z(x(a),b):null===b?(A(a),a="en"):ob[a]||B(a),c=cb.duration.fn._lang=cb.fn._lang=B(a),c._abbr):cb.fn._lang._abbr;},cb.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),B(a);},cb.isMoment=function(a){return a instanceof e;},cb.isDuration=function(a){return a instanceof f;},db=Wb.length-1;db>=0;--db){p(Wb[db]);}for(cb.normalizeUnits=function(a){return n(a);},cb.invalid=function(a){var b=cb.utc(0/0);return null!=a?g(b._pf,a):b._pf.userInvalidated=!0,b;},cb.parseZone=function(a){return cb(a).parseZone();},g(cb.fn=e.prototype,{clone:function(){return cb(this);},valueOf:function(){return +this._d+60000*(this._offset||0);},unix:function(){return Math.floor(+this/1000);},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");},toDate:function(){return this._offset?new Date(+this):this._d;},toISOString:function(){var a=cb(this).utc();return 0<a.year()&&a.year()<=9999?E(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):E(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()];},isValid:function(){return w(this);},isDSTShifted:function(){return this._a?this.isValid()&&m(this._a,(this._isUTC?cb.utc(this._a):cb(this._a)).toArray())>0:!1;},parsingFlags:function(){return g({},this._pf);},invalidAt:function(){return this._pf.overflow;},utc:function(){return this.zone(0);},local:function(){return this.zone(0),this._isUTC=!1,this;},format:function(a){var b=E(this,a||cb.defaultFormat);return this.lang().postformat(b);},add:function(a,b){var c;return c="string"==typeof a?cb.duration(+b,a):cb.duration(a,b),j(this,c,1),this;},subtract:function(a,b){var c;return c="string"==typeof a?cb.duration(+b,a):cb.duration(a,b),j(this,c,-1),this;},diff:function(a,b,c){var d,e,f=y(a,this),g=60000*(this.zone()-f.zone());return b=n(b),"year"===b||"month"===b?(d=43200000*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-cb(this).startOf("month")-(f-cb(f).startOf("month")))/d,e-=60000*(this.zone()-cb(this).startOf("month").zone()-(f.zone()-cb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1000:"minute"===b?d/60000:"hour"===b?d/3600000:"day"===b?(d-g)/86400000:"week"===b?(d-g)/604800000:d),c?e:h(e);},from:function(a,b){return cb.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b);},fromNow:function(a){return this.from(cb(),a);},calendar:function(){var a=y(cb(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this));},isLeapYear:function(){return t(this.year());},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone();},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=U(a,this.lang()),this.add({d:a-b})):b;},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),cb.updateOffset(this),this):this._d["get"+c+"Month"]();},startOf:function(a){switch(a=n(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0);}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this;},endOf:function(a){return a=n(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1);},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+cb(a).startOf(b);},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+cb(a).startOf(b);},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+y(a,this).startOf(b);},min:function(a){return a=cb.apply(null,arguments),this>a?this:a;},max:function(a){return a=cb.apply(null,arguments),a>this?this:a;},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=H(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&j(this,cb.duration(b-a,"m"),1,!0),this);},zoneAbbr:function(){return this._isUTC?"UTC":"";},zoneName:function(){return this._isUTC?"Coordinated Universal Time":"";},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this;},hasAlignedHourOffset:function(a){return a=a?cb(a).zone():0,(this.zone()-a)%60===0;},daysInMonth:function(){return r(this.year(),this.month());},dayOfYear:function(a){var b=gb((cb(this).startOf("day")-cb(this).startOf("year"))/86400000)+1;return null==a?b:this.add("d",a-b);},quarter:function(){return Math.ceil((this.month()+1)/3);},weekYear:function(a){var b=X(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b);},isoWeekYear:function(a){var b=X(this,1,4).year;return null==a?b:this.add("y",a-b);},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b));},isoWeek:function(a){var b=X(this,1,4).week;return null==a?b:this.add("d",7*(a-b));},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b);},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7);},get:function(a){return a=n(a),this[a]();},set:function(a,b){return a=n(a),"function"==typeof this[a]&&this[a](b),this;},lang:function(b){return b===a?this._lang:(this._lang=B(b),this);}}),db=0;db<Ob.length;db++){$(Ob[db].toLowerCase().replace(/s$/,""),Ob[db]);}$("year","FullYear"),cb.fn.days=cb.fn.day,cb.fn.months=cb.fn.month,cb.fn.weeks=cb.fn.week,cb.fn.isoWeeks=cb.fn.isoWeek,cb.fn.toJSON=cb.fn.toISOString,g(cb.duration.fn=f.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,i=this._data;i.milliseconds=e%1000,a=h(e/1000),i.seconds=a%60,b=h(a/60),i.minutes=b%60,c=h(b/60),i.hours=c%24,f+=h(c/24),i.days=f%30,g+=h(f/30),i.months=g%12,d=h(g/12),i.years=d;},weeks:function(){return h(this.days()/7);},valueOf:function(){return this._milliseconds+86400000*this._days+this._months%12*2592000000+31536000000*q(this._months/12);},humanize:function(a){var b=+this,c=W(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c);},add:function(a,b){var c=cb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this;},subtract:function(a,b){var c=cb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this;},get:function(a){return a=n(a),this[a.toLowerCase()+"s"]();},as:function(a){return a=n(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]();},lang:cb.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1000);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D";}});for(db in Pb){Pb.hasOwnProperty(db)&&(ab(db,Pb[db]),_(db.toLowerCase()));}ab("Weeks",604800000),cb.duration.fn.asMonths=function(){return(+this-31536000000*this.years())/2592000000+12*this.years();},cb.lang("en",{ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c;}}),pb?(module.exports=cb,bb(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&bb(d.config().noGlobal===a),cb;}):bb();}).call(this);
